var sT=n=>{throw TypeError(n)};var zx=(n,e,t)=>e.has(n)||sT("Cannot "+t);var Te=(n,e,t)=>(zx(n,e,"read from private field"),t?t.call(n):e.get(n)),en=(n,e,t)=>e.has(n)?sT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Lt=(n,e,t,r)=>(zx(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),yr=(n,e,t)=>(zx(n,e,"access private method"),t);var tm=(n,e,t,r)=>({set _(i){Lt(n,e,i,t)},get _(){return Te(n,e,r)}});function MO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function EO(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var wR={exports:{}},dv={},SR={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf=Symbol.for("react.element"),TO=Symbol.for("react.portal"),AO=Symbol.for("react.fragment"),CO=Symbol.for("react.strict_mode"),RO=Symbol.for("react.profiler"),PO=Symbol.for("react.provider"),IO=Symbol.for("react.context"),NO=Symbol.for("react.forward_ref"),LO=Symbol.for("react.suspense"),kO=Symbol.for("react.memo"),DO=Symbol.for("react.lazy"),oT=Symbol.iterator;function OO(n){return n===null||typeof n!="object"?null:(n=oT&&n[oT]||n["@@iterator"],typeof n=="function"?n:null)}var bR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MR=Object.assign,ER={};function ld(n,e,t){this.props=n,this.context=e,this.refs=ER,this.updater=t||bR}ld.prototype.isReactComponent={};ld.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ld.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function TR(){}TR.prototype=ld.prototype;function mS(n,e,t){this.props=n,this.context=e,this.refs=ER,this.updater=t||bR}var gS=mS.prototype=new TR;gS.constructor=mS;MR(gS,ld.prototype);gS.isPureReactComponent=!0;var aT=Array.isArray,AR=Object.prototype.hasOwnProperty,vS={current:null},CR={key:!0,ref:!0,__self:!0,__source:!0};function RR(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)AR.call(e,r)&&!CR.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Uf,type:n,key:s,ref:o,props:i,_owner:vS.current}}function UO(n,e){return{$$typeof:Uf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function yS(n){return typeof n=="object"&&n!==null&&n.$$typeof===Uf}function FO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var lT=/\/+/g;function Bx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?FO(""+n.key):e.toString(36)}function bg(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Uf:case TO:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Bx(o,0):r,aT(i)?(t="",n!=null&&(t=n.replace(lT,"$&/")+"/"),bg(i,e,t,"",function(u){return u})):i!=null&&(yS(i)&&(i=UO(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(lT,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",aT(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Bx(s,a);o+=bg(s,e,t,l,i)}else if(l=OO(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Bx(s,a++),o+=bg(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nm(n,e,t){if(n==null)return n;var r=[],i=0;return bg(n,r,"","",function(s){return e.call(t,s,i++)}),r}function zO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Hr={current:null},Mg={transition:null},BO={ReactCurrentDispatcher:Hr,ReactCurrentBatchConfig:Mg,ReactCurrentOwner:vS};function PR(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:nm,forEach:function(n,e,t){nm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return nm(n,function(){e++}),e},toArray:function(n){return nm(n,function(e){return e})||[]},only:function(n){if(!yS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};jt.Component=ld;jt.Fragment=AO;jt.Profiler=RO;jt.PureComponent=mS;jt.StrictMode=CO;jt.Suspense=LO;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BO;jt.act=PR;jt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=MR({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vS.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)AR.call(e,l)&&!CR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Uf,type:n.type,key:i,ref:s,props:r,_owner:o}};jt.createContext=function(n){return n={$$typeof:IO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:PO,_context:n},n.Consumer=n};jt.createElement=RR;jt.createFactory=function(n){var e=RR.bind(null,n);return e.type=n,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(n){return{$$typeof:NO,render:n}};jt.isValidElement=yS;jt.lazy=function(n){return{$$typeof:DO,_payload:{_status:-1,_result:n},_init:zO}};jt.memo=function(n,e){return{$$typeof:kO,type:n,compare:e===void 0?null:e}};jt.startTransition=function(n){var e=Mg.transition;Mg.transition={};try{n()}finally{Mg.transition=e}};jt.unstable_act=PR;jt.useCallback=function(n,e){return Hr.current.useCallback(n,e)};jt.useContext=function(n){return Hr.current.useContext(n)};jt.useDebugValue=function(){};jt.useDeferredValue=function(n){return Hr.current.useDeferredValue(n)};jt.useEffect=function(n,e){return Hr.current.useEffect(n,e)};jt.useId=function(){return Hr.current.useId()};jt.useImperativeHandle=function(n,e,t){return Hr.current.useImperativeHandle(n,e,t)};jt.useInsertionEffect=function(n,e){return Hr.current.useInsertionEffect(n,e)};jt.useLayoutEffect=function(n,e){return Hr.current.useLayoutEffect(n,e)};jt.useMemo=function(n,e){return Hr.current.useMemo(n,e)};jt.useReducer=function(n,e,t){return Hr.current.useReducer(n,e,t)};jt.useRef=function(n){return Hr.current.useRef(n)};jt.useState=function(n){return Hr.current.useState(n)};jt.useSyncExternalStore=function(n,e,t){return Hr.current.useSyncExternalStore(n,e,t)};jt.useTransition=function(){return Hr.current.useTransition()};jt.version="18.3.1";SR.exports=jt;var L=SR.exports;const Be=pS(L),IR=MO({__proto__:null,default:Be},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO=L,HO=Symbol.for("react.element"),VO=Symbol.for("react.fragment"),GO=Object.prototype.hasOwnProperty,WO=jO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$O={key:!0,ref:!0,__self:!0,__source:!0};function NR(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)GO.call(e,r)&&!$O.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:HO,type:n,key:s,ref:o,props:i,_owner:WO.current}}dv.Fragment=VO;dv.jsx=NR;dv.jsxs=NR;wR.exports=dv;var M=wR.exports,LR={exports:{}},Ai={},kR={exports:{}},DR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,V){var X=D.length;D.push(V);e:for(;0<X;){var J=X-1>>>1,oe=D[J];if(0<i(oe,V))D[J]=V,D[X]=oe,X=J;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],X=D.pop();if(X!==V){D[0]=X;e:for(var J=0,oe=D.length,ye=oe>>>1;J<ye;){var ie=2*(J+1)-1,xe=D[ie],Me=ie+1,Re=D[Me];if(0>i(xe,X))Me<oe&&0>i(Re,xe)?(D[J]=Re,D[Me]=X,J=Me):(D[J]=xe,D[ie]=X,J=ie);else if(Me<oe&&0>i(Re,X))D[J]=Re,D[Me]=X,J=Me;else break e}}return V}function i(D,V){var X=D.sortIndex-V.sortIndex;return X!==0?X:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var V=t(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=D)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(u)}}function E(D){if(x=!1,S(D),!v)if(t(l)!==null)v=!0,K(R);else{var V=t(u);V!==null&&Q(E,V.startTime-D)}}function R(D,V){v=!1,x&&(x=!1,g(k),k=-1),m=!0;var X=p;try{for(S(V),f=t(l);f!==null&&(!(f.expirationTime>V)||D&&!O());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var oe=J(f.expirationTime<=V);V=n.unstable_now(),typeof oe=="function"?f.callback=oe:f===t(l)&&r(l),S(V)}else r(l);f=t(l)}if(f!==null)var ye=!0;else{var ie=t(u);ie!==null&&Q(E,ie.startTime-V),ye=!1}return ye}finally{f=null,p=X,m=!1}}var A=!1,P=null,k=-1,N=5,C=-1;function O(){return!(n.unstable_now()-C<N)}function F(){if(P!==null){var D=n.unstable_now();C=D;var V=!0;try{V=P(!0,D)}finally{V?W():(A=!1,P=null)}}else A=!1}var W;if(typeof w=="function")W=function(){w(F)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=F,W=function(){Z.postMessage(null)}}else W=function(){_(F,0)};function K(D){P=D,A||(A=!0,W())}function Q(D,V){k=_(function(){D(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,K(R))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var X=p;p=V;try{return D()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=p;p=D;try{return V()}finally{p=X}},n.unstable_scheduleCallback=function(D,V,X){var J=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,D){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,D={id:h++,callback:V,priorityLevel:D,startTime:X,expirationTime:oe,sortIndex:-1},X>J?(D.sortIndex=X,e(u,D),t(l)===null&&D===t(u)&&(x?(g(k),k=-1):x=!0,Q(E,X-J))):(D.sortIndex=oe,e(l,D),v||m||(v=!0,K(R))),D},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(D){var V=p;return function(){var X=p;p=V;try{return D.apply(this,arguments)}finally{p=X}}}})(DR);kR.exports=DR;var XO=kR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qO=L,Ei=XO;function ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OR=new Set,Gh={};function cc(n,e){Vu(n,e),Vu(n+"Capture",e)}function Vu(n,e){for(Gh[n]=e,n=0;n<e.length;n++)OR.add(e[n])}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rw=Object.prototype.hasOwnProperty,YO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cT={},uT={};function KO(n){return Rw.call(uT,n)?!0:Rw.call(cT,n)?!1:YO.test(n)?uT[n]=!0:(cT[n]=!0,!1)}function JO(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ZO(n,e,t,r){if(e===null||typeof e>"u"||JO(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){dr[n]=new Vr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];dr[e]=new Vr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){dr[n]=new Vr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){dr[n]=new Vr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){dr[n]=new Vr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){dr[n]=new Vr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){dr[n]=new Vr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){dr[n]=new Vr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){dr[n]=new Vr(n,5,!1,n.toLowerCase(),null,!1,!1)});var xS=/[\-:]([a-z])/g;function _S(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(xS,_S);dr[e]=new Vr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(xS,_S);dr[e]=new Vr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(xS,_S);dr[e]=new Vr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){dr[n]=new Vr(n,1,!1,n.toLowerCase(),null,!1,!1)});dr.xlinkHref=new Vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){dr[n]=new Vr(n,1,!1,n.toLowerCase(),null,!0,!0)});function wS(n,e,t,r){var i=dr.hasOwnProperty(e)?dr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZO(e,t,i,r)&&(t=null),r||i===null?KO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var zo=qO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rm=Symbol.for("react.element"),ou=Symbol.for("react.portal"),au=Symbol.for("react.fragment"),SS=Symbol.for("react.strict_mode"),Pw=Symbol.for("react.profiler"),UR=Symbol.for("react.provider"),FR=Symbol.for("react.context"),bS=Symbol.for("react.forward_ref"),Iw=Symbol.for("react.suspense"),Nw=Symbol.for("react.suspense_list"),MS=Symbol.for("react.memo"),ua=Symbol.for("react.lazy"),zR=Symbol.for("react.offscreen"),dT=Symbol.iterator;function Hd(n){return n===null||typeof n!="object"?null:(n=dT&&n[dT]||n["@@iterator"],typeof n=="function"?n:null)}var En=Object.assign,jx;function fh(n){if(jx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);jx=e&&e[1]||""}return`
`+jx+n}var Hx=!1;function Vx(n,e){if(!n||Hx)return"";Hx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?fh(n):""}function QO(n){switch(n.tag){case 5:return fh(n.type);case 16:return fh("Lazy");case 13:return fh("Suspense");case 19:return fh("SuspenseList");case 0:case 2:case 15:return n=Vx(n.type,!1),n;case 11:return n=Vx(n.type.render,!1),n;case 1:return n=Vx(n.type,!0),n;default:return""}}function Lw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case au:return"Fragment";case ou:return"Portal";case Pw:return"Profiler";case SS:return"StrictMode";case Iw:return"Suspense";case Nw:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case FR:return(n.displayName||"Context")+".Consumer";case UR:return(n._context.displayName||"Context")+".Provider";case bS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case MS:return e=n.displayName||null,e!==null?e:Lw(n.type)||"Memo";case ua:e=n._payload,n=n._init;try{return Lw(n(e))}catch{}}return null}function eU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lw(e);case 8:return e===SS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function BR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tU(n){var e=BR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function im(n){n._valueTracker||(n._valueTracker=tU(n))}function jR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=BR(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Vg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function kw(n,e){var t=e.checked;return En({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function hT(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Fa(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HR(n,e){e=e.checked,e!=null&&wS(n,"checked",e,!1)}function Dw(n,e){HR(n,e);var t=Fa(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Ow(n,e.type,t):e.hasOwnProperty("defaultValue")&&Ow(n,e.type,Fa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function fT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Ow(n,e,t){(e!=="number"||Vg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ph=Array.isArray;function bu(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Fa(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Uw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return En({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function pT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ke(92));if(ph(t)){if(1<t.length)throw Error(ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Fa(t)}}function VR(n,e){var t=Fa(e.value),r=Fa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function mT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function GR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?GR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var sm,WR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(sm=sm||document.createElement("div"),sm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Wh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var wh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nU=["Webkit","ms","Moz","O"];Object.keys(wh).forEach(function(n){nU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),wh[e]=wh[n]})});function $R(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||wh.hasOwnProperty(n)&&wh[n]?(""+e).trim():e+"px"}function XR(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$R(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var rU=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zw(n,e){if(e){if(rU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function Bw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jw=null;function ES(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Hw=null,Mu=null,Eu=null;function gT(n){if(n=Bf(n)){if(typeof Hw!="function")throw Error(ke(280));var e=n.stateNode;e&&(e=gv(e),Hw(n.stateNode,n.type,e))}}function qR(n){Mu?Eu?Eu.push(n):Eu=[n]:Mu=n}function YR(){if(Mu){var n=Mu,e=Eu;if(Eu=Mu=null,gT(n),e)for(n=0;n<e.length;n++)gT(e[n])}}function KR(n,e){return n(e)}function JR(){}var Gx=!1;function ZR(n,e,t){if(Gx)return n(e,t);Gx=!0;try{return KR(n,e,t)}finally{Gx=!1,(Mu!==null||Eu!==null)&&(JR(),YR())}}function $h(n,e){var t=n.stateNode;if(t===null)return null;var r=gv(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var Vw=!1;if(Co)try{var Vd={};Object.defineProperty(Vd,"passive",{get:function(){Vw=!0}}),window.addEventListener("test",Vd,Vd),window.removeEventListener("test",Vd,Vd)}catch{Vw=!1}function iU(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Sh=!1,Gg=null,Wg=!1,Gw=null,sU={onError:function(n){Sh=!0,Gg=n}};function oU(n,e,t,r,i,s,o,a,l){Sh=!1,Gg=null,iU.apply(sU,arguments)}function aU(n,e,t,r,i,s,o,a,l){if(oU.apply(this,arguments),Sh){if(Sh){var u=Gg;Sh=!1,Gg=null}else throw Error(ke(198));Wg||(Wg=!0,Gw=u)}}function uc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function QR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function vT(n){if(uc(n)!==n)throw Error(ke(188))}function lU(n){var e=n.alternate;if(!e){if(e=uc(n),e===null)throw Error(ke(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return vT(i),n;if(s===r)return vT(i),e;s=s.sibling}throw Error(ke(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(ke(189))}}if(t.alternate!==r)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?n:e}function eP(n){return n=lU(n),n!==null?tP(n):null}function tP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=tP(n);if(e!==null)return e;n=n.sibling}return null}var nP=Ei.unstable_scheduleCallback,yT=Ei.unstable_cancelCallback,cU=Ei.unstable_shouldYield,uU=Ei.unstable_requestPaint,Ln=Ei.unstable_now,dU=Ei.unstable_getCurrentPriorityLevel,TS=Ei.unstable_ImmediatePriority,rP=Ei.unstable_UserBlockingPriority,$g=Ei.unstable_NormalPriority,hU=Ei.unstable_LowPriority,iP=Ei.unstable_IdlePriority,hv=null,js=null;function fU(n){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(hv,n,void 0,(n.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:gU,pU=Math.log,mU=Math.LN2;function gU(n){return n>>>=0,n===0?32:31-(pU(n)/mU|0)|0}var om=64,am=4194304;function mh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Xg(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=mh(a):(s&=o,s!==0&&(r=mh(s)))}else o=t&~i,o!==0?r=mh(o):s!==0&&(r=mh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ms(e),i=1<<t,r|=n[t],e&=~i;return r}function vU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yU(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ms(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=vU(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Ww(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sP(){var n=om;return om<<=1,!(om&4194240)&&(om=64),n}function Wx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ff(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ms(e),n[e]=t}function xU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ms(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function AS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ms(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var nn=0;function oP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var aP,CS,lP,cP,uP,$w=!1,lm=[],Aa=null,Ca=null,Ra=null,Xh=new Map,qh=new Map,fa=[],_U="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xT(n,e){switch(n){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Xh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qh.delete(e.pointerId)}}function Gd(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bf(e),e!==null&&CS(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function wU(n,e,t,r,i){switch(e){case"focusin":return Aa=Gd(Aa,n,e,t,r,i),!0;case"dragenter":return Ca=Gd(Ca,n,e,t,r,i),!0;case"mouseover":return Ra=Gd(Ra,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Xh.set(s,Gd(Xh.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qh.set(s,Gd(qh.get(s)||null,n,e,t,r,i)),!0}return!1}function dP(n){var e=Dl(n.target);if(e!==null){var t=uc(e);if(t!==null){if(e=t.tag,e===13){if(e=QR(t),e!==null){n.blockedOn=e,uP(n.priority,function(){lP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Eg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Xw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);jw=r,t.target.dispatchEvent(r),jw=null}else return e=Bf(t),e!==null&&CS(e),n.blockedOn=t,!1;e.shift()}return!0}function _T(n,e,t){Eg(n)&&t.delete(e)}function SU(){$w=!1,Aa!==null&&Eg(Aa)&&(Aa=null),Ca!==null&&Eg(Ca)&&(Ca=null),Ra!==null&&Eg(Ra)&&(Ra=null),Xh.forEach(_T),qh.forEach(_T)}function Wd(n,e){n.blockedOn===e&&(n.blockedOn=null,$w||($w=!0,Ei.unstable_scheduleCallback(Ei.unstable_NormalPriority,SU)))}function Yh(n){function e(i){return Wd(i,n)}if(0<lm.length){Wd(lm[0],n);for(var t=1;t<lm.length;t++){var r=lm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Aa!==null&&Wd(Aa,n),Ca!==null&&Wd(Ca,n),Ra!==null&&Wd(Ra,n),Xh.forEach(e),qh.forEach(e),t=0;t<fa.length;t++)r=fa[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<fa.length&&(t=fa[0],t.blockedOn===null);)dP(t),t.blockedOn===null&&fa.shift()}var Tu=zo.ReactCurrentBatchConfig,qg=!0;function bU(n,e,t,r){var i=nn,s=Tu.transition;Tu.transition=null;try{nn=1,RS(n,e,t,r)}finally{nn=i,Tu.transition=s}}function MU(n,e,t,r){var i=nn,s=Tu.transition;Tu.transition=null;try{nn=4,RS(n,e,t,r)}finally{nn=i,Tu.transition=s}}function RS(n,e,t,r){if(qg){var i=Xw(n,e,t,r);if(i===null)t_(n,e,r,Yg,t),xT(n,r);else if(wU(i,n,e,t,r))r.stopPropagation();else if(xT(n,r),e&4&&-1<_U.indexOf(n)){for(;i!==null;){var s=Bf(i);if(s!==null&&aP(s),s=Xw(n,e,t,r),s===null&&t_(n,e,r,Yg,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else t_(n,e,r,null,t)}}var Yg=null;function Xw(n,e,t,r){if(Yg=null,n=ES(r),n=Dl(n),n!==null)if(e=uc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=QR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Yg=n,null}function hP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dU()){case TS:return 1;case rP:return 4;case $g:case hU:return 16;case iP:return 536870912;default:return 16}default:return 16}}var ba=null,PS=null,Tg=null;function fP(){if(Tg)return Tg;var n,e=PS,t=e.length,r,i="value"in ba?ba.value:ba.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Tg=i.slice(n,1<r?1-r:void 0)}function Ag(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function cm(){return!0}function wT(){return!1}function Ci(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cm:wT,this.isPropagationStopped=wT,this}return En(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=cm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=cm)},persist:function(){},isPersistent:cm}),e}var cd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IS=Ci(cd),zf=En({},cd,{view:0,detail:0}),EU=Ci(zf),$x,Xx,$d,fv=En({},zf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:NS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$d&&($d&&n.type==="mousemove"?($x=n.screenX-$d.screenX,Xx=n.screenY-$d.screenY):Xx=$x=0,$d=n),$x)},movementY:function(n){return"movementY"in n?n.movementY:Xx}}),ST=Ci(fv),TU=En({},fv,{dataTransfer:0}),AU=Ci(TU),CU=En({},zf,{relatedTarget:0}),qx=Ci(CU),RU=En({},cd,{animationName:0,elapsedTime:0,pseudoElement:0}),PU=Ci(RU),IU=En({},cd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),NU=Ci(IU),LU=En({},cd,{data:0}),bT=Ci(LU),kU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=OU[n])?!!e[n]:!1}function NS(){return UU}var FU=En({},zf,{key:function(n){if(n.key){var e=kU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ag(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?DU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:NS,charCode:function(n){return n.type==="keypress"?Ag(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ag(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),zU=Ci(FU),BU=En({},fv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MT=Ci(BU),jU=En({},zf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:NS}),HU=Ci(jU),VU=En({},cd,{propertyName:0,elapsedTime:0,pseudoElement:0}),GU=Ci(VU),WU=En({},fv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$U=Ci(WU),XU=[9,13,27,32],LS=Co&&"CompositionEvent"in window,bh=null;Co&&"documentMode"in document&&(bh=document.documentMode);var qU=Co&&"TextEvent"in window&&!bh,pP=Co&&(!LS||bh&&8<bh&&11>=bh),ET=" ",TT=!1;function mP(n,e){switch(n){case"keyup":return XU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var lu=!1;function YU(n,e){switch(n){case"compositionend":return gP(e);case"keypress":return e.which!==32?null:(TT=!0,ET);case"textInput":return n=e.data,n===ET&&TT?null:n;default:return null}}function KU(n,e){if(lu)return n==="compositionend"||!LS&&mP(n,e)?(n=fP(),Tg=PS=ba=null,lu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pP&&e.locale!=="ko"?null:e.data;default:return null}}var JU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!JU[n.type]:e==="textarea"}function vP(n,e,t,r){qR(r),e=Kg(e,"onChange"),0<e.length&&(t=new IS("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Mh=null,Kh=null;function ZU(n){CP(n,0)}function pv(n){var e=du(n);if(jR(e))return n}function QU(n,e){if(n==="change")return e}var yP=!1;if(Co){var Yx;if(Co){var Kx="oninput"in document;if(!Kx){var CT=document.createElement("div");CT.setAttribute("oninput","return;"),Kx=typeof CT.oninput=="function"}Yx=Kx}else Yx=!1;yP=Yx&&(!document.documentMode||9<document.documentMode)}function RT(){Mh&&(Mh.detachEvent("onpropertychange",xP),Kh=Mh=null)}function xP(n){if(n.propertyName==="value"&&pv(Kh)){var e=[];vP(e,Kh,n,ES(n)),ZR(ZU,e)}}function eF(n,e,t){n==="focusin"?(RT(),Mh=e,Kh=t,Mh.attachEvent("onpropertychange",xP)):n==="focusout"&&RT()}function tF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pv(Kh)}function nF(n,e){if(n==="click")return pv(e)}function rF(n,e){if(n==="input"||n==="change")return pv(e)}function iF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var vs=typeof Object.is=="function"?Object.is:iF;function Jh(n,e){if(vs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Rw.call(e,i)||!vs(n[i],e[i]))return!1}return!0}function PT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function IT(n,e){var t=PT(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=PT(t)}}function _P(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?_P(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function wP(){for(var n=window,e=Vg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Vg(n.document)}return e}function kS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function sF(n){var e=wP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&_P(t.ownerDocument.documentElement,t)){if(r!==null&&kS(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=IT(t,s);var o=IT(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var oF=Co&&"documentMode"in document&&11>=document.documentMode,cu=null,qw=null,Eh=null,Yw=!1;function NT(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Yw||cu==null||cu!==Vg(r)||(r=cu,"selectionStart"in r&&kS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eh&&Jh(Eh,r)||(Eh=r,r=Kg(qw,"onSelect"),0<r.length&&(e=new IS("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=cu)))}function um(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var uu={animationend:um("Animation","AnimationEnd"),animationiteration:um("Animation","AnimationIteration"),animationstart:um("Animation","AnimationStart"),transitionend:um("Transition","TransitionEnd")},Jx={},SP={};Co&&(SP=document.createElement("div").style,"AnimationEvent"in window||(delete uu.animationend.animation,delete uu.animationiteration.animation,delete uu.animationstart.animation),"TransitionEvent"in window||delete uu.transitionend.transition);function mv(n){if(Jx[n])return Jx[n];if(!uu[n])return n;var e=uu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in SP)return Jx[n]=e[t];return n}var bP=mv("animationend"),MP=mv("animationiteration"),EP=mv("animationstart"),TP=mv("transitionend"),AP=new Map,LT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(n,e){AP.set(n,e),cc(e,[n])}for(var Zx=0;Zx<LT.length;Zx++){var Qx=LT[Zx],aF=Qx.toLowerCase(),lF=Qx[0].toUpperCase()+Qx.slice(1);Xa(aF,"on"+lF)}Xa(bP,"onAnimationEnd");Xa(MP,"onAnimationIteration");Xa(EP,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(TP,"onTransitionEnd");Vu("onMouseEnter",["mouseout","mouseover"]);Vu("onMouseLeave",["mouseout","mouseover"]);Vu("onPointerEnter",["pointerout","pointerover"]);Vu("onPointerLeave",["pointerout","pointerover"]);cc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cc("onBeforeInput",["compositionend","keypress","textInput","paste"]);cc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cF=new Set("cancel close invalid load scroll toggle".split(" ").concat(gh));function kT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,aU(r,e,void 0,n),n.currentTarget=null}function CP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;kT(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;kT(i,a,u),s=l}}}if(Wg)throw n=Gw,Wg=!1,Gw=null,n}function hn(n,e){var t=e[e1];t===void 0&&(t=e[e1]=new Set);var r=n+"__bubble";t.has(r)||(RP(e,n,2,!1),t.add(r))}function e_(n,e,t){var r=0;e&&(r|=4),RP(t,n,r,e)}var dm="_reactListening"+Math.random().toString(36).slice(2);function Zh(n){if(!n[dm]){n[dm]=!0,OR.forEach(function(t){t!=="selectionchange"&&(cF.has(t)||e_(t,!1,n),e_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[dm]||(e[dm]=!0,e_("selectionchange",!1,e))}}function RP(n,e,t,r){switch(hP(e)){case 1:var i=bU;break;case 4:i=MU;break;default:i=RS}t=i.bind(null,e,t,n),i=void 0,!Vw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function t_(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Dl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ZR(function(){var u=s,h=ES(t),f=[];e:{var p=AP.get(n);if(p!==void 0){var m=IS,v=n;switch(n){case"keypress":if(Ag(t)===0)break e;case"keydown":case"keyup":m=zU;break;case"focusin":v="focus",m=qx;break;case"focusout":v="blur",m=qx;break;case"beforeblur":case"afterblur":m=qx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ST;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=AU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=HU;break;case bP:case MP:case EP:m=PU;break;case TP:m=GU;break;case"scroll":m=EU;break;case"wheel":m=$U;break;case"copy":case"cut":case"paste":m=NU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=MT}var x=(e&4)!==0,_=!x&&n==="scroll",g=x?p!==null?p+"Capture":null:p;x=[];for(var w=u,S;w!==null;){S=w;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=$h(w,g),E!=null&&x.push(Qh(w,E,S)))),_)break;w=w.return}0<x.length&&(p=new m(p,v,null,t,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==jw&&(v=t.relatedTarget||t.fromElement)&&(Dl(v)||v[Ro]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?Dl(v):null,v!==null&&(_=uc(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(x=ST,E="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(x=MT,E="onPointerLeave",g="onPointerEnter",w="pointer"),_=m==null?p:du(m),S=v==null?p:du(v),p=new x(E,w+"leave",m,t,h),p.target=_,p.relatedTarget=S,E=null,Dl(h)===u&&(x=new x(g,w+"enter",v,t,h),x.target=S,x.relatedTarget=_,E=x),_=E,m&&v)t:{for(x=m,g=v,w=0,S=x;S;S=Ic(S))w++;for(S=0,E=g;E;E=Ic(E))S++;for(;0<w-S;)x=Ic(x),w--;for(;0<S-w;)g=Ic(g),S--;for(;w--;){if(x===g||g!==null&&x===g.alternate)break t;x=Ic(x),g=Ic(g)}x=null}else x=null;m!==null&&DT(f,p,m,x,!1),v!==null&&_!==null&&DT(f,_,v,x,!0)}}e:{if(p=u?du(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=QU;else if(AT(p))if(yP)R=rF;else{R=tF;var A=eF}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=nF);if(R&&(R=R(n,u))){vP(f,R,t,h);break e}A&&A(n,p,u),n==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&Ow(p,"number",p.value)}switch(A=u?du(u):window,n){case"focusin":(AT(A)||A.contentEditable==="true")&&(cu=A,qw=u,Eh=null);break;case"focusout":Eh=qw=cu=null;break;case"mousedown":Yw=!0;break;case"contextmenu":case"mouseup":case"dragend":Yw=!1,NT(f,t,h);break;case"selectionchange":if(oF)break;case"keydown":case"keyup":NT(f,t,h)}var P;if(LS)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else lu?mP(n,t)&&(k="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(pP&&t.locale!=="ko"&&(lu||k!=="onCompositionStart"?k==="onCompositionEnd"&&lu&&(P=fP()):(ba=h,PS="value"in ba?ba.value:ba.textContent,lu=!0)),A=Kg(u,k),0<A.length&&(k=new bT(k,n,null,t,h),f.push({event:k,listeners:A}),P?k.data=P:(P=gP(t),P!==null&&(k.data=P)))),(P=qU?YU(n,t):KU(n,t))&&(u=Kg(u,"onBeforeInput"),0<u.length&&(h=new bT("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=P))}CP(f,e)})}function Qh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Kg(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$h(n,t),s!=null&&r.unshift(Qh(n,s,i)),s=$h(n,e),s!=null&&r.push(Qh(n,s,i))),n=n.return}return r}function Ic(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function DT(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=$h(t,s),l!=null&&o.unshift(Qh(t,l,a))):i||(l=$h(t,s),l!=null&&o.push(Qh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var uF=/\r\n?/g,dF=/\u0000|\uFFFD/g;function OT(n){return(typeof n=="string"?n:""+n).replace(uF,`
`).replace(dF,"")}function hm(n,e,t){if(e=OT(e),OT(n)!==e&&t)throw Error(ke(425))}function Jg(){}var Kw=null,Jw=null;function Zw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qw=typeof setTimeout=="function"?setTimeout:void 0,hF=typeof clearTimeout=="function"?clearTimeout:void 0,UT=typeof Promise=="function"?Promise:void 0,fF=typeof queueMicrotask=="function"?queueMicrotask:typeof UT<"u"?function(n){return UT.resolve(null).then(n).catch(pF)}:Qw;function pF(n){setTimeout(function(){throw n})}function n_(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Yh(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Yh(e)}function Pa(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function FT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ud=Math.random().toString(36).slice(2),Fs="__reactFiber$"+ud,ef="__reactProps$"+ud,Ro="__reactContainer$"+ud,e1="__reactEvents$"+ud,mF="__reactListeners$"+ud,gF="__reactHandles$"+ud;function Dl(n){var e=n[Fs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ro]||t[Fs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=FT(n);n!==null;){if(t=n[Fs])return t;n=FT(n)}return e}n=t,t=n.parentNode}return null}function Bf(n){return n=n[Fs]||n[Ro],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function du(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function gv(n){return n[ef]||null}var t1=[],hu=-1;function qa(n){return{current:n}}function vn(n){0>hu||(n.current=t1[hu],t1[hu]=null,hu--)}function un(n,e){hu++,t1[hu]=n.current,n.current=e}var za={},Pr=qa(za),si=qa(!1),Zl=za;function Gu(n,e){var t=n.type.contextTypes;if(!t)return za;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function oi(n){return n=n.childContextTypes,n!=null}function Zg(){vn(si),vn(Pr)}function zT(n,e,t){if(Pr.current!==za)throw Error(ke(168));un(Pr,e),un(si,t)}function PP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ke(108,eU(n)||"Unknown",i));return En({},t,r)}function Qg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||za,Zl=Pr.current,un(Pr,n),un(si,si.current),!0}function BT(n,e,t){var r=n.stateNode;if(!r)throw Error(ke(169));t?(n=PP(n,e,Zl),r.__reactInternalMemoizedMergedChildContext=n,vn(si),vn(Pr),un(Pr,n)):vn(si),un(si,t)}var yo=null,vv=!1,r_=!1;function IP(n){yo===null?yo=[n]:yo.push(n)}function vF(n){vv=!0,IP(n)}function Ya(){if(!r_&&yo!==null){r_=!0;var n=0,e=nn;try{var t=yo;for(nn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}yo=null,vv=!1}catch(i){throw yo!==null&&(yo=yo.slice(n+1)),nP(TS,Ya),i}finally{nn=e,r_=!1}}return null}var fu=[],pu=0,e0=null,t0=0,zi=[],Bi=0,Ql=null,bo=1,Mo="";function Tl(n,e){fu[pu++]=t0,fu[pu++]=e0,e0=n,t0=e}function NP(n,e,t){zi[Bi++]=bo,zi[Bi++]=Mo,zi[Bi++]=Ql,Ql=n;var r=bo;n=Mo;var i=32-ms(r)-1;r&=~(1<<i),t+=1;var s=32-ms(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,bo=1<<32-ms(e)+i|t<<i|r,Mo=s+n}else bo=1<<s|t<<i|r,Mo=n}function DS(n){n.return!==null&&(Tl(n,1),NP(n,1,0))}function OS(n){for(;n===e0;)e0=fu[--pu],fu[pu]=null,t0=fu[--pu],fu[pu]=null;for(;n===Ql;)Ql=zi[--Bi],zi[Bi]=null,Mo=zi[--Bi],zi[Bi]=null,bo=zi[--Bi],zi[Bi]=null}var Si=null,wi=null,xn=!1,hs=null;function LP(n,e){var t=Hi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function jT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Si=n,wi=Pa(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Si=n,wi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ql!==null?{id:bo,overflow:Mo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Si=n,wi=null,!0):!1;default:return!1}}function n1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function r1(n){if(xn){var e=wi;if(e){var t=e;if(!jT(n,e)){if(n1(n))throw Error(ke(418));e=Pa(t.nextSibling);var r=Si;e&&jT(n,e)?LP(r,t):(n.flags=n.flags&-4097|2,xn=!1,Si=n)}}else{if(n1(n))throw Error(ke(418));n.flags=n.flags&-4097|2,xn=!1,Si=n}}}function HT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Si=n}function fm(n){if(n!==Si)return!1;if(!xn)return HT(n),xn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Zw(n.type,n.memoizedProps)),e&&(e=wi)){if(n1(n))throw kP(),Error(ke(418));for(;e;)LP(n,e),e=Pa(e.nextSibling)}if(HT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){wi=Pa(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}wi=null}}else wi=Si?Pa(n.stateNode.nextSibling):null;return!0}function kP(){for(var n=wi;n;)n=Pa(n.nextSibling)}function Wu(){wi=Si=null,xn=!1}function US(n){hs===null?hs=[n]:hs.push(n)}var yF=zo.ReactCurrentBatchConfig;function Xd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ke(309));var r=t.stateNode}if(!r)throw Error(ke(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ke(284));if(!t._owner)throw Error(ke(290,n))}return n}function pm(n,e){throw n=Object.prototype.toString.call(e),Error(ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function VT(n){var e=n._init;return e(n._payload)}function DP(n){function e(g,w){if(n){var S=g.deletions;S===null?(g.deletions=[w],g.flags|=16):S.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=ka(g,w),g.index=0,g.sibling=null,g}function s(g,w,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<w?(g.flags|=2,w):S):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,w,S,E){return w===null||w.tag!==6?(w=u_(S,g.mode,E),w.return=g,w):(w=i(w,S),w.return=g,w)}function l(g,w,S,E){var R=S.type;return R===au?h(g,w,S.props.children,E,S.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ua&&VT(R)===w.type)?(E=i(w,S.props),E.ref=Xd(g,w,S),E.return=g,E):(E=kg(S.type,S.key,S.props,null,g.mode,E),E.ref=Xd(g,w,S),E.return=g,E)}function u(g,w,S,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=d_(S,g.mode,E),w.return=g,w):(w=i(w,S.children||[]),w.return=g,w)}function h(g,w,S,E,R){return w===null||w.tag!==7?(w=$l(S,g.mode,E,R),w.return=g,w):(w=i(w,S),w.return=g,w)}function f(g,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=u_(""+w,g.mode,S),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rm:return S=kg(w.type,w.key,w.props,null,g.mode,S),S.ref=Xd(g,null,w),S.return=g,S;case ou:return w=d_(w,g.mode,S),w.return=g,w;case ua:var E=w._init;return f(g,E(w._payload),S)}if(ph(w)||Hd(w))return w=$l(w,g.mode,S,null),w.return=g,w;pm(g,w)}return null}function p(g,w,S,E){var R=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(g,w,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rm:return S.key===R?l(g,w,S,E):null;case ou:return S.key===R?u(g,w,S,E):null;case ua:return R=S._init,p(g,w,R(S._payload),E)}if(ph(S)||Hd(S))return R!==null?null:h(g,w,S,E,null);pm(g,S)}return null}function m(g,w,S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(w,g,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case rm:return g=g.get(E.key===null?S:E.key)||null,l(w,g,E,R);case ou:return g=g.get(E.key===null?S:E.key)||null,u(w,g,E,R);case ua:var A=E._init;return m(g,w,S,A(E._payload),R)}if(ph(E)||Hd(E))return g=g.get(S)||null,h(w,g,E,R,null);pm(w,E)}return null}function v(g,w,S,E){for(var R=null,A=null,P=w,k=w=0,N=null;P!==null&&k<S.length;k++){P.index>k?(N=P,P=null):N=P.sibling;var C=p(g,P,S[k],E);if(C===null){P===null&&(P=N);break}n&&P&&C.alternate===null&&e(g,P),w=s(C,w,k),A===null?R=C:A.sibling=C,A=C,P=N}if(k===S.length)return t(g,P),xn&&Tl(g,k),R;if(P===null){for(;k<S.length;k++)P=f(g,S[k],E),P!==null&&(w=s(P,w,k),A===null?R=P:A.sibling=P,A=P);return xn&&Tl(g,k),R}for(P=r(g,P);k<S.length;k++)N=m(P,g,k,S[k],E),N!==null&&(n&&N.alternate!==null&&P.delete(N.key===null?k:N.key),w=s(N,w,k),A===null?R=N:A.sibling=N,A=N);return n&&P.forEach(function(O){return e(g,O)}),xn&&Tl(g,k),R}function x(g,w,S,E){var R=Hd(S);if(typeof R!="function")throw Error(ke(150));if(S=R.call(S),S==null)throw Error(ke(151));for(var A=R=null,P=w,k=w=0,N=null,C=S.next();P!==null&&!C.done;k++,C=S.next()){P.index>k?(N=P,P=null):N=P.sibling;var O=p(g,P,C.value,E);if(O===null){P===null&&(P=N);break}n&&P&&O.alternate===null&&e(g,P),w=s(O,w,k),A===null?R=O:A.sibling=O,A=O,P=N}if(C.done)return t(g,P),xn&&Tl(g,k),R;if(P===null){for(;!C.done;k++,C=S.next())C=f(g,C.value,E),C!==null&&(w=s(C,w,k),A===null?R=C:A.sibling=C,A=C);return xn&&Tl(g,k),R}for(P=r(g,P);!C.done;k++,C=S.next())C=m(P,g,k,C.value,E),C!==null&&(n&&C.alternate!==null&&P.delete(C.key===null?k:C.key),w=s(C,w,k),A===null?R=C:A.sibling=C,A=C);return n&&P.forEach(function(F){return e(g,F)}),xn&&Tl(g,k),R}function _(g,w,S,E){if(typeof S=="object"&&S!==null&&S.type===au&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case rm:e:{for(var R=S.key,A=w;A!==null;){if(A.key===R){if(R=S.type,R===au){if(A.tag===7){t(g,A.sibling),w=i(A,S.props.children),w.return=g,g=w;break e}}else if(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ua&&VT(R)===A.type){t(g,A.sibling),w=i(A,S.props),w.ref=Xd(g,A,S),w.return=g,g=w;break e}t(g,A);break}else e(g,A);A=A.sibling}S.type===au?(w=$l(S.props.children,g.mode,E,S.key),w.return=g,g=w):(E=kg(S.type,S.key,S.props,null,g.mode,E),E.ref=Xd(g,w,S),E.return=g,g=E)}return o(g);case ou:e:{for(A=S.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(g,w.sibling),w=i(w,S.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=d_(S,g.mode,E),w.return=g,g=w}return o(g);case ua:return A=S._init,_(g,w,A(S._payload),E)}if(ph(S))return v(g,w,S,E);if(Hd(S))return x(g,w,S,E);pm(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(g,w.sibling),w=i(w,S),w.return=g,g=w):(t(g,w),w=u_(S,g.mode,E),w.return=g,g=w),o(g)):t(g,w)}return _}var $u=DP(!0),OP=DP(!1),n0=qa(null),r0=null,mu=null,FS=null;function zS(){FS=mu=r0=null}function BS(n){var e=n0.current;vn(n0),n._currentValue=e}function i1(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Au(n,e){r0=n,FS=mu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ri=!0),n.firstContext=null)}function Xi(n){var e=n._currentValue;if(FS!==n)if(n={context:n,memoizedValue:e,next:null},mu===null){if(r0===null)throw Error(ke(308));mu=n,r0.dependencies={lanes:0,firstContext:n}}else mu=mu.next=n;return e}var Ol=null;function jS(n){Ol===null?Ol=[n]:Ol.push(n)}function UP(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,jS(e)):(t.next=i.next,i.next=t),e.interleaved=t,Po(n,r)}function Po(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var da=!1;function HS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Eo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ia(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,qt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Po(n,t)}return i=r.interleaved,i===null?(e.next=e,jS(r)):(e.next=i.next,i.next=e),r.interleaved=e,Po(n,t)}function Cg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,AS(n,t)}}function GT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function i0(n,e,t,r){var i=n.updateQueue;da=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,x=a;switch(p=e,m=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=En({},f,p);break e;case 2:da=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);tc|=o,n.lanes=o,n.memoizedState=f}}function WT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var jf={},Hs=qa(jf),tf=qa(jf),nf=qa(jf);function Ul(n){if(n===jf)throw Error(ke(174));return n}function VS(n,e){switch(un(nf,e),un(tf,n),un(Hs,jf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Fw(e,n)}vn(Hs),un(Hs,e)}function Xu(){vn(Hs),vn(tf),vn(nf)}function zP(n){Ul(nf.current);var e=Ul(Hs.current),t=Fw(e,n.type);e!==t&&(un(tf,n),un(Hs,t))}function GS(n){tf.current===n&&(vn(Hs),vn(tf))}var wn=qa(0);function s0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var i_=[];function WS(){for(var n=0;n<i_.length;n++)i_[n]._workInProgressVersionPrimary=null;i_.length=0}var Rg=zo.ReactCurrentDispatcher,s_=zo.ReactCurrentBatchConfig,ec=0,Mn=null,Gn=null,nr=null,o0=!1,Th=!1,rf=0,xF=0;function xr(){throw Error(ke(321))}function $S(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!vs(n[t],e[t]))return!1;return!0}function XS(n,e,t,r,i,s){if(ec=s,Mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rg.current=n===null||n.memoizedState===null?bF:MF,n=t(r,i),Th){s=0;do{if(Th=!1,rf=0,25<=s)throw Error(ke(301));s+=1,nr=Gn=null,e.updateQueue=null,Rg.current=EF,n=t(r,i)}while(Th)}if(Rg.current=a0,e=Gn!==null&&Gn.next!==null,ec=0,nr=Gn=Mn=null,o0=!1,e)throw Error(ke(300));return n}function qS(){var n=rf!==0;return rf=0,n}function ks(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?Mn.memoizedState=nr=n:nr=nr.next=n,nr}function qi(){if(Gn===null){var n=Mn.alternate;n=n!==null?n.memoizedState:null}else n=Gn.next;var e=nr===null?Mn.memoizedState:nr.next;if(e!==null)nr=e,Gn=n;else{if(n===null)throw Error(ke(310));Gn=n,n={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},nr===null?Mn.memoizedState=nr=n:nr=nr.next=n}return nr}function sf(n,e){return typeof e=="function"?e(n):e}function o_(n){var e=qi(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=Gn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((ec&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Mn.lanes|=h,tc|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,vs(r,e.memoizedState)||(ri=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Mn.lanes|=s,tc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function a_(n){var e=qi(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);vs(s,e.memoizedState)||(ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function BP(){}function jP(n,e){var t=Mn,r=qi(),i=e(),s=!vs(r.memoizedState,i);if(s&&(r.memoizedState=i,ri=!0),r=r.queue,YS(GP.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||nr!==null&&nr.memoizedState.tag&1){if(t.flags|=2048,of(9,VP.bind(null,t,r,i,e),void 0,null),ir===null)throw Error(ke(349));ec&30||HP(t,e,i)}return i}function HP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function VP(n,e,t,r){e.value=t,e.getSnapshot=r,WP(e)&&$P(n)}function GP(n,e,t){return t(function(){WP(e)&&$P(n)})}function WP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!vs(n,t)}catch{return!0}}function $P(n){var e=Po(n,1);e!==null&&gs(e,n,1,-1)}function $T(n){var e=ks();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sf,lastRenderedState:n},e.queue=n,n=n.dispatch=SF.bind(null,Mn,n),[e.memoizedState,n]}function of(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function XP(){return qi().memoizedState}function Pg(n,e,t,r){var i=ks();Mn.flags|=n,i.memoizedState=of(1|e,t,void 0,r===void 0?null:r)}function yv(n,e,t,r){var i=qi();r=r===void 0?null:r;var s=void 0;if(Gn!==null){var o=Gn.memoizedState;if(s=o.destroy,r!==null&&$S(r,o.deps)){i.memoizedState=of(e,t,s,r);return}}Mn.flags|=n,i.memoizedState=of(1|e,t,s,r)}function XT(n,e){return Pg(8390656,8,n,e)}function YS(n,e){return yv(2048,8,n,e)}function qP(n,e){return yv(4,2,n,e)}function YP(n,e){return yv(4,4,n,e)}function KP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function JP(n,e,t){return t=t!=null?t.concat([n]):null,yv(4,4,KP.bind(null,e,n),t)}function KS(){}function ZP(n,e){var t=qi();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&$S(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function QP(n,e){var t=qi();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&$S(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function eI(n,e,t){return ec&21?(vs(t,e)||(t=sP(),Mn.lanes|=t,tc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ri=!0),n.memoizedState=t)}function _F(n,e){var t=nn;nn=t!==0&&4>t?t:4,n(!0);var r=s_.transition;s_.transition={};try{n(!1),e()}finally{nn=t,s_.transition=r}}function tI(){return qi().memoizedState}function wF(n,e,t){var r=La(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},nI(n))rI(e,t);else if(t=UP(n,e,t,r),t!==null){var i=Br();gs(t,n,r,i),iI(t,e,r)}}function SF(n,e,t){var r=La(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(nI(n))rI(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,vs(a,o)){var l=e.interleaved;l===null?(i.next=i,jS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=UP(n,e,i,r),t!==null&&(i=Br(),gs(t,n,r,i),iI(t,e,r))}}function nI(n){var e=n.alternate;return n===Mn||e!==null&&e===Mn}function rI(n,e){Th=o0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function iI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,AS(n,t)}}var a0={readContext:Xi,useCallback:xr,useContext:xr,useEffect:xr,useImperativeHandle:xr,useInsertionEffect:xr,useLayoutEffect:xr,useMemo:xr,useReducer:xr,useRef:xr,useState:xr,useDebugValue:xr,useDeferredValue:xr,useTransition:xr,useMutableSource:xr,useSyncExternalStore:xr,useId:xr,unstable_isNewReconciler:!1},bF={readContext:Xi,useCallback:function(n,e){return ks().memoizedState=[n,e===void 0?null:e],n},useContext:Xi,useEffect:XT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Pg(4194308,4,KP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Pg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Pg(4,2,n,e)},useMemo:function(n,e){var t=ks();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ks();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=wF.bind(null,Mn,n),[r.memoizedState,n]},useRef:function(n){var e=ks();return n={current:n},e.memoizedState=n},useState:$T,useDebugValue:KS,useDeferredValue:function(n){return ks().memoizedState=n},useTransition:function(){var n=$T(!1),e=n[0];return n=_F.bind(null,n[1]),ks().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Mn,i=ks();if(xn){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),ir===null)throw Error(ke(349));ec&30||HP(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,XT(GP.bind(null,r,s,n),[n]),r.flags|=2048,of(9,VP.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=ks(),e=ir.identifierPrefix;if(xn){var t=Mo,r=bo;t=(r&~(1<<32-ms(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=rf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=xF++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},MF={readContext:Xi,useCallback:ZP,useContext:Xi,useEffect:YS,useImperativeHandle:JP,useInsertionEffect:qP,useLayoutEffect:YP,useMemo:QP,useReducer:o_,useRef:XP,useState:function(){return o_(sf)},useDebugValue:KS,useDeferredValue:function(n){var e=qi();return eI(e,Gn.memoizedState,n)},useTransition:function(){var n=o_(sf)[0],e=qi().memoizedState;return[n,e]},useMutableSource:BP,useSyncExternalStore:jP,useId:tI,unstable_isNewReconciler:!1},EF={readContext:Xi,useCallback:ZP,useContext:Xi,useEffect:YS,useImperativeHandle:JP,useInsertionEffect:qP,useLayoutEffect:YP,useMemo:QP,useReducer:a_,useRef:XP,useState:function(){return a_(sf)},useDebugValue:KS,useDeferredValue:function(n){var e=qi();return Gn===null?e.memoizedState=n:eI(e,Gn.memoizedState,n)},useTransition:function(){var n=a_(sf)[0],e=qi().memoizedState;return[n,e]},useMutableSource:BP,useSyncExternalStore:jP,useId:tI,unstable_isNewReconciler:!1};function os(n,e){if(n&&n.defaultProps){e=En({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function s1(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:En({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var xv={isMounted:function(n){return(n=n._reactInternals)?uc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Br(),i=La(n),s=Eo(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ia(n,s,i),e!==null&&(gs(e,n,i,r),Cg(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Br(),i=La(n),s=Eo(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ia(n,s,i),e!==null&&(gs(e,n,i,r),Cg(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Br(),r=La(n),i=Eo(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ia(n,i,r),e!==null&&(gs(e,n,r,t),Cg(e,n,r))}};function qT(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jh(t,r)||!Jh(i,s):!0}function sI(n,e,t){var r=!1,i=za,s=e.contextType;return typeof s=="object"&&s!==null?s=Xi(s):(i=oi(e)?Zl:Pr.current,r=e.contextTypes,s=(r=r!=null)?Gu(n,i):za),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xv,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function YT(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&xv.enqueueReplaceState(e,e.state,null)}function o1(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},HS(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Xi(s):(s=oi(e)?Zl:Pr.current,i.context=Gu(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(s1(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xv.enqueueReplaceState(i,i.state,null),i0(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function qu(n,e){try{var t="",r=e;do t+=QO(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function l_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function a1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var TF=typeof WeakMap=="function"?WeakMap:Map;function oI(n,e,t){t=Eo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){c0||(c0=!0,v1=r),a1(n,e)},t}function aI(n,e,t){t=Eo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){a1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){a1(n,e),typeof r!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function KT(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new TF;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=BF.bind(null,n,e,t),e.then(n,n))}function JT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ZT(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Eo(-1,1),e.tag=2,Ia(t,e,1))),t.lanes|=1),n)}var AF=zo.ReactCurrentOwner,ri=!1;function Ur(n,e,t,r){e.child=n===null?OP(e,null,t,r):$u(e,n.child,t,r)}function QT(n,e,t,r,i){t=t.render;var s=e.ref;return Au(e,i),r=XS(n,e,t,r,s,i),t=qS(),n!==null&&!ri?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Io(n,e,i)):(xn&&t&&DS(e),e.flags|=1,Ur(n,e,r,i),e.child)}function eA(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!ib(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,lI(n,e,s,r,i)):(n=kg(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Jh,t(o,r)&&n.ref===e.ref)return Io(n,e,i)}return e.flags|=1,n=ka(s,r),n.ref=e.ref,n.return=e,e.child=n}function lI(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Jh(s,r)&&n.ref===e.ref)if(ri=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(ri=!0);else return e.lanes=n.lanes,Io(n,e,i)}return l1(n,e,t,r,i)}function cI(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(vu,xi),xi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,un(vu,xi),xi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,un(vu,xi),xi|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,un(vu,xi),xi|=r;return Ur(n,e,i,t),e.child}function uI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function l1(n,e,t,r,i){var s=oi(t)?Zl:Pr.current;return s=Gu(e,s),Au(e,i),t=XS(n,e,t,r,s,i),r=qS(),n!==null&&!ri?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Io(n,e,i)):(xn&&r&&DS(e),e.flags|=1,Ur(n,e,t,i),e.child)}function tA(n,e,t,r,i){if(oi(t)){var s=!0;Qg(e)}else s=!1;if(Au(e,i),e.stateNode===null)Ig(n,e),sI(e,t,r),o1(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Xi(u):(u=oi(t)?Zl:Pr.current,u=Gu(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&YT(e,o,r,u),da=!1;var p=e.memoizedState;o.state=p,i0(e,r,o,i),l=e.memoizedState,a!==r||p!==l||si.current||da?(typeof h=="function"&&(s1(e,t,h,r),l=e.memoizedState),(a=da||qT(e,t,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,FP(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:os(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Xi(l):(l=oi(t)?Zl:Pr.current,l=Gu(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&YT(e,o,r,l),da=!1,p=e.memoizedState,o.state=p,i0(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||si.current||da?(typeof m=="function"&&(s1(e,t,m,r),v=e.memoizedState),(u=da||qT(e,t,u,r,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return c1(n,e,t,r,s,i)}function c1(n,e,t,r,i,s){uI(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&BT(e,t,!1),Io(n,e,s);r=e.stateNode,AF.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=$u(e,n.child,null,s),e.child=$u(e,null,a,s)):Ur(n,e,a,s),e.memoizedState=r.state,i&&BT(e,t,!0),e.child}function dI(n){var e=n.stateNode;e.pendingContext?zT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&zT(n,e.context,!1),VS(n,e.containerInfo)}function nA(n,e,t,r,i){return Wu(),US(i),e.flags|=256,Ur(n,e,t,r),e.child}var u1={dehydrated:null,treeContext:null,retryLane:0};function d1(n){return{baseLanes:n,cachePool:null,transitions:null}}function hI(n,e,t){var r=e.pendingProps,i=wn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),un(wn,i&1),n===null)return r1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Sv(o,r,0,null),n=$l(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=d1(t),e.memoizedState=u1,n):JS(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return CF(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ka(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ka(a,s):(s=$l(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?d1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=u1,r}return s=n.child,n=s.sibling,r=ka(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function JS(n,e){return e=Sv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function mm(n,e,t,r){return r!==null&&US(r),$u(e,n.child,null,t),n=JS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function CF(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=l_(Error(ke(422))),mm(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Sv({mode:"visible",children:r.children},i,0,null),s=$l(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$u(e,n.child,null,o),e.child.memoizedState=d1(o),e.memoizedState=u1,s);if(!(e.mode&1))return mm(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ke(419)),r=l_(s,r,void 0),mm(n,e,o,r)}if(a=(o&n.childLanes)!==0,ri||a){if(r=ir,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Po(n,i),gs(r,n,i,-1))}return rb(),r=l_(Error(ke(421))),mm(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=jF.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,wi=Pa(i.nextSibling),Si=e,xn=!0,hs=null,n!==null&&(zi[Bi++]=bo,zi[Bi++]=Mo,zi[Bi++]=Ql,bo=n.id,Mo=n.overflow,Ql=e),e=JS(e,r.children),e.flags|=4096,e)}function rA(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),i1(n.return,e,t)}function c_(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function fI(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ur(n,e,r.children,t),r=wn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rA(n,t,e);else if(n.tag===19)rA(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(un(wn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&s0(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),c_(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&s0(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}c_(e,!0,t,null,s);break;case"together":c_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ig(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Io(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),tc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ke(153));if(e.child!==null){for(n=e.child,t=ka(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ka(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function RF(n,e,t){switch(e.tag){case 3:dI(e),Wu();break;case 5:zP(e);break;case 1:oi(e.type)&&Qg(e);break;case 4:VS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;un(n0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(wn,wn.current&1),e.flags|=128,null):t&e.child.childLanes?hI(n,e,t):(un(wn,wn.current&1),n=Io(n,e,t),n!==null?n.sibling:null);un(wn,wn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return fI(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(wn,wn.current),r)break;return null;case 22:case 23:return e.lanes=0,cI(n,e,t)}return Io(n,e,t)}var pI,h1,mI,gI;pI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};h1=function(){};mI=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Ul(Hs.current);var s=null;switch(t){case"input":i=kw(n,i),r=kw(n,r),s=[];break;case"select":i=En({},i,{value:void 0}),r=En({},r,{value:void 0}),s=[];break;case"textarea":i=Uw(n,i),r=Uw(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Jg)}zw(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&hn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};gI=function(n,e,t,r){t!==r&&(e.flags|=4)};function qd(n,e){if(!xn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function _r(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function PF(n,e,t){var r=e.pendingProps;switch(OS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(e),null;case 1:return oi(e.type)&&Zg(),_r(e),null;case 3:return r=e.stateNode,Xu(),vn(si),vn(Pr),WS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(fm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hs!==null&&(_1(hs),hs=null))),h1(n,e),_r(e),null;case 5:GS(e);var i=Ul(nf.current);if(t=e.type,n!==null&&e.stateNode!=null)mI(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return _r(e),null}if(n=Ul(Hs.current),fm(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Fs]=e,r[ef]=s,n=(e.mode&1)!==0,t){case"dialog":hn("cancel",r),hn("close",r);break;case"iframe":case"object":case"embed":hn("load",r);break;case"video":case"audio":for(i=0;i<gh.length;i++)hn(gh[i],r);break;case"source":hn("error",r);break;case"img":case"image":case"link":hn("error",r),hn("load",r);break;case"details":hn("toggle",r);break;case"input":hT(r,s),hn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},hn("invalid",r);break;case"textarea":pT(r,s),hn("invalid",r)}zw(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&hm(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hm(r.textContent,a,n),i=["children",""+a]):Gh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hn("scroll",r)}switch(t){case"input":im(r),fT(r,s,!0);break;case"textarea":im(r),mT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Jg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=GR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Fs]=e,n[ef]=r,pI(n,e,!1,!1),e.stateNode=n;e:{switch(o=Bw(t,r),t){case"dialog":hn("cancel",n),hn("close",n),i=r;break;case"iframe":case"object":case"embed":hn("load",n),i=r;break;case"video":case"audio":for(i=0;i<gh.length;i++)hn(gh[i],n);i=r;break;case"source":hn("error",n),i=r;break;case"img":case"image":case"link":hn("error",n),hn("load",n),i=r;break;case"details":hn("toggle",n),i=r;break;case"input":hT(n,r),i=kw(n,r),hn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=En({},r,{value:void 0}),hn("invalid",n);break;case"textarea":pT(n,r),i=Uw(n,r),hn("invalid",n);break;default:i=r}zw(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?XR(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WR(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Wh(n,l):typeof l=="number"&&Wh(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&hn("scroll",n):l!=null&&wS(n,s,l,o))}switch(t){case"input":im(n),fT(n,r,!1);break;case"textarea":im(n),mT(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Fa(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?bu(n,!!r.multiple,s,!1):r.defaultValue!=null&&bu(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Jg)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _r(e),null;case 6:if(n&&e.stateNode!=null)gI(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(t=Ul(nf.current),Ul(Hs.current),fm(e)){if(r=e.stateNode,t=e.memoizedProps,r[Fs]=e,(s=r.nodeValue!==t)&&(n=Si,n!==null))switch(n.tag){case 3:hm(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&hm(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Fs]=e,e.stateNode=r}return _r(e),null;case 13:if(vn(wn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(xn&&wi!==null&&e.mode&1&&!(e.flags&128))kP(),Wu(),e.flags|=98560,s=!1;else if(s=fm(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));s[Fs]=e}else Wu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_r(e),s=!1}else hs!==null&&(_1(hs),hs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||wn.current&1?Wn===0&&(Wn=3):rb())),e.updateQueue!==null&&(e.flags|=4),_r(e),null);case 4:return Xu(),h1(n,e),n===null&&Zh(e.stateNode.containerInfo),_r(e),null;case 10:return BS(e.type._context),_r(e),null;case 17:return oi(e.type)&&Zg(),_r(e),null;case 19:if(vn(wn),s=e.memoizedState,s===null)return _r(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qd(s,!1);else{if(Wn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=s0(n),o!==null){for(e.flags|=128,qd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return un(wn,wn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ln()>Yu&&(e.flags|=128,r=!0,qd(s,!1),e.lanes=4194304)}else{if(!r)if(n=s0(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xn)return _r(e),null}else 2*Ln()-s.renderingStartTime>Yu&&t!==1073741824&&(e.flags|=128,r=!0,qd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ln(),e.sibling=null,t=wn.current,un(wn,r?t&1|2:t&1),e):(_r(e),null);case 22:case 23:return nb(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xi&1073741824&&(_r(e),e.subtreeFlags&6&&(e.flags|=8192)):_r(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function IF(n,e){switch(OS(e),e.tag){case 1:return oi(e.type)&&Zg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Xu(),vn(si),vn(Pr),WS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return GS(e),null;case 13:if(vn(wn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));Wu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return vn(wn),null;case 4:return Xu(),null;case 10:return BS(e.type._context),null;case 22:case 23:return nb(),null;case 24:return null;default:return null}}var gm=!1,Tr=!1,NF=typeof WeakSet=="function"?WeakSet:Set,rt=null;function gu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Rn(n,e,r)}else t.current=null}function f1(n,e,t){try{t()}catch(r){Rn(n,e,r)}}var iA=!1;function LF(n,e){if(Kw=qg,n=wP(),kS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Jw={focusedElem:n,selectionRange:t},qg=!1,rt=e;rt!==null;)if(e=rt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,rt=n;else for(;rt!==null;){e=rt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:os(e.type,x),_);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(E){Rn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,rt=n;break}rt=e.return}return v=iA,iA=!1,v}function Ah(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&f1(e,t,s)}i=i.next}while(i!==r)}}function _v(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function p1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function vI(n){var e=n.alternate;e!==null&&(n.alternate=null,vI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Fs],delete e[ef],delete e[e1],delete e[mF],delete e[gF])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function yI(n){return n.tag===5||n.tag===3||n.tag===4}function sA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function m1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Jg));else if(r!==4&&(n=n.child,n!==null))for(m1(n,e,t),n=n.sibling;n!==null;)m1(n,e,t),n=n.sibling}function g1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(g1(n,e,t),n=n.sibling;n!==null;)g1(n,e,t),n=n.sibling}var ar=null,us=!1;function Jo(n,e,t){for(t=t.child;t!==null;)xI(n,e,t),t=t.sibling}function xI(n,e,t){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(hv,t)}catch{}switch(t.tag){case 5:Tr||gu(t,e);case 6:var r=ar,i=us;ar=null,Jo(n,e,t),ar=r,us=i,ar!==null&&(us?(n=ar,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ar.removeChild(t.stateNode));break;case 18:ar!==null&&(us?(n=ar,t=t.stateNode,n.nodeType===8?n_(n.parentNode,t):n.nodeType===1&&n_(n,t),Yh(n)):n_(ar,t.stateNode));break;case 4:r=ar,i=us,ar=t.stateNode.containerInfo,us=!0,Jo(n,e,t),ar=r,us=i;break;case 0:case 11:case 14:case 15:if(!Tr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&f1(t,e,o),i=i.next}while(i!==r)}Jo(n,e,t);break;case 1:if(!Tr&&(gu(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Rn(t,e,a)}Jo(n,e,t);break;case 21:Jo(n,e,t);break;case 22:t.mode&1?(Tr=(r=Tr)||t.memoizedState!==null,Jo(n,e,t),Tr=r):Jo(n,e,t);break;default:Jo(n,e,t)}}function oA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new NF),e.forEach(function(r){var i=HF.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function es(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ar=a.stateNode,us=!1;break e;case 3:ar=a.stateNode.containerInfo,us=!0;break e;case 4:ar=a.stateNode.containerInfo,us=!0;break e}a=a.return}if(ar===null)throw Error(ke(160));xI(s,o,i),ar=null,us=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Rn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_I(e,n),e=e.sibling}function _I(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(es(e,n),Is(n),r&4){try{Ah(3,n,n.return),_v(3,n)}catch(x){Rn(n,n.return,x)}try{Ah(5,n,n.return)}catch(x){Rn(n,n.return,x)}}break;case 1:es(e,n),Is(n),r&512&&t!==null&&gu(t,t.return);break;case 5:if(es(e,n),Is(n),r&512&&t!==null&&gu(t,t.return),n.flags&32){var i=n.stateNode;try{Wh(i,"")}catch(x){Rn(n,n.return,x)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&HR(i,s),Bw(a,o);var u=Bw(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?XR(i,f):h==="dangerouslySetInnerHTML"?WR(i,f):h==="children"?Wh(i,f):wS(i,h,f,u)}switch(a){case"input":Dw(i,s);break;case"textarea":VR(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?bu(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?bu(i,!!s.multiple,s.defaultValue,!0):bu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ef]=s}catch(x){Rn(n,n.return,x)}}break;case 6:if(es(e,n),Is(n),r&4){if(n.stateNode===null)throw Error(ke(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(x){Rn(n,n.return,x)}}break;case 3:if(es(e,n),Is(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Yh(e.containerInfo)}catch(x){Rn(n,n.return,x)}break;case 4:es(e,n),Is(n);break;case 13:es(e,n),Is(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eb=Ln())),r&4&&oA(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Tr=(u=Tr)||h,es(e,n),Tr=u):es(e,n),Is(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(rt=n,h=n.child;h!==null;){for(f=rt=h;rt!==null;){switch(p=rt,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ah(4,p,p.return);break;case 1:gu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Rn(r,t,x)}}break;case 5:gu(p,p.return);break;case 22:if(p.memoizedState!==null){lA(f);continue}}m!==null?(m.return=p,rt=m):lA(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$R("display",o))}catch(x){Rn(n,n.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Rn(n,n.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:es(e,n),Is(n),r&4&&oA(n);break;case 21:break;default:es(e,n),Is(n)}}function Is(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(yI(t)){var r=t;break e}t=t.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wh(i,""),r.flags&=-33);var s=sA(n);g1(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=sA(n);m1(n,a,o);break;default:throw Error(ke(161))}}catch(l){Rn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kF(n,e,t){rt=n,wI(n)}function wI(n,e,t){for(var r=(n.mode&1)!==0;rt!==null;){var i=rt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tr;a=gm;var u=Tr;if(gm=o,(Tr=l)&&!u)for(rt=i;rt!==null;)o=rt,l=o.child,o.tag===22&&o.memoizedState!==null?cA(i):l!==null?(l.return=o,rt=l):cA(i);for(;s!==null;)rt=s,wI(s),s=s.sibling;rt=i,gm=a,Tr=u}aA(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,rt=s):aA(n)}}function aA(n){for(;rt!==null;){var e=rt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tr||_v(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:os(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&WT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}WT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Yh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Tr||e.flags&512&&p1(e)}catch(p){Rn(e,e.return,p)}}if(e===n){rt=null;break}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}}function lA(n){for(;rt!==null;){var e=rt;if(e===n){rt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,rt=t;break}rt=e.return}}function cA(n){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{_v(4,e)}catch(l){Rn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Rn(e,i,l)}}var s=e.return;try{p1(e)}catch(l){Rn(e,s,l)}break;case 5:var o=e.return;try{p1(e)}catch(l){Rn(e,o,l)}}}catch(l){Rn(e,e.return,l)}if(e===n){rt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,rt=a;break}rt=e.return}}var DF=Math.ceil,l0=zo.ReactCurrentDispatcher,ZS=zo.ReactCurrentOwner,Wi=zo.ReactCurrentBatchConfig,qt=0,ir=null,Bn=null,lr=0,xi=0,vu=qa(0),Wn=0,af=null,tc=0,wv=0,QS=0,Ch=null,ei=null,eb=0,Yu=1/0,go=null,c0=!1,v1=null,Na=null,vm=!1,Ma=null,u0=0,Rh=0,y1=null,Ng=-1,Lg=0;function Br(){return qt&6?Ln():Ng!==-1?Ng:Ng=Ln()}function La(n){return n.mode&1?qt&2&&lr!==0?lr&-lr:yF.transition!==null?(Lg===0&&(Lg=sP()),Lg):(n=nn,n!==0||(n=window.event,n=n===void 0?16:hP(n.type)),n):1}function gs(n,e,t,r){if(50<Rh)throw Rh=0,y1=null,Error(ke(185));Ff(n,t,r),(!(qt&2)||n!==ir)&&(n===ir&&(!(qt&2)&&(wv|=t),Wn===4&&pa(n,lr)),ai(n,r),t===1&&qt===0&&!(e.mode&1)&&(Yu=Ln()+500,vv&&Ya()))}function ai(n,e){var t=n.callbackNode;yU(n,e);var r=Xg(n,n===ir?lr:0);if(r===0)t!==null&&yT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&yT(t),e===1)n.tag===0?vF(uA.bind(null,n)):IP(uA.bind(null,n)),fF(function(){!(qt&6)&&Ya()}),t=null;else{switch(oP(r)){case 1:t=TS;break;case 4:t=rP;break;case 16:t=$g;break;case 536870912:t=iP;break;default:t=$g}t=RI(t,SI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function SI(n,e){if(Ng=-1,Lg=0,qt&6)throw Error(ke(327));var t=n.callbackNode;if(Cu()&&n.callbackNode!==t)return null;var r=Xg(n,n===ir?lr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=d0(n,r);else{e=r;var i=qt;qt|=2;var s=MI();(ir!==n||lr!==e)&&(go=null,Yu=Ln()+500,Wl(n,e));do try{FF();break}catch(a){bI(n,a)}while(!0);zS(),l0.current=s,qt=i,Bn!==null?e=0:(ir=null,lr=0,e=Wn)}if(e!==0){if(e===2&&(i=Ww(n),i!==0&&(r=i,e=x1(n,i))),e===1)throw t=af,Wl(n,0),pa(n,r),ai(n,Ln()),t;if(e===6)pa(n,r);else{if(i=n.current.alternate,!(r&30)&&!OF(i)&&(e=d0(n,r),e===2&&(s=Ww(n),s!==0&&(r=s,e=x1(n,s))),e===1))throw t=af,Wl(n,0),pa(n,r),ai(n,Ln()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:Al(n,ei,go);break;case 3:if(pa(n,r),(r&130023424)===r&&(e=eb+500-Ln(),10<e)){if(Xg(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Br(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Qw(Al.bind(null,n,ei,go),e);break}Al(n,ei,go);break;case 4:if(pa(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-ms(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ln()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DF(r/1960))-r,10<r){n.timeoutHandle=Qw(Al.bind(null,n,ei,go),r);break}Al(n,ei,go);break;case 5:Al(n,ei,go);break;default:throw Error(ke(329))}}}return ai(n,Ln()),n.callbackNode===t?SI.bind(null,n):null}function x1(n,e){var t=Ch;return n.current.memoizedState.isDehydrated&&(Wl(n,e).flags|=256),n=d0(n,e),n!==2&&(e=ei,ei=t,e!==null&&_1(e)),n}function _1(n){ei===null?ei=n:ei.push.apply(ei,n)}function OF(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!vs(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pa(n,e){for(e&=~QS,e&=~wv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ms(e),r=1<<t;n[t]=-1,e&=~r}}function uA(n){if(qt&6)throw Error(ke(327));Cu();var e=Xg(n,0);if(!(e&1))return ai(n,Ln()),null;var t=d0(n,e);if(n.tag!==0&&t===2){var r=Ww(n);r!==0&&(e=r,t=x1(n,r))}if(t===1)throw t=af,Wl(n,0),pa(n,e),ai(n,Ln()),t;if(t===6)throw Error(ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Al(n,ei,go),ai(n,Ln()),null}function tb(n,e){var t=qt;qt|=1;try{return n(e)}finally{qt=t,qt===0&&(Yu=Ln()+500,vv&&Ya())}}function nc(n){Ma!==null&&Ma.tag===0&&!(qt&6)&&Cu();var e=qt;qt|=1;var t=Wi.transition,r=nn;try{if(Wi.transition=null,nn=1,n)return n()}finally{nn=r,Wi.transition=t,qt=e,!(qt&6)&&Ya()}}function nb(){xi=vu.current,vn(vu)}function Wl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,hF(t)),Bn!==null)for(t=Bn.return;t!==null;){var r=t;switch(OS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zg();break;case 3:Xu(),vn(si),vn(Pr),WS();break;case 5:GS(r);break;case 4:Xu();break;case 13:vn(wn);break;case 19:vn(wn);break;case 10:BS(r.type._context);break;case 22:case 23:nb()}t=t.return}if(ir=n,Bn=n=ka(n.current,null),lr=xi=e,Wn=0,af=null,QS=wv=tc=0,ei=Ch=null,Ol!==null){for(e=0;e<Ol.length;e++)if(t=Ol[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Ol=null}return n}function bI(n,e){do{var t=Bn;try{if(zS(),Rg.current=a0,o0){for(var r=Mn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}o0=!1}if(ec=0,nr=Gn=Mn=null,Th=!1,rf=0,ZS.current=null,t===null||t.return===null){Wn=1,af=e,Bn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=lr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=JT(o);if(m!==null){m.flags&=-257,ZT(m,o,a,s,e),m.mode&1&&KT(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){KT(s,u,e),rb();break e}l=Error(ke(426))}}else if(xn&&a.mode&1){var _=JT(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),ZT(_,o,a,s,e),US(qu(l,a));break e}}s=l=qu(l,a),Wn!==4&&(Wn=2),Ch===null?Ch=[s]:Ch.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=oI(s,l,e);GT(s,g);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Na===null||!Na.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=aI(s,a,e);GT(s,E);break e}}s=s.return}while(s!==null)}TI(t)}catch(R){e=R,Bn===t&&t!==null&&(Bn=t=t.return);continue}break}while(!0)}function MI(){var n=l0.current;return l0.current=a0,n===null?a0:n}function rb(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),ir===null||!(tc&268435455)&&!(wv&268435455)||pa(ir,lr)}function d0(n,e){var t=qt;qt|=2;var r=MI();(ir!==n||lr!==e)&&(go=null,Wl(n,e));do try{UF();break}catch(i){bI(n,i)}while(!0);if(zS(),qt=t,l0.current=r,Bn!==null)throw Error(ke(261));return ir=null,lr=0,Wn}function UF(){for(;Bn!==null;)EI(Bn)}function FF(){for(;Bn!==null&&!cU();)EI(Bn)}function EI(n){var e=CI(n.alternate,n,xi);n.memoizedProps=n.pendingProps,e===null?TI(n):Bn=e,ZS.current=null}function TI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=IF(t,e),t!==null){t.flags&=32767,Bn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Wn=6,Bn=null;return}}else if(t=PF(t,e,xi),t!==null){Bn=t;return}if(e=e.sibling,e!==null){Bn=e;return}Bn=e=n}while(e!==null);Wn===0&&(Wn=5)}function Al(n,e,t){var r=nn,i=Wi.transition;try{Wi.transition=null,nn=1,zF(n,e,t,r)}finally{Wi.transition=i,nn=r}return null}function zF(n,e,t,r){do Cu();while(Ma!==null);if(qt&6)throw Error(ke(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(xU(n,s),n===ir&&(Bn=ir=null,lr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||vm||(vm=!0,RI($g,function(){return Cu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Wi.transition,Wi.transition=null;var o=nn;nn=1;var a=qt;qt|=4,ZS.current=null,LF(n,t),_I(t,n),sF(Jw),qg=!!Kw,Jw=Kw=null,n.current=t,kF(t),uU(),qt=a,nn=o,Wi.transition=s}else n.current=t;if(vm&&(vm=!1,Ma=n,u0=i),s=n.pendingLanes,s===0&&(Na=null),fU(t.stateNode),ai(n,Ln()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(c0)throw c0=!1,n=v1,v1=null,n;return u0&1&&n.tag!==0&&Cu(),s=n.pendingLanes,s&1?n===y1?Rh++:(Rh=0,y1=n):Rh=0,Ya(),null}function Cu(){if(Ma!==null){var n=oP(u0),e=Wi.transition,t=nn;try{if(Wi.transition=null,nn=16>n?16:n,Ma===null)var r=!1;else{if(n=Ma,Ma=null,u0=0,qt&6)throw Error(ke(331));var i=qt;for(qt|=4,rt=n.current;rt!==null;){var s=rt,o=s.child;if(rt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(rt=u;rt!==null;){var h=rt;switch(h.tag){case 0:case 11:case 15:Ah(8,h,s)}var f=h.child;if(f!==null)f.return=h,rt=f;else for(;rt!==null;){h=rt;var p=h.sibling,m=h.return;if(vI(h),h===u){rt=null;break}if(p!==null){p.return=m,rt=p;break}rt=m}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}rt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,rt=o;else e:for(;rt!==null;){if(s=rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ah(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,rt=g;break e}rt=s.return}}var w=n.current;for(rt=w;rt!==null;){o=rt;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,rt=S;else e:for(o=w;rt!==null;){if(a=rt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_v(9,a)}}catch(R){Rn(a,a.return,R)}if(a===o){rt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,rt=E;break e}rt=a.return}}if(qt=i,Ya(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(hv,n)}catch{}r=!0}return r}finally{nn=t,Wi.transition=e}}return!1}function dA(n,e,t){e=qu(t,e),e=oI(n,e,1),n=Ia(n,e,1),e=Br(),n!==null&&(Ff(n,1,e),ai(n,e))}function Rn(n,e,t){if(n.tag===3)dA(n,n,t);else for(;e!==null;){if(e.tag===3){dA(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Na===null||!Na.has(r))){n=qu(t,n),n=aI(e,n,1),e=Ia(e,n,1),n=Br(),e!==null&&(Ff(e,1,n),ai(e,n));break}}e=e.return}}function BF(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Br(),n.pingedLanes|=n.suspendedLanes&t,ir===n&&(lr&t)===t&&(Wn===4||Wn===3&&(lr&130023424)===lr&&500>Ln()-eb?Wl(n,0):QS|=t),ai(n,e)}function AI(n,e){e===0&&(n.mode&1?(e=am,am<<=1,!(am&130023424)&&(am=4194304)):e=1);var t=Br();n=Po(n,e),n!==null&&(Ff(n,e,t),ai(n,t))}function jF(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),AI(n,t)}function HF(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),AI(n,t)}var CI;CI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||si.current)ri=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ri=!1,RF(n,e,t);ri=!!(n.flags&131072)}else ri=!1,xn&&e.flags&1048576&&NP(e,t0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ig(n,e),n=e.pendingProps;var i=Gu(e,Pr.current);Au(e,t),i=XS(null,e,r,n,i,t);var s=qS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oi(r)?(s=!0,Qg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,HS(e),i.updater=xv,e.stateNode=i,i._reactInternals=e,o1(e,r,n,t),e=c1(null,e,r,!0,s,t)):(e.tag=0,xn&&s&&DS(e),Ur(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Ig(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=GF(r),n=os(r,n),i){case 0:e=l1(null,e,r,n,t);break e;case 1:e=tA(null,e,r,n,t);break e;case 11:e=QT(null,e,r,n,t);break e;case 14:e=eA(null,e,r,os(r.type,n),t);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),l1(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),tA(n,e,r,i,t);case 3:e:{if(dI(e),n===null)throw Error(ke(387));r=e.pendingProps,s=e.memoizedState,i=s.element,FP(n,e),i0(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=qu(Error(ke(423)),e),e=nA(n,e,r,t,i);break e}else if(r!==i){i=qu(Error(ke(424)),e),e=nA(n,e,r,t,i);break e}else for(wi=Pa(e.stateNode.containerInfo.firstChild),Si=e,xn=!0,hs=null,t=OP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wu(),r===i){e=Io(n,e,t);break e}Ur(n,e,r,t)}e=e.child}return e;case 5:return zP(e),n===null&&r1(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Zw(r,i)?o=null:s!==null&&Zw(r,s)&&(e.flags|=32),uI(n,e),Ur(n,e,o,t),e.child;case 6:return n===null&&r1(e),null;case 13:return hI(n,e,t);case 4:return VS(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=$u(e,null,r,t):Ur(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),QT(n,e,r,i,t);case 7:return Ur(n,e,e.pendingProps,t),e.child;case 8:return Ur(n,e,e.pendingProps.children,t),e.child;case 12:return Ur(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,un(n0,r._currentValue),r._currentValue=o,s!==null)if(vs(s.value,o)){if(s.children===i.children&&!si.current){e=Io(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Eo(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),i1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),i1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ur(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Au(e,t),i=Xi(i),r=r(i),e.flags|=1,Ur(n,e,r,t),e.child;case 14:return r=e.type,i=os(r,e.pendingProps),i=os(r.type,i),eA(n,e,r,i,t);case 15:return lI(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:os(r,i),Ig(n,e),e.tag=1,oi(r)?(n=!0,Qg(e)):n=!1,Au(e,t),sI(e,r,i),o1(e,r,i,t),c1(null,e,r,!0,n,t);case 19:return fI(n,e,t);case 22:return cI(n,e,t)}throw Error(ke(156,e.tag))};function RI(n,e){return nP(n,e)}function VF(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(n,e,t,r){return new VF(n,e,t,r)}function ib(n){return n=n.prototype,!(!n||!n.isReactComponent)}function GF(n){if(typeof n=="function")return ib(n)?1:0;if(n!=null){if(n=n.$$typeof,n===bS)return 11;if(n===MS)return 14}return 2}function ka(n,e){var t=n.alternate;return t===null?(t=Hi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function kg(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")ib(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case au:return $l(t.children,i,s,e);case SS:o=8,i|=8;break;case Pw:return n=Hi(12,t,e,i|2),n.elementType=Pw,n.lanes=s,n;case Iw:return n=Hi(13,t,e,i),n.elementType=Iw,n.lanes=s,n;case Nw:return n=Hi(19,t,e,i),n.elementType=Nw,n.lanes=s,n;case zR:return Sv(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case UR:o=10;break e;case FR:o=9;break e;case bS:o=11;break e;case MS:o=14;break e;case ua:o=16,r=null;break e}throw Error(ke(130,n==null?n:typeof n,""))}return e=Hi(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function $l(n,e,t,r){return n=Hi(7,n,r,e),n.lanes=t,n}function Sv(n,e,t,r){return n=Hi(22,n,r,e),n.elementType=zR,n.lanes=t,n.stateNode={isHidden:!1},n}function u_(n,e,t){return n=Hi(6,n,null,e),n.lanes=t,n}function d_(n,e,t){return e=Hi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function WF(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wx(0),this.expirationTimes=Wx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sb(n,e,t,r,i,s,o,a,l){return n=new WF(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hi(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},HS(s),n}function $F(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ou,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function PI(n){if(!n)return za;n=n._reactInternals;e:{if(uc(n)!==n||n.tag!==1)throw Error(ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(n.tag===1){var t=n.type;if(oi(t))return PP(n,t,e)}return e}function II(n,e,t,r,i,s,o,a,l){return n=sb(t,r,!0,n,i,s,o,a,l),n.context=PI(null),t=n.current,r=Br(),i=La(t),s=Eo(r,i),s.callback=e??null,Ia(t,s,i),n.current.lanes=i,Ff(n,i,r),ai(n,r),n}function bv(n,e,t,r){var i=e.current,s=Br(),o=La(i);return t=PI(t),e.context===null?e.context=t:e.pendingContext=t,e=Eo(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ia(i,e,o),n!==null&&(gs(n,i,o,s),Cg(n,i,o)),o}function h0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ob(n,e){hA(n,e),(n=n.alternate)&&hA(n,e)}function XF(){return null}var NI=typeof reportError=="function"?reportError:function(n){console.error(n)};function ab(n){this._internalRoot=n}Mv.prototype.render=ab.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ke(409));bv(n,e,null,null)};Mv.prototype.unmount=ab.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;nc(function(){bv(null,n,null,null)}),e[Ro]=null}};function Mv(n){this._internalRoot=n}Mv.prototype.unstable_scheduleHydration=function(n){if(n){var e=cP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<fa.length&&e!==0&&e<fa[t].priority;t++);fa.splice(t,0,n),t===0&&dP(n)}};function lb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ev(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fA(){}function qF(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=h0(o);s.call(u)}}var o=II(e,r,n,0,null,!1,!1,"",fA);return n._reactRootContainer=o,n[Ro]=o.current,Zh(n.nodeType===8?n.parentNode:n),nc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=h0(l);a.call(u)}}var l=sb(n,0,!1,null,null,!1,!1,"",fA);return n._reactRootContainer=l,n[Ro]=l.current,Zh(n.nodeType===8?n.parentNode:n),nc(function(){bv(e,l,t,r)}),l}function Tv(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=h0(o);a.call(l)}}bv(e,o,n,i)}else o=qF(t,e,n,i,r);return h0(o)}aP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=mh(e.pendingLanes);t!==0&&(AS(e,t|1),ai(e,Ln()),!(qt&6)&&(Yu=Ln()+500,Ya()))}break;case 13:nc(function(){var r=Po(n,1);if(r!==null){var i=Br();gs(r,n,1,i)}}),ob(n,1)}};CS=function(n){if(n.tag===13){var e=Po(n,134217728);if(e!==null){var t=Br();gs(e,n,134217728,t)}ob(n,134217728)}};lP=function(n){if(n.tag===13){var e=La(n),t=Po(n,e);if(t!==null){var r=Br();gs(t,n,e,r)}ob(n,e)}};cP=function(){return nn};uP=function(n,e){var t=nn;try{return nn=n,e()}finally{nn=t}};Hw=function(n,e,t){switch(e){case"input":if(Dw(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=gv(r);if(!i)throw Error(ke(90));jR(r),Dw(r,i)}}}break;case"textarea":VR(n,t);break;case"select":e=t.value,e!=null&&bu(n,!!t.multiple,e,!1)}};KR=tb;JR=nc;var YF={usingClientEntryPoint:!1,Events:[Bf,du,gv,qR,YR,tb]},Yd={findFiberByHostInstance:Dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KF={bundleType:Yd.bundleType,version:Yd.version,rendererPackageName:Yd.rendererPackageName,rendererConfig:Yd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=eP(n),n===null?null:n.stateNode},findFiberByHostInstance:Yd.findFiberByHostInstance||XF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ym.isDisabled&&ym.supportsFiber)try{hv=ym.inject(KF),js=ym}catch{}}Ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YF;Ai.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lb(e))throw Error(ke(200));return $F(n,e,null,t)};Ai.createRoot=function(n,e){if(!lb(n))throw Error(ke(299));var t=!1,r="",i=NI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sb(n,1,!1,null,null,t,!1,r,i),n[Ro]=e.current,Zh(n.nodeType===8?n.parentNode:n),new ab(e)};Ai.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ke(188)):(n=Object.keys(n).join(","),Error(ke(268,n)));return n=eP(e),n=n===null?null:n.stateNode,n};Ai.flushSync=function(n){return nc(n)};Ai.hydrate=function(n,e,t){if(!Ev(e))throw Error(ke(200));return Tv(null,n,e,!0,t)};Ai.hydrateRoot=function(n,e,t){if(!lb(n))throw Error(ke(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=NI;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=II(e,null,n,1,t??null,i,!1,s,o),n[Ro]=e.current,Zh(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Mv(e)};Ai.render=function(n,e,t){if(!Ev(e))throw Error(ke(200));return Tv(null,n,e,!1,t)};Ai.unmountComponentAtNode=function(n){if(!Ev(n))throw Error(ke(40));return n._reactRootContainer?(nc(function(){Tv(null,null,n,!1,function(){n._reactRootContainer=null,n[Ro]=null})}),!0):!1};Ai.unstable_batchedUpdates=tb;Ai.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Ev(t))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return Tv(n,e,t,!1,r)};Ai.version="18.3.1-next-f1338f8080-20240426";function LI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LI)}catch(n){console.error(n)}}LI(),LR.exports=Ai;var dd=LR.exports;const kI=pS(dd);var cb,pA=dd;cb=pA.createRoot,pA.hydrateRoot;const JF=1,ZF=1e6;let h_=0;function QF(){return h_=(h_+1)%Number.MAX_SAFE_INTEGER,h_.toString()}const f_=new Map,mA=n=>{if(f_.has(n))return;const e=setTimeout(()=>{f_.delete(n),Ph({type:"REMOVE_TOAST",toastId:n})},ZF);f_.set(n,e)},e4=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,JF)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?mA(t):n.toasts.forEach(r=>{mA(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Dg=[];let Og={toasts:[]};function Ph(n){Og=e4(Og,n),Dg.forEach(e=>{e(Og)})}function t4({...n}){const e=QF(),t=i=>Ph({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Ph({type:"DISMISS_TOAST",toastId:e});return Ph({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function ub(){const[n,e]=L.useState(Og);return L.useEffect(()=>(Dg.push(e),()=>{const t=Dg.indexOf(e);t>-1&&Dg.splice(t,1)}),[n]),{...n,toast:t4,dismiss:t=>Ph({type:"DISMISS_TOAST",toastId:t})}}function sn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function n4(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function DI(...n){return e=>n.forEach(t=>n4(t,e))}function Yi(...n){return L.useCallback(DI(...n),n)}function r4(n,e=[]){let t=[];function r(s,o){const a=L.createContext(o),l=t.length;t=[...t,o];function u(f){const{scope:p,children:m,...v}=f,x=(p==null?void 0:p[n][l])||a,_=L.useMemo(()=>v,Object.values(v));return M.jsx(x.Provider,{value:_,children:m})}function h(f,p){const m=(p==null?void 0:p[n][l])||a,v=L.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const i=()=>{const s=t.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return L.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,i4(i,...e)]}function i4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...a,...f}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var lf=L.forwardRef((n,e)=>{const{children:t,...r}=n,i=L.Children.toArray(t),s=i.find(s4);if(s){const o=s.props.children,a=i.map(l=>l===s?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return M.jsx(w1,{...r,ref:e,children:L.isValidElement(o)?L.cloneElement(o,void 0,a):null})}return M.jsx(w1,{...r,ref:e,children:t})});lf.displayName="Slot";var w1=L.forwardRef((n,e)=>{const{children:t,...r}=n;if(L.isValidElement(t)){const i=a4(t);return L.cloneElement(t,{...o4(r,t.props),ref:e?DI(e,i):i})}return L.Children.count(t)>1?L.Children.only(null):null});w1.displayName="SlotClone";var OI=({children:n})=>M.jsx(M.Fragment,{children:n});function s4(n){return L.isValidElement(n)&&n.type===OI}function o4(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function a4(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function UI(n){const e=n+"CollectionProvider",[t,r]=r4(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:x}=m,_=Be.useRef(null),g=Be.useRef(new Map).current;return M.jsx(i,{scope:v,itemMap:g,collectionRef:_,children:x})};o.displayName=e;const a=n+"CollectionSlot",l=Be.forwardRef((m,v)=>{const{scope:x,children:_}=m,g=s(a,x),w=Yi(v,g.collectionRef);return M.jsx(lf,{ref:w,children:_})});l.displayName=a;const u=n+"CollectionItemSlot",h="data-radix-collection-item",f=Be.forwardRef((m,v)=>{const{scope:x,children:_,...g}=m,w=Be.useRef(null),S=Yi(v,w),E=s(u,x);return Be.useEffect(()=>(E.itemMap.set(w,{ref:w,...g}),()=>void E.itemMap.delete(w))),M.jsx(lf,{[h]:"",ref:S,children:_})});f.displayName=u;function p(m){const v=s(n+"CollectionConsumer",m);return Be.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const g=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((E,R)=>g.indexOf(E.ref.current)-g.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,r]}function db(n,e=[]){let t=[];function r(s,o){const a=L.createContext(o),l=t.length;t=[...t,o];const u=f=>{var g;const{scope:p,children:m,...v}=f,x=((g=p==null?void 0:p[n])==null?void 0:g[l])||a,_=L.useMemo(()=>v,Object.values(v));return M.jsx(x.Provider,{value:_,children:m})};u.displayName=s+"Provider";function h(f,p){var x;const m=((x=p==null?void 0:p[n])==null?void 0:x[l])||a,v=L.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,h]}const i=()=>{const s=t.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return L.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,l4(i,...e)]}function l4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...a,...f}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var c4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],kn=c4.reduce((n,e)=>{const t=L.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?lf:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(a,{...o,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function FI(n,e){n&&dd.flushSync(()=>n.dispatchEvent(e))}function ys(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n}),L.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function u4(n,e=globalThis==null?void 0:globalThis.document){const t=ys(n);L.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var d4="DismissableLayer",S1="dismissableLayer.update",h4="dismissableLayer.pointerDownOutside",f4="dismissableLayer.focusOutside",gA,zI=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hb=L.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,u=L.useContext(zI),[h,f]=L.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=L.useState({}),v=Yi(e,P=>f(P)),x=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(_),w=h?x.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,E=w>=g,R=m4(P=>{const k=P.target,N=[...u.branches].some(C=>C.contains(k));!E||N||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},p),A=g4(P=>{const k=P.target;[...u.branches].some(C=>C.contains(k))||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},p);return u4(P=>{w===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},p),L.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(gA=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),vA(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=gA)}},[h,p,t,u]),L.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),vA())},[h,u]),L.useEffect(()=>{const P=()=>m({});return document.addEventListener(S1,P),()=>document.removeEventListener(S1,P)},[]),M.jsx(kn.div,{...l,ref:v,style:{pointerEvents:S?E?"auto":"none":void 0,...n.style},onFocusCapture:sn(n.onFocusCapture,A.onFocusCapture),onBlurCapture:sn(n.onBlurCapture,A.onBlurCapture),onPointerDownCapture:sn(n.onPointerDownCapture,R.onPointerDownCapture)})});hb.displayName=d4;var p4="DismissableLayerBranch",BI=L.forwardRef((n,e)=>{const t=L.useContext(zI),r=L.useRef(null),i=Yi(e,r);return L.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),M.jsx(kn.div,{...n,ref:i})});BI.displayName=p4;function m4(n,e=globalThis==null?void 0:globalThis.document){const t=ys(n),r=L.useRef(!1),i=L.useRef(()=>{});return L.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){jI(h4,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function g4(n,e=globalThis==null?void 0:globalThis.document){const t=ys(n),r=L.useRef(!1);return L.useEffect(()=>{const i=s=>{s.target&&!r.current&&jI(f4,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vA(){const n=new CustomEvent(S1);document.dispatchEvent(n)}function jI(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?FI(i,s):i.dispatchEvent(s)}var v4=hb,y4=BI,Ba=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},x4="Portal",HI=L.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=L.useState(!1);Ba(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?kI.createPortal(M.jsx(kn.div,{...r,ref:e}),o):null});HI.displayName=x4;function _4(n,e){return L.useReducer((t,r)=>e[t][r]??t,n)}var Av=n=>{const{present:e,children:t}=n,r=w4(e),i=typeof t=="function"?t({present:r.isPresent}):L.Children.only(t),s=Yi(r.ref,S4(i));return typeof t=="function"||r.isPresent?L.cloneElement(i,{ref:s}):null};Av.displayName="Presence";function w4(n){const[e,t]=L.useState(),r=L.useRef({}),i=L.useRef(n),s=L.useRef("none"),o=n?"mounted":"unmounted",[a,l]=_4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const u=xm(r.current);s.current=a==="mounted"?u:"none"},[a]),Ba(()=>{const u=r.current,h=i.current;if(h!==n){const p=s.current,m=xm(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Ba(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=m=>{const x=xm(r.current).includes(m.animationName);if(m.target===e&&x&&(l("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=m=>{m.target===e&&(s.current=xm(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function xm(n){return(n==null?void 0:n.animationName)||"none"}function S4(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function fb({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=b4({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=ys(t),l=L.useCallback(u=>{if(s){const f=typeof u=="function"?u(n):u;f!==n&&a(f)}else i(u)},[s,n,i,a]);return[o,l]}function b4({defaultProp:n,onChange:e}){const t=L.useState(n),[r]=t,i=L.useRef(r),s=ys(e);return L.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}var M4="VisuallyHidden",Cv=L.forwardRef((n,e)=>M.jsx(kn.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Cv.displayName=M4;var E4=Cv,pb="ToastProvider",[mb,T4,A4]=UI("Toast"),[VI,zK]=db("Toast",[A4]),[C4,Rv]=VI(pb),GI=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=L.useState(null),[u,h]=L.useState(0),f=L.useRef(!1),p=L.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${pb}\`. Expected non-empty \`string\`.`),M.jsx(mb.Provider,{scope:e,children:M.jsx(C4,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:L.useCallback(()=>h(m=>m+1),[]),onToastRemove:L.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};GI.displayName=pb;var WI="ToastViewport",R4=["F8"],b1="toast.viewportPause",M1="toast.viewportResume",$I=L.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=R4,label:i="Notifications ({hotkey})",...s}=n,o=Rv(WI,t),a=T4(t),l=L.useRef(null),u=L.useRef(null),h=L.useRef(null),f=L.useRef(null),p=Yi(e,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;L.useEffect(()=>{const _=g=>{var S;r.length!==0&&r.every(E=>g[E]||g.code===E)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),L.useEffect(()=>{const _=l.current,g=f.current;if(v&&_&&g){const w=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(b1);g.dispatchEvent(A),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(M1);g.dispatchEvent(A),o.isClosePausedRef.current=!1}},E=A=>{!_.contains(A.relatedTarget)&&S()},R=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",w),_.addEventListener("focusout",E),_.addEventListener("pointermove",w),_.addEventListener("pointerleave",R),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",w),_.removeEventListener("focusout",E),_.removeEventListener("pointermove",w),_.removeEventListener("pointerleave",R),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[v,o.isClosePausedRef]);const x=L.useCallback(({tabbingDirection:_})=>{const w=a().map(S=>{const E=S.ref.current,R=[E,...H4(E)];return _==="forwards"?R:R.reverse()});return(_==="forwards"?w.reverse():w).flat()},[a]);return L.useEffect(()=>{const _=f.current;if(_){const g=w=>{var R,A,P;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const k=document.activeElement,N=w.shiftKey;if(w.target===_&&N){(R=u.current)==null||R.focus();return}const F=x({tabbingDirection:N?"backwards":"forwards"}),W=F.findIndex(q=>q===k);p_(F.slice(W+1))?w.preventDefault():N?(A=u.current)==null||A.focus():(P=h.current)==null||P.focus()}};return _.addEventListener("keydown",g),()=>_.removeEventListener("keydown",g)}},[a,x]),M.jsxs(y4,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&M.jsx(E1,{ref:u,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"forwards"});p_(_)}}),M.jsx(mb.Slot,{scope:t,children:M.jsx(kn.ol,{tabIndex:-1,...s,ref:p})}),v&&M.jsx(E1,{ref:h,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"backwards"});p_(_)}})]})});$I.displayName=WI;var XI="ToastFocusProxy",E1=L.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Rv(XI,t);return M.jsx(Cv,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});E1.displayName=XI;var Pv="Toast",P4="toast.swipeStart",I4="toast.swipeMove",N4="toast.swipeCancel",L4="toast.swipeEnd",qI=L.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a=!0,l]=fb({prop:r,defaultProp:i,onChange:s});return M.jsx(Av,{present:t||a,children:M.jsx(O4,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ys(n.onPause),onResume:ys(n.onResume),onSwipeStart:sn(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:sn(n.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:sn(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:sn(n.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});qI.displayName=Pv;var[k4,D4]=VI(Pv,{onClose(){}}),O4=L.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...v}=n,x=Rv(Pv,t),[_,g]=L.useState(null),w=Yi(e,q=>g(q)),S=L.useRef(null),E=L.useRef(null),R=i||x.duration,A=L.useRef(0),P=L.useRef(R),k=L.useRef(0),{onToastAdd:N,onToastRemove:C}=x,O=ys(()=>{var Z;(_==null?void 0:_.contains(document.activeElement))&&((Z=x.viewport)==null||Z.focus()),o()}),F=L.useCallback(q=>{!q||q===1/0||(window.clearTimeout(k.current),A.current=new Date().getTime(),k.current=window.setTimeout(O,q))},[O]);L.useEffect(()=>{const q=x.viewport;if(q){const Z=()=>{F(P.current),u==null||u()},K=()=>{const Q=new Date().getTime()-A.current;P.current=P.current-Q,window.clearTimeout(k.current),l==null||l()};return q.addEventListener(b1,K),q.addEventListener(M1,Z),()=>{q.removeEventListener(b1,K),q.removeEventListener(M1,Z)}}},[x.viewport,R,l,u,F]),L.useEffect(()=>{s&&!x.isClosePausedRef.current&&F(R)},[s,R,x.isClosePausedRef,F]),L.useEffect(()=>(N(),()=>C()),[N,C]);const W=L.useMemo(()=>_?tN(_):null,[_]);return x.viewport?M.jsxs(M.Fragment,{children:[W&&M.jsx(U4,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:W}),M.jsx(k4,{scope:t,onClose:O,children:dd.createPortal(M.jsx(mb.ItemSlot,{scope:t,children:M.jsx(v4,{asChild:!0,onEscapeKeyDown:sn(a,()=>{x.isFocusedToastEscapeKeyDownRef.current||O(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:M.jsx(kn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:sn(n.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:sn(n.onPointerDown,q=>{q.button===0&&(S.current={x:q.clientX,y:q.clientY})}),onPointerMove:sn(n.onPointerMove,q=>{if(!S.current)return;const Z=q.clientX-S.current.x,K=q.clientY-S.current.y,Q=!!E.current,D=["left","right"].includes(x.swipeDirection),V=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,X=D?V(0,Z):0,J=D?0:V(0,K),oe=q.pointerType==="touch"?10:2,ye={x:X,y:J},ie={originalEvent:q,delta:ye};Q?(E.current=ye,_m(I4,f,ie,{discrete:!1})):yA(ye,x.swipeDirection,oe)?(E.current=ye,_m(P4,h,ie,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(Z)>oe||Math.abs(K)>oe)&&(S.current=null)}),onPointerUp:sn(n.onPointerUp,q=>{const Z=E.current,K=q.target;if(K.hasPointerCapture(q.pointerId)&&K.releasePointerCapture(q.pointerId),E.current=null,S.current=null,Z){const Q=q.currentTarget,D={originalEvent:q,delta:Z};yA(Z,x.swipeDirection,x.swipeThreshold)?_m(L4,m,D,{discrete:!0}):_m(N4,p,D,{discrete:!0}),Q.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),U4=n=>{const{__scopeToast:e,children:t,...r}=n,i=Rv(Pv,e),[s,o]=L.useState(!1),[a,l]=L.useState(!1);return B4(()=>o(!0)),L.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:M.jsx(HI,{asChild:!0,children:M.jsx(Cv,{...r,children:s&&M.jsxs(M.Fragment,{children:[i.label," ",t]})})})},F4="ToastTitle",YI=L.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return M.jsx(kn.div,{...r,ref:e})});YI.displayName=F4;var z4="ToastDescription",KI=L.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return M.jsx(kn.div,{...r,ref:e})});KI.displayName=z4;var JI="ToastAction",ZI=L.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?M.jsx(eN,{altText:t,asChild:!0,children:M.jsx(gb,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${JI}\`. Expected non-empty \`string\`.`),null)});ZI.displayName=JI;var QI="ToastClose",gb=L.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=D4(QI,t);return M.jsx(eN,{asChild:!0,children:M.jsx(kn.button,{type:"button",...r,ref:e,onClick:sn(n.onClick,i.onClose)})})});gb.displayName=QI;var eN=L.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return M.jsx(kn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function tN(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),j4(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...tN(r))}}),e}function _m(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?FI(i,s):i.dispatchEvent(s)}var yA=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function B4(n=()=>{}){const e=ys(n);Ba(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function j4(n){return n.nodeType===n.ELEMENT_NODE}function H4(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function p_(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var V4=GI,nN=$I,rN=qI,iN=YI,sN=KI,oN=ZI,aN=gb;function lN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=lN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function cN(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=lN(n))&&(r&&(r+=" "),r+=e);return r}const xA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,_A=cN,Iv=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return _A(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const h=t==null?void 0:t[u],f=s==null?void 0:s[u];if(h===null)return null;const p=xA(h)||xA(f);return i[u][p]}),a=t&&Object.entries(t).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(v=>{let[x,_]=v;return Array.isArray(_)?_.includes({...s,...a}[x]):{...s,...a}[x]===_})?[...u,f,p]:u},[]);return _A(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uN=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=L.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>L.createElement("svg",{ref:l,...W4,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:uN("lucide",i),...a},[...o.map(([u,h])=>L.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(n,e)=>{const t=L.forwardRef(({className:r,...i},s)=>L.createElement($4,{ref:s,iconNode:e,className:uN(`lucide-${G4(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=rn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=rn("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=rn("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=rn("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=rn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=rn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=rn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=rn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=rn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=rn("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=rn("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=rn("Orbit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=rn("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=rn("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=rn("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=rn("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=rn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=rn("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=rn("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=rn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=rn("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=rn("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=rn("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=rn("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=rn("Telescope",[["path",{d:"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44",key:"k4qptu"}],["path",{d:"m13.56 11.747 4.332-.924",key:"19l80z"}],["path",{d:"m16 21-3.105-6.21",key:"7oh9d"}],["path",{d:"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z",key:"m7xp4m"}],["path",{d:"m6.158 8.633 1.114 4.456",key:"74o979"}],["path",{d:"m8 21 3.105-6.21",key:"1fvxut"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=rn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=rn("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=rn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=rn("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),vb="-",oz=n=>{const e=lz(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(vb);return a[0]===""&&a.length!==1&&a.shift(),pN(a,e)||az(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},pN=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?pN(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(vb);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},bA=/^\[(.+)\]$/,az=n=>{if(bA.test(n)){const e=bA.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},lz=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return uz(Object.entries(n.classGroups),t).forEach(([s,o])=>{R1(o,r,s,e)}),r},R1=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:MA(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(cz(i)){R1(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{R1(o,MA(e,s),t,r)})})},MA=(n,e)=>{let t=n;return e.split(vb).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},cz=n=>n.isThemeGetter,uz=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,dz=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},mN="!",hz=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let u=0,h=0,f;for(let _=0;_<a.length;_++){let g=a[_];if(u===0){if(g===i&&(r||a.slice(_,_+s)===e)){l.push(a.slice(h,_)),h=_+s;continue}if(g==="/"){f=_;continue}}g==="["?u++:g==="]"&&u--}const p=l.length===0?a:a.substring(h),m=p.startsWith(mN),v=m?p.substring(1):p,x=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:x}};return t?a=>t({className:a,parseClassName:o}):o},fz=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},pz=n=>({cache:dz(n.cacheSize),parseClassName:hz(n),...oz(n)}),mz=/\s+/,gz=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(mz);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);let v=!!m,x=r(v?p.substring(0,m):p);if(!x){if(!v){a=u+(a.length>0?" "+a:a);continue}if(x=r(p),!x){a=u+(a.length>0?" "+a:a);continue}v=!1}const _=fz(h).join(":"),g=f?_+mN:_,w=g+x;if(s.includes(w))continue;s.push(w);const S=i(x,v);for(let E=0;E<S.length;++E){const R=S[E];s.push(g+R)}a=u+(a.length>0?" "+a:a)}return a};function vz(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=gN(e))&&(r&&(r+=" "),r+=t);return r}const gN=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=gN(n[r]))&&(t&&(t+=" "),t+=e);return t};function yz(n,...e){let t,r,i,s=o;function o(l){const u=e.reduce((h,f)=>f(h),n());return t=pz(u),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const h=gz(l,t);return i(l,h),h}return function(){return s(vz.apply(null,arguments))}}const dn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},vN=/^\[(?:([a-z-]+):)?(.+)\]$/i,xz=/^\d+\/\d+$/,_z=new Set(["px","full","screen"]),wz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Mz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ez=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,io=n=>Ru(n)||_z.has(n)||xz.test(n),Zo=n=>hd(n,"length",Lz),Ru=n=>!!n&&!Number.isNaN(Number(n)),g_=n=>hd(n,"number",Ru),Kd=n=>!!n&&Number.isInteger(Number(n)),Tz=n=>n.endsWith("%")&&Ru(n.slice(0,-1)),Rt=n=>vN.test(n),Qo=n=>wz.test(n),Az=new Set(["length","size","percentage"]),Cz=n=>hd(n,Az,yN),Rz=n=>hd(n,"position",yN),Pz=new Set(["image","url"]),Iz=n=>hd(n,Pz,Dz),Nz=n=>hd(n,"",kz),Jd=()=>!0,hd=(n,e,t)=>{const r=vN.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Lz=n=>Sz.test(n)&&!bz.test(n),yN=()=>!1,kz=n=>Mz.test(n),Dz=n=>Ez.test(n),Oz=()=>{const n=dn("colors"),e=dn("spacing"),t=dn("blur"),r=dn("brightness"),i=dn("borderColor"),s=dn("borderRadius"),o=dn("borderSpacing"),a=dn("borderWidth"),l=dn("contrast"),u=dn("grayscale"),h=dn("hueRotate"),f=dn("invert"),p=dn("gap"),m=dn("gradientColorStops"),v=dn("gradientColorStopPositions"),x=dn("inset"),_=dn("margin"),g=dn("opacity"),w=dn("padding"),S=dn("saturate"),E=dn("scale"),R=dn("sepia"),A=dn("skew"),P=dn("space"),k=dn("translate"),N=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Rt,e],F=()=>[Rt,e],W=()=>["",io,Zo],q=()=>["auto",Ru,Rt],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Rt],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[Ru,Rt];return{cacheSize:500,separator:":",theme:{colors:[Jd],spacing:[io,Zo],blur:["none","",Qo,Rt],brightness:J(),borderColor:[n],borderRadius:["none","","full",Qo,Rt],borderSpacing:F(),borderWidth:W(),contrast:J(),grayscale:V(),hueRotate:J(),invert:V(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[Tz,Zo],inset:O(),margin:O(),opacity:J(),padding:F(),saturate:J(),scale:J(),sepia:V(),skew:J(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Rt]}],container:["container"],columns:[{columns:[Qo]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Rt]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kd,Rt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Rt]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Kd,Rt]}],"grid-cols":[{"grid-cols":[Jd]}],"col-start-end":[{col:["auto",{span:["full",Kd,Rt]},Rt]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Jd]}],"row-start-end":[{row:["auto",{span:[Kd,Rt]},Rt]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Rt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Rt,e]}],"min-w":[{"min-w":[Rt,e,"min","max","fit"]}],"max-w":[{"max-w":[Rt,e,"none","full","min","max","fit","prose",{screen:[Qo]},Qo]}],h:[{h:[Rt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Rt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Rt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Rt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qo,Zo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",g_]}],"font-family":[{font:[Jd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Rt]}],"line-clamp":[{"line-clamp":["none",Ru,g_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",io,Rt]}],"list-image":[{"list-image":["none",Rt]}],"list-style-type":[{list:["none","disc","decimal",Rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",io,Zo]}],"underline-offset":[{"underline-offset":["auto",io,Rt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),Rz]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Cz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Iz]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[io,Rt]}],"outline-w":[{outline:[io,Zo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[io,Zo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Qo,Nz]}],"shadow-color":[{shadow:[Jd]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Qo,Rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Rt]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Rt]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Kd,Rt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Rt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[io,Zo,g_]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Uz=yz(Oz);function Dn(...n){return Uz(cN(n))}const Fz=V4,xN=L.forwardRef(({className:n,...e},t)=>M.jsx(nN,{ref:t,className:Dn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));xN.displayName=nN.displayName;const zz=Iv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_N=L.forwardRef(({className:n,variant:e,...t},r)=>M.jsx(rN,{ref:r,className:Dn(zz({variant:e}),n),...t}));_N.displayName=rN.displayName;const Bz=L.forwardRef(({className:n,...e},t)=>M.jsx(oN,{ref:t,className:Dn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));Bz.displayName=oN.displayName;const wN=L.forwardRef(({className:n,...e},t)=>M.jsx(aN,{ref:t,className:Dn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:M.jsx(sz,{className:"h-4 w-4"})}));wN.displayName=aN.displayName;const SN=L.forwardRef(({className:n,...e},t)=>M.jsx(iN,{ref:t,className:Dn("text-sm font-semibold",n),...e}));SN.displayName=iN.displayName;const bN=L.forwardRef(({className:n,...e},t)=>M.jsx(sN,{ref:t,className:Dn("text-sm opacity-90",n),...e}));bN.displayName=sN.displayName;function jz(){const{toasts:n}=ub();return M.jsxs(Fz,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return M.jsxs(_N,{...s,children:[M.jsxs("div",{className:"grid gap-1",children:[t&&M.jsx(SN,{children:t}),r&&M.jsx(bN,{children:r})]}),i,M.jsx(wN,{})]},e)}),M.jsx(xN,{})]})}var EA=["light","dark"],Hz="(prefers-color-scheme: dark)",Vz=L.createContext(void 0),Gz={setTheme:n=>{},themes:[]},Wz=()=>{var n;return(n=L.useContext(Vz))!=null?n:Gz};L.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let u=s==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=i?EA.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(v,x=!1,_=!0)=>{let g=o?o[v]:v,w=x?v+"|| ''":`'${g}'`,S="";return i&&_&&!x&&EA.includes(v)&&(S+=`d.style.colorScheme = '${v}';`),t==="class"?x||g?S+=`c.add(${w})`:S+="null":g&&(S+=`d[s](n,${w})`),S},m=n?`!function(){${h}${p(n)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${Hz}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(s,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(s,!1,!1)};}${f}}catch(t){}}();`;return L.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var $z=n=>{switch(n){case"success":return Yz;case"info":return Jz;case"warning":return Kz;case"error":return Zz;default:return null}},Xz=Array(12).fill(0),qz=({visible:n})=>Be.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},Be.createElement("div",{className:"sonner-spinner"},Xz.map((e,t)=>Be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Yz=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Kz=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Jz=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Zz=Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Qz=()=>{let[n,e]=Be.useState(document.hidden);return Be.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},P1=1,e5=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:P1++,s=this.toasts.find(a=>a.id===i),o=n.dismissible===void 0?!0:n.dismissible;return s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...n,id:i,title:t}),{...a,...n,id:i,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:i}),i},this.dismiss=n=>(n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),i=t!==void 0;return r.then(async s=>{if(n5(s)&&!s.ok){i=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${s.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:t,type:"error",message:o,description:a})}else if(e.success!==void 0){i=!1;let o=typeof e.success=="function"?await e.success(s):e.success,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:t,type:"success",message:o,description:a})}}).catch(async s=>{if(e.error!==void 0){i=!1;let o=typeof e.error=="function"?await e.error(s):e.error,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:t,type:"error",message:o,description:a})}}).finally(()=>{var s;i&&(this.dismiss(t),t=void 0),(s=e.finally)==null||s.call(e)}),t},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||P1++;return this.create({jsx:n(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},yi=new e5,t5=(n,e)=>{let t=(e==null?void 0:e.id)||P1++;return yi.addToast({title:n,...e,id:t}),t},n5=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",r5=t5,i5=()=>yi.toasts;Object.assign(r5,{success:yi.success,info:yi.info,warning:yi.warning,error:yi.error,custom:yi.custom,message:yi.message,promise:yi.promise,dismiss:yi.dismiss,loading:yi.loading},{getHistory:i5});function s5(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}s5(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function wm(n){return n.label!==void 0}var o5=3,a5="32px",l5=4e3,c5=356,u5=14,d5=20,h5=200;function f5(...n){return n.filter(Boolean).join(" ")}var p5=n=>{var e,t,r,i,s,o,a,l,u,h;let{invert:f,toast:p,unstyled:m,interacting:v,setHeights:x,visibleToasts:_,heights:g,index:w,toasts:S,expanded:E,removeToast:R,defaultRichColors:A,closeButton:P,style:k,cancelButtonStyle:N,actionButtonStyle:C,className:O="",descriptionClassName:F="",duration:W,position:q,gap:Z,loadingIcon:K,expandByDefault:Q,classNames:D,icons:V,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:J,cn:oe}=n,[ye,ie]=Be.useState(!1),[xe,Me]=Be.useState(!1),[Re,He]=Be.useState(!1),[lt,ze]=Be.useState(!1),[Je,ft]=Be.useState(0),[Ve,B]=Be.useState(0),Ne=Be.useRef(null),Ee=Be.useRef(null),Ie=w===0,ge=w+1<=_,De=p.type,Ae=p.dismissible!==!1,qe=p.className||"",vt=p.descriptionClassName||"",H=Be.useMemo(()=>g.findIndex(fe=>fe.toastId===p.id)||0,[g,p.id]),U=Be.useMemo(()=>{var fe;return(fe=p.closeButton)!=null?fe:P},[p.closeButton,P]),se=Be.useMemo(()=>p.duration||W||l5,[p.duration,W]),de=Be.useRef(0),ve=Be.useRef(0),pe=Be.useRef(0),Ze=Be.useRef(null),[Fe,tt]=q.split("-"),nt=Be.useMemo(()=>g.reduce((fe,$,_e)=>_e>=H?fe:fe+$.height,0),[g,H]),Ce=Qz(),Ye=p.invert||f,ct=De==="loading";ve.current=Be.useMemo(()=>H*Z+nt,[H,nt]),Be.useEffect(()=>{ie(!0)},[]),Be.useLayoutEffect(()=>{if(!ye)return;let fe=Ee.current,$=fe.style.height;fe.style.height="auto";let _e=fe.getBoundingClientRect().height;fe.style.height=$,B(_e),x(Se=>Se.find(Ue=>Ue.toastId===p.id)?Se.map(Ue=>Ue.toastId===p.id?{...Ue,height:_e}:Ue):[{toastId:p.id,height:_e,position:p.position},...Se])},[ye,p.title,p.description,x,p.id]);let Y=Be.useCallback(()=>{Me(!0),ft(ve.current),x(fe=>fe.filter($=>$.toastId!==p.id)),setTimeout(()=>{R(p)},h5)},[p,R,x,ve]);Be.useEffect(()=>{if(p.promise&&De==="loading"||p.duration===1/0||p.type==="loading")return;let fe,$=se;return E||v||J&&Ce?(()=>{if(pe.current<de.current){let _e=new Date().getTime()-de.current;$=$-_e}pe.current=new Date().getTime()})():$!==1/0&&(de.current=new Date().getTime(),fe=setTimeout(()=>{var _e;(_e=p.onAutoClose)==null||_e.call(p,p),Y()},$)),()=>clearTimeout(fe)},[E,v,Q,p,se,Y,p.promise,De,J,Ce]),Be.useEffect(()=>{let fe=Ee.current;if(fe){let $=fe.getBoundingClientRect().height;return B($),x(_e=>[{toastId:p.id,height:$,position:p.position},..._e]),()=>x(_e=>_e.filter(Se=>Se.toastId!==p.id))}},[x,p.id]),Be.useEffect(()=>{p.delete&&Y()},[Y,p.delete]);function ae(){return V!=null&&V.loading?Be.createElement("div",{className:"sonner-loader","data-visible":De==="loading"},V.loading):K?Be.createElement("div",{className:"sonner-loader","data-visible":De==="loading"},K):Be.createElement(qz,{visible:De==="loading"})}return Be.createElement("li",{"aria-live":p.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ee,className:oe(O,qe,D==null?void 0:D.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[De],(t=p==null?void 0:p.classNames)==null?void 0:t[De]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:A,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":ye,"data-promise":!!p.promise,"data-removed":xe,"data-visible":ge,"data-y-position":Fe,"data-x-position":tt,"data-index":w,"data-front":Ie,"data-swiping":Re,"data-dismissible":Ae,"data-type":De,"data-invert":Ye,"data-swipe-out":lt,"data-expanded":!!(E||Q&&ye),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${xe?Je:ve.current}px`,"--initial-height":Q?"auto":`${Ve}px`,...k,...p.style},onPointerDown:fe=>{ct||!Ae||(Ne.current=new Date,ft(ve.current),fe.target.setPointerCapture(fe.pointerId),fe.target.tagName!=="BUTTON"&&(He(!0),Ze.current={x:fe.clientX,y:fe.clientY}))},onPointerUp:()=>{var fe,$,_e,Se;if(lt||!Ae)return;Ze.current=null;let Ue=Number(((fe=Ee.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Pe=new Date().getTime()-(($=Ne.current)==null?void 0:$.getTime()),be=Math.abs(Ue)/Pe;if(Math.abs(Ue)>=d5||be>.11){ft(ve.current),(_e=p.onDismiss)==null||_e.call(p,p),Y(),ze(!0);return}(Se=Ee.current)==null||Se.style.setProperty("--swipe-amount","0px"),He(!1)},onPointerMove:fe=>{var $;if(!Ze.current||!Ae)return;let _e=fe.clientY-Ze.current.y,Se=fe.clientX-Ze.current.x,Ue=(Fe==="top"?Math.min:Math.max)(0,_e),Pe=fe.pointerType==="touch"?10:2;Math.abs(Ue)>Pe?($=Ee.current)==null||$.style.setProperty("--swipe-amount",`${_e}px`):Math.abs(Se)>Pe&&(Ze.current=null)}},U&&!p.jsx?Be.createElement("button",{"aria-label":X,"data-disabled":ct,"data-close-button":!0,onClick:ct||!Ae?()=>{}:()=>{var fe;Y(),(fe=p.onDismiss)==null||fe.call(p,p)},className:oe(D==null?void 0:D.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},Be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,p.jsx||Be.isValidElement(p.title)?p.jsx||p.title:Be.createElement(Be.Fragment,null,De||p.icon||p.promise?Be.createElement("div",{"data-icon":"",className:oe(D==null?void 0:D.icon,(s=p==null?void 0:p.classNames)==null?void 0:s.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ae():null,p.type!=="loading"?p.icon||(V==null?void 0:V[De])||$z(De):null):null,Be.createElement("div",{"data-content":"",className:oe(D==null?void 0:D.content,(o=p==null?void 0:p.classNames)==null?void 0:o.content)},Be.createElement("div",{"data-title":"",className:oe(D==null?void 0:D.title,(a=p==null?void 0:p.classNames)==null?void 0:a.title)},p.title),p.description?Be.createElement("div",{"data-description":"",className:oe(F,vt,D==null?void 0:D.description,(l=p==null?void 0:p.classNames)==null?void 0:l.description)},p.description):null),Be.isValidElement(p.cancel)?p.cancel:p.cancel&&wm(p.cancel)?Be.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||N,onClick:fe=>{var $,_e;wm(p.cancel)&&Ae&&((_e=($=p.cancel).onClick)==null||_e.call($,fe),Y())},className:oe(D==null?void 0:D.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,Be.isValidElement(p.action)?p.action:p.action&&wm(p.action)?Be.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||C,onClick:fe=>{var $,_e;wm(p.action)&&(fe.defaultPrevented||((_e=($=p.action).onClick)==null||_e.call($,fe),Y()))},className:oe(D==null?void 0:D.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function TA(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var m5=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:s,className:o,offset:a,theme:l="light",richColors:u,duration:h,style:f,visibleToasts:p=o5,toastOptions:m,dir:v=TA(),gap:x=u5,loadingIcon:_,icons:g,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:S,cn:E=f5}=n,[R,A]=Be.useState([]),P=Be.useMemo(()=>Array.from(new Set([t].concat(R.filter(J=>J.position).map(J=>J.position)))),[R,t]),[k,N]=Be.useState([]),[C,O]=Be.useState(!1),[F,W]=Be.useState(!1),[q,Z]=Be.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=Be.useRef(null),Q=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=Be.useRef(null),V=Be.useRef(!1),X=Be.useCallback(J=>{var oe;(oe=R.find(ye=>ye.id===J.id))!=null&&oe.delete||yi.dismiss(J.id),A(ye=>ye.filter(({id:ie})=>ie!==J.id))},[R]);return Be.useEffect(()=>yi.subscribe(J=>{if(J.dismiss){A(oe=>oe.map(ye=>ye.id===J.id?{...ye,delete:!0}:ye));return}setTimeout(()=>{kI.flushSync(()=>{A(oe=>{let ye=oe.findIndex(ie=>ie.id===J.id);return ye!==-1?[...oe.slice(0,ye),{...oe[ye],...J},...oe.slice(ye+1)]:[J,...oe]})})})}),[]),Be.useEffect(()=>{if(l!=="system"){Z(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Z("dark"):Z("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:J})=>{Z(J?"dark":"light")})},[l]),Be.useEffect(()=>{R.length<=1&&O(!1)},[R]),Be.useEffect(()=>{let J=oe=>{var ye,ie;r.every(xe=>oe[xe]||oe.code===xe)&&(O(!0),(ye=K.current)==null||ye.focus()),oe.code==="Escape"&&(document.activeElement===K.current||(ie=K.current)!=null&&ie.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[r]),Be.useEffect(()=>{if(K.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,V.current=!1)}},[K.current]),R.length?Be.createElement("section",{"aria-label":`${w} ${Q}`,tabIndex:-1},P.map((J,oe)=>{var ye;let[ie,xe]=J.split("-");return Be.createElement("ol",{key:J,dir:v==="auto"?TA():v,tabIndex:-1,ref:K,className:o,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":ie,"data-x-position":xe,style:{"--front-toast-height":`${((ye=k[0])==null?void 0:ye.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||a5,"--width":`${c5}px`,"--gap":`${x}px`,...f},onBlur:Me=>{V.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(V.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||V.current||(V.current=!0,D.current=Me.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{F||O(!1)},onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},R.filter(Me=>!Me.position&&oe===0||Me.position===J).map((Me,Re)=>{var He,lt;return Be.createElement(p5,{key:Me.id,icons:g,index:Re,toast:Me,defaultRichColors:u,duration:(He=m==null?void 0:m.duration)!=null?He:h,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:p,closeButton:(lt=m==null?void 0:m.closeButton)!=null?lt:s,interacting:F,position:J,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:X,toasts:R.filter(ze=>ze.position==Me.position),heights:k.filter(ze=>ze.position==Me.position),setHeights:N,expandByDefault:i,gap:x,loadingIcon:_,expanded:C,pauseWhenPageIsHidden:S,cn:E})}))})):null};const g5=({...n})=>{const{theme:e="system"}=Wz();return M.jsx(m5,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var v5=IR.useId||(()=>{}),y5=0;function MN(n){const[e,t]=L.useState(v5());return Ba(()=>{n||t(r=>r??String(y5++))},[n]),n||(e?`radix-${e}`:"")}const x5=["top","right","bottom","left"],ja=Math.min,_i=Math.max,m0=Math.round,Sm=Math.floor,Ha=n=>({x:n,y:n}),_5={left:"right",right:"left",bottom:"top",top:"bottom"},w5={start:"end",end:"start"};function I1(n,e,t){return _i(n,ja(e,t))}function No(n,e){return typeof n=="function"?n(e):n}function Lo(n){return n.split("-")[0]}function fd(n){return n.split("-")[1]}function yb(n){return n==="x"?"y":"x"}function xb(n){return n==="y"?"height":"width"}function Va(n){return["top","bottom"].includes(Lo(n))?"y":"x"}function _b(n){return yb(Va(n))}function S5(n,e,t){t===void 0&&(t=!1);const r=fd(n),i=_b(n),s=xb(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=g0(o)),[o,g0(o)]}function b5(n){const e=g0(n);return[N1(n),e,N1(e)]}function N1(n){return n.replace(/start|end/g,e=>w5[e])}function M5(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function E5(n,e,t,r){const i=fd(n);let s=M5(Lo(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(N1)))),s}function g0(n){return n.replace(/left|right|bottom|top/g,e=>_5[e])}function T5(n){return{top:0,right:0,bottom:0,left:0,...n}}function EN(n){return typeof n!="number"?T5(n):{top:n,right:n,bottom:n,left:n}}function v0(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function AA(n,e,t){let{reference:r,floating:i}=n;const s=Va(e),o=_b(e),a=xb(o),l=Lo(e),u=s==="y",h=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:h,y:r.y-i.height};break;case"bottom":m={x:h,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(fd(e)){case"start":m[o]-=p*(t&&u?-1:1);break;case"end":m[o]+=p*(t&&u?-1:1);break}return m}const A5=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:h,y:f}=AA(u,r,l),p=r,m={},v=0;for(let x=0;x<a.length;x++){const{name:_,fn:g}=a[x],{x:w,y:S,data:E,reset:R}=await g({x:h,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:n,floating:e}});h=w??h,f=S??f,m={...m,[_]:{...m[_],...E}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(u=R.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):R.rects),{x:h,y:f}=AA(u,p,l)),x=-1)}return{x:h,y:f,placement:p,strategy:i,middlewareData:m}};async function cf(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=No(e,n),v=EN(m),_=a[p?f==="floating"?"reference":"floating":f],g=v0(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(_)))==null||t?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:l})),w=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},R=v0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(g.top-R.top+v.top)/E.y,bottom:(R.bottom-g.bottom+v.bottom)/E.y,left:(g.left-R.left+v.left)/E.x,right:(R.right-g.right+v.right)/E.x}}const C5=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:h=0}=No(n,e)||{};if(u==null)return{};const f=EN(h),p={x:t,y:r},m=_b(i),v=xb(m),x=await o.getDimensions(u),_=m==="y",g=_?"top":"left",w=_?"bottom":"right",S=_?"clientHeight":"clientWidth",E=s.reference[v]+s.reference[m]-p[m]-s.floating[v],R=p[m]-s.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=A?A[S]:0;(!P||!await(o.isElement==null?void 0:o.isElement(A)))&&(P=a.floating[S]||s.floating[v]);const k=E/2-R/2,N=P/2-x[v]/2-1,C=ja(f[g],N),O=ja(f[w],N),F=C,W=P-x[v]-O,q=P/2-x[v]/2+k,Z=I1(F,q,W),K=!l.arrow&&fd(i)!=null&&q!==Z&&s.reference[v]/2-(q<F?C:O)-x[v]/2<0,Q=K?q<F?q-F:q-W:0;return{[m]:p[m]+Q,data:{[m]:Z,centerOffset:q-Z-Q,...K&&{alignmentOffset:Q}},reset:K}}}),R5=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,..._}=No(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=Lo(i),w=Va(a),S=Lo(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(u.floating)),R=p||(S||!x?[g0(a)]:b5(a)),A=v!=="none";!p&&A&&R.push(...E5(a,x,v,E));const P=[a,...R],k=await cf(e,_),N=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&N.push(k[g]),f){const q=S5(i,o,E);N.push(k[q[0]],k[q[1]])}if(C=[...C,{placement:i,overflows:N}],!N.every(q=>q<=0)){var O,F;const q=(((O=s.flip)==null?void 0:O.index)||0)+1,Z=P[q];if(Z)return{data:{index:q,overflows:C},reset:{placement:Z}};let K=(F=C.filter(Q=>Q.overflows[0]<=0).sort((Q,D)=>Q.overflows[1]-D.overflows[1])[0])==null?void 0:F.placement;if(!K)switch(m){case"bestFit":{var W;const Q=(W=C.filter(D=>{if(A){const V=Va(D.placement);return V===w||V==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(V=>V>0).reduce((V,X)=>V+X,0)]).sort((D,V)=>D[1]-V[1])[0])==null?void 0:W[0];Q&&(K=Q);break}case"initialPlacement":K=a;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function CA(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function RA(n){return x5.some(e=>n[e]>=0)}const P5=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=No(n,e);switch(r){case"referenceHidden":{const s=await cf(e,{...i,elementContext:"reference"}),o=CA(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RA(o)}}}case"escaped":{const s=await cf(e,{...i,altBoundary:!0}),o=CA(s,t.floating);return{data:{escapedOffsets:o,escaped:RA(o)}}}default:return{}}}}};async function I5(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Lo(t),a=fd(t),l=Va(t)==="y",u=["left","top"].includes(o)?-1:1,h=s&&l?-1:1,f=No(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*h,y:p*u}:{x:p*u,y:m*h}}const N5=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await I5(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},L5=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:g,y:w}=_;return{x:g,y:w}}},...l}=No(n,e),u={x:t,y:r},h=await cf(e,l),f=Va(Lo(i)),p=yb(f);let m=u[p],v=u[f];if(s){const _=p==="y"?"top":"left",g=p==="y"?"bottom":"right",w=m+h[_],S=m-h[g];m=I1(w,m,S)}if(o){const _=f==="y"?"top":"left",g=f==="y"?"bottom":"right",w=v+h[_],S=v-h[g];v=I1(w,v,S)}const x=a.fn({...e,[p]:m,[f]:v});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[p]:s,[f]:o}}}}}},k5=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=No(n,e),h={x:t,y:r},f=Va(i),p=yb(f);let m=h[p],v=h[f];const x=No(a,e),_=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const S=p==="y"?"height":"width",E=s.reference[p]-s.floating[S]+_.mainAxis,R=s.reference[p]+s.reference[S]-_.mainAxis;m<E?m=E:m>R&&(m=R)}if(u){var g,w;const S=p==="y"?"width":"height",E=["top","left"].includes(Lo(i)),R=s.reference[f]-s.floating[S]+(E&&((g=o.offset)==null?void 0:g[f])||0)+(E?0:_.crossAxis),A=s.reference[f]+s.reference[S]+(E?0:((w=o.offset)==null?void 0:w[f])||0)-(E?_.crossAxis:0);v<R?v=R:v>A&&(v=A)}return{[p]:m,[f]:v}}}},D5=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=No(n,e),h=await cf(e,u),f=Lo(i),p=fd(i),m=Va(i)==="y",{width:v,height:x}=s.floating;let _,g;f==="top"||f==="bottom"?(_=f,g=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=f,_=p==="end"?"top":"bottom");const w=x-h.top-h.bottom,S=v-h.left-h.right,E=ja(x-h[_],w),R=ja(v-h[g],S),A=!e.middlewareData.shift;let P=E,k=R;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=w),A&&!p){const C=_i(h.left,0),O=_i(h.right,0),F=_i(h.top,0),W=_i(h.bottom,0);m?k=v-2*(C!==0||O!==0?C+O:_i(h.left,h.right)):P=x-2*(F!==0||W!==0?F+W:_i(h.top,h.bottom))}await l({...e,availableWidth:k,availableHeight:P});const N=await o.getDimensions(a.floating);return v!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}};function Lv(){return typeof window<"u"}function pd(n){return TN(n)?(n.nodeName||"").toLowerCase():"#document"}function bi(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function qs(n){var e;return(e=(TN(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function TN(n){return Lv()?n instanceof Node||n instanceof bi(n).Node:!1}function xs(n){return Lv()?n instanceof Element||n instanceof bi(n).Element:!1}function $s(n){return Lv()?n instanceof HTMLElement||n instanceof bi(n).HTMLElement:!1}function PA(n){return!Lv()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof bi(n).ShadowRoot}function Hf(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=_s(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function O5(n){return["table","td","th"].includes(pd(n))}function kv(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function wb(n){const e=Sb(),t=xs(n)?_s(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function U5(n){let e=Ga(n);for(;$s(e)&&!Ku(e);){if(wb(e))return e;if(kv(e))return null;e=Ga(e)}return null}function Sb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ku(n){return["html","body","#document"].includes(pd(n))}function _s(n){return bi(n).getComputedStyle(n)}function Dv(n){return xs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ga(n){if(pd(n)==="html")return n;const e=n.assignedSlot||n.parentNode||PA(n)&&n.host||qs(n);return PA(e)?e.host:e}function AN(n){const e=Ga(n);return Ku(e)?n.ownerDocument?n.ownerDocument.body:n.body:$s(e)&&Hf(e)?e:AN(e)}function uf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=AN(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=bi(i);if(s){const a=L1(o);return e.concat(o,o.visualViewport||[],Hf(i)?i:[],a&&t?uf(a):[])}return e.concat(i,uf(i,[],t))}function L1(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function CN(n){const e=_s(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=$s(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=m0(t)!==s||m0(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function bb(n){return xs(n)?n:n.contextElement}function Pu(n){const e=bb(n);if(!$s(e))return Ha(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=CN(e);let o=(s?m0(t.width):t.width)/r,a=(s?m0(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const F5=Ha(0);function RN(n){const e=bi(n);return!Sb()||!e.visualViewport?F5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function z5(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==bi(n)?!1:e}function ic(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=bb(n);let o=Ha(1);e&&(r?xs(r)&&(o=Pu(r)):o=Pu(n));const a=z5(s,t,r)?RN(s):Ha(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,h=i.width/o.x,f=i.height/o.y;if(s){const p=bi(s),m=r&&xs(r)?bi(r):r;let v=p,x=L1(v);for(;x&&r&&m!==v;){const _=Pu(x),g=x.getBoundingClientRect(),w=_s(x),S=g.left+(x.clientLeft+parseFloat(w.paddingLeft))*_.x,E=g.top+(x.clientTop+parseFloat(w.paddingTop))*_.y;l*=_.x,u*=_.y,h*=_.x,f*=_.y,l+=S,u+=E,v=bi(x),x=L1(v)}}return v0({width:h,height:f,x:l,y:u})}function B5(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=qs(r),a=e?kv(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Ha(1);const h=Ha(0),f=$s(r);if((f||!f&&!s)&&((pd(r)!=="body"||Hf(o))&&(l=Dv(r)),$s(r))){const p=ic(r);u=Pu(r),h.x=p.x+r.clientLeft,h.y=p.y+r.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+h.x,y:t.y*u.y-l.scrollTop*u.y+h.y}}function j5(n){return Array.from(n.getClientRects())}function k1(n,e){const t=Dv(n).scrollLeft;return e?e.left+t:ic(qs(n)).left+t}function H5(n){const e=qs(n),t=Dv(n),r=n.ownerDocument.body,i=_i(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=_i(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+k1(n);const a=-t.scrollTop;return _s(r).direction==="rtl"&&(o+=_i(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function V5(n,e){const t=bi(n),r=qs(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=Sb();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function G5(n,e){const t=ic(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=$s(n)?Pu(n):Ha(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function IA(n,e,t){let r;if(e==="viewport")r=V5(n,t);else if(e==="document")r=H5(qs(n));else if(xs(e))r=G5(e,t);else{const i=RN(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return v0(r)}function PN(n,e){const t=Ga(n);return t===e||!xs(t)||Ku(t)?!1:_s(t).position==="fixed"||PN(t,e)}function W5(n,e){const t=e.get(n);if(t)return t;let r=uf(n,[],!1).filter(a=>xs(a)&&pd(a)!=="body"),i=null;const s=_s(n).position==="fixed";let o=s?Ga(n):n;for(;xs(o)&&!Ku(o);){const a=_s(o),l=wb(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Hf(o)&&!l&&PN(n,o))?r=r.filter(h=>h!==o):i=a,o=Ga(o)}return e.set(n,r),r}function $5(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?kv(e)?[]:W5(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((u,h)=>{const f=IA(e,h,i);return u.top=_i(f.top,u.top),u.right=ja(f.right,u.right),u.bottom=ja(f.bottom,u.bottom),u.left=_i(f.left,u.left),u},IA(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function X5(n){const{width:e,height:t}=CN(n);return{width:e,height:t}}function q5(n,e,t){const r=$s(e),i=qs(e),s=t==="fixed",o=ic(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ha(0);if(r||!r&&!s)if((pd(e)!=="body"||Hf(i))&&(a=Dv(e)),r){const m=ic(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&(l.x=k1(i));let u=0,h=0;if(i&&!r&&!s){const m=i.getBoundingClientRect();h=m.top+a.scrollTop,u=m.left+a.scrollLeft-k1(i,m)}const f=o.left+a.scrollLeft-l.x-u,p=o.top+a.scrollTop-l.y-h;return{x:f,y:p,width:o.width,height:o.height}}function v_(n){return _s(n).position==="static"}function NA(n,e){if(!$s(n)||_s(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return qs(n)===t&&(t=t.ownerDocument.body),t}function IN(n,e){const t=bi(n);if(kv(n))return t;if(!$s(n)){let i=Ga(n);for(;i&&!Ku(i);){if(xs(i)&&!v_(i))return i;i=Ga(i)}return t}let r=NA(n,e);for(;r&&O5(r)&&v_(r);)r=NA(r,e);return r&&Ku(r)&&v_(r)&&!wb(r)?t:r||U5(n)||t}const Y5=async function(n){const e=this.getOffsetParent||IN,t=this.getDimensions,r=await t(n.floating);return{reference:q5(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function K5(n){return _s(n).direction==="rtl"}const J5={convertOffsetParentRelativeRectToViewportRelativeRect:B5,getDocumentElement:qs,getClippingRect:$5,getOffsetParent:IN,getElementRects:Y5,getClientRects:j5,getDimensions:X5,getScale:Pu,isElement:xs,isRTL:K5};function Z5(n,e){let t=null,r;const i=qs(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:h,width:f,height:p}=n.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Sm(h),v=Sm(i.clientWidth-(u+f)),x=Sm(i.clientHeight-(h+p)),_=Sm(u),w={rootMargin:-m+"px "+-v+"px "+-x+"px "+-_+"px",threshold:_i(0,ja(1,l))||1};let S=!0;function E(R){const A=R[0].intersectionRatio;if(A!==l){if(!S)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(E,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(E,w)}t.observe(n)}return o(!0),s}function Q5(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=bb(n),h=i||s?[...u?uf(u):[],...uf(e)]:[];h.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const f=u&&a?Z5(u,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[w]=g;w&&w.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),u&&!l&&m.observe(u),m.observe(e));let v,x=l?ic(n):null;l&&_();function _(){const g=ic(n);x&&(g.x!==x.x||g.y!==x.y||g.width!==x.width||g.height!==x.height)&&t(),x=g,v=requestAnimationFrame(_)}return t(),()=>{var g;h.forEach(w=>{i&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),f==null||f(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const eB=N5,tB=L5,nB=R5,rB=D5,iB=P5,LA=C5,sB=k5,oB=(n,e,t)=>{const r=new Map,i={platform:J5,...t},s={...i.platform,_c:r};return A5(n,e,{...i,platform:s})};var Fg=typeof document<"u"?L.useLayoutEffect:L.useEffect;function y0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!y0(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!y0(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function NN(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function kA(n,e){const t=NN(n);return Math.round(e*t)/t}function y_(n){const e=L.useRef(n);return Fg(()=>{e.current=n}),e}function aB(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[h,f]=L.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=L.useState(r);y0(p,r)||m(r);const[v,x]=L.useState(null),[_,g]=L.useState(null),w=L.useCallback(D=>{D!==A.current&&(A.current=D,x(D))},[]),S=L.useCallback(D=>{D!==P.current&&(P.current=D,g(D))},[]),E=s||v,R=o||_,A=L.useRef(null),P=L.useRef(null),k=L.useRef(h),N=l!=null,C=y_(l),O=y_(i),F=y_(u),W=L.useCallback(()=>{if(!A.current||!P.current)return;const D={placement:e,strategy:t,middleware:p};O.current&&(D.platform=O.current),oB(A.current,P.current,D).then(V=>{const X={...V,isPositioned:F.current!==!1};q.current&&!y0(k.current,X)&&(k.current=X,dd.flushSync(()=>{f(X)}))})},[p,e,t,O,F]);Fg(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const q=L.useRef(!1);Fg(()=>(q.current=!0,()=>{q.current=!1}),[]),Fg(()=>{if(E&&(A.current=E),R&&(P.current=R),E&&R){if(C.current)return C.current(E,R,W);W()}},[E,R,W,C,N]);const Z=L.useMemo(()=>({reference:A,floating:P,setReference:w,setFloating:S}),[w,S]),K=L.useMemo(()=>({reference:E,floating:R}),[E,R]),Q=L.useMemo(()=>{const D={position:t,left:0,top:0};if(!K.floating)return D;const V=kA(K.floating,h.x),X=kA(K.floating,h.y);return a?{...D,transform:"translate("+V+"px, "+X+"px)",...NN(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:V,top:X}},[t,a,K.floating,h.x,h.y]);return L.useMemo(()=>({...h,update:W,refs:Z,elements:K,floatingStyles:Q}),[h,W,Z,K,Q])}const lB=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?LA({element:r.current,padding:i}).fn(t):{}:r?LA({element:r,padding:i}).fn(t):{}}}},cB=(n,e)=>({...eB(n),options:[n,e]}),uB=(n,e)=>({...tB(n),options:[n,e]}),dB=(n,e)=>({...sB(n),options:[n,e]}),hB=(n,e)=>({...nB(n),options:[n,e]}),fB=(n,e)=>({...rB(n),options:[n,e]}),pB=(n,e)=>({...iB(n),options:[n,e]}),mB=(n,e)=>({...lB(n),options:[n,e]});var gB="Arrow",LN=L.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return M.jsx(kn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:M.jsx("polygon",{points:"0,0 30,0 15,10"})})});LN.displayName=gB;var vB=LN;function yB(n,e=[]){let t=[];function r(s,o){const a=L.createContext(o),l=t.length;t=[...t,o];function u(f){const{scope:p,children:m,...v}=f,x=(p==null?void 0:p[n][l])||a,_=L.useMemo(()=>v,Object.values(v));return M.jsx(x.Provider,{value:_,children:m})}function h(f,p){const m=(p==null?void 0:p[n][l])||a,v=L.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const i=()=>{const s=t.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return L.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,xB(i,...e)]}function xB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...a,...f}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function _B(n){const[e,t]=L.useState(void 0);return Ba(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var kN="Popper",[DN,ON]=yB(kN),[BK,UN]=DN(kN),FN="PopperAnchor",zN=L.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=UN(FN,t),o=L.useRef(null),a=Yi(e,o);return L.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:M.jsx(kn.div,{...i,ref:a})});zN.displayName=FN;var Mb="PopperContent",[wB,SB]=DN(Mb),BN=L.forwardRef((n,e)=>{var Re,He,lt,ze,Je,ft;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:v,...x}=n,_=UN(Mb,t),[g,w]=L.useState(null),S=Yi(e,Ve=>w(Ve)),[E,R]=L.useState(null),A=_B(E),P=(A==null?void 0:A.width)??0,k=(A==null?void 0:A.height)??0,N=r+(s!=="center"?"-"+s:""),C=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},O=Array.isArray(u)?u:[u],F=O.length>0,W={padding:C,boundary:O.filter(MB),altBoundary:F},{refs:q,floatingStyles:Z,placement:K,isPositioned:Q,middlewareData:D}=aB({strategy:"fixed",placement:N,whileElementsMounted:(...Ve)=>Q5(...Ve,{animationFrame:m==="always"}),elements:{reference:_.anchor},middleware:[cB({mainAxis:i+k,alignmentAxis:o}),l&&uB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?dB():void 0,...W}),l&&hB({...W}),fB({...W,apply:({elements:Ve,rects:B,availableWidth:Ne,availableHeight:Ee})=>{const{width:Ie,height:ge}=B.reference,De=Ve.floating.style;De.setProperty("--radix-popper-available-width",`${Ne}px`),De.setProperty("--radix-popper-available-height",`${Ee}px`),De.setProperty("--radix-popper-anchor-width",`${Ie}px`),De.setProperty("--radix-popper-anchor-height",`${ge}px`)}}),E&&mB({element:E,padding:a}),EB({arrowWidth:P,arrowHeight:k}),p&&pB({strategy:"referenceHidden",...W})]}),[V,X]=VN(K),J=ys(v);Ba(()=>{Q&&(J==null||J())},[Q,J]);const oe=(Re=D.arrow)==null?void 0:Re.x,ye=(He=D.arrow)==null?void 0:He.y,ie=((lt=D.arrow)==null?void 0:lt.centerOffset)!==0,[xe,Me]=L.useState();return Ba(()=>{g&&Me(window.getComputedStyle(g).zIndex)},[g]),M.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:Q?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(ze=D.transformOrigin)==null?void 0:ze.x,(Je=D.transformOrigin)==null?void 0:Je.y].join(" "),...((ft=D.hide)==null?void 0:ft.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:M.jsx(wB,{scope:t,placedSide:V,onArrowChange:R,arrowX:oe,arrowY:ye,shouldHideArrow:ie,children:M.jsx(kn.div,{"data-side":V,"data-align":X,...x,ref:S,style:{...x.style,animation:Q?void 0:"none"}})})})});BN.displayName=Mb;var jN="PopperArrow",bB={top:"bottom",right:"left",bottom:"top",left:"right"},HN=L.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=SB(jN,r),o=bB[s.placedSide];return M.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:M.jsx(vB,{...i,ref:t,style:{...i.style,display:"block"}})})});HN.displayName=jN;function MB(n){return n!==null}var EB=n=>({name:"transformOrigin",options:n,fn(e){var _,g,w;const{placement:t,rects:r,middlewareData:i}=e,o=((_=i.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[u,h]=VN(t),f={start:"0%",center:"50%",end:"100%"}[h],p=(((g=i.arrow)==null?void 0:g.x)??0)+a/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let v="",x="";return u==="bottom"?(v=o?f:`${p}px`,x=`${-l}px`):u==="top"?(v=o?f:`${p}px`,x=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,x=o?f:`${m}px`):u==="left"&&(v=`${r.floating.width+l}px`,x=o?f:`${m}px`),{data:{x:v,y:x}}}});function VN(n){const[e,t="center"]=n.split("-");return[e,t]}var TB=zN,AB=BN,CB=HN,[Ov,jK]=db("Tooltip",[ON]),Eb=ON(),GN="TooltipProvider",RB=700,DA="tooltip.open",[PB,WN]=Ov(GN),$N=n=>{const{__scopeTooltip:e,delayDuration:t=RB,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,[o,a]=L.useState(!0),l=L.useRef(!1),u=L.useRef(0);return L.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),M.jsx(PB,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:L.useCallback(()=>{window.clearTimeout(u.current),a(!1)},[]),onClose:L.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:L.useCallback(h=>{l.current=h},[]),disableHoverableContent:i,children:s})};$N.displayName=GN;var XN="Tooltip",[HK,Uv]=Ov(XN),D1="TooltipTrigger",IB=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Uv(D1,t),s=WN(D1,t),o=Eb(t),a=L.useRef(null),l=Yi(e,a,i.onTriggerChange),u=L.useRef(!1),h=L.useRef(!1),f=L.useCallback(()=>u.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),M.jsx(TB,{asChild:!0,...o,children:M.jsx(kn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:sn(n.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:sn(n.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:sn(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:sn(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:sn(n.onBlur,i.onClose),onClick:sn(n.onClick,i.onClose)})})});IB.displayName=D1;var NB="TooltipPortal",[VK,LB]=Ov(NB,{forceMount:void 0}),Ju="TooltipContent",qN=L.forwardRef((n,e)=>{const t=LB(Ju,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=Uv(Ju,n.__scopeTooltip);return M.jsx(Av,{present:r||o.open,children:o.disableHoverableContent?M.jsx(YN,{side:i,...s,ref:e}):M.jsx(kB,{side:i,...s,ref:e})})}),kB=L.forwardRef((n,e)=>{const t=Uv(Ju,n.__scopeTooltip),r=WN(Ju,n.__scopeTooltip),i=L.useRef(null),s=Yi(e,i),[o,a]=L.useState(null),{trigger:l,onClose:u}=t,h=i.current,{onPointerInTransitChange:f}=r,p=L.useCallback(()=>{a(null),f(!1)},[f]),m=L.useCallback((v,x)=>{const _=v.currentTarget,g={x:v.clientX,y:v.clientY},w=FB(g,_.getBoundingClientRect()),S=zB(g,w),E=BB(x.getBoundingClientRect()),R=HB([...S,...E]);a(R),f(!0)},[f]);return L.useEffect(()=>()=>p(),[p]),L.useEffect(()=>{if(l&&h){const v=_=>m(_,h),x=_=>m(_,l);return l.addEventListener("pointerleave",v),h.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",x)}}},[l,h,m,p]),L.useEffect(()=>{if(o){const v=x=>{const _=x.target,g={x:x.clientX,y:x.clientY},w=(l==null?void 0:l.contains(_))||(h==null?void 0:h.contains(_)),S=!jB(g,o);w?p():S&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,h,o,u,p]),M.jsx(YN,{...n,ref:s})}),[DB,OB]=Ov(XN,{isInside:!1}),YN=L.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=Uv(Ju,t),u=Eb(t),{onClose:h}=l;return L.useEffect(()=>(document.addEventListener(DA,h),()=>document.removeEventListener(DA,h)),[h]),L.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,h]),M.jsx(hb,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:M.jsxs(AB,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[M.jsx(OI,{children:r}),M.jsx(DB,{scope:t,isInside:!0,children:M.jsx(E4,{id:l.contentId,role:"tooltip",children:i||r})})]})})});qN.displayName=Ju;var KN="TooltipArrow",UB=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Eb(t);return OB(KN,t).isInside?null:M.jsx(CB,{...i,...r,ref:e})});UB.displayName=KN;function FB(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function zB(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function BB(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function jB(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,h=e[o].y;l>r!=h>r&&t<(u-a)*(r-l)/(h-l)+a&&(i=!i)}return i}function HB(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),VB(e)}function VB(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var GB=$N,JN=qN;const WB=GB,$B=L.forwardRef(({className:n,sideOffset:e=4,...t},r)=>M.jsx(JN,{ref:r,sideOffset:e,className:Dn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));$B.displayName=JN.displayName;var Fv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zv=typeof window>"u"||"Deno"in globalThis;function as(){}function XB(n,e){return typeof n=="function"?n(e):n}function qB(n){return typeof n=="number"&&n>=0&&n!==1/0}function YB(n,e){return Math.max(n+(e||0)-Date.now(),0)}function OA(n,e){return typeof n=="function"?n(e):n}function KB(n,e){return typeof n=="function"?n(e):n}function UA(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==Tb(o,e.options))return!1}else if(!hf(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function FA(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(df(e.options.mutationKey)!==df(s))return!1}else if(!hf(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Tb(n,e){return((e==null?void 0:e.queryKeyHashFn)||df)(n)}function df(n){return JSON.stringify(n,(e,t)=>O1(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function hf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!hf(n[t],e[t])):!1}function ZN(n,e){if(n===e)return n;const t=zA(n)&&zA(e);if(t||O1(n)&&O1(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let u=0;u<o;u++){const h=t?u:s[u];(!t&&r.includes(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=ZN(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function zA(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function O1(n){if(!BA(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!BA(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function BA(n){return Object.prototype.toString.call(n)==="[object Object]"}function JB(n){return new Promise(e=>{setTimeout(e,n)})}function ZB(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?ZN(n,e):e}function QB(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function ej(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Ab=Symbol();function QN(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Ab?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var jl,ya,ku,fR,tj=(fR=class extends Fv{constructor(){super();en(this,jl);en(this,ya);en(this,ku);Lt(this,ku,e=>{if(!zv&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Te(this,ya)||this.setEventListener(Te(this,ku))}onUnsubscribe(){var e;this.hasListeners()||((e=Te(this,ya))==null||e.call(this),Lt(this,ya,void 0))}setEventListener(e){var t;Lt(this,ku,e),(t=Te(this,ya))==null||t.call(this),Lt(this,ya,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Te(this,jl)!==e&&(Lt(this,jl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Te(this,jl)=="boolean"?Te(this,jl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},jl=new WeakMap,ya=new WeakMap,ku=new WeakMap,fR),e3=new tj,Du,xa,Ou,pR,nj=(pR=class extends Fv{constructor(){super();en(this,Du,!0);en(this,xa);en(this,Ou);Lt(this,Ou,e=>{if(!zv&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){Te(this,xa)||this.setEventListener(Te(this,Ou))}onUnsubscribe(){var e;this.hasListeners()||((e=Te(this,xa))==null||e.call(this),Lt(this,xa,void 0))}setEventListener(e){var t;Lt(this,Ou,e),(t=Te(this,xa))==null||t.call(this),Lt(this,xa,e(this.setOnline.bind(this)))}setOnline(e){Te(this,Du)!==e&&(Lt(this,Du,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Te(this,Du)}},Du=new WeakMap,xa=new WeakMap,Ou=new WeakMap,pR),x0=new nj;function rj(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function ij(n){return Math.min(1e3*2**n,3e4)}function t3(n){return(n??"online")==="online"?x0.isOnline():!0}var n3=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function x_(n){return n instanceof n3}function r3(n){let e=!1,t=0,r=!1,i;const s=rj(),o=x=>{var _;r||(p(new n3(x)),(_=n.abort)==null||_.call(n))},a=()=>{e=!0},l=()=>{e=!1},u=()=>e3.isFocused()&&(n.networkMode==="always"||x0.isOnline())&&n.canRun(),h=()=>t3(n.networkMode)&&n.canRun(),f=x=>{var _;r||(r=!0,(_=n.onSuccess)==null||_.call(n,x),i==null||i(),s.resolve(x))},p=x=>{var _;r||(r=!0,(_=n.onError)==null||_.call(n,x),i==null||i(),s.reject(x))},m=()=>new Promise(x=>{var _;i=g=>{(r||u())&&x(g)},(_=n.onPause)==null||_.call(n)}).then(()=>{var x;i=void 0,r||(x=n.onContinue)==null||x.call(n)}),v=()=>{if(r)return;let x;const _=t===0?n.initialPromise:void 0;try{x=_??n.fn()}catch(g){x=Promise.reject(g)}Promise.resolve(x).then(f).catch(g=>{var A;if(r)return;const w=n.retry??(zv?0:3),S=n.retryDelay??ij,E=typeof S=="function"?S(t,g):S,R=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,g);if(e||!R){p(g);return}t++,(A=n.onFail)==null||A.call(n,t,g),JB(E).then(()=>u()?void 0:m()).then(()=>{e?p(g):v()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?v():m().then(v),s)}}function sj(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Fr=sj(),Hl,mR,i3=(mR=class{constructor(){en(this,Hl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qB(this.gcTime)&&Lt(this,Hl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(zv?1/0:5*60*1e3))}clearGcTimeout(){Te(this,Hl)&&(clearTimeout(Te(this,Hl)),Lt(this,Hl,void 0))}},Hl=new WeakMap,mR),Uu,Fu,Fi,Er,Df,Vl,cs,fo,gR,oj=(gR=class extends i3{constructor(e){super();en(this,cs);en(this,Uu);en(this,Fu);en(this,Fi);en(this,Er);en(this,Df);en(this,Vl);Lt(this,Vl,!1),Lt(this,Df,e.defaultOptions),this.setOptions(e.options),this.observers=[],Lt(this,Fi,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Lt(this,Uu,lj(this.options)),this.state=e.state??Te(this,Uu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Te(this,Er))==null?void 0:e.promise}setOptions(e){this.options={...Te(this,Df),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Te(this,Fi).remove(this)}setData(e,t){const r=ZB(this.state.data,e,this.options);return yr(this,cs,fo).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){yr(this,cs,fo).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=Te(this,Er))==null?void 0:r.promise;return(i=Te(this,Er))==null||i.cancel(e),t?t.then(as).catch(as):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Te(this,Uu))}isActive(){return this.observers.some(e=>KB(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ab||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!YB(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=Te(this,Er))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=Te(this,Er))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Te(this,Fi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Te(this,Er)&&(Te(this,Vl)?Te(this,Er).cancel({revert:!0}):Te(this,Er).cancelRetry()),this.scheduleGc()),Te(this,Fi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||yr(this,cs,fo).call(this,{type:"invalidate"})}fetch(e,t){var l,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(Te(this,Er))return Te(this,Er).continueRetry(),Te(this,Er).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Lt(this,Vl,!0),r.signal)})},s=()=>{const f=QN(this.options,t),p={queryKey:this.queryKey,meta:this.meta};return i(p),Lt(this,Vl,!1),this.options.persister?this.options.persister(f,p,this):f(p)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(l=this.options.behavior)==null||l.onFetch(o,this),Lt(this,Fu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&yr(this,cs,fo).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const a=f=>{var p,m,v,x;x_(f)&&f.silent||yr(this,cs,fo).call(this,{type:"error",error:f}),x_(f)||((m=(p=Te(this,Fi).config).onError)==null||m.call(p,f,this),(x=(v=Te(this,Fi).config).onSettled)==null||x.call(v,this.state.data,f,this)),this.scheduleGc()};return Lt(this,Er,r3({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,m,v,x;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(_){a(_);return}(m=(p=Te(this,Fi).config).onSuccess)==null||m.call(p,f,this),(x=(v=Te(this,Fi).config).onSettled)==null||x.call(v,f,this.state.error,this),this.scheduleGc()},onError:a,onFail:(f,p)=>{yr(this,cs,fo).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{yr(this,cs,fo).call(this,{type:"pause"})},onContinue:()=>{yr(this,cs,fo).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Te(this,Er).start()}},Uu=new WeakMap,Fu=new WeakMap,Fi=new WeakMap,Er=new WeakMap,Df=new WeakMap,Vl=new WeakMap,cs=new WeakSet,fo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...aj(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return x_(i)&&i.revert&&Te(this,Fu)?{...Te(this,Fu),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Fr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Te(this,Fi).notify({query:this,type:"updated",action:e})})},gR);function aj(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:t3(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function lj(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ds,vR,cj=(vR=class extends Fv{constructor(e={}){super();en(this,Ds);this.config=e,Lt(this,Ds,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??Tb(i,t);let o=this.get(s);return o||(o=new oj({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Te(this,Ds).has(e.queryHash)||(Te(this,Ds).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Te(this,Ds).get(e.queryHash);t&&(e.destroy(),t===e&&Te(this,Ds).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Te(this,Ds).get(e)}getAll(){return[...Te(this,Ds).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>UA(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>UA(e,r)):t}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ds=new WeakMap,vR),Os,Or,Gl,Us,la,yR,uj=(yR=class extends i3{constructor(e){super();en(this,Us);en(this,Os);en(this,Or);en(this,Gl);this.mutationId=e.mutationId,Lt(this,Or,e.mutationCache),Lt(this,Os,[]),this.state=e.state||dj(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Te(this,Os).includes(e)||(Te(this,Os).push(e),this.clearGcTimeout(),Te(this,Or).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Lt(this,Os,Te(this,Os).filter(t=>t!==e)),this.scheduleGc(),Te(this,Or).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Te(this,Os).length||(this.state.status==="pending"?this.scheduleGc():Te(this,Or).remove(this))}continue(){var e;return((e=Te(this,Gl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,o,a,l,u,h,f,p,m,v,x,_,g,w,S,E,R,A,P;Lt(this,Gl,r3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,N)=>{yr(this,Us,la).call(this,{type:"failed",failureCount:k,error:N})},onPause:()=>{yr(this,Us,la).call(this,{type:"pause"})},onContinue:()=>{yr(this,Us,la).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Te(this,Or).canRun(this)}));const t=this.state.status==="pending",r=!Te(this,Gl).canStart();try{if(!t){yr(this,Us,la).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=Te(this,Or).config).onMutate)==null?void 0:s.call(i,e,this));const N=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));N!==this.state.context&&yr(this,Us,la).call(this,{type:"pending",context:N,variables:e,isPaused:r})}const k=await Te(this,Gl).start();return await((u=(l=Te(this,Or).config).onSuccess)==null?void 0:u.call(l,k,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,k,e,this.state.context)),await((m=(p=Te(this,Or).config).onSettled)==null?void 0:m.call(p,k,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,k,null,e,this.state.context)),yr(this,Us,la).call(this,{type:"success",data:k}),k}catch(k){try{throw await((g=(_=Te(this,Or).config).onError)==null?void 0:g.call(_,k,e,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,k,e,this.state.context)),await((R=(E=Te(this,Or).config).onSettled)==null?void 0:R.call(E,void 0,k,this.state.variables,this.state.context,this)),await((P=(A=this.options).onSettled)==null?void 0:P.call(A,void 0,k,e,this.state.context)),k}finally{yr(this,Us,la).call(this,{type:"error",error:k})}}finally{Te(this,Or).runNext(this)}}},Os=new WeakMap,Or=new WeakMap,Gl=new WeakMap,Us=new WeakSet,la=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Fr.batch(()=>{Te(this,Os).forEach(r=>{r.onMutationUpdate(e)}),Te(this,Or).notify({mutation:this,type:"updated",action:e})})},yR);function dj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vi,Of,xR,hj=(xR=class extends Fv{constructor(e={}){super();en(this,vi);en(this,Of);this.config=e,Lt(this,vi,new Map),Lt(this,Of,Date.now())}build(e,t,r){const i=new uj({mutationCache:this,mutationId:++tm(this,Of)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){const t=bm(e),r=Te(this,vi).get(t)??[];r.push(e),Te(this,vi).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=bm(e);if(Te(this,vi).has(t)){const i=(r=Te(this,vi).get(t))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?Te(this,vi).delete(t):Te(this,vi).set(t,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=Te(this,vi).get(bm(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=Te(this,vi).get(bm(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Te(this,vi).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>FA(t,r))}findAll(e={}){return this.getAll().filter(t=>FA(e,t))}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Fr.batch(()=>Promise.all(e.map(t=>t.continue().catch(as))))}},vi=new WeakMap,Of=new WeakMap,xR);function bm(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function jA(n){return{onFetch:(e,t)=>{var h,f,p,m,v;const r=e.options,i=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let x=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},g=QN(e.options,e.fetchOptions),w=async(S,E,R)=>{if(x)return Promise.reject();if(E==null&&S.pages.length)return Promise.resolve(S);const A={queryKey:e.queryKey,pageParam:E,direction:R?"backward":"forward",meta:e.options.meta};_(A);const P=await g(A),{maxPages:k}=e.options,N=R?ej:QB;return{pages:N(S.pages,P,k),pageParams:N(S.pageParams,E,k)}};if(i&&s.length){const S=i==="backward",E=S?fj:HA,R={pages:s,pageParams:o},A=E(r,R);a=await w(R,A,S)}else{const S=n??s.length;do{const E=l===0?o[0]??r.initialPageParam:HA(r,a);if(l>0&&E==null)break;a=await w(a,E),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var x,_;return(_=(x=e.options).persister)==null?void 0:_.call(x,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function HA(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function fj(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Cn,_a,wa,zu,Bu,Sa,ju,Hu,_R,pj=(_R=class{constructor(n={}){en(this,Cn);en(this,_a);en(this,wa);en(this,zu);en(this,Bu);en(this,Sa);en(this,ju);en(this,Hu);Lt(this,Cn,n.queryCache||new cj),Lt(this,_a,n.mutationCache||new hj),Lt(this,wa,n.defaultOptions||{}),Lt(this,zu,new Map),Lt(this,Bu,new Map),Lt(this,Sa,0)}mount(){tm(this,Sa)._++,Te(this,Sa)===1&&(Lt(this,ju,e3.subscribe(async n=>{n&&(await this.resumePausedMutations(),Te(this,Cn).onFocus())})),Lt(this,Hu,x0.subscribe(async n=>{n&&(await this.resumePausedMutations(),Te(this,Cn).onOnline())})))}unmount(){var n,e;tm(this,Sa)._--,Te(this,Sa)===0&&((n=Te(this,ju))==null||n.call(this),Lt(this,ju,void 0),(e=Te(this,Hu))==null||e.call(this),Lt(this,Hu,void 0))}isFetching(n){return Te(this,Cn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return Te(this,_a).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Te(this,Cn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=Te(this,Cn).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(OA(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return Te(this,Cn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=Te(this,Cn).get(r.queryHash),s=i==null?void 0:i.state.data,o=XB(e,s);if(o!==void 0)return Te(this,Cn).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Fr.batch(()=>Te(this,Cn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Te(this,Cn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=Te(this,Cn);Fr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=Te(this,Cn),r={type:"active",...n};return Fr.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=Fr.batch(()=>Te(this,Cn).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(as).catch(as)}invalidateQueries(n={},e={}){return Fr.batch(()=>{if(Te(this,Cn).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Fr.batch(()=>Te(this,Cn).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(as)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(as)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=Te(this,Cn).build(this,e);return t.isStaleByTime(OA(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(as).catch(as)}fetchInfiniteQuery(n){return n.behavior=jA(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(as).catch(as)}ensureInfiniteQueryData(n){return n.behavior=jA(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return x0.isOnline()?Te(this,_a).resumePausedMutations():Promise.resolve()}getQueryCache(){return Te(this,Cn)}getMutationCache(){return Te(this,_a)}getDefaultOptions(){return Te(this,wa)}setDefaultOptions(n){Lt(this,wa,n)}setQueryDefaults(n,e){Te(this,zu).set(df(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...Te(this,zu).values()];let t={};return e.forEach(r=>{hf(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){Te(this,Bu).set(df(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...Te(this,Bu).values()];let t={};return e.forEach(r=>{hf(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...Te(this,wa).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Tb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Ab&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...Te(this,wa).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){Te(this,Cn).clear(),Te(this,_a).clear()}},Cn=new WeakMap,_a=new WeakMap,wa=new WeakMap,zu=new WeakMap,Bu=new WeakMap,Sa=new WeakMap,ju=new WeakMap,Hu=new WeakMap,_R),mj=L.createContext(void 0),gj=({client:n,children:e})=>(L.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),M.jsx(mj.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ff(){return ff=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ff.apply(this,arguments)}var Ea;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ea||(Ea={}));const VA="popstate";function vj(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return U1("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:o3(i)}return xj(e,t,null,n)}function Xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function s3(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yj(){return Math.random().toString(36).substr(2,8)}function GA(n,e){return{usr:n.state,key:n.key,idx:e}}function U1(n,e,t,r){return t===void 0&&(t=null),ff({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?md(e):e,{state:t,key:e&&e.key||r||yj()})}function o3(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function md(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function xj(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ea.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(ff({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Ea.Pop;let _=h(),g=_==null?null:_-u;u=_,l&&l({action:a,location:x.location,delta:g})}function p(_,g){a=Ea.Push;let w=U1(x.location,_,g);u=h()+1;let S=GA(w,u),E=x.createHref(w);try{o.pushState(S,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(E)}s&&l&&l({action:a,location:x.location,delta:1})}function m(_,g){a=Ea.Replace;let w=U1(x.location,_,g);u=h();let S=GA(w,u),E=x.createHref(w);o.replaceState(S,"",E),s&&l&&l({action:a,location:x.location,delta:0})}function v(_){let g=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof _=="string"?_:o3(_);return w=w.replace(/ $/,"%20"),Xn(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let x={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(VA,f),l=_,()=>{i.removeEventListener(VA,f),l=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let g=v(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return x}var WA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(WA||(WA={}));function _j(n,e,t){return t===void 0&&(t="/"),wj(n,e,t,!1)}function wj(n,e,t,r){let i=typeof e=="string"?md(e):e,s=c3(i.pathname||"/",t);if(s==null)return null;let o=a3(n);Sj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Lj(s);a=Ij(o[l],u,r)}return a}function a3(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Xn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Xl([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(Xn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),a3(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Rj(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of l3(s.path))i(s,o,l)}),e}function l3(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=l3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function Sj(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Pj(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const bj=/^:[\w-]+$/,Mj=3,Ej=2,Tj=1,Aj=10,Cj=-2,$A=n=>n==="*";function Rj(n,e){let t=n.split("/"),r=t.length;return t.some($A)&&(r+=Cj),e&&(r+=Ej),t.filter(i=>!$A(i)).reduce((i,s)=>i+(bj.test(s)?Mj:s===""?Tj:Aj),r)}function Pj(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Ij(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=XA({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=XA({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Xl([s,f.pathname]),pathnameBase:zj(Xl([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Xl([s,f.pathnameBase]))}return o}function XA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Nj(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let x=a[f]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function Nj(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),s3(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Lj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return s3(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function c3(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function kj(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?md(n):n;return{pathname:t?t.startsWith("/")?t:Dj(t,e):e,search:Bj(r),hash:jj(i)}}function Dj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function __(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Oj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Uj(n,e){let t=Oj(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Fj(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=md(n):(i=ff({},n),Xn(!i.pathname||!i.pathname.includes("?"),__("?","pathname","search",i)),Xn(!i.pathname||!i.pathname.includes("#"),__("#","pathname","hash",i)),Xn(!i.search||!i.search.includes("#"),__("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=kj(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Xl=n=>n.join("/").replace(/\/\/+/g,"/"),zj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Bj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Hj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const u3=["post","put","patch","delete"];new Set(u3);const Vj=["get",...u3];new Set(Vj);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pf.apply(this,arguments)}const Cb=L.createContext(null),Gj=L.createContext(null),Bv=L.createContext(null),jv=L.createContext(null),gd=L.createContext({outlet:null,matches:[],isDataRoute:!1}),d3=L.createContext(null);function Hv(){return L.useContext(jv)!=null}function Vv(){return Hv()||Xn(!1),L.useContext(jv).location}function h3(n){L.useContext(Bv).static||L.useLayoutEffect(n)}function Wj(){let{isDataRoute:n}=L.useContext(gd);return n?iH():$j()}function $j(){Hv()||Xn(!1);let n=L.useContext(Cb),{basename:e,future:t,navigator:r}=L.useContext(Bv),{matches:i}=L.useContext(gd),{pathname:s}=Vv(),o=JSON.stringify(Uj(i,t.v7_relativeSplatPath)),a=L.useRef(!1);return h3(()=>{a.current=!0}),L.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=Fj(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Xl([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,n])}function Xj(n,e){return qj(n,e)}function qj(n,e,t,r){Hv()||Xn(!1);let{navigator:i}=L.useContext(Bv),{matches:s}=L.useContext(gd),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Vv(),h;if(e){var f;let _=typeof e=="string"?md(e):e;l==="/"||(f=_.pathname)!=null&&f.startsWith(l)||Xn(!1),h=_}else h=u;let p=h.pathname||"/",m=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=_j(n,{pathname:m}),x=Qj(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Xl([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Xl([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r);return e&&x?L.createElement(jv.Provider,{value:{location:pf({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ea.Pop}},x):x}function Yj(){let n=rH(),e=Hj(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:i},t):null,null)}const Kj=L.createElement(Yj,null);class Jj extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(gd.Provider,{value:this.props.routeContext},L.createElement(d3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zj(n){let{routeContext:e,match:t,children:r}=n,i=L.useContext(Cb);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(gd.Provider,{value:e},r)}function Qj(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Xn(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let m,v=!1,x=null,_=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||Kj,l&&(u<0&&p===0?(v=!0,_=null):u===p&&(v=!0,_=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),w=()=>{let S;return m?S=x:v?S=_:f.route.Component?S=L.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,L.createElement(Zj,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?L.createElement(Jj,{location:t.location,revalidation:t.revalidation,component:x,error:m,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var f3=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(f3||{}),_0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(_0||{});function eH(n){let e=L.useContext(Cb);return e||Xn(!1),e}function tH(n){let e=L.useContext(Gj);return e||Xn(!1),e}function nH(n){let e=L.useContext(gd);return e||Xn(!1),e}function p3(n){let e=nH(),t=e.matches[e.matches.length-1];return t.route.id||Xn(!1),t.route.id}function rH(){var n;let e=L.useContext(d3),t=tH(_0.UseRouteError),r=p3(_0.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function iH(){let{router:n}=eH(f3.UseNavigateStable),e=p3(_0.UseNavigateStable),t=L.useRef(!1);return h3(()=>{t.current=!0}),L.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,pf({fromRouteId:e},s)))},[n,e])}function is(n){Xn(!1)}function sH(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Ea.Pop,navigator:s,static:o=!1,future:a}=n;Hv()&&Xn(!1);let l=e.replace(/^\/*/,"/"),u=L.useMemo(()=>({basename:l,navigator:s,static:o,future:pf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=md(r));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:v="default"}=r,x=L.useMemo(()=>{let _=c3(h,l);return _==null?null:{location:{pathname:_,search:f,hash:p,state:m,key:v},navigationType:i}},[l,h,f,p,m,v,i]);return x==null?null:L.createElement(Bv.Provider,{value:u},L.createElement(jv.Provider,{children:t,value:x}))}function oH(n){let{children:e,location:t}=n;return Xj(F1(e),t)}new Promise(()=>{});function F1(n,e){e===void 0&&(e=[]);let t=[];return L.Children.forEach(n,(r,i)=>{if(!L.isValidElement(r))return;let s=[...e,i];if(r.type===L.Fragment){t.push.apply(t,F1(r.props.children,s));return}r.type!==is&&Xn(!1),!r.props.index||!r.props.children||Xn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=F1(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const aH="6";try{window.__reactRouterVersion=aH}catch{}const lH="startTransition",qA=IR[lH];function cH(n){let{basename:e,children:t,future:r,window:i}=n,s=L.useRef();s.current==null&&(s.current=vj({window:i,v5Compat:!0}));let o=s.current,[a,l]=L.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=L.useCallback(f=>{u&&qA?qA(()=>l(f)):l(f)},[l,u]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.createElement(sH,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var YA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(YA||(YA={}));var KA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(KA||(KA={}));const uH="modulepreload",dH=function(n){return"/"+n},JA={},Vf=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=dH(l),l in JA)return;JA[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":uH,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},hH=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Vf(async()=>{const{default:r}=await Promise.resolve().then(()=>vd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Rb extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class fH extends Rb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ZA extends Rb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class QA extends Rb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var z1;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(z1||(z1={}));var pH=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class mH{constructor(e,{headers:t={},customFetch:r,region:i=z1.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=hH(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return pH(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(a["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(a["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:h}).catch(x=>{throw new fH(x)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new ZA(f);if(!f.ok)throw new QA(f);let m=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield f.json():m==="application/octet-stream"?v=yield f.blob():m==="text/event-stream"?v=f:m==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(i){return{data:null,error:i,response:i instanceof QA||i instanceof ZA?i.context:void 0}}})}}var ti={},Pb={},Gv={},Gf={},Wv={},$v={},gH=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Zu=gH();const vH=Zu.fetch,m3=Zu.fetch.bind(Zu),g3=Zu.Headers,yH=Zu.Request,xH=Zu.Response,vd=Object.freeze(Object.defineProperty({__proto__:null,Headers:g3,Request:yH,Response:xH,default:m3,fetch:vH},Symbol.toStringTag,{value:"Module"})),_H=EO(vd);var Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});let wH=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xv.default=wH;var v3=$i&&$i.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($v,"__esModule",{value:!0});const SH=v3(_H),bH=v3(Xv);let MH=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=SH.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l,u;let h=null,f=null,p=null,m=s.status,v=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=w:f=JSON.parse(w))}const _=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const _=await s.text();try{h=JSON.parse(_),Array.isArray(h)&&s.status===404&&(f=[],h=null,m=200,v="OK")}catch{s.status===404&&_===""?(m=204,v="No Content"):h={message:_}}if(h&&this.isMaybeSingle&&(!((u=h==null?void 0:h.details)===null||u===void 0)&&u.includes("0 rows"))&&(h=null,m=200,v="OK"),h&&this.shouldThrowOnError)throw new bH.default(h)}return{error:h,data:f,count:p,status:m,statusText:v}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};$v.default=MH;var EH=$i&&$i.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wv,"__esModule",{value:!0});const TH=EH($v);let AH=class extends TH.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Wv.default=AH;var CH=$i&&$i.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gf,"__esModule",{value:!0});const RH=CH(Wv);let PH=class extends RH.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Gf.default=PH;var IH=$i&&$i.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gv,"__esModule",{value:!0});const Zd=IH(Gf);let NH=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Zd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Zd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Zd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Zd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Zd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Gv.default=NH;var y3=$i&&$i.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pb,"__esModule",{value:!0});const LH=y3(Gv),kH=y3(Gf);let DH=class x3{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new LH.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new x3(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(a="POST",u=t);const h=new Headers(this.headers);return s&&h.set("Prefer",`count=${s}`),new kH.default({method:a,url:l,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Pb.default=DH;var yd=$i&&$i.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ti,"__esModule",{value:!0});ti.PostgrestError=ti.PostgrestBuilder=ti.PostgrestTransformBuilder=ti.PostgrestFilterBuilder=ti.PostgrestQueryBuilder=ti.PostgrestClient=void 0;const _3=yd(Pb);ti.PostgrestClient=_3.default;const w3=yd(Gv);ti.PostgrestQueryBuilder=w3.default;const S3=yd(Gf);ti.PostgrestFilterBuilder=S3.default;const b3=yd(Wv);ti.PostgrestTransformBuilder=b3.default;const M3=yd($v);ti.PostgrestBuilder=M3.default;const E3=yd(Xv);ti.PostgrestError=E3.default;var OH=ti.default={PostgrestClient:_3.default,PostgrestQueryBuilder:w3.default,PostgrestFilterBuilder:S3.default,PostgrestTransformBuilder:b3.default,PostgrestBuilder:M3.default,PostgrestError:E3.default};const{PostgrestClient:UH,PostgrestQueryBuilder:YK,PostgrestFilterBuilder:KK,PostgrestTransformBuilder:JK,PostgrestBuilder:ZK,PostgrestError:QK}=OH;function FH(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const zH=FH(),BH="2.11.15",jH=`realtime-js/${BH}`,HH="1.0.0",T3=1e4,VH=1e3;var Ih;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ih||(Ih={}));var Mr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Mr||(Mr={}));var ds;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ds||(ds={}));var B1;(function(n){n.websocket="websocket"})(B1||(B1={}));var Ll;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ll||(Ll={}));class GH{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class A3{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var cn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(cn||(cn={}));const eC=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=WH(o,n,e,i),s),{})},WH=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?C3(s,o):j1(o)},C3=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return YH(e,t)}switch(n){case cn.bool:return $H(e);case cn.float4:case cn.float8:case cn.int2:case cn.int4:case cn.int8:case cn.numeric:case cn.oid:return XH(e);case cn.json:case cn.jsonb:return qH(e);case cn.timestamp:return KH(e);case cn.abstime:case cn.date:case cn.daterange:case cn.int4range:case cn.int8range:case cn.money:case cn.reltime:case cn.text:case cn.time:case cn.timestamptz:case cn.timetz:case cn.tsrange:case cn.tstzrange:return j1(e);default:return j1(e)}},j1=n=>n,$H=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},XH=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},qH=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},YH=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>C3(e,a))}return n},KH=n=>typeof n=="string"?n.replace(" ","T"):n,R3=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class w_{constructor(e,t,r={},i=T3){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tC;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(tC||(tC={}));class Nh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nh.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Nh.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Nh.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,h)=>{o[u]||(l[u]=h)}),this.map(o,(u,h)=>{const f=s[u];if(f){const p=h.map(_=>_.presence_ref),m=f.map(_=>_.presence_ref),v=h.filter(_=>m.indexOf(_.presence_ref)<0),x=f.filter(_=>p.indexOf(_.presence_ref)<0);v.length>0&&(a[u]=v),x.length>0&&(l[u]=x)}else a[u]=h}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),h.length>0){const f=e[a].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,h,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const h=l.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nC;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(nC||(nC={}));var rC;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(rC||(rC={}));var vo;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(vo||(vo={}));class Ib{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Mr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new w_(this,ds.join,this.params,this.timeout),this.rejoinTimer=new A3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Mr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ds.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Nh(this),this.broadcastEndpointURL=R3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Mr.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e(vo.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(vo.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var f;if(this.socket.setAuth(),h===void 0){e==null||e(vo.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,v=[];for(let x=0;x<m;x++){const _=p[x],{filter:{event:g,schema:w,table:S,filter:E}}=_,R=h&&h[x];if(R&&R.event===g&&R.schema===w&&R.table===S&&R.filter===E)v.push(Object.assign(Object.assign({},_),{id:R.id}));else{this.unsubscribe(),this.state=Mr.errored,e==null||e(vo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(vo.SUBSCRIBED);return}}).receive("error",h=>{this.state=Mr.errored,e==null||e(vo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ds.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new w_(this,ds.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new w_(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:h}=ds;if(r&&[a,l,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var v,x,_;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((_=(x=m.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var v,x,_,g,w,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,R=(v=m.filter)===null||v===void 0?void 0:v.event;return E&&((x=t.ids)===null||x===void 0?void 0:x.includes(E))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const E=(w=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return E==="*"||E===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:x,table:_,commit_timestamp:g,type:w,errors:S}=v;p=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:g,eventType:w,new:{},old:{},errors:S}),this._getPayloadRecords(v))}m.callback(p,r)})}_isClosed(){return this.state===Mr.closed}_isJoined(){return this.state===Mr.joined}_isJoining(){return this.state===Mr.joining}_isLeaving(){return this.state===Mr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ib.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ds.close,{},e)}_onError(e){this._on(ds.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=eC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=eC(e.columns,e.old_record)),t}}const iC=()=>{},JH=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZH{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=T3,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iC,this.ref=0,this.logger=iC,this.conn=null,this.sendBuffer=[],this.serializer=new GH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Vf(async()=>{const{default:l}=await Promise.resolve().then(()=>vd);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${B1.websocket}`,this.httpEndpoint=R3(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new A3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=zH),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:HH}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ih.connecting:return Ll.Connecting;case Ih.open:return Ll.Open;case Ih.closing:return Ll.Closing;default:return Ll.Closed}}isConnected(){return this.connectionState()===Ll.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Ib(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:jH};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ds.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(VH,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ds.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([JH],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class Nb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function tr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class QH extends Nb{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class H1 extends Nb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var e6=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const P3=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Vf(async()=>{const{default:r}=await Promise.resolve().then(()=>vd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},t6=()=>e6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vf(()=>Promise.resolve().then(()=>vd),void 0)).Response:Response}),V1=n=>{if(Array.isArray(n))return n.map(t=>V1(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=V1(r)}),e};var dc=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const S_=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),n6=(n,e,t)=>dc(void 0,void 0,void 0,function*(){const r=yield t6();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new QH(S_(i),n.status||500))}).catch(i=>{e(new H1(S_(i),i))}):e(new H1(S_(n),n))}),r6=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function Wf(n,e,t,r,i,s){return dc(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,r6(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>n6(l,a,r))})})}function w0(n,e,t,r){return dc(this,void 0,void 0,function*(){return Wf(n,"GET",e,t,r)})}function ha(n,e,t,r,i){return dc(this,void 0,void 0,function*(){return Wf(n,"POST",e,r,i,t)})}function i6(n,e,t,r,i){return dc(this,void 0,void 0,function*(){return Wf(n,"PUT",e,r,i,t)})}function s6(n,e,t,r){return dc(this,void 0,void 0,function*(){return Wf(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function I3(n,e,t,r,i){return dc(this,void 0,void 0,function*(){return Wf(n,"DELETE",e,r,i,t)})}var Kr=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const o6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class a6{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=P3(i)}uploadOrUpdate(e,t,r,i){return Kr(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},sC),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),p=yield f.json();return f.ok?{data:{path:u,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(s){if(tr(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Kr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Kr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:sC.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),p=yield f.json();return f.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(tr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Kr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield ha(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Nb("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(tr(r))return{data:null,error:r};throw r}})}update(e,t,r){return Kr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Kr(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(tr(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Kr(this,void 0,void 0,function*(){try{return{data:{path:(yield ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(tr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Kr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield ha(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(tr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Kr(this,void 0,void 0,function*(){try{const i=yield ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(tr(i))return{data:null,error:i};throw i}})}download(e,t){return Kr(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield w0(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(tr(a))return{data:null,error:a};throw a}})}info(e){return Kr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield w0(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:V1(r),error:null}}catch(r){if(tr(r))return{data:null,error:r};throw r}})}exists(e){return Kr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield s6(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(tr(r)&&r instanceof H1){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Kr(this,void 0,void 0,function*(){try{return{data:yield I3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(tr(t))return{data:null,error:t};throw t}})}list(e,t,r){return Kr(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},o6),t),{prefix:e||""});return{data:yield ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(tr(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const l6="2.7.1",c6={"X-Client-Info":`storage-js/${l6}`};var Nc=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class u6{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},c6),t),this.fetch=P3(r)}listBuckets(){return Nc(this,void 0,void 0,function*(){try{return{data:yield w0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(tr(e))return{data:null,error:e};throw e}})}getBucket(e){return Nc(this,void 0,void 0,function*(){try{return{data:yield w0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(tr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Nc(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(tr(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Nc(this,void 0,void 0,function*(){try{return{data:yield i6(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(tr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Nc(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(tr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Nc(this,void 0,void 0,function*(){try{return{data:yield I3(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(tr(t))return{data:null,error:t};throw t}})}}class d6 extends u6{constructor(e,t={},r){super(e,t,r)}from(e){return new a6(this.url,this.headers,e,this.fetch)}}const h6="2.50.4";let vh="";typeof Deno<"u"?vh="deno":typeof document<"u"?vh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vh="react-native":vh="node";const f6={"X-Client-Info":`supabase-js-${vh}/${h6}`},p6={headers:f6},m6={schema:"public"},g6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},v6={};var y6=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const x6=n=>{let e;return n?e=n:typeof fetch>"u"?e=m3:e=fetch,(...t)=>e(...t)},_6=()=>typeof Headers>"u"?g3:Headers,w6=(n,e,t)=>{const r=x6(t),i=_6();return(s,o)=>y6(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var S6=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};function b6(n){return n.endsWith("/")?n:n+"/"}function M6(n,e){var t,r;const{db:i,auth:s,realtime:o,global:a}=n,{db:l,auth:u,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>S6(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}const N3="2.70.0",ru=30*1e3,G1=3,b_=G1*ru,E6="http://localhost:9999",T6="supabase.auth.token",A6={"X-Client-Info":`gotrue-js/${N3}`},W1="X-Supabase-Api-Version",L3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},C6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,R6=6e5;class Lb extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Tt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class P6 extends Lb{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function I6(n){return Tt(n)&&n.name==="AuthApiError"}class k3 extends Lb{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ka extends Lb{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ca extends Ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function N6(n){return Tt(n)&&n.name==="AuthSessionMissingError"}class Mm extends Ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Em extends Ka{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tm extends Ka{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function L6(n){return Tt(n)&&n.name==="AuthImplicitGrantRedirectError"}class oC extends Ka{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $1 extends Ka{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function M_(n){return Tt(n)&&n.name==="AuthRetryableFetchError"}class aC extends Ka{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Lh extends Ka{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const S0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lC=` 	
\r=`.split(""),k6=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<lC.length;e+=1)n[lC[e].charCodeAt(0)]=-2;for(let e=0;e<S0.length;e+=1)n[S0[e].charCodeAt(0)]=e;return n})();function cC(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(S0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(S0[r]),e.queuedBits-=6}}function D3(n,e,t){const r=k6[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function uC(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{U6(o,r,t)};for(let o=0;o<n.length;o+=1)D3(n.charCodeAt(o),i,s);return e.join("")}function D6(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function O6(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}D6(r,e)}}function U6(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function F6(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)D3(n.charCodeAt(i),t,r);return new Uint8Array(e)}function z6(n){const e=[];return O6(n,t=>e.push(t)),new Uint8Array(e)}function B6(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>cC(i,t,r)),cC(null,t,r),e.join("")}function j6(n){return Math.round(Date.now()/1e3)+n}function H6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ss=()=>typeof window<"u"&&typeof document<"u",dl={tested:!1,writable:!1},kh=()=>{if(!ss())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dl.tested)return dl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),dl.tested=!0,dl.writable=!0}catch{dl.tested=!0,dl.writable=!1}return dl.writable};function V6(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const O3=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Vf(async()=>{const{default:r}=await Promise.resolve().then(()=>vd);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},G6=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",U3=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Am=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Cm=async(n,e)=>{await n.removeItem(e)};class qv{constructor(){this.promise=new qv.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}qv.promiseConstructor=Promise;function E_(n){const e=n.split(".");if(e.length!==3)throw new Lh("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!C6.test(e[r]))throw new Lh("JWT not in base64url format");return{header:JSON.parse(uC(e[0])),payload:JSON.parse(uC(e[1])),signature:F6(e[2]),raw:{header:e[0],payload:e[1]}}}async function W6(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function $6(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function X6(n){return("0"+n.toString(16)).substr(-2)}function q6(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,X6).join("")}async function Y6(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function K6(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Y6(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lc(n,e,t=!1){const r=q6();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await U3(n,`${e}-code-verifier`,i);const s=await K6(r);return[s,r===s?"plain":"s256"]}const J6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Z6(n){const e=n.headers.get(W1);if(!e||!e.match(J6))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Q6(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function eV(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kc(n){if(!tV.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var nV=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Cl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),rV=[502,503,504];async function dC(n){var e;if(!G6(n))throw new $1(Cl(n),0);if(rV.includes(n.status))throw new $1(Cl(n),n.status);let t;try{t=await n.json()}catch(s){throw new k3(Cl(s),s)}let r;const i=Z6(n);if(i&&i.getTime()>=L3["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new aC(Cl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ca}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new aC(Cl(t),n.status,t.weak_password.reasons);throw new P6(Cl(t),n.status||500,r)}const iV=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Bt(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[W1]||(s[W1]=L3["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await sV(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function sV(n,e,t,r,i,s){const o=iV(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new $1(Cl(l),0)}if(a.ok||await dC(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await dC(l)}}function po(n){var e;let t=null;cV(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=j6(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function hC(n){const e=po(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ma(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function oV(n){return{data:n,error:null}}function aV(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=nV(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function lV(n){return n}function cV(n){return n.access_token&&n.refresh_token&&n.expires_in}const T_=["global","local","others"];var uV=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class dV{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=O3(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=T_[0]){if(T_.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${T_.join(", ")}`);try{return await Bt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ma})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=uV(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:aV,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Tt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Bt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ma})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},h=await Bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:lV});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);u[`${_}Page`]=x}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Tt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){kc(e);try{return await Bt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ma})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){kc(e);try{return await Bt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ma})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){kc(e);try{return await Bt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ma})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){kc(e.userId);try{const{data:t,error:r}=await Bt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){kc(e.userId),kc(e.id);try{return{data:await Bt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}}const hV={getItem:n=>kh()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{kh()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{kh()&&globalThis.localStorage.removeItem(n)}};function fC(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function fV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Dc={debug:!!(globalThis&&kh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class F3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pV extends F3{}async function mV(n,e,t){Dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Dc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new pV(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Dc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}fV();const gV={url:E6,storageKey:T6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pC(n,e,t){return await t()}class mf{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mf.nextInstanceID,mf.nextInstanceID+=1,this.instanceID>0&&ss()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},gV),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new dV({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=O3(i.fetch),this.lock=i.lock||pC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ss()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=mV:this.lock=pC,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:kh()?this.storage=hV:(this.memoryStorage={},this.storage=fC(this.memoryStorage)):(this.memoryStorage={},this.storage=fC(this.memoryStorage)),ss()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${N3}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=V6(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ss()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),L6(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Tt(t)?{error:t}:{error:new k3("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await Bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:po}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Tt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:h,password:f,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Lc(this.storage,this.storageKey)),s=await Bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},xform:po})}else if("phone"in e){const{phone:h,password:f,options:p}=e;s=await Bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:po})}else throw new Em("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Tt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hC})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hC})}else throw new Em("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Mm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,s,o,a,l,u,h,f,p,m;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:_,wallet:g,statement:w,options:S}=e;let E;if(ss())if(typeof g=="object")E=g;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))E=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=g}const R=new URL((t=S==null?void 0:S.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const A=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),w?{statement:w}:null));let P;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")P=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)P=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)v=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),x=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${R.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(r=S==null?void 0:S.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(h=S==null?void 0:S.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const A=await E.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=A}}try{const{data:_,error:g}=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:B6(x)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:po});if(g)throw g;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Mm}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:g})}catch(_){if(Tt(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const t=await Am(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:po});if(await Cm(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Mm}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Tt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await Bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:po}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Mm}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Lc(this.storage,this.storageKey));const{error:f}=await Bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:h}=await Bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Em("You must provide either an email or phone number.")}catch(a){if(Tt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:po});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Tt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Lc(this.storage,this.storageKey)),await Bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:oV})}catch(s){if(Tt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ca;const{error:i}=await Bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Tt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Bt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Bt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Em("You must provide either an email or phone number and a type")}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Am(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<b_:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,h))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ma}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ca}:await Bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:ma})})}catch(t){if(Tt(t))return N6(t)&&(await this._removeSession(),await Cm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ca;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Lc(this.storage,this.storageKey));const{data:u,error:h}=await Bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ma});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ca;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=E_(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Tt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ca;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ss())throw new Tm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new oC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tm("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oC("No code detected.");const{data:w,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Tm("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(a);let p=h+f;l&&(p=parseInt(l));const m=p-h;m*1e3<=ru&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=p-f;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,h);const{data:x,error:_}=await this._getUser(s);if(_)throw _;const g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(Tt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Am(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(I6(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Cm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=H6(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Lc(this.storage,this.storageKey,!0));try{return await Bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Tt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,h;const{data:f,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Bt(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return ss()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Tt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await Bt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await $6(async i=>(i>0&&await W6(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:po})),(i,s)=>{const o=200*Math.pow(2,i);return s&&M_(s)&&Date.now()+o-r<ru})}catch(r){if(this._debug(t,"error",r),Tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ss()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Am(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<b_;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${b_}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),M_(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ca;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new qv;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ca;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Tt(s)){const o={session:null,error:s};return M_(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await U3(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Cm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ss()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ru);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ru);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ru}ms, refresh threshold is ${G1} ticks`),i<=G1&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof F3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ss()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Lc(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Bt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await Bt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await Bt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Bt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=E_(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+R6>Date.now()))return r;const{data:i,error:s}=await Bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Lh("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Lh("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};r=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=E_(r);if(Q6(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const u=eV(i.alg),h=await this.fetchJwk(i.kid,t),f=await crypto.subtle.importKey("jwk",h,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,z6(`${a}.${l}`)))throw new Lh("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}}mf.nextInstanceID=0;const vV=mf;class yV extends vV{constructor(e){super(e)}}var xV=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class _V{constructor(e,t,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=b6(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:m6,realtime:v6,auth:Object.assign(Object.assign({},g6),{storageKey:u}),global:p6},f=M6(r??{},h);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=w6(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new UH(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new mH(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new d6(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return xV(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yV({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ZH(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wV=(n,e,t)=>new _V(n,e,t),SV="https://jlvozppodflqepunuhlw.supabase.co",bV="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impsdm96cHBvZGZscWVwdW51aGx3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxMTY3MTAsImV4cCI6MjA2NzY5MjcxMH0.C4PBsKhwjr5zawDLmIjhGsTgyMHtnzTRtOjamRv04p8",Ua=wV(SV,bV,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),z3=L.createContext(void 0);function MV({children:n}){const[e,t]=L.useState(null),[r,i]=L.useState(null),[s,o]=L.useState(!0);L.useEffect(()=>{const{data:{subscription:u}}=Ua.auth.onAuthStateChange((h,f)=>{i(f),t((f==null?void 0:f.user)??null),o(!1)});return Ua.auth.getSession().then(({data:{session:h}})=>{i(h),t((h==null?void 0:h.user)??null),o(!1)}),()=>u.unsubscribe()},[]);const l={user:e,session:r,loading:s,signOut:async()=>{try{t(null),i(null),await Ua.auth.signOut({scope:"global"}),window.location.href="/auth"}catch(u){console.error("Error signing out:",u),window.location.href="/auth"}}};return M.jsx(z3.Provider,{value:l,children:n})}function B3(){const n=L.useContext(z3);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const EV=Iv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Qt=L.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?lf:"button";return M.jsx(o,{className:Dn(EV({variant:e,size:t,className:n})),ref:s,...i})});Qt.displayName="Button";const ln=L.forwardRef(({className:n,...e},t)=>M.jsx("div",{ref:t,className:Dn("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ln.displayName="Card";const pn=L.forwardRef(({className:n,...e},t)=>M.jsx("div",{ref:t,className:Dn("flex flex-col space-y-1.5 p-6",n),...e}));pn.displayName="CardHeader";const mn=L.forwardRef(({className:n,...e},t)=>M.jsx("h3",{ref:t,className:Dn("text-2xl font-semibold leading-none tracking-tight",n),...e}));mn.displayName="CardTitle";const ko=L.forwardRef(({className:n,...e},t)=>M.jsx("p",{ref:t,className:Dn("text-sm text-muted-foreground",n),...e}));ko.displayName="CardDescription";const gn=L.forwardRef(({className:n,...e},t)=>M.jsx("div",{ref:t,className:Dn("p-6 pt-0",n),...e}));gn.displayName="CardContent";const TV=L.forwardRef(({className:n,...e},t)=>M.jsx("div",{ref:t,className:Dn("flex items-center p-6 pt-0",n),...e}));TV.displayName="CardFooter";function AV(n,e=[]){let t=[];function r(s,o){const a=L.createContext(o),l=t.length;t=[...t,o];function u(f){const{scope:p,children:m,...v}=f,x=(p==null?void 0:p[n][l])||a,_=L.useMemo(()=>v,Object.values(v));return M.jsx(x.Provider,{value:_,children:m})}function h(f,p){const m=(p==null?void 0:p[n][l])||a,v=L.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const i=()=>{const s=t.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return L.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,CV(i,...e)]}function CV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...a,...f}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var RV=L.createContext(void 0);function j3(n){const e=L.useContext(RV);return n||e||"ltr"}var A_="rovingFocusGroup.onEntryFocus",PV={bubbles:!1,cancelable:!0},Yv="RovingFocusGroup",[X1,H3,IV]=UI(Yv),[NV,V3]=AV(Yv,[IV]),[LV,kV]=NV(Yv),G3=L.forwardRef((n,e)=>M.jsx(X1.Provider,{scope:n.__scopeRovingFocusGroup,children:M.jsx(X1.Slot,{scope:n.__scopeRovingFocusGroup,children:M.jsx(DV,{...n,ref:e})})}));G3.displayName=Yv;var DV=L.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=n,p=L.useRef(null),m=Yi(e,p),v=j3(s),[x=null,_]=fb({prop:o,defaultProp:a,onChange:l}),[g,w]=L.useState(!1),S=ys(u),E=H3(t),R=L.useRef(!1),[A,P]=L.useState(0);return L.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(A_,S),()=>k.removeEventListener(A_,S)},[S]),M.jsx(LV,{scope:t,orientation:r,dir:v,loop:i,currentTabStopId:x,onItemFocus:L.useCallback(k=>_(k),[_]),onItemShiftTab:L.useCallback(()=>w(!0),[]),onFocusableItemAdd:L.useCallback(()=>P(k=>k+1),[]),onFocusableItemRemove:L.useCallback(()=>P(k=>k-1),[]),children:M.jsx(kn.div,{tabIndex:g||A===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:sn(n.onMouseDown,()=>{R.current=!0}),onFocus:sn(n.onFocus,k=>{const N=!R.current;if(k.target===k.currentTarget&&N&&!g){const C=new CustomEvent(A_,PV);if(k.currentTarget.dispatchEvent(C),!C.defaultPrevented){const O=E().filter(K=>K.focusable),F=O.find(K=>K.active),W=O.find(K=>K.id===x),Z=[F,W,...O].filter(Boolean).map(K=>K.ref.current);X3(Z,h)}}R.current=!1}),onBlur:sn(n.onBlur,()=>w(!1))})})}),W3="RovingFocusGroupItem",$3=L.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,...o}=n,a=MN(),l=s||a,u=kV(W3,t),h=u.currentTabStopId===l,f=H3(t),{onFocusableItemAdd:p,onFocusableItemRemove:m}=u;return L.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),M.jsx(X1.ItemSlot,{scope:t,id:l,focusable:r,active:i,children:M.jsx(kn.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:sn(n.onMouseDown,v=>{r?u.onItemFocus(l):v.preventDefault()}),onFocus:sn(n.onFocus,()=>u.onItemFocus(l)),onKeyDown:sn(n.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=FV(v,u.orientation,u.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let g=f().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")g.reverse();else if(x==="prev"||x==="next"){x==="prev"&&g.reverse();const w=g.indexOf(v.currentTarget);g=u.loop?zV(g,w+1):g.slice(w+1)}setTimeout(()=>X3(g))}})})})});$3.displayName=W3;var OV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UV(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function FV(n,e,t){const r=UV(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return OV[r]}function X3(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function zV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var BV=G3,jV=$3,kb="Tabs",[HV,eJ]=db(kb,[V3]),q3=V3(),[VV,Db]=HV(kb),Y3=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=n,h=j3(a),[f,p]=fb({prop:r,onChange:i,defaultProp:s});return M.jsx(VV,{scope:t,baseId:MN(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:l,children:M.jsx(kn.div,{dir:h,"data-orientation":o,...u,ref:e})})});Y3.displayName=kb;var K3="TabsList",J3=L.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,s=Db(K3,t),o=q3(t);return M.jsx(BV,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:M.jsx(kn.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});J3.displayName=K3;var Z3="TabsTrigger",Q3=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...s}=n,o=Db(Z3,t),a=q3(t),l=nL(o.baseId,r),u=rL(o.baseId,r),h=r===o.value;return M.jsx(jV,{asChild:!0,...a,focusable:!i,active:h,children:M.jsx(kn.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:sn(n.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:sn(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:sn(n.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!i&&f&&o.onValueChange(r)})})})});Q3.displayName=Z3;var eL="TabsContent",tL=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:s,...o}=n,a=Db(eL,t),l=nL(a.baseId,r),u=rL(a.baseId,r),h=r===a.value,f=L.useRef(h);return L.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),M.jsx(Av,{present:i||h,children:({present:p})=>M.jsx(kn.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:p&&s})})});tL.displayName=eL;function nL(n,e){return`${n}-trigger-${e}`}function rL(n,e){return`${n}-content-${e}`}var GV=Y3,iL=J3,sL=Q3,oL=tL;const aL=GV,Ob=L.forwardRef(({className:n,...e},t)=>M.jsx(iL,{ref:t,className:Dn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Ob.displayName=iL.displayName;const gf=L.forwardRef(({className:n,...e},t)=>M.jsx(sL,{ref:t,className:Dn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));gf.displayName=sL.displayName;const vf=L.forwardRef(({className:n,...e},t)=>M.jsx(oL,{ref:t,className:Dn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));vf.displayName=oL.displayName;const lL=({children:n,title:e})=>{const[t,r]=L.useState(!1),i=L.useRef(null),s=async()=>{if(i.current)try{if(t)await document.exitFullscreen(),r(!1);else{const o=i.current.querySelector("canvas");o&&(await o.requestFullscreen(),r(!0))}}catch{console.log("Fullscreen not supported or denied")}};return Be.useEffect(()=>{const o=()=>{r(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",o),()=>document.removeEventListener("fullscreenchange",o)},[]),M.jsxs("div",{className:"relative",children:[M.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col items-end gap-2",children:[M.jsx(Qt,{onClick:s,variant:"outline",size:"sm",className:"bg-slate-800/80 border-purple-500/50 text-white hover:bg-slate-700/80",children:t?M.jsxs(M.Fragment,{children:[M.jsx(J4,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]}):M.jsxs(M.Fragment,{children:[M.jsx(K4,{className:"h-4 w-4 mr-2"}),"Fullscreen"]})}),!t&&M.jsx("p",{className:"text-xs text-gray-400 max-w-[200px] text-right",children:" Start the game first, then click fullscreen for best experience"})]}),M.jsx("div",{ref:i,children:n})]})},_t={WIDTH:640,HEIGHT:360,ROVER_SPEED:8,ROVER_WIDTH:64,ROVER_HEIGHT:48,ICE_SIZE:16,DUST_SIZE:32,ROCK_WIDTH:28,ROCK_HEIGHT:24,ICE_SPAWN_RATE:90,DUST_SPAWN_RATE:150,ROCK_SPAWN_RATE:200,ICE_SPEED:2,DUST_SPEED:1.5,ROCK_SPEED:1.8,SPEED_INCREASE_FACTOR:.003,WATER_POINTS_PER_ICE:50},C_=(n,e,t,r)=>n.x<e.x+e.w&&n.x+t>e.x&&n.y<e.y+e.h&&n.y+r>e.y,cL=n=>n>70?"text-green-400":n>40?"text-yellow-400":"text-red-400",WV=()=>{const[n,e]=L.useState(!1),[t,r]=L.useState(!1),[i,s]=L.useState(0),[o,a]=L.useState(0),[l,u]=L.useState(100),h=L.useRef(0),f=L.useRef({x:40,y:_t.HEIGHT-75,w:_t.ROVER_WIDTH,h:_t.ROVER_HEIGHT,speed:_t.ROVER_SPEED}),p=L.useRef([]),m=L.useRef([]),v=L.useRef([]),x=L.useCallback(()=>{r(!0)},[]),_=L.useCallback(()=>{p.current.push({x:Math.random()*(_t.WIDTH-_t.ICE_SIZE),y:-_t.ICE_SIZE})},[]),g=L.useCallback(()=>{m.current.push({x:Math.random()*(_t.WIDTH-_t.DUST_SIZE),y:-_t.DUST_SIZE})},[]),w=L.useCallback(()=>{v.current.push({x:Math.random()*(_t.WIDTH-_t.ROCK_WIDTH),y:-_t.ROCK_HEIGHT})},[]),S=L.useCallback(()=>{e(!0),r(!1),a(0),u(100),s(0),h.current=0,f.current={x:40,y:_t.HEIGHT-75,w:_t.ROVER_WIDTH,h:_t.ROVER_HEIGHT,speed:_t.ROVER_SPEED},p.current=[],m.current=[],v.current=[]},[]);return{gameStarted:n,gameOver:t,score:i,waterPoints:o,signalStrength:l,frame:h,rover:f,iceChunks:p,dusts:m,rocks:v,setScore:s,setWaterPoints:a,setSignalStrength:u,endGame:x,spawnIce:_,spawnDust:g,spawnRock:w,resetGame:S}},$V=(n,e)=>{const t=L.useRef(),r=L.useRef({}),i=L.useRef(new Image),s=L.useRef(new Image),o=L.useRef(new Image),a=L.useRef(new Image),l=L.useRef(new Image);return L.useEffect(()=>{i.current.src="/lovable-uploads/0a3db819-fa9b-43a5-85f7-c8fa75998d9b.png",s.current.src="/lovable-uploads/ecec65ca-3cd0-4791-917b-3eac62c8aa01.png",o.current.src="/lovable-uploads/2d686005-6624-4dfa-beae-25c3708b4ad0.png",a.current.src="/lovable-uploads/6880029a-1c2d-49a1-873b-e8edd82f4bdb.png",l.current.src="/lovable-uploads/5c716d72-ed18-4132-9b8c-1faf06d8de33.png"},[]),L.useEffect(()=>{const u=f=>r.current[f.code]=!0,h=f=>r.current[f.code]=!1;return window.addEventListener("keydown",u),window.addEventListener("keyup",h),()=>{window.removeEventListener("keydown",u),window.removeEventListener("keyup",h)}},[]),L.useEffect(()=>{if(!n.gameStarted)return;const u=e.current.getContext("2d");function h(){const p=u.createLinearGradient(0,0,0,_t.HEIGHT);p.addColorStop(0,"#3a0f1d"),p.addColorStop(1,"#6b1e2e"),u.fillStyle=p,u.fillRect(0,0,_t.WIDTH,_t.HEIGHT);const m=-(n.frame.current*.3)%_t.WIDTH;u.drawImage(i.current,m,_t.HEIGHT-120,_t.WIDTH,120),u.drawImage(i.current,m+_t.WIDTH,_t.HEIGHT-120,_t.WIDTH,120)}function f(){if(n.gameOver)return;const p=n.frame.current;n.frame.current+=1;const m=Math.floor(p/100),v=Math.max(20,100-m);n.setSignalStrength(v),h(),p%_t.ICE_SPAWN_RATE===0&&n.spawnIce(),p%_t.DUST_SPAWN_RATE===0&&n.spawnDust(),p%_t.ROCK_SPAWN_RATE===0&&n.spawnRock(),r.current.ArrowLeft&&n.rover.current.x>0&&(n.rover.current.x-=n.rover.current.speed),r.current.ArrowRight&&n.rover.current.x<_t.WIDTH-n.rover.current.w&&(n.rover.current.x+=n.rover.current.speed),u.drawImage(s.current,n.rover.current.x,n.rover.current.y,n.rover.current.w,n.rover.current.h),n.iceChunks.current.forEach((x,_)=>{x.y+=_t.ICE_SPEED+p*5e-4,u.drawImage(o.current,x.x,x.y,_t.ICE_SIZE,_t.ICE_SIZE),C_(x,n.rover.current,_t.ICE_SIZE,_t.ICE_SIZE)&&(n.iceChunks.current.splice(_,1),n.setWaterPoints(g=>g+_t.WATER_POINTS_PER_ICE))}),n.dusts.current.forEach((x,_)=>{x.y+=_t.DUST_SPEED+p*_t.SPEED_INCREASE_FACTOR,u.drawImage(a.current,x.x,x.y,_t.DUST_SIZE,_t.DUST_SIZE),C_(x,n.rover.current,_t.DUST_SIZE,_t.DUST_SIZE)&&n.endGame()}),n.rocks.current.forEach((x,_)=>{x.y+=_t.ROCK_SPEED+p*_t.SPEED_INCREASE_FACTOR,u.drawImage(l.current,x.x,x.y,_t.ROCK_WIDTH,_t.ROCK_HEIGHT),C_(x,n.rover.current,_t.ROCK_WIDTH,_t.ROCK_HEIGHT)&&n.endGame()}),n.setScore(Math.floor(p/10)),t.current=requestAnimationFrame(f)}return t.current=requestAnimationFrame(f),()=>cancelAnimationFrame(t.current)},[n]),{animationId:t}},XV=Iv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rr({className:n,variant:e,...t}){return M.jsx("div",{className:Dn(XV({variant:e}),n),...t})}const qV=({waterPoints:n,signalStrength:e,score:t,gameStarted:r,gameOver:i,onStart:s})=>M.jsx(M.Fragment,{children:M.jsxs("div",{className:"flex justify-center gap-4",children:[M.jsxs(rr,{variant:"outline",className:"border-white text-white",children:[M.jsx(dN,{className:"h-4 w-4 mr-1"})," ",n]}),M.jsxs(rr,{variant:"outline",className:`border-white ${cL(e)}`,children:[M.jsx(fN,{className:"h-4 w-4 mr-1"})," ",e,"%"]}),M.jsxs(rr,{variant:"outline",className:"border-white text-white",children:[M.jsx(rc,{className:"h-4 w-4 mr-1"})," ",t]})]})}),YV=({isFullscreen:n,waterPoints:e,signalStrength:t,score:r,gameStarted:i,gameOver:s,onStart:o})=>n?dd.createPortal(M.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[999999]",children:[M.jsxs("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 flex gap-4 pointer-events-auto z-[1000000]",children:[M.jsxs(rr,{variant:"outline",className:"border-white text-white bg-black/90 backdrop-blur-sm text-lg px-4 py-2",children:[M.jsx(dN,{className:"h-5 w-5 mr-2"})," ",e]}),M.jsxs(rr,{variant:"outline",className:`border-white ${cL(t)} bg-black/90 backdrop-blur-sm text-lg px-4 py-2`,children:[M.jsx(fN,{className:"h-5 w-5 mr-2"})," ",t,"%"]}),M.jsxs(rr,{variant:"outline",className:"border-white text-white bg-black/90 backdrop-blur-sm text-lg px-4 py-2",children:[M.jsx(rc,{className:"h-5 w-5 mr-2"})," ",r]})]}),s&&M.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center pointer-events-auto z-[1000000]",children:M.jsxs("div",{className:"text-center space-y-6 bg-slate-800/95 p-12 rounded-lg border border-red-500/50 backdrop-blur-sm",children:[M.jsx("p",{className:"text-red-400 font-bold text-4xl",children:"Mission Failed!"}),M.jsx(Qt,{onClick:o,className:"bg-white text-black text-xl px-12 py-4",children:"Retry Mission"})]})})]}),document.body):null;function KV(){const[n,e]=L.useState(!1),t=L.useRef(null),r=WV();return $V(r,t),L.useEffect(()=>{const i=()=>{const s=!!document.fullscreenElement;console.log("Fullscreen change detected:",s,"Element:",document.fullscreenElement),e(s)};return document.addEventListener("fullscreenchange",i),()=>document.removeEventListener("fullscreenchange",i)},[]),M.jsxs(M.Fragment,{children:[M.jsxs(ln,{className:"bg-slate-800/50 border-red-500/20 max-w-3xl mx-auto relative overflow-hidden",children:[M.jsx("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/lovable-uploads/2f88afbf-c39c-420f-811c-7519f6b8f9c7.png)"}}),M.jsxs("div",{className:"relative z-10",children:[M.jsxs(pn,{className:"text-center",children:[M.jsxs(mn,{className:"text-2xl text-white flex items-center justify-center gap-2",children:[M.jsx(rc,{className:"h-6 w-6 text-red-400"})," Red-Planet Rover"]}),M.jsx(ko,{className:"text-gray-300",children:"Navigate Mars, collect ice, avoid dust & rocks!"})]}),M.jsxs(gn,{className:"space-y-4",children:[!n&&M.jsx(qV,{waterPoints:r.waterPoints,signalStrength:r.signalStrength,score:r.score,gameStarted:r.gameStarted,gameOver:r.gameOver,onStart:r.resetGame}),M.jsx("div",{className:"flex justify-center relative",children:M.jsx("canvas",{ref:t,width:_t.WIDTH,height:_t.HEIGHT,className:"rounded-lg border border-red-500/30"})}),!n&&!r.gameStarted&&M.jsxs("div",{className:"text-center",children:[M.jsx(Qt,{onClick:r.resetGame,className:"bg-red-600 text-white",children:"Start Mission"}),M.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Use arrow keys to move the rover"})]}),!n&&r.gameOver&&M.jsxs("div",{className:"text-center space-y-2",children:[M.jsx("p",{className:"text-red-400 font-bold",children:"Mission Failed!"}),M.jsx(Qt,{onClick:r.resetGame,className:"bg-white text-black",children:"Retry"})]})]})]})]}),M.jsx(YV,{isFullscreen:n,waterPoints:r.waterPoints,signalStrength:r.signalStrength,score:r.score,gameStarted:r.gameStarted,gameOver:r.gameOver,onStart:r.resetGame})]})}const JV=()=>M.jsx(lL,{title:"Red-Planet Rover",children:M.jsx(KV,{})});function ZV(){const[n,e]=L.useState(!1),[t,r]=L.useState(!1),[i,s]=L.useState(0),[o,a]=L.useState(3),l=L.useRef(null),u=L.useRef(),h=600,f=400,p=40,m=6,v=L.useRef(f/2-p/2),x=L.useRef(3),_=L.useRef([]),g=L.useRef({Up:!1,Down:!1}),w=L.useMemo(()=>Array.from({length:60}).map(()=>({x:Math.random()*h,y:Math.random()*f,r:Math.random()*2+.5})),[]),S=()=>{e(!0),r(!1),s(0),v.current=f/2-p/2,_.current=[],x.current=3},E=()=>S();return L.useEffect(()=>{if(!n)return;const R=l.current.getContext("2d");let A=performance.now();function P(k){const N=(k-A)/16;if(A=k,R.clearRect(0,0,h,f),R.fillStyle="#1a0226",R.fillRect(0,0,h,f),R.fillStyle="#fff",w.forEach(C=>{R.beginPath(),R.arc(C.x,C.y,C.r,0,Math.PI*2),R.fill()}),g.current.Up&&(v.current=Math.max(0,v.current-m*N)),g.current.Down&&(v.current=Math.min(f-p,v.current+m*N)),R.font=`${p}px serif`,R.fillText("",50,v.current+p),Math.random()<.03){const C=20+Math.random()*30,O=x.current+Math.random()*2;_.current.push({x:h+C,y:Math.random()*(f-C),size:C,speed:O})}_.current=_.current.filter(C=>(C.x-=C.speed*N,R.font=`${C.size}px serif`,R.fillText("",C.x,C.y+C.size),50+p>C.x&&50<C.x+C.size&&v.current+p>C.y&&v.current<C.y+C.size?(r(!0),!1):C.x+C.size>0)),s(C=>C+1),x.current=Math.min(6,x.current+5e-4),a(Math.round(x.current*10)/10),t||(u.current=requestAnimationFrame(P))}return u.current=requestAnimationFrame(P),()=>cancelAnimationFrame(u.current)},[n,t,w]),L.useEffect(()=>{const R=P=>{P.code==="ArrowUp"&&(P.preventDefault(),g.current.Up=!0),P.code==="ArrowDown"&&(P.preventDefault(),g.current.Down=!0)},A=P=>{P.code==="ArrowUp"&&(P.preventDefault(),g.current.Up=!1),P.code==="ArrowDown"&&(P.preventDefault(),g.current.Down=!1)};return n&&(window.addEventListener("keydown",R),window.addEventListener("keyup",A)),()=>{window.removeEventListener("keydown",R),window.removeEventListener("keyup",A)}},[n]),M.jsx(lL,{title:"Astro Run Adventure",children:M.jsxs(ln,{className:"bg-slate-800/50 border-transparent max-w-3xl mx-auto relative overflow-hidden",children:[M.jsx("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/lovable-uploads/1c412bcc-e3f8-4a96-aa74-4646f288588e.png)"}}),M.jsxs("div",{className:"relative z-10",children:[M.jsxs(pn,{className:"text-center",children:[M.jsxs(mn,{className:"text-2xl text-white flex items-center justify-center gap-2",children:[M.jsx(Da,{className:"h-6 w-6 text-blue-400"})," Astro Run Adventure"]}),M.jsx(ko,{className:"text-gray-300",children:"Navigate through space and dodge asteroids!"})]}),M.jsxs(gn,{className:"space-y-4",children:[M.jsxs("div",{className:"flex justify-center gap-4",children:[M.jsxs(rr,{variant:"outline",className:"border-white text-white",children:[M.jsx(Nv,{className:"h-4 w-4 mr-1"})," ",i]}),M.jsxs(rr,{variant:"outline",className:"border-white text-orange-400",children:[M.jsx(X4,{className:"h-4 w-4 mr-1"})," ",o,"x"]})]}),M.jsx("div",{className:"flex justify-center",children:M.jsx("canvas",{ref:l,width:h,height:f,className:"rounded-lg border-transparent"})}),!n&&M.jsxs("div",{className:"text-center",children:[M.jsx(Qt,{onClick:S,className:"bg-blue-600 text-white",children:"Launch Mission"}),M.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Use arrow keys to navigate"})]}),t&&M.jsxs("div",{className:"text-center space-y-2",children:[M.jsx("p",{className:"text-blue-400 font-bold",children:"Mission Failed!"}),M.jsx(Qt,{onClick:E,className:"bg-white text-black",children:"Retry"})]})]})]})]})})}const QV=()=>{const[n,e]=L.useState(0),t=[{id:1,category:"Stars",icon:Oa,color:"yellow",title:"The Sun's Core Temperature",fact:"The core of the Sun reaches temperatures of about 15 million degrees Celsius (27 million degrees Fahrenheit)!",funDetail:"That's hot enough to fuse hydrogen atoms into helium, creating the energy that lights up our solar system.",difficulty:"Beginner"},{id:2,category:"Planets",icon:Ug,color:"blue",title:"Jupiter's Great Red Spot",fact:"Jupiter's Great Red Spot is a storm that has been raging for over 300 years and is larger than Earth!",funDetail:"This massive hurricane could swallow two or three Earths and still have room for more.",difficulty:"Intermediate"},{id:3,category:"Space Travel",icon:Da,color:"red",title:"Light Speed Journey",fact:"It would take over 4 years traveling at the speed of light to reach the nearest star outside our solar system.",funDetail:"That star is Proxima Centauri, about 4.24 light-years away. Even at light speed, it's a long trip!",difficulty:"Advanced"},{id:4,category:"Universe",icon:m_,color:"purple",title:"Observable Universe",fact:"The observable universe is about 93 billion light-years in diameter, containing over 2 trillion galaxies!",funDetail:"Each galaxy contains billions of stars, making the total number of stars almost impossible to count.",difficulty:"Advanced"},{id:5,category:"Planets",icon:Ug,color:"orange",title:"Mars' Olympus Mons",fact:"Olympus Mons on Mars is the largest volcano in our solar system, standing 21 kilometers (13 miles) tall!",funDetail:"That's nearly three times taller than Mount Everest and about the size of the state of Arizona.",difficulty:"Intermediate"},{id:6,category:"Stars",icon:Oa,color:"pink",title:"Neutron Star Density",fact:"A teaspoon of neutron star material would weigh about 6 billion tons on Earth!",funDetail:"Neutron stars are so dense that their gravity is 200 billion times stronger than Earth's.",difficulty:"Advanced"},{id:7,category:"Space Travel",icon:Da,color:"green",title:"Voyager 1 Journey",fact:"Voyager 1, launched in 1977, is now over 14 billion miles from Earth and still sending signals!",funDetail:"It takes over 22 hours for a signal from Voyager 1 to reach Earth at the speed of light.",difficulty:"Beginner"},{id:8,category:"Universe",icon:m_,color:"cyan",title:"Dark Matter Mystery",fact:"About 85% of all matter in the universe is 'dark matter' that we can't see or directly detect!",funDetail:"We know it exists because of its gravitational effects on visible matter and light.",difficulty:"Advanced"}],r=t[n],i=()=>{e(l=>(l+1)%t.length)},s=()=>{const l=Math.floor(Math.random()*t.length);e(l)},o=l=>{const u={yellow:"border-yellow-500/30 bg-yellow-500/10 text-yellow-400",blue:"border-blue-500/30 bg-blue-500/10 text-blue-400",red:"border-red-500/30 bg-red-500/10 text-red-400",purple:"border-purple-500/30 bg-purple-500/10 text-purple-400",orange:"border-orange-500/30 bg-orange-500/10 text-orange-400",pink:"border-pink-500/30 bg-pink-500/10 text-pink-400",green:"border-green-500/30 bg-green-500/10 text-green-400",cyan:"border-cyan-500/30 bg-cyan-500/10 text-cyan-400"};return u[l]||u.blue},a=l=>{switch(l){case"Beginner":return"bg-green-500/20 text-green-400 border-green-500/30";case"Intermediate":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"Advanced":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-12",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Cosmic Facts"}),M.jsx("p",{className:"text-xl text-gray-300",children:"Discover amazing bite-sized knowledge about our universe"})]}),M.jsxs("div",{className:"max-w-4xl mx-auto",children:[M.jsxs(ln,{className:`${o(r.color)} border-2 transition-all duration-300 hover:scale-105`,children:[M.jsxs(pn,{className:"text-center",children:[M.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[M.jsx("div",{className:"p-3 rounded-full bg-slate-800/50",children:M.jsx(r.icon,{className:`h-8 w-8 ${r.color==="yellow"?"text-yellow-400":r.color==="blue"?"text-blue-400":r.color==="red"?"text-red-400":r.color==="purple"?"text-purple-400":r.color==="orange"?"text-orange-400":r.color==="pink"?"text-pink-400":r.color==="green"?"text-green-400":"text-cyan-400"}`})}),M.jsxs("div",{className:"flex flex-col gap-2",children:[M.jsx(rr,{variant:"outline",className:a(r.difficulty),children:r.difficulty}),M.jsx(rr,{variant:"outline",className:"border-gray-500/50 text-gray-400",children:r.category})]})]}),M.jsx(mn,{className:"text-2xl md:text-3xl text-white mb-4",children:r.title})]}),M.jsxs(gn,{className:"space-y-6",children:[M.jsxs("div",{className:"text-center space-y-4",children:[M.jsx("p",{className:"text-lg md:text-xl text-gray-200 leading-relaxed",children:r.fact}),M.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600/30",children:M.jsxs("p",{className:"text-gray-300 italic",children:[" ",r.funDetail]})})]}),M.jsxs("div",{className:"flex justify-center gap-4 pt-6",children:[M.jsxs(Qt,{onClick:i,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[M.jsx(f0,{className:"h-4 w-4 mr-2"}),"Next Fact"]}),M.jsxs(Qt,{onClick:s,variant:"outline",className:"border-purple-500/50 text-purple-400 hover:bg-purple-500/20",children:[M.jsx(iz,{className:"h-4 w-4 mr-2"}),"Random Fact"]})]}),M.jsx("div",{className:"text-center",children:M.jsxs("p",{className:"text-sm text-gray-500",children:["Fact ",n+1," of ",t.length]})})]})]}),M.jsx("div",{className:"mt-12 grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Stars",icon:Oa,color:"text-yellow-400",count:t.filter(l=>l.category==="Stars").length},{name:"Planets",icon:Ug,color:"text-blue-400",count:t.filter(l=>l.category==="Planets").length},{name:"Space Travel",icon:Da,color:"text-red-400",count:t.filter(l=>l.category==="Space Travel").length},{name:"Universe",icon:m_,color:"text-purple-400",count:t.filter(l=>l.category==="Universe").length}].map(l=>M.jsxs(ln,{className:"bg-slate-800/30 border-slate-600/30 text-center p-4",children:[M.jsx(l.icon,{className:`h-8 w-8 ${l.color} mx-auto mb-2`}),M.jsx("h3",{className:"text-white font-semibold",children:l.name}),M.jsxs("p",{className:"text-gray-400 text-sm",children:[l.count," facts"]})]},l.name))})]})]})},Ub=L.forwardRef(({className:n,...e},t)=>M.jsx("textarea",{className:Dn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Ub.displayName="Textarea";const e8=()=>{const[n,e]=L.useState(0),[t,r]=L.useState(""),[i,s]=L.useState([]),[o,a]=L.useState(!1),{toast:l}=ub(),{user:u}=B3(),h=[{id:1,category:"Imagination",title:"Life on Other Planets",prompt:"Imagine you've discovered a new planet with life. Describe what the creatures look like, how they communicate, and what their world is like.",emoji:""},{id:2,category:"Adventure",title:"Your Space Mission",prompt:"You're the commander of a space mission to explore a distant galaxy. What is your mission goal, who is on your crew, and what challenges do you face?",emoji:""},{id:3,category:"Wonder",title:"The Most Beautiful Thing in Space",prompt:"Describe the most beautiful thing you can imagine seeing in space. It could be a nebula, a planet, or something entirely new that doesn't exist yet.",emoji:""},{id:4,category:"Science",title:"Future Technology",prompt:"Invent a new piece of space technology that could help astronauts explore the universe. How does it work and what problems does it solve?",emoji:""},{id:5,category:"Philosophy",title:"Messages to the Stars",prompt:"If you could send a message to intelligent life somewhere in the universe, what would you want to tell them about Earth and humanity?",emoji:""},{id:6,category:"Creativity",title:"Space Colony Design",prompt:"Design your ideal space colony on Mars or the Moon. What would daily life be like? How would people work, play, and live together?",emoji:""},{id:7,category:"Mystery",title:"Cosmic Mysteries",prompt:"What's the biggest mystery about space that you'd like to solve? Why is it interesting to you, and how might we find the answer?",emoji:""},{id:8,category:"Dreams",title:"Your Space Dream",prompt:"If you could have any space-related superpower or ability, what would it be? How would you use it to explore the universe?",emoji:""}],f=h[n],p=()=>{e(g=>(g+1)%h.length),r("")},m=()=>{const g=Math.floor(Math.random()*h.length);e(g),r("")};L.useEffect(()=>{u&&v()},[u]);const v=async()=>{try{const{data:g,error:w}=await Ua.from("journal_entries").select("*").order("created_at",{ascending:!1});if(w)throw w;s(g||[])}catch(g){console.error("Error loading entries:",g),l({title:"Error loading entries",description:"Could not load your journal entries.",variant:"destructive"})}},x=async()=>{if(!(!t.trim()||!u)){a(!0);try{const{data:g,error:w}=await Ua.from("journal_entries").insert({user_id:u.id,prompt_title:f.title,prompt_category:f.category,content:t.trim()}).select().single();if(w)throw w;s(S=>[g,...S]),l({title:"Entry Saved! ",description:"Your cosmic thoughts have been saved to your journal."}),r("")}catch(g){console.error("Error saving entry:",g),l({title:"Error saving entry",description:"Could not save your journal entry. Please try again.",variant:"destructive"})}finally{a(!1)}}},_=g=>{const w={Imagination:"bg-purple-500/20 text-purple-400 border-purple-500/30",Adventure:"bg-red-500/20 text-red-400 border-red-500/30",Wonder:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",Science:"bg-blue-500/20 text-blue-400 border-blue-500/30",Philosophy:"bg-green-500/20 text-green-400 border-green-500/30",Creativity:"bg-pink-500/20 text-pink-400 border-pink-500/30",Mystery:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30",Dreams:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"};return w[g]||w.Science};return M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-12",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Cosmic Journal"}),M.jsx("p",{className:"text-xl text-gray-300",children:"Reflect on the universe and express your curiosity"})]}),M.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[M.jsxs(ln,{className:"bg-slate-800/50 border-purple-500/20",children:[M.jsxs(pn,{className:"text-center",children:[M.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[M.jsx("div",{className:"text-6xl",children:f.emoji}),M.jsx(rr,{variant:"outline",className:_(f.category),children:f.category})]}),M.jsx(mn,{className:"text-2xl md:text-3xl text-white mb-4",children:f.title}),M.jsx(ko,{className:"text-lg text-gray-300 leading-relaxed",children:f.prompt})]}),M.jsxs(gn,{className:"space-y-6",children:[M.jsxs("div",{className:"space-y-4",children:[M.jsx(Ub,{placeholder:"Start writing your cosmic thoughts here...",value:t,onChange:g=>r(g.target.value),className:"min-h-[200px] bg-slate-900/50 border-slate-600/50 text-white placeholder:text-gray-400 resize-none"}),M.jsxs("div",{className:"text-right text-sm text-gray-400",children:[t.length," characters"]})]}),M.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[M.jsxs(Qt,{onClick:x,disabled:!t.trim()||o,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white disabled:opacity-50",children:[M.jsx(tz,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Entry"]}),M.jsxs(Qt,{onClick:p,variant:"outline",className:"border-blue-500/50 text-blue-400 hover:bg-blue-500/20",children:[M.jsx(C1,{className:"h-4 w-4 mr-2"}),"Next Prompt"]}),M.jsxs(Qt,{onClick:m,variant:"outline",className:"border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/20",children:[M.jsx(SA,{className:"h-4 w-4 mr-2"}),"Random Prompt"]})]}),M.jsx("div",{className:"text-center",children:M.jsxs("p",{className:"text-sm text-gray-500",children:["Prompt ",n+1," of ",h.length]})})]})]}),i.length>0&&M.jsxs(ln,{className:"bg-slate-800/30 border-slate-600/30",children:[M.jsxs(pn,{children:[M.jsxs(mn,{className:"text-xl text-white flex items-center gap-2",children:[M.jsx(T1,{className:"h-5 w-5 text-green-400"}),"Your Cosmic Journal Entries"]}),M.jsx(ko,{className:"text-gray-400",children:"Your thoughts and reflections about the universe"})]}),M.jsx(gn,{children:M.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:i.map(g=>M.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600/30",children:[M.jsxs("div",{className:"flex justify-between items-start mb-2",children:[M.jsx("h4",{className:"font-semibold text-white",children:g.prompt_title}),M.jsx("span",{className:"text-xs text-gray-400",children:new Date(g.created_at).toLocaleDateString()})]}),M.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:g.content.length>200?`${g.content.substring(0,200)}...`:g.content})]},g.id))})})]}),M.jsxs(ln,{className:"bg-slate-800/80 border-yellow-500/30",children:[M.jsx(pn,{children:M.jsxs(mn,{className:"text-lg text-white flex items-center gap-2",children:[M.jsx(SA,{className:"h-5 w-5 text-yellow-400"}),"Writing Tips for Cosmic Explorers"]})}),M.jsx(gn,{children:M.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-white",children:[M.jsxs("div",{className:"space-y-2",children:[M.jsxs("p",{children:[M.jsx("strong",{className:"text-yellow-400",children:"Be Creative:"})," There are no wrong answers in space imagination!"]}),M.jsxs("p",{children:[M.jsx("strong",{className:"text-blue-400",children:"Use Details:"})," Describe what you see, hear, and feel."]})]}),M.jsxs("div",{className:"space-y-2",children:[M.jsxs("p",{children:[M.jsx("strong",{className:"text-purple-400",children:"Ask Questions:"}),' Wonder about the "what ifs" of the universe.']}),M.jsxs("p",{children:[M.jsx("strong",{className:"text-green-400",children:"Have Fun:"})," Let your curiosity guide your writing!"]})]})]})})]})]})]})},ga=L.forwardRef(({className:n,type:e,...t},r)=>M.jsx("input",{type:e,className:Dn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));ga.displayName="Input";var t8="Label",uL=L.forwardRef((n,e)=>M.jsx(kn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));uL.displayName=t8;var dL=uL;const n8=Iv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_o=L.forwardRef(({className:n,...e},t)=>M.jsx(dL,{ref:t,className:Dn(n8(),n),...e}));_o.displayName=dL.displayName;function r8(){const[n,e]=L.useState({name:"",email:"",message:""}),t=s=>{const{name:o,value:a}=s.target;e(l=>({...l,[o]:a}))},r=()=>{const{name:s,email:o,message:a}=n,l=encodeURIComponent(`Message from ${s}`),u=encodeURIComponent(`Name: ${s}
Email: ${o}

Message:
${a}`);return`https://mail.google.com/mail/?view=cm&fs=1&to=missioncosmosinquiry@gmail.com&su=${l}&body=${u}`},i=n.name.trim()!==""&&n.email.trim()!==""&&n.message.trim()!=="";return M.jsxs("div",{id:"contact",className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-12",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Contact Mission Cosmos"}),M.jsx("p",{className:"text-xl text-gray-300",children:"Ready to embark on your cosmic journey? Get in touch!"})]}),M.jsxs("div",{className:"grid md:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[M.jsxs(ln,{className:"bg-slate-800/50 border-purple-500/20",children:[M.jsxs(pn,{children:[M.jsxs(mn,{className:"text-white flex items-center",children:[M.jsx(nz,{className:"h-6 w-6 text-yellow-400 mr-2"})," Send us a Message"]}),M.jsx(ko,{className:"text-gray-400",children:"Have questions about space exploration or our interactive experiences? We'd love to hear from you!"})]}),M.jsx(gn,{children:M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{children:[M.jsx(_o,{htmlFor:"name",className:"text-gray-300",children:"Name"}),M.jsx(ga,{id:"name",name:"name",type:"text",value:n.name,onChange:t,placeholder:"Your name",className:"bg-slate-700/50 border-purple-500/30 text-white placeholder:text-gray-400"})]}),M.jsxs("div",{children:[M.jsx(_o,{htmlFor:"email",className:"text-gray-300",children:"Email"}),M.jsx(ga,{id:"email",name:"email",type:"email",value:n.email,onChange:t,placeholder:"your.email@example.com",className:"bg-slate-700/50 border-purple-500/30 text-white placeholder:text-gray-400"})]}),M.jsxs("div",{children:[M.jsx(_o,{htmlFor:"message",className:"text-gray-300",children:"Message"}),M.jsx(Ub,{id:"message",name:"message",value:n.message,onChange:t,placeholder:"Tell us about your cosmic curiosity...",className:"bg-slate-700/50 border-purple-500/30 text-white placeholder:text-gray-400 min-h-[120px]"})]}),M.jsx("a",{href:i?r():void 0,onClick:s=>{i||(s.preventDefault(),alert("Please fill out all fields before sending."))},target:"_blank",rel:"noopener noreferrer",className:"block",children:M.jsx(Qt,{type:"button",className:"w-full bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-bold",children:"Send Message via Gmail"})})]})})]}),M.jsxs("div",{className:"space-y-8",children:[M.jsxs(ln,{className:"bg-slate-800/50 border-purple-500/20",children:[M.jsxs(pn,{children:[M.jsx(mn,{className:"text-white",children:"Get in Touch"}),M.jsx(ko,{className:"text-gray-400",children:"Connect with our mission control team"})]}),M.jsxs(gn,{className:"space-y-6",children:[M.jsxs("div",{className:"flex items-center space-x-4",children:[M.jsx(p0,{className:"h-6 w-6 text-blue-400"}),M.jsxs("div",{children:[M.jsx("p",{className:"text-white font-medium",children:"Email"}),M.jsx("p",{className:"text-gray-400",children:"missioncosmosinquiry@gmail.com"})]})]}),M.jsxs("div",{className:"flex items-center space-x-4",children:[M.jsx("a",{href:"https://www.instagram.com/mission_cosmos/?next=%2F",target:"_blank",rel:"noopener noreferrer",className:"transition-colors duration-200 hover:text-pink-300",children:M.jsx("svg",{className:"h-6 w-6 text-pink-400 hover:text-pink-300 transition-colors duration-200 cursor-pointer",fill:"currentColor",viewBox:"0 0 24 24",children:M.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),M.jsxs("div",{children:[M.jsx("p",{className:"text-white font-medium",children:"Instagram"}),M.jsx("p",{className:"text-gray-400",children:M.jsx("a",{href:"https://www.instagram.com/mission_cosmos/?next=%2F",target:"_blank",rel:"noopener noreferrer",className:"hover:text-pink-300 transition-colors duration-200",children:"@mission_cosmos"})})]})]}),M.jsxs("div",{className:"flex items-center space-x-4",children:[M.jsx(Y4,{className:"h-6 w-6 text-red-400"}),M.jsxs("div",{children:[M.jsx("p",{className:"text-white font-medium",children:"Location"}),M.jsx("p",{className:"text-gray-400",children:"Somewhere in the Milky Way Galaxy"})]})]})]})]}),M.jsxs(ln,{className:"bg-slate-800/50 border-purple-500/20",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white",children:"Mission Hours"})}),M.jsx(gn,{children:M.jsx("div",{className:"space-y-2 text-gray-300",children:M.jsxs("p",{children:[M.jsx("span",{className:"text-yellow-400",children:"Monday - Sunday:"})," Always available (Orbiting through time zones)"]})})})]})]})]})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Kv="178",Rl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Pl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hL=0,q1=1,fL=2,i8=3,pL=0,Jv=1,Iu=2,ls=3,Do=0,jr=1,ji=2,To=0,ql=1,Y1=2,K1=3,J1=4,mL=5,va=100,gL=101,vL=102,yL=103,xL=104,_L=200,wL=201,SL=202,bL=203,b0=204,M0=205,ML=206,EL=207,TL=208,AL=209,CL=210,RL=211,PL=212,IL=213,NL=214,E0=0,T0=1,A0=2,sc=3,C0=4,R0=5,P0=6,I0=7,$f=0,LL=1,kL=2,Vs=0,DL=1,OL=2,UL=3,Fb=4,FL=5,zL=6,BL=7,Z1="attached",jL="detached",Zv=300,Oo=301,Wa=302,yf=303,xf=304,xd=306,_f=1e3,Vi=1001,wf=1002,cr=1003,zb=1004,s8=1004,yu=1005,o8=1005,$n=1006,Dh=1007,a8=1007,zs=1008,l8=1008,Ki=1009,Bb=1010,jb=1011,Qu=1012,Qv=1013,Uo=1014,ii=1015,_d=1016,ey=1017,ty=1018,ed=1020,Hb=35902,Vb=1021,Gb=1022,Ar=1023,td=1026,nd=1027,ny=1028,Xf=1029,Wb=1030,ry=1031,c8=1032,iy=1033,Oh=33776,Uh=33777,Fh=33778,zh=33779,N0=35840,L0=35841,k0=35842,D0=35843,O0=36196,U0=37492,F0=37496,z0=37808,B0=37809,j0=37810,H0=37811,V0=37812,G0=37813,W0=37814,$0=37815,X0=37816,q0=37817,Y0=37818,K0=37819,J0=37820,Z0=37821,Bh=36492,Q0=36494,ev=36495,$b=36283,tv=36284,nv=36285,rv=36286,HL=2200,VL=2201,GL=2202,Sf=2300,iv=2301,zg=2302,Fl=2400,zl=2401,bf=2402,sy=2500,Xb=2501,u8=0,d8=1,h8=2,WL=3200,$L=3201,f8=3202,p8=3203,Ja=0,XL=1,wo="",Qr="srgb",oc="srgb-linear",Mf="linear",tn="srgb",m8=0,Il=7680,g8=7681,v8=7682,y8=7683,x8=34055,_8=34056,w8=5386,S8=512,b8=513,M8=514,E8=515,T8=516,A8=517,C8=518,Q1=519,qL=512,YL=513,KL=514,qb=515,JL=516,ZL=517,QL=518,ek=519,Ef=35044,R8=35048,P8=35040,I8=35045,N8=35049,L8=35041,k8=35046,D8=35050,O8=35042,U8="100",eS="300 es",Gi=2e3,Tf=2001,F8={COMPUTE:"compute",RENDER:"render"},z8={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},B8={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Ys=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const wr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mC=1234567;const Yl=Math.PI/180,rd=180/Math.PI;function Mi(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(wr[n&255]+wr[n>>8&255]+wr[n>>16&255]+wr[n>>24&255]+"-"+wr[e&255]+wr[e>>8&255]+"-"+wr[e>>16&15|64]+wr[e>>24&255]+"-"+wr[t&63|128]+wr[t>>8&255]+"-"+wr[t>>16&255]+wr[t>>24&255]+wr[r&255]+wr[r>>8&255]+wr[r>>16&255]+wr[r>>24&255]).toLowerCase()}function St(n,e,t){return Math.max(e,Math.min(t,n))}function Yb(n,e){return(n%e+e)%e}function j8(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function H8(n,e,t){return n!==e?(t-n)/(e-n):0}function jh(n,e,t){return(1-t)*n+t*e}function V8(n,e,t,r){return jh(n,e,1-Math.exp(-t*r))}function G8(n,e=1){return e-Math.abs(Yb(n,e*2)-e)}function W8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function $8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function X8(n,e){return n+Math.floor(Math.random()*(e-n+1))}function q8(n,e){return n+Math.random()*(e-n)}function Y8(n){return n*(.5-Math.random())}function K8(n){n!==void 0&&(mC=n);let e=mC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function J8(n){return n*Yl}function Z8(n){return n*rd}function Q8(n){return(n&n-1)===0&&n!==0}function eG(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tG(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function nG(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),h=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*f,l*p,a*u);break;case"YZY":n.set(l*p,a*h,l*f,a*u);break;case"ZXZ":n.set(l*f,l*p,a*h,a*u);break;case"XZX":n.set(a*h,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*h,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function zr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function At(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const rG={DEG2RAD:Yl,RAD2DEG:rd,generateUUID:Mi,clamp:St,euclideanModulo:Yb,mapLinear:j8,inverseLerp:H8,lerp:jh,damp:V8,pingpong:G8,smoothstep:W8,smootherstep:$8,randInt:X8,randFloat:q8,randFloatSpread:Y8,seededRandom:K8,degToRad:J8,radToDeg:Z8,isPowerOfTwo:Q8,ceilPowerOfTwo:eG,floorPowerOfTwo:tG,setQuaternionFromProperEuler:nG,normalize:At,denormalize:zr};class we{constructor(e=0,t=0){we.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=St(this.x,e.x,t.x),this.y=St(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=St(this.x,e,t),this.y=St(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(St(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(St(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Cr{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],h=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=x;return}if(f!==x||l!==p||u!==m||h!==v){let _=1-a;const g=l*p+u*m+h*v+f*x,w=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const R=Math.sqrt(S),A=Math.atan2(R,g*w);_=Math.sin(_*A)/R,a=Math.sin(a*A)/R}const E=a*w;if(l=l*_+p*E,u=u*_+m*E,h=h*_+v*E,f=f*_+x*E,_===1-a){const R=1/Math.sqrt(l*l+u*u+h*h+f*f);l*=R,u*=R,h*=R,f*=R}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],h=r[i+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*f+l*m-u*p,e[t+1]=l*v+h*p+u*f-a*m,e[t+2]=u*v+h*m+a*p-l*f,e[t+3]=h*v-a*f-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),h=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*h*f+u*m*v,this._y=u*m*f-p*h*v,this._z=u*h*v+p*m*f,this._w=u*h*f-p*m*v;break;case"YXZ":this._x=p*h*f+u*m*v,this._y=u*m*f-p*h*v,this._z=u*h*v-p*m*f,this._w=u*h*f+p*m*v;break;case"ZXY":this._x=p*h*f-u*m*v,this._y=u*m*f+p*h*v,this._z=u*h*v+p*m*f,this._w=u*h*f-p*m*v;break;case"ZYX":this._x=p*h*f-u*m*v,this._y=u*m*f+p*h*v,this._z=u*h*v-p*m*f,this._w=u*h*f+p*m*v;break;case"YZX":this._x=p*h*f+u*m*v,this._y=u*m*f+p*h*v,this._z=u*h*v-p*m*f,this._w=u*h*f-p*m*v;break;case"XZY":this._x=p*h*f-u*m*v,this._y=u*m*f-p*h*v,this._z=u*h*v+p*m*f,this._w=u*h*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],f=t[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(h-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(St(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=r*h+o*a+i*u-s*l,this._y=i*h+o*l+s*a-r*u,this._z=s*h+o*u+r*l-i*a,this._w=o*h-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),f=Math.sin((1-t)*h)/u,p=Math.sin(t*h)/u;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,r=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(gC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(gC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*i-a*r),h=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+l*u+o*f-a*h,this.y=r+l*h+a*u-s*f,this.z=i+l*f+s*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=St(this.x,e.x,t.x),this.y=St(this.y,e.y,t.y),this.z=St(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=St(this.x,e,t),this.y=St(this.y,e,t),this.z=St(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(St(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return R_.copy(this).projectOnVector(e),this.sub(R_)}reflect(e){return this.sub(R_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(St(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const R_=new j,gC=new Cr;class Et{constructor(e,t,r,i,s,o,a,l,u){Et.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],h=r[4],f=r[7],p=r[2],m=r[5],v=r[8],x=i[0],_=i[3],g=i[6],w=i[1],S=i[4],E=i[7],R=i[2],A=i[5],P=i[8];return s[0]=o*x+a*w+l*R,s[3]=o*_+a*S+l*A,s[6]=o*g+a*E+l*P,s[1]=u*x+h*w+f*R,s[4]=u*_+h*S+f*A,s[7]=u*g+h*E+f*P,s[2]=p*x+m*w+v*R,s[5]=p*_+m*S+v*A,s[8]=p*g+m*E+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-r*s*h+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=h*o-a*u,p=a*l-h*s,m=u*s-o*l,v=t*f+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=f*x,e[1]=(i*u-h*r)*x,e[2]=(a*r-i*o)*x,e[3]=p*x,e[4]=(h*t-i*l)*x,e[5]=(i*s-a*t)*x,e[6]=m*x,e[7]=(r*l-u*t)*x,e[8]=(o*t-r*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(P_.makeScale(e,t)),this}rotate(e){return this.premultiply(P_.makeRotation(-e)),this}translate(e,t){return this.premultiply(P_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const P_=new Et;function tk(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const iG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xu(n,e){return new iG[n](e)}function Af(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function nk(){const n=Af("canvas");return n.style.display="block",n}const vC={};function Nu(n){n in vC||(vC[n]=!0,console.warn(n))}function sG(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function oG(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function aG(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const yC=new Et().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),xC=new Et().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function lG(){const n={enabled:!0,workingColorSpace:oc,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===tn&&(i.r=Ao(i.r),i.g=Ao(i.g),i.b=Ao(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===tn&&(i.r=Lu(i.r),i.g=Lu(i.g),i.b=Lu(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===wo?Mf:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return Nu("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return Nu("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[oc]:{primaries:e,whitePoint:r,transfer:Mf,toXYZ:yC,fromXYZ:xC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Qr},outputColorSpaceConfig:{drawingBufferColorSpace:Qr}},[Qr]:{primaries:e,whitePoint:r,transfer:tn,toXYZ:yC,fromXYZ:xC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Qr}}}),n}const Wt=lG();function Ao(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Lu(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Oc;class rk{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Oc===void 0&&(Oc=Af("canvas")),Oc.width=e.width,Oc.height=e.height;const i=Oc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Oc}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Af("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Ao(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Ao(t[r]/255)*255):t[r]=Ao(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let cG=0;class Ta{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:cG++}),this.uuid=Mi(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(I_(i[o].image)):s.push(I_(i[o]))}else s=I_(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function I_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?rk.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uG=0;const N_=new j;class Pn extends Ys{constructor(e=Pn.DEFAULT_IMAGE,t=Pn.DEFAULT_MAPPING,r=Vi,i=Vi,s=$n,o=zs,a=Ar,l=Ki,u=Pn.DEFAULT_ANISOTROPY,h=wo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uG++}),this.uuid=Mi(),this.name="",this.source=new Ta(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new we(0,0),this.repeat=new we(1,1),this.center=new we(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Et,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(N_).x}get height(){return this.source.getSize(N_).y}get depth(){return this.source.getSize(N_).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Zv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _f:e.x=e.x-Math.floor(e.x);break;case Vi:e.x=e.x<0?0:1;break;case wf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case _f:e.y=e.y-Math.floor(e.y);break;case Vi:e.y=e.y<0?0:1;break;case wf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Pn.DEFAULT_IMAGE=null;Pn.DEFAULT_MAPPING=Zv;Pn.DEFAULT_ANISOTROPY=1;class Xt{constructor(e=0,t=0,r=0,i=1){Xt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],h=l[4],f=l[8],p=l[1],m=l[5],v=l[9],x=l[2],_=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(f-x)<.01&&Math.abs(v-_)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+x)<.1&&Math.abs(v+_)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,E=(m+1)/2,R=(g+1)/2,A=(h+p)/4,P=(f+x)/4,k=(v+_)/4;return S>E&&S>R?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=A/r,s=P/r):E>R?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=A/i,s=k/i):R<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(R),r=P/s,i=k/s),this.set(r,i,s,t),this}let w=Math.sqrt((_-v)*(_-v)+(f-x)*(f-x)+(p-h)*(p-h));return Math.abs(w)<.001&&(w=1),this.x=(_-v)/w,this.y=(f-x)/w,this.z=(p-h)/w,this.w=Math.acos((u+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=St(this.x,e.x,t.x),this.y=St(this.y,e.y,t.y),this.z=St(this.z,e.z,t.z),this.w=St(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=St(this.x,e,t),this.y=St(this.y,e,t),this.z=St(this.z,e,t),this.w=St(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(St(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Kb extends Ys{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:$n,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new Xt(0,0,e,t),this.scissorTest=!1,this.viewport=new Xt(0,0,e,t);const i={width:e,height:t,depth:r.depth},s=new Pn(i);this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:$n,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new Ta(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xs extends Kb{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class oy extends Pn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=cr,this.minFilter=cr,this.wrapR=Vi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class dG extends Xs{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new oy(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class ay extends Pn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=cr,this.minFilter=cr,this.wrapR=Vi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hG extends Xs{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new ay(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class Rr{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ts.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ts.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ts.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ts):ts.fromBufferAttribute(s,o),ts.applyMatrix4(e.matrixWorld),this.expandByPoint(ts);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Rm.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Rm.copy(r.boundingBox)),Rm.applyMatrix4(e.matrixWorld),this.union(Rm)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ts),ts.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Qd),Pm.subVectors(this.max,Qd),Uc.subVectors(e.a,Qd),Fc.subVectors(e.b,Qd),zc.subVectors(e.c,Qd),ea.subVectors(Fc,Uc),ta.subVectors(zc,Fc),hl.subVectors(Uc,zc);let t=[0,-ea.z,ea.y,0,-ta.z,ta.y,0,-hl.z,hl.y,ea.z,0,-ea.x,ta.z,0,-ta.x,hl.z,0,-hl.x,-ea.y,ea.x,0,-ta.y,ta.x,0,-hl.y,hl.x,0];return!L_(t,Uc,Fc,zc,Pm)||(t=[1,0,0,0,1,0,0,0,1],!L_(t,Uc,Fc,zc,Pm))?!1:(Im.crossVectors(ea,ta),t=[Im.x,Im.y,Im.z],L_(t,Uc,Fc,zc,Pm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ts).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ts).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(so[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),so[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),so[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),so[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),so[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),so[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),so[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),so[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(so),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const so=[new j,new j,new j,new j,new j,new j,new j,new j],ts=new j,Rm=new Rr,Uc=new j,Fc=new j,zc=new j,ea=new j,ta=new j,hl=new j,Qd=new j,Pm=new j,Im=new j,fl=new j;function L_(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){fl.fromArray(n,s);const a=i.x*Math.abs(fl.x)+i.y*Math.abs(fl.y)+i.z*Math.abs(fl.z),l=e.dot(fl),u=t.dot(fl),h=r.dot(fl);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const fG=new Rr,eh=new j,k_=new j;class ur{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):fG.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;eh.subVectors(e,this.center);const t=eh.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(eh,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(k_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(eh.copy(e.center).add(k_)),this.expandByPoint(eh.copy(e.center).sub(k_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const oo=new j,D_=new j,Nm=new j,na=new j,O_=new j,Lm=new j,U_=new j;class hc{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=oo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(oo.copy(this.origin).addScaledVector(this.direction,t),oo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){D_.copy(e).add(t).multiplyScalar(.5),Nm.copy(t).sub(e).normalize(),na.copy(this.origin).sub(D_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Nm),a=na.dot(this.direction),l=-na.dot(Nm),u=na.lengthSq(),h=Math.abs(1-o*o);let f,p,m,v;if(h>0)if(f=o*l-a,p=o*a-l,v=s*h,f>=0)if(p>=-v)if(p<=v){const x=1/h;f*=x,p*=x,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+u}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+u):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+u);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(D_).addScaledVector(Nm,p),m}intersectSphere(e,t){oo.subVectors(e.center,this.origin);const r=oo.dot(this.direction),i=oo.dot(oo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,oo)!==null}intersectTriangle(e,t,r,i,s){O_.subVectors(t,e),Lm.subVectors(r,e),U_.crossVectors(O_,Lm);let o=this.direction.dot(U_),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;na.subVectors(this.origin,e);const l=a*this.direction.dot(Lm.crossVectors(na,Lm));if(l<0)return null;const u=a*this.direction.dot(O_.cross(na));if(u<0||l+u>o)return null;const h=-a*na.dot(U_);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wt{constructor(e,t,r,i,s,o,a,l,u,h,f,p,m,v,x,_){wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,h,f,p,m,v,x,_)}set(e,t,r,i,s,o,a,l,u,h,f,p,m,v,x,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=x,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Bc.setFromMatrixColumn(e,0).length(),s=1/Bc.setFromMatrixColumn(e,1).length(),o=1/Bc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*f,v=a*h,x=a*f;t[0]=l*h,t[4]=-l*f,t[8]=u,t[1]=m+v*u,t[5]=p-x*u,t[9]=-a*l,t[2]=x-p*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*f,v=u*h,x=u*f;t[0]=p+x*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*f,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*f,v=u*h,x=u*f;t[0]=p-x*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=x-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*f,v=a*h,x=a*f;t[0]=l*h,t[4]=v*u-m,t[8]=p*u+x,t[1]=l*f,t[5]=x*u+p,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,v=a*l,x=a*u;t[0]=l*h,t[4]=x-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=m*f+v,t[10]=p-x*f}else if(e.order==="XZY"){const p=o*l,m=o*u,v=a*l,x=a*u;t[0]=l*h,t[4]=-f,t[8]=u*h,t[1]=p*f+x,t[5]=o*h,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*h,t[10]=x*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pG,e,mG)}lookAt(e,t,r){const i=this.elements;return pi.subVectors(e,t),pi.lengthSq()===0&&(pi.z=1),pi.normalize(),ra.crossVectors(r,pi),ra.lengthSq()===0&&(Math.abs(r.z)===1?pi.x+=1e-4:pi.z+=1e-4,pi.normalize(),ra.crossVectors(r,pi)),ra.normalize(),km.crossVectors(pi,ra),i[0]=ra.x,i[4]=km.x,i[8]=pi.x,i[1]=ra.y,i[5]=km.y,i[9]=pi.y,i[2]=ra.z,i[6]=km.z,i[10]=pi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],h=r[1],f=r[5],p=r[9],m=r[13],v=r[2],x=r[6],_=r[10],g=r[14],w=r[3],S=r[7],E=r[11],R=r[15],A=i[0],P=i[4],k=i[8],N=i[12],C=i[1],O=i[5],F=i[9],W=i[13],q=i[2],Z=i[6],K=i[10],Q=i[14],D=i[3],V=i[7],X=i[11],J=i[15];return s[0]=o*A+a*C+l*q+u*D,s[4]=o*P+a*O+l*Z+u*V,s[8]=o*k+a*F+l*K+u*X,s[12]=o*N+a*W+l*Q+u*J,s[1]=h*A+f*C+p*q+m*D,s[5]=h*P+f*O+p*Z+m*V,s[9]=h*k+f*F+p*K+m*X,s[13]=h*N+f*W+p*Q+m*J,s[2]=v*A+x*C+_*q+g*D,s[6]=v*P+x*O+_*Z+g*V,s[10]=v*k+x*F+_*K+g*X,s[14]=v*N+x*W+_*Q+g*J,s[3]=w*A+S*C+E*q+R*D,s[7]=w*P+S*O+E*Z+R*V,s[11]=w*k+S*F+E*K+R*X,s[15]=w*N+S*W+E*Q+R*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],f=e[6],p=e[10],m=e[14],v=e[3],x=e[7],_=e[11],g=e[15];return v*(+s*l*f-i*u*f-s*a*p+r*u*p+i*a*m-r*l*m)+x*(+t*l*m-t*u*p+s*o*p-i*o*m+i*u*h-s*l*h)+_*(+t*u*f-t*a*m-s*o*f+r*o*m+s*a*h-r*u*h)+g*(-i*a*h-t*l*f+t*a*p+i*o*f-r*o*p+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=e[9],p=e[10],m=e[11],v=e[12],x=e[13],_=e[14],g=e[15],w=f*_*u-x*p*u+x*l*m-a*_*m-f*l*g+a*p*g,S=v*p*u-h*_*u-v*l*m+o*_*m+h*l*g-o*p*g,E=h*x*u-v*f*u+v*a*m-o*x*m-h*a*g+o*f*g,R=v*f*l-h*x*l-v*a*p+o*x*p+h*a*_-o*f*_,A=t*w+r*S+i*E+s*R;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/A;return e[0]=w*P,e[1]=(x*p*s-f*_*s-x*i*m+r*_*m+f*i*g-r*p*g)*P,e[2]=(a*_*s-x*l*s+x*i*u-r*_*u-a*i*g+r*l*g)*P,e[3]=(f*l*s-a*p*s-f*i*u+r*p*u+a*i*m-r*l*m)*P,e[4]=S*P,e[5]=(h*_*s-v*p*s+v*i*m-t*_*m-h*i*g+t*p*g)*P,e[6]=(v*l*s-o*_*s-v*i*u+t*_*u+o*i*g-t*l*g)*P,e[7]=(o*p*s-h*l*s+h*i*u-t*p*u-o*i*m+t*l*m)*P,e[8]=E*P,e[9]=(v*f*s-h*x*s-v*r*m+t*x*m+h*r*g-t*f*g)*P,e[10]=(o*x*s-v*a*s+v*r*u-t*x*u-o*r*g+t*a*g)*P,e[11]=(h*a*s-o*f*s-h*r*u+t*f*u+o*r*m-t*a*m)*P,e[12]=R*P,e[13]=(h*x*i-v*f*i+v*r*p-t*x*p-h*r*_+t*f*_)*P,e[14]=(v*a*i-o*x*i-v*r*l+t*x*l+o*r*_-t*a*_)*P,e[15]=(o*f*i-h*a*i+h*r*l-t*f*l-o*r*p+t*a*p)*P,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,h*a+r,h*l-i*o,0,u*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,f=a+a,p=s*u,m=s*h,v=s*f,x=o*h,_=o*f,g=a*f,w=l*u,S=l*h,E=l*f,R=r.x,A=r.y,P=r.z;return i[0]=(1-(x+g))*R,i[1]=(m+E)*R,i[2]=(v-S)*R,i[3]=0,i[4]=(m-E)*A,i[5]=(1-(p+g))*A,i[6]=(_+w)*A,i[7]=0,i[8]=(v+S)*P,i[9]=(_-w)*P,i[10]=(1-(p+x))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Bc.set(i[0],i[1],i[2]).length();const o=Bc.set(i[4],i[5],i[6]).length(),a=Bc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ns.copy(this);const u=1/s,h=1/o,f=1/a;return ns.elements[0]*=u,ns.elements[1]*=u,ns.elements[2]*=u,ns.elements[4]*=h,ns.elements[5]*=h,ns.elements[6]*=h,ns.elements[8]*=f,ns.elements[9]*=f,ns.elements[10]*=f,t.setFromRotationMatrix(ns),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Gi){const l=this.elements,u=2*s/(t-e),h=2*s/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===Gi)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Tf)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Gi){const l=this.elements,u=1/(t-e),h=1/(r-i),f=1/(o-s),p=(t+e)*u,m=(r+i)*h;let v,x;if(a===Gi)v=(o+s)*f,x=-2*f;else if(a===Tf)v=s*f,x=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Bc=new j,ns=new wt,pG=new j(0,0,0),mG=new j(1,1,1),ra=new j,km=new j,pi=new j,_C=new wt,wC=new Cr;class Ti{constructor(e=0,t=0,r=0,i=Ti.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],h=i[9],f=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(St(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-St(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(St(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-St(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(St(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-St(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return _C.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_C,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return wC.setFromEuler(this),this.setFromQuaternion(wC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ti.DEFAULT_ORDER="XYZ";class Kl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let gG=0;const SC=new j,jc=new Cr,ao=new wt,Dm=new j,th=new j,vG=new j,yG=new Cr,bC=new j(1,0,0),MC=new j(0,1,0),EC=new j(0,0,1),TC={type:"added"},xG={type:"removed"},Hc={type:"childadded",child:null},F_={type:"childremoved",child:null};class Yt extends Ys{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gG++}),this.uuid=Mi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yt.DEFAULT_UP.clone();const e=new j,t=new Ti,r=new Cr,i=new j(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new wt},normalMatrix:{value:new Et}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=Yt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Yt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Kl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return jc.setFromAxisAngle(e,t),this.quaternion.multiply(jc),this}rotateOnWorldAxis(e,t){return jc.setFromAxisAngle(e,t),this.quaternion.premultiply(jc),this}rotateX(e){return this.rotateOnAxis(bC,e)}rotateY(e){return this.rotateOnAxis(MC,e)}rotateZ(e){return this.rotateOnAxis(EC,e)}translateOnAxis(e,t){return SC.copy(e).applyQuaternion(this.quaternion),this.position.add(SC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bC,e)}translateY(e){return this.translateOnAxis(MC,e)}translateZ(e){return this.translateOnAxis(EC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ao.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Dm.copy(e):Dm.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),th.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ao.lookAt(th,Dm,this.up):ao.lookAt(Dm,th,this.up),this.quaternion.setFromRotationMatrix(ao),i&&(ao.extractRotation(i.matrixWorld),jc.setFromRotationMatrix(ao),this.quaternion.premultiply(jc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(TC),Hc.child=e,this.dispatchEvent(Hc),Hc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(xG),F_.child=e,this.dispatchEvent(F_),F_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ao.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ao.multiply(e.parent.matrixWorld)),e.applyMatrix4(ao),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(TC),Hc.child=e,this.dispatchEvent(Hc),Hc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(th,e,vG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(th,yG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(a=>({...a})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Yt.DEFAULT_UP=new j(0,1,0);Yt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Yt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rs=new j,lo=new j,z_=new j,co=new j,Vc=new j,Gc=new j,AC=new j,B_=new j,j_=new j,H_=new j,V_=new Xt,G_=new Xt,W_=new Xt;class ni{constructor(e=new j,t=new j,r=new j){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),rs.subVectors(e,t),i.cross(rs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){rs.subVectors(i,t),lo.subVectors(r,t),z_.subVectors(e,t);const o=rs.dot(rs),a=rs.dot(lo),l=rs.dot(z_),u=lo.dot(lo),h=lo.dot(z_),f=o*u-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(u*l-a*h)*p,v=(o*h-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,co)===null?!1:co.x>=0&&co.y>=0&&co.x+co.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,co)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,co.x),l.addScaledVector(o,co.y),l.addScaledVector(a,co.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return V_.setScalar(0),G_.setScalar(0),W_.setScalar(0),V_.fromBufferAttribute(e,t),G_.fromBufferAttribute(e,r),W_.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(V_,s.x),o.addScaledVector(G_,s.y),o.addScaledVector(W_,s.z),o}static isFrontFacing(e,t,r,i){return rs.subVectors(r,t),lo.subVectors(e,t),rs.cross(lo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return rs.subVectors(this.c,this.b),lo.subVectors(this.a,this.b),rs.cross(lo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ni.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ni.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return ni.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ni.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ni.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Vc.subVectors(i,r),Gc.subVectors(s,r),B_.subVectors(e,r);const l=Vc.dot(B_),u=Gc.dot(B_);if(l<=0&&u<=0)return t.copy(r);j_.subVectors(e,i);const h=Vc.dot(j_),f=Gc.dot(j_);if(h>=0&&f<=h)return t.copy(i);const p=l*f-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(Vc,o);H_.subVectors(e,s);const m=Vc.dot(H_),v=Gc.dot(H_);if(v>=0&&m<=v)return t.copy(s);const x=m*u-l*v;if(x<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(r).addScaledVector(Gc,a);const _=h*v-m*f;if(_<=0&&f-h>=0&&m-v>=0)return AC.subVectors(s,i),a=(f-h)/(f-h+(m-v)),t.copy(i).addScaledVector(AC,a);const g=1/(_+x+p);return o=x*g,a=p*g,t.copy(r).addScaledVector(Vc,o).addScaledVector(Gc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ik={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ia={h:0,s:0,l:0},Om={h:0,s:0,l:0};function $_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class et{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wt.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=Wt.workingColorSpace){return this.r=e,this.g=t,this.b=r,Wt.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=Wt.workingColorSpace){if(e=Yb(e,1),t=St(t,0,1),r=St(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=$_(o,s,e+1/3),this.g=$_(o,s,e),this.b=$_(o,s,e-1/3)}return Wt.colorSpaceToWorking(this,i),this}setStyle(e,t=Qr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qr){const r=ik[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ao(e.r),this.g=Ao(e.g),this.b=Ao(e.b),this}copyLinearToSRGB(e){return this.r=Lu(e.r),this.g=Lu(e.g),this.b=Lu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qr){return Wt.workingToColorSpace(Sr.copy(this),e),Math.round(St(Sr.r*255,0,255))*65536+Math.round(St(Sr.g*255,0,255))*256+Math.round(St(Sr.b*255,0,255))}getHexString(e=Qr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Wt.workingColorSpace){Wt.workingToColorSpace(Sr.copy(this),t);const r=Sr.r,i=Sr.g,s=Sr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=h<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=Wt.workingColorSpace){return Wt.workingToColorSpace(Sr.copy(this),t),e.r=Sr.r,e.g=Sr.g,e.b=Sr.b,e}getStyle(e=Qr){Wt.workingToColorSpace(Sr.copy(this),e);const t=Sr.r,r=Sr.g,i=Sr.b;return e!==Qr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(ia),this.setHSL(ia.h+e,ia.s+t,ia.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(ia),e.getHSL(Om);const r=jh(ia.h,Om.h,t),i=jh(ia.s,Om.s,t),s=jh(ia.l,Om.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Sr=new et;et.NAMES=ik;let _G=0;class Ir extends Ys{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_G++}),this.uuid=Mi(),this.name="",this.type="Material",this.blending=ql,this.side=Do,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=b0,this.blendDst=M0,this.blendEquation=va,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new et(0,0,0),this.blendAlpha=0,this.depthFunc=sc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Q1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Il,this.stencilZFail=Il,this.stencilZPass=Il,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ql&&(r.blending=this.blending),this.side!==Do&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==b0&&(r.blendSrc=this.blendSrc),this.blendDst!==M0&&(r.blendDst=this.blendDst),this.blendEquation!==va&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==sc&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Q1&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Il&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Il&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Il&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Za extends Ir{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=$f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const So=wG();function wG(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Zr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=St(n,-65504,65504),So.floatView[0]=n;const e=So.uint32View[0],t=e>>23&511;return So.baseTable[t]+((e&8388607)>>So.shiftTable[t])}function yh(n){const e=n>>10;return So.uint32View[0]=So.mantissaTable[So.offsetTable[e]+(n&1023)]+So.exponentTable[e],So.floatView[0]}class SG{static toHalfFloat(e){return Zr(e)}static fromHalfFloat(e){return yh(e)}}const zn=new j,Um=new we;let bG=0;class on{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:bG++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Ef,this.updateRanges=[],this.gpuType=ii,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Um.fromBufferAttribute(this,t),Um.applyMatrix3(e),this.setXY(t,Um.x,Um.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)zn.fromBufferAttribute(this,t),zn.applyMatrix3(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)zn.fromBufferAttribute(this,t),zn.applyMatrix4(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)zn.fromBufferAttribute(this,t),zn.applyNormalMatrix(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)zn.fromBufferAttribute(this,t),zn.transformDirection(e),this.setXYZ(t,zn.x,zn.y,zn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=zr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=At(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=zr(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=zr(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=zr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=zr(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ef&&(e.usage=this.usage),e}}class MG extends on{constructor(e,t,r){super(new Int8Array(e),t,r)}}class EG extends on{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class TG extends on{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class AG extends on{constructor(e,t,r){super(new Int16Array(e),t,r)}}class Jb extends on{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class CG extends on{constructor(e,t,r){super(new Int32Array(e),t,r)}}class Zb extends on{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class RG extends on{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=yh(this.array[e*this.itemSize]);return this.normalized&&(t=zr(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=Zr(t),this}getY(e){let t=yh(this.array[e*this.itemSize+1]);return this.normalized&&(t=zr(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=Zr(t),this}getZ(e){let t=yh(this.array[e*this.itemSize+2]);return this.normalized&&(t=zr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=Zr(t),this}getW(e){let t=yh(this.array[e*this.itemSize+3]);return this.normalized&&(t=zr(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=Zr(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(r),this.array[e+2]=Zr(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(r),this.array[e+2]=Zr(i),this.array[e+3]=Zr(s),this}}class st extends on{constructor(e,t,r){super(new Float32Array(e),t,r)}}let PG=0;const Ui=new wt,X_=new Yt,Wc=new j,mi=new Rr,nh=new Rr,er=new j;class Ct extends Ys{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:PG++}),this.uuid=Mi(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tk(e)?Zb:Jb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Et().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ui.makeRotationFromQuaternion(e),this.applyMatrix4(Ui),this}rotateX(e){return Ui.makeRotationX(e),this.applyMatrix4(Ui),this}rotateY(e){return Ui.makeRotationY(e),this.applyMatrix4(Ui),this}rotateZ(e){return Ui.makeRotationZ(e),this.applyMatrix4(Ui),this}translate(e,t,r){return Ui.makeTranslation(e,t,r),this.applyMatrix4(Ui),this}scale(e,t,r){return Ui.makeScale(e,t,r),this.applyMatrix4(Ui),this}lookAt(e){return X_.lookAt(e),X_.updateMatrix(),this.applyMatrix4(X_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wc).negate(),this.translate(Wc.x,Wc.y,Wc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new st(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];mi.setFromBufferAttribute(s),this.morphTargetsRelative?(er.addVectors(this.boundingBox.min,mi.min),this.boundingBox.expandByPoint(er),er.addVectors(this.boundingBox.max,mi.max),this.boundingBox.expandByPoint(er)):(this.boundingBox.expandByPoint(mi.min),this.boundingBox.expandByPoint(mi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ur);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){const r=this.boundingSphere.center;if(mi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];nh.setFromBufferAttribute(a),this.morphTargetsRelative?(er.addVectors(mi.min,nh.min),mi.expandByPoint(er),er.addVectors(mi.max,nh.max),mi.expandByPoint(er)):(mi.expandByPoint(nh.min),mi.expandByPoint(nh.max))}mi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)er.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(er));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)er.fromBufferAttribute(a,u),l&&(Wc.fromBufferAttribute(e,u),er.add(Wc)),i=Math.max(i,r.distanceToSquared(er))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new on(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let k=0;k<r.count;k++)a[k]=new j,l[k]=new j;const u=new j,h=new j,f=new j,p=new we,m=new we,v=new we,x=new j,_=new j;function g(k,N,C){u.fromBufferAttribute(r,k),h.fromBufferAttribute(r,N),f.fromBufferAttribute(r,C),p.fromBufferAttribute(s,k),m.fromBufferAttribute(s,N),v.fromBufferAttribute(s,C),h.sub(u),f.sub(u),m.sub(p),v.sub(p);const O=1/(m.x*v.y-v.x*m.y);isFinite(O)&&(x.copy(h).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(O),_.copy(f).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(O),a[k].add(x),a[N].add(x),a[C].add(x),l[k].add(_),l[N].add(_),l[C].add(_))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let k=0,N=w.length;k<N;++k){const C=w[k],O=C.start,F=C.count;for(let W=O,q=O+F;W<q;W+=3)g(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const S=new j,E=new j,R=new j,A=new j;function P(k){R.fromBufferAttribute(i,k),A.copy(R);const N=a[k];S.copy(N),S.sub(R.multiplyScalar(R.dot(N))).normalize(),E.crossVectors(A,N);const O=E.dot(l[k])<0?-1:1;o.setXYZW(k,S.x,S.y,S.z,O)}for(let k=0,N=w.length;k<N;++k){const C=w[k],O=C.start,F=C.count;for(let W=O,q=O+F;W<q;W+=3)P(e.getX(W+0)),P(e.getX(W+1)),P(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new on(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new j,s=new j,o=new j,a=new j,l=new j,u=new j,h=new j,f=new j;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),x=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,_),h.subVectors(o,s),f.subVectors(i,s),h.cross(f),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,x),u.fromBufferAttribute(r,_),a.add(h),l.add(h),u.add(h),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(_,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),f.subVectors(i,s),h.cross(f),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)er.fromBufferAttribute(e,t),er.normalize(),e.setXYZ(t,er.x,er.y,er.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,f=a.normalized,p=new u.constructor(l.length*h);let m=0,v=0;for(let x=0,_=l.length;x<_;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*h;for(let g=0;g<h;g++)p[v++]=u[m++]}return new on(p,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ct,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,f=u.length;h<f;h++){const p=u[h],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let f=0,p=u.length;f<p;f++){const m=u[f];h.push(m.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],f=s[u];for(let p=0,m=f.length;p<m;p++)h.push(f[p].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const CC=new wt,pl=new hc,Fm=new ur,RC=new j,zm=new j,Bm=new j,jm=new j,q_=new j,Hm=new j,PC=new j,Vm=new j;class jn extends Yt{constructor(e=new Ct,t=new Za){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Hm.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],f=s[l];h!==0&&(q_.fromBufferAttribute(f,e),o?Hm.addScaledVector(q_,h):Hm.addScaledVector(q_.sub(t),h))}t.add(Hm)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Fm.copy(r.boundingSphere),Fm.applyMatrix4(s),pl.copy(e.ray).recast(e.near),!(Fm.containsPoint(pl.origin)===!1&&(pl.intersectSphere(Fm,RC)===null||pl.origin.distanceToSquared(RC)>(e.far-e.near)**2))&&(CC.copy(s).invert(),pl.copy(e.ray).applyMatrix4(CC),!(r.boundingBox!==null&&pl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,pl)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],g=o[_.materialIndex],w=Math.max(_.start,m.start),S=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let E=w,R=S;E<R;E+=3){const A=a.getX(E),P=a.getX(E+1),k=a.getX(E+2);i=Gm(this,g,e,r,u,h,f,A,P,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),x=Math.min(a.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const w=a.getX(_),S=a.getX(_+1),E=a.getX(_+2);i=Gm(this,o,e,r,u,h,f,w,S,E),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],g=o[_.materialIndex],w=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let E=w,R=S;E<R;E+=3){const A=E,P=E+1,k=E+2;i=Gm(this,g,e,r,u,h,f,A,P,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const w=_,S=_+1,E=_+2;i=Gm(this,o,e,r,u,h,f,w,S,E),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function IG(n,e,t,r,i,s,o,a){let l;if(e.side===jr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Do,a),l===null)return null;Vm.copy(a),Vm.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Vm);return u<t.near||u>t.far?null:{distance:u,point:Vm.clone(),object:n}}function Gm(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,zm),n.getVertexPosition(l,Bm),n.getVertexPosition(u,jm);const h=IG(n,e,t,r,zm,Bm,jm,PC);if(h){const f=new j;ni.getBarycoord(PC,zm,Bm,jm,f),i&&(h.uv=ni.getInterpolatedAttribute(i,a,l,u,f,new we)),s&&(h.uv1=ni.getInterpolatedAttribute(s,a,l,u,f,new we)),o&&(h.normal=ni.getInterpolatedAttribute(o,a,l,u,f,new j),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c:u,normal:new j,materialIndex:0};ni.getNormal(zm,Bm,jm,p.normal),h.face=p,h.barycoord=f}return h}class fc extends Ct{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new st(u,3)),this.setAttribute("normal",new st(h,3)),this.setAttribute("uv",new st(f,2));function v(x,_,g,w,S,E,R,A,P,k,N){const C=E/P,O=R/k,F=E/2,W=R/2,q=A/2,Z=P+1,K=k+1;let Q=0,D=0;const V=new j;for(let X=0;X<K;X++){const J=X*O-W;for(let oe=0;oe<Z;oe++){const ye=oe*C-F;V[x]=ye*w,V[_]=J*S,V[g]=q,u.push(V.x,V.y,V.z),V[x]=0,V[_]=0,V[g]=A>0?1:-1,h.push(V.x,V.y,V.z),f.push(oe/P),f.push(1-X/k),Q+=1}}for(let X=0;X<k;X++)for(let J=0;J<P;J++){const oe=p+J+Z*X,ye=p+J+Z*(X+1),ie=p+(J+1)+Z*(X+1),xe=p+(J+1)+Z*X;l.push(oe,ye,xe),l.push(ye,ie,xe),D+=6}a.addGroup(m,D,N),m+=D,p+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function id(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Dr(n){const e={};for(let t=0;t<n.length;t++){const r=id(n[t]);for(const i in r)e[i]=r[i]}return e}function NG(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function sk(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Wt.workingColorSpace}const ok={clone:id,merge:Dr};var LG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,kG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ws extends Ir{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=LG,this.fragmentShader=kG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=id(e.uniforms),this.uniformsGroups=NG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class qf extends Yt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt,this.projectionMatrixInverse=new wt,this.coordinateSystem=Gi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const sa=new j,IC=new we,NC=new we;class Sn extends qf{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=rd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Yl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return rd*2*Math.atan(Math.tan(Yl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){sa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(sa.x,sa.y).multiplyScalar(-e/sa.z),sa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(sa.x,sa.y).multiplyScalar(-e/sa.z)}getViewSize(e,t){return this.getViewBounds(e,IC,NC),t.subVectors(NC,IC)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Yl*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const $c=-90,Xc=1;class ak extends Yt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Sn($c,Xc,e,t);i.layers=this.layers,this.add(i);const s=new Sn($c,Xc,e,t);s.layers=this.layers,this.add(s);const o=new Sn($c,Xc,e,t);o.layers=this.layers,this.add(o);const a=new Sn($c,Xc,e,t);a.layers=this.layers,this.add(a);const l=new Sn($c,Xc,e,t);l.layers=this.layers,this.add(l);const u=new Sn($c,Xc,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Gi)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Tf)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(t,h),e.setRenderTarget(f,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Yf extends Pn{constructor(e=[],t=Oo,r,i,s,o,a,l,u,h){super(e,t,r,i,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lk extends Xs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Yf(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fc(5,5,5),s=new ws({name:"CubemapFromEquirect",uniforms:id(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:jr,blending:To});s.uniforms.tEquirect.value=t;const o=new jn(i,s),a=t.minFilter;return t.minFilter===zs&&(t.minFilter=$n),new ak(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class _u extends Yt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const DG={type:"move"};class Bg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _u,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _u,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _u,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,r),g=this._getHandJoint(u,x);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const h=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],p=h.position.distanceTo(f.position),m=.02,v=.005;u.inputState.pinching&&p>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(DG)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new _u;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class ly{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new et(e),this.density=t}clone(){return new ly(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class cy{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new et(e),this.near=t,this.far=r}clone(){return new cy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Qb extends Yt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ti,this.environmentIntensity=1,this.environmentRotation=new Ti,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class uy{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ef,this.updateRanges=[],this.version=0,this.uuid=Mi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const kr=new j;class ac{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)kr.fromBufferAttribute(this,t),kr.applyMatrix4(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)kr.fromBufferAttribute(this,t),kr.applyNormalMatrix(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)kr.fromBufferAttribute(this,t),kr.transformDirection(e),this.setXYZ(t,kr.x,kr.y,kr.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=zr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=At(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=zr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=zr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=zr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=zr(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new on(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ac(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eM extends Ir{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qc;const rh=new j,Yc=new j,Kc=new j,Jc=new we,ih=new we,ck=new wt,Wm=new j,sh=new j,$m=new j,LC=new we,Y_=new we,kC=new we;class uk extends Yt{constructor(e=new eM){if(super(),this.isSprite=!0,this.type="Sprite",qc===void 0){qc=new Ct;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new uy(t,5);qc.setIndex([0,1,2,0,2,3]),qc.setAttribute("position",new ac(r,3,0,!1)),qc.setAttribute("uv",new ac(r,2,3,!1))}this.geometry=qc,this.material=e,this.center=new we(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Yc.setFromMatrixScale(this.matrixWorld),ck.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Yc.multiplyScalar(-Kc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Xm(Wm.set(-.5,-.5,0),Kc,o,Yc,i,s),Xm(sh.set(.5,-.5,0),Kc,o,Yc,i,s),Xm($m.set(.5,.5,0),Kc,o,Yc,i,s),LC.set(0,0),Y_.set(1,0),kC.set(1,1);let a=e.ray.intersectTriangle(Wm,sh,$m,!1,rh);if(a===null&&(Xm(sh.set(-.5,.5,0),Kc,o,Yc,i,s),Y_.set(0,1),a=e.ray.intersectTriangle(Wm,$m,sh,!1,rh),a===null))return;const l=e.ray.origin.distanceTo(rh);l<e.near||l>e.far||t.push({distance:l,point:rh.clone(),uv:ni.getInterpolation(rh,Wm,sh,$m,LC,Y_,kC,new we),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Xm(n,e,t,r,i,s){Jc.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(ih.x=s*Jc.x-i*Jc.y,ih.y=i*Jc.x+s*Jc.y):ih.copy(Jc),n.copy(e),n.x+=ih.x,n.y+=ih.y,n.applyMatrix4(ck)}const qm=new j,DC=new j;class dk extends Yt{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){qm.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(qm);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){qm.setFromMatrixPosition(e.matrixWorld),DC.setFromMatrixPosition(this.matrixWorld);const r=qm.distanceTo(DC)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const OC=new j,UC=new Xt,FC=new Xt,OG=new j,zC=new wt,Ym=new j,K_=new ur,BC=new wt,J_=new hc;class hk extends jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Z1,this.bindMatrix=new wt,this.bindMatrixInverse=new wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Rr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ym),this.boundingBox.expandByPoint(Ym)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ur),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ym),this.boundingSphere.expandByPoint(Ym)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),K_.copy(this.boundingSphere),K_.applyMatrix4(i),e.ray.intersectsSphere(K_)!==!1&&(BC.copy(i).invert(),J_.copy(e.ray).applyMatrix4(BC),!(this.boundingBox!==null&&J_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,J_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Xt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Z1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===jL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;UC.fromBufferAttribute(i.attributes.skinIndex,e),FC.fromBufferAttribute(i.attributes.skinWeight,e),OC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=FC.getComponent(s);if(o!==0){const a=UC.getComponent(s);zC.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(OG.copy(OC).applyMatrix4(zC),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class tM extends Yt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Gs extends Pn{constructor(e=null,t=1,r=1,i,s,o,a,l,u=cr,h=cr,f,p){super(null,o,a,l,u,h,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const jC=new wt,UG=new wt;class dy{constructor(e=[],t=[]){this.uuid=Mi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new wt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:UG;jC.multiplyMatrices(a,t[s]),jC.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new dy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Gs(t,e,e,Ar,ii);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new tM),this.bones.push(o),this.boneInverses.push(new wt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class sd extends on{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Zc=new wt,HC=new wt,Km=[],VC=new Rr,FG=new wt,oh=new jn,ah=new ur;class fk extends jn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new sd(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,FG)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Rr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Zc),VC.copy(e.boundingBox).applyMatrix4(Zc),this.boundingBox.union(VC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ur),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Zc),ah.copy(e.boundingSphere).applyMatrix4(Zc),this.boundingSphere.union(ah)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(oh.geometry=this.geometry,oh.material=this.material,oh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ah.copy(this.boundingSphere),ah.applyMatrix4(r),e.ray.intersectsSphere(ah)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Zc),HC.multiplyMatrices(r,Zc),oh.matrixWorld=HC,oh.raycast(e,Km);for(let o=0,a=Km.length;o<a;o++){const l=Km[o];l.instanceId=s,l.object=this,t.push(l)}Km.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new sd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Gs(new Float32Array(i*this.count),i,this.count,ny,ii));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<r.length;u++)o+=r[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Z_=new j,zG=new j,BG=new Et;class xo{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Z_.subVectors(r,t).cross(zG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Z_),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||BG.getNormalMatrix(e),i=this.coplanarPoint(Z_).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ml=new ur,jG=new we(.5,.5),Jm=new j;class wd{constructor(e=new xo,t=new xo,r=new xo,i=new xo,s=new xo,o=new xo){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Gi){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],h=i[5],f=i[6],p=i[7],m=i[8],v=i[9],x=i[10],_=i[11],g=i[12],w=i[13],S=i[14],E=i[15];if(r[0].setComponents(l-s,p-u,_-m,E-g).normalize(),r[1].setComponents(l+s,p+u,_+m,E+g).normalize(),r[2].setComponents(l+o,p+h,_+v,E+w).normalize(),r[3].setComponents(l-o,p-h,_-v,E-w).normalize(),r[4].setComponents(l-a,p-f,_-x,E-S).normalize(),t===Gi)r[5].setComponents(l+a,p+f,_+x,E+S).normalize();else if(t===Tf)r[5].setComponents(a,f,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ml.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ml.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ml)}intersectsSprite(e){ml.center.set(0,0,0);const t=jG.distanceTo(e.center);return ml.radius=.7071067811865476+t,ml.applyMatrix4(e.matrixWorld),this.intersectsSphere(ml)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Jm.x=i.normal.x>0?e.max.x:e.min.x,Jm.y=i.normal.y>0?e.max.y:e.min.y,Jm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Jm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Ns=new wt,Ls=new wd;class hy{constructor(){this.coordinateSystem=Gi}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ls.setFromProjectionMatrix(Ns,this.coordinateSystem),Ls.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ls.setFromProjectionMatrix(Ns,this.coordinateSystem),Ls.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ls.setFromProjectionMatrix(Ns,this.coordinateSystem),Ls.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ls.setFromProjectionMatrix(Ns,this.coordinateSystem),Ls.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(Ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ls.setFromProjectionMatrix(Ns,this.coordinateSystem),Ls.containsPoint(e))return!0}return!1}clone(){return new hy}}function Q_(n,e){return n-e}function HG(n,e){return n.z-e.z}function VG(n,e){return e.z-n.z}class GG{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Jr=new wt,WG=new et(1,1,1),GC=new wd,$G=new hy,Zm=new Rr,gl=new ur,lh=new j,WC=new j,XG=new j,ew=new GG,br=new jn,Qm=[];function qG(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function vl(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class pk extends jn{constructor(e,t,r=t*2,i){super(new Ct,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Gs(t,e,e,Ar,ii);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Gs(t,e,e,Xf,Uo);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Gs(t,e,e,Ar,ii);r.colorSpace=Wt.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,h=new a.constructor(r*l),f=new on(h,l,u);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new on(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Jr),this.getBoundingBoxAt(s,Zm).applyMatrix4(Jr),e.union(Zm)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ur);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Jr),this.getBoundingSphereAt(s,gl).applyMatrix4(Jr),e.union(gl)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Q_),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Jr.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(WG.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Q_),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const h in r.attributes){const f=t.getAttribute(h),p=r.getAttribute(h);qG(f,p,l);const m=f.itemSize;for(let v=f.count,x=u;v<x;v++){const _=l+v;for(let g=0;g<m;g++)p.setComponent(_,g,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,u*m)}if(i){const h=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,m=f;p<m;p++)s.setX(h+p,l);s.needsUpdate=!0,s.addUpdateRange(h,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],u=r[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:f,reservedIndexCount:p}=u,m=s.index,v=m.array,x=e-f;for(let _=h;_<h+p;_++)v[_]=v[_]+x;m.array.copyWithin(t,h,h+p),m.addUpdateRange(t,p),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:f}=u,p=s.attributes;for(const m in p){const v=p[m],{array:x,itemSize:_}=v;x.copyWithin(e*_,h*_,(h+f)*_),v.addUpdateRange(e*_,f*_)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new Rr,o=r.index,a=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let h=l;o&&(h=o.getX(h)),s.expandByPoint(lh.fromBufferAttribute(a,h))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new ur;this.getBoundingBoxAt(e,Zm),Zm.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let u=i.start,h=i.start+i.count;u<h;u++){let f=u;o&&(f=o.getX(f)),lh.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(lh))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(Q_);t[t.length-1]===r.length;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);vl(this._multiDrawCounts,i),vl(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),vl(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),vl(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),vl(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ct,this._initializeGeometry(s));const o=this.geometry;s.index&&vl(s.index.array,o.index.array);for(const a in s.attributes)vl(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;br.material=this.material,br.geometry.index=o.index,br.geometry.attributes=o.attributes,br.geometry.boundingBox===null&&(br.geometry.boundingBox=new Rr),br.geometry.boundingSphere===null&&(br.geometry.boundingSphere=new ur);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const u=r[a].geometryIndex,h=i[u];br.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,br.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,br.geometry.boundingBox),this.getBoundingSphereAt(u,br.geometry.boundingSphere),br.raycast(e,Qm);for(let f=0,p=Qm.length;f<p;f++){const m=Qm[f];m.object=this,m.batchId=a,t.push(m)}Qm.length=0}br.material=null,br.geometry.index=null,br.geometry.attributes={},br.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,f=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data,x=r.isArrayCamera?$G:GC;p&&!r.isArrayCamera&&(Jr.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),GC.setFromProjectionMatrix(Jr,e.coordinateSystem));let _=0;if(this.sortObjects){Jr.copy(this.matrixWorld).invert(),lh.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Jr),WC.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Jr);for(let S=0,E=l.length;S<E;S++)if(l[S].visible&&l[S].active){const R=l[S].geometryIndex;this.getMatrixAt(S,Jr),this.getBoundingSphereAt(R,gl).applyMatrix4(Jr);let A=!1;if(p&&(A=!x.intersectsSphere(gl,r)),!A){const P=f[R],k=XG.subVectors(gl.center,lh).dot(WC);ew.push(P.start,P.count,k,S)}}const g=ew.list,w=this.customSort;w===null?g.sort(s.transparent?VG:HG):w.call(this,g,r);for(let S=0,E=g.length;S<E;S++){const R=g[S];u[_]=R.start*a,h[_]=R.count,v[_]=R.index,_++}ew.reset()}else for(let g=0,w=l.length;g<w;g++)if(l[g].visible&&l[g].active){const S=l[g].geometryIndex;let E=!1;if(p&&(this.getMatrixAt(g,Jr),this.getBoundingSphereAt(S,gl).applyMatrix4(Jr),E=!x.intersectsSphere(gl,r)),!E){const R=f[S];u[_]=R.start*a,h[_]=R.count,v[_]=g,_++}}m.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Gr extends Ir{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const sv=new j,ov=new j,$C=new wt,ch=new hc,eg=new ur,tw=new j,XC=new j;class $a extends Yt{constructor(e=new Ct,t=new Gr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)sv.fromBufferAttribute(t,i-1),ov.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=sv.distanceTo(ov);e.setAttribute("lineDistance",new st(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),eg.copy(r.boundingSphere),eg.applyMatrix4(i),eg.radius+=s,e.ray.intersectsSphere(eg)===!1)return;$C.copy(i).invert(),ch.copy(e.ray).applyMatrix4($C);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,h=r.index,p=r.attributes.position;if(h!==null){const m=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let x=m,_=v-1;x<_;x+=u){const g=h.getX(x),w=h.getX(x+1),S=tg(this,e,ch,l,g,w,x);S&&t.push(S)}if(this.isLineLoop){const x=h.getX(v-1),_=h.getX(m),g=tg(this,e,ch,l,x,_,v-1);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let x=m,_=v-1;x<_;x+=u){const g=tg(this,e,ch,l,x,x+1,x);g&&t.push(g)}if(this.isLineLoop){const x=tg(this,e,ch,l,v-1,m,v-1);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function tg(n,e,t,r,i,s,o){const a=n.geometry.attributes.position;if(sv.fromBufferAttribute(a,i),ov.fromBufferAttribute(a,s),t.distanceSqToSegment(sv,ov,tw,XC)>r)return;tw.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(tw);if(!(u<e.near||u>e.far))return{distance:u,point:XC.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const qC=new j,YC=new j;class Ks extends $a{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)qC.fromBufferAttribute(t,i),YC.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+qC.distanceTo(YC);e.setAttribute("lineDistance",new st(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class mk extends $a{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nM extends Ir{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const KC=new wt,tS=new hc,ng=new ur,rg=new j;class gk extends Yt{constructor(e=new Ct,t=new nM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ng.copy(r.boundingSphere),ng.applyMatrix4(i),ng.radius+=s,e.ray.intersectsSphere(ng)===!1)return;KC.copy(i).invert(),tS.copy(e.ray).applyMatrix4(KC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=p,x=m;v<x;v++){const _=u.getX(v);rg.fromBufferAttribute(f,_),JC(rg,_,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,x=m;v<x;v++)rg.fromBufferAttribute(f,v),JC(rg,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function JC(n,e,t,r,i,s,o){const a=tS.distanceSqToPoint(n);if(a<t){const l=new j;tS.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class vk extends Pn{constructor(e,t,r,i,s=$n,o=$n,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class YG extends vk{constructor(e,t,r,i,s,o,a,l){super({},e,t,r,i,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class KG extends Pn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=cr,this.minFilter=cr,this.generateMipmaps=!1,this.needsUpdate=!0}}class fy extends Pn{constructor(e,t,r,i,s,o,a,l,u,h,f,p){super(null,o,a,l,u,h,i,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class JG extends fy{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Vi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ZG extends fy{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Oo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class yk extends Pn{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class rM extends Pn{constructor(e,t,r=Uo,i,s,o,a=cr,l=cr,u,h=td,f=1){if(h!==td&&h!==nd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const p={width:e,height:t,depth:f};super(p,i,s,o,a,l,h,r,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ta(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class py extends Ct{constructor(e=1,t=1,r=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:s},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],u=[],h=t/2,f=Math.PI/2*e,p=t,m=2*f+p,v=r*2+s,x=i+1,_=new j,g=new j;for(let w=0;w<=v;w++){let S=0,E=0,R=0,A=0;if(w<=r){const N=w/r,C=N*Math.PI/2;E=-h-e*Math.cos(C),R=e*Math.sin(C),A=-e*Math.cos(C),S=N*f}else if(w<=r+s){const N=(w-r)/s;E=-h+N*t,R=e,A=0,S=f+N*p}else{const N=(w-r-s)/r,C=N*Math.PI/2;E=h+e*Math.sin(C),R=e*Math.cos(C),A=e*Math.sin(C),S=f+p+N*f}const P=Math.max(0,Math.min(1,S/m));let k=0;w===0?k=.5/i:w===v&&(k=-.5/i);for(let N=0;N<=i;N++){const C=N/i,O=C*Math.PI*2,F=Math.sin(O),W=Math.cos(O);g.x=-R*W,g.y=E,g.z=R*F,a.push(g.x,g.y,g.z),_.set(-R*W,A,R*F),_.normalize(),l.push(_.x,_.y,_.z),u.push(C+k,P)}if(w>0){const N=(w-1)*x;for(let C=0;C<i;C++){const O=N+C,F=N+C+1,W=w*x+C,q=w*x+C+1;o.push(O,F,W),o.push(F,q,W)}}}this.setIndex(o),this.setAttribute("position",new st(a,3)),this.setAttribute("normal",new st(l,3)),this.setAttribute("uv",new st(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new py(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class my extends Ct{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new j,h=new we;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=r+f/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("normal",new st(a,3)),this.setAttribute("uv",new st(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new my(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Kf extends Ct{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const h=[],f=[],p=[],m=[];let v=0;const x=[],_=r/2;let g=0;w(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new st(f,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function w(){const E=new j,R=new j;let A=0;const P=(t-e)/r;for(let k=0;k<=s;k++){const N=[],C=k/s,O=C*(t-e)+e;for(let F=0;F<=i;F++){const W=F/i,q=W*l+a,Z=Math.sin(q),K=Math.cos(q);R.x=O*Z,R.y=-C*r+_,R.z=O*K,f.push(R.x,R.y,R.z),E.set(Z,P,K).normalize(),p.push(E.x,E.y,E.z),m.push(W,1-C),N.push(v++)}x.push(N)}for(let k=0;k<i;k++)for(let N=0;N<s;N++){const C=x[N][k],O=x[N+1][k],F=x[N+1][k+1],W=x[N][k+1];(e>0||N!==0)&&(h.push(C,O,W),A+=3),(t>0||N!==s-1)&&(h.push(O,F,W),A+=3)}u.addGroup(g,A,0),g+=A}function S(E){const R=v,A=new we,P=new j;let k=0;const N=E===!0?e:t,C=E===!0?1:-1;for(let F=1;F<=i;F++)f.push(0,_*C,0),p.push(0,C,0),m.push(.5,.5),v++;const O=v;for(let F=0;F<=i;F++){const q=F/i*l+a,Z=Math.cos(q),K=Math.sin(q);P.x=N*K,P.y=_*C,P.z=N*Z,f.push(P.x,P.y,P.z),p.push(0,C,0),A.x=Z*.5+.5,A.y=K*.5*C+.5,m.push(A.x,A.y),v++}for(let F=0;F<i;F++){const W=R+F,q=O+F;E===!0?h.push(q,q+1,W):h.push(q+1,q,W),k+=3}u.addGroup(g,k,E===!0?1:2),g+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Jf extends Kf{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Jf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qa extends Ct{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),h(),this.setAttribute("position",new st(s,3)),this.setAttribute("normal",new st(s.slice(),3)),this.setAttribute("uv",new st(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const S=new j,E=new j,R=new j;for(let A=0;A<t.length;A+=3)m(t[A+0],S),m(t[A+1],E),m(t[A+2],R),l(S,E,R,w)}function l(w,S,E,R){const A=R+1,P=[];for(let k=0;k<=A;k++){P[k]=[];const N=w.clone().lerp(E,k/A),C=S.clone().lerp(E,k/A),O=A-k;for(let F=0;F<=O;F++)F===0&&k===A?P[k][F]=N:P[k][F]=N.clone().lerp(C,F/O)}for(let k=0;k<A;k++)for(let N=0;N<2*(A-k)-1;N++){const C=Math.floor(N/2);N%2===0?(p(P[k][C+1]),p(P[k+1][C]),p(P[k][C])):(p(P[k][C+1]),p(P[k+1][C+1]),p(P[k+1][C]))}}function u(w){const S=new j;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(w),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function h(){const w=new j;for(let S=0;S<s.length;S+=3){w.x=s[S+0],w.y=s[S+1],w.z=s[S+2];const E=_(w)/2/Math.PI+.5,R=g(w)/Math.PI+.5;o.push(E,1-R)}v(),f()}function f(){for(let w=0;w<o.length;w+=6){const S=o[w+0],E=o[w+2],R=o[w+4],A=Math.max(S,E,R),P=Math.min(S,E,R);A>.9&&P<.1&&(S<.2&&(o[w+0]+=1),E<.2&&(o[w+2]+=1),R<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function m(w,S){const E=w*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function v(){const w=new j,S=new j,E=new j,R=new j,A=new we,P=new we,k=new we;for(let N=0,C=0;N<s.length;N+=9,C+=6){w.set(s[N+0],s[N+1],s[N+2]),S.set(s[N+3],s[N+4],s[N+5]),E.set(s[N+6],s[N+7],s[N+8]),A.set(o[C+0],o[C+1]),P.set(o[C+2],o[C+3]),k.set(o[C+4],o[C+5]),R.copy(w).add(S).add(E).divideScalar(3);const O=_(R);x(A,C+0,w,O),x(P,C+2,S,O),x(k,C+4,E,O)}}function x(w,S,E,R){R<0&&w.x===1&&(o[S]=w.x-1),E.x===0&&E.z===0&&(o[S]=R/2/Math.PI+.5)}function _(w){return Math.atan2(w.z,-w.x)}function g(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qa(e.vertices,e.indices,e.radius,e.details)}}class gy extends Qa{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gy(e.radius,e.detail)}}const ig=new j,sg=new j,nw=new j,og=new ni;class xk extends Ct{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Yl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:x,b:_,c:g}=og;if(x.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),og.getNormal(nw),f[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,f[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let w=0;w<3;w++){const S=(w+1)%3,E=f[w],R=f[S],A=og[h[w]],P=og[h[S]],k=`${E}_${R}`,N=`${R}_${E}`;N in p&&p[N]?(nw.dot(p[N].normal)<=s&&(m.push(A.x,A.y,A.z),m.push(P.x,P.y,P.z)),p[N]=null):k in p||(p[k]={index0:u[w],index1:u[S],normal:nw.clone()})}}for(const v in p)if(p[v]){const{index0:x,index1:_}=p[v];ig.fromBufferAttribute(a,x),sg.fromBufferAttribute(a,_),m.push(ig.x,ig.y,ig.z),m.push(sg.x,sg.y,sg.z)}this.setAttribute("position",new st(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ss{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],p=r[i+1]-h,m=(o-h)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new we:new j);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new j,i=[],s=[],o=[],a=new j,l=new wt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new j)}s[0]=new j,o[0]=new j;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=u&&(u=h,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),p<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(St(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(St(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class vy extends Ss{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new we){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*f+this.aX,u=p*f+m*h+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _k extends vy{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function iM(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,f){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+f)+(l-a)/f;p*=h,m*=h,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const ag=new j,rw=new iM,iw=new iM,sw=new iM;class wk extends Ss{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new j){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=i[(a-1)%s]:(ag.subVectors(i[0],i[1]).add(i[0]),u=ag);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(ag.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=ag),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(f),m),x=Math.pow(f.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(h),m);x<1e-4&&(x=1),v<1e-4&&(v=x),_<1e-4&&(_=x),rw.initNonuniformCatmullRom(u.x,f.x,p.x,h.x,v,x,_),iw.initNonuniformCatmullRom(u.y,f.y,p.y,h.y,v,x,_),sw.initNonuniformCatmullRom(u.z,f.z,p.z,h.z,v,x,_)}else this.curveType==="catmullrom"&&(rw.initCatmullRom(u.x,f.x,p.x,h.x,this.tension),iw.initCatmullRom(u.y,f.y,p.y,h.y,this.tension),sw.initCatmullRom(u.z,f.z,p.z,h.z,this.tension));return r.set(rw.calc(l),iw.calc(l),sw.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ZC(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function QG(n,e){const t=1-n;return t*t*e}function eW(n,e){return 2*(1-n)*n*e}function tW(n,e){return n*n*e}function Hh(n,e,t,r){return QG(n,e)+eW(n,t)+tW(n,r)}function nW(n,e){const t=1-n;return t*t*t*e}function rW(n,e){const t=1-n;return 3*t*t*n*e}function iW(n,e){return 3*(1-n)*n*n*e}function sW(n,e){return n*n*n*e}function Vh(n,e,t,r,i){return nW(n,e)+rW(n,t)+iW(n,r)+sW(n,i)}class sM extends Ss{constructor(e=new we,t=new we,r=new we,i=new we){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new we){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vh(e,i.x,s.x,o.x,a.x),Vh(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Sk extends Ss{constructor(e=new j,t=new j,r=new j,i=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new j){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vh(e,i.x,s.x,o.x,a.x),Vh(e,i.y,s.y,o.y,a.y),Vh(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oM extends Ss{constructor(e=new we,t=new we){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new we){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new we){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bk extends Ss{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aM extends Ss{constructor(e=new we,t=new we,r=new we){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new we){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Hh(e,i.x,s.x,o.x),Hh(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lM extends Ss{constructor(e=new j,t=new j,r=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new j){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Hh(e,i.x,s.x,o.x),Hh(e,i.y,s.y,o.y),Hh(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cM extends Ss{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new we){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],h=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(ZC(a,l.x,u.x,h.x,f.x),ZC(a,l.y,u.y,h.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new we().fromArray(i))}return this}}var av=Object.freeze({__proto__:null,ArcCurve:_k,CatmullRomCurve3:wk,CubicBezierCurve:sM,CubicBezierCurve3:Sk,EllipseCurve:vy,LineCurve:oM,LineCurve3:bk,QuadraticBezierCurve:aM,QuadraticBezierCurve3:lM,SplineCurve:cM});class Mk extends Ss{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new av[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new av[i.type]().fromJSON(i))}return this}}class lv extends Mk{constructor(e){super(),this.type="Path",this.currentPoint=new we,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new oM(this.currentPoint.clone(),new we(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new aM(this.currentPoint.clone(),new we(e,t),new we(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new sM(this.currentPoint.clone(),new we(e,t),new we(r,i),new we(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new cM(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new vy(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Jl extends lv{constructor(e){super(e),this.uuid=Mi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new lv().fromJSON(i))}return this}}function oW(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=Ek(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(r&&(s=dW(n,e,s,t)),n.length>80*t){a=1/0,l=1/0;let h=-1/0,f=-1/0;for(let p=t;p<i;p+=t){const m=n[p],v=n[p+1];m<a&&(a=m),v<l&&(l=v),m>h&&(h=m),v>f&&(f=v)}u=Math.max(h-a,f-l),u=u!==0?32767/u:0}return Cf(s,o,t,a,l,u,0),o}function Ek(n,e,t,r,i){let s;if(i===SW(n,e,t,r)>0)for(let o=e;o<t;o+=r)s=QC(o/r|0,n[o],n[o+1],s);else for(let o=t-r;o>=e;o-=r)s=QC(o/r|0,n[o],n[o+1],s);return s&&od(s,s.next)&&(Pf(s),s=s.next),s}function lc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(od(t,t.next)||bn(t.prev,t,t.next)===0)){if(Pf(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Cf(n,e,t,r,i,s,o){if(!n)return;!o&&s&&gW(n,r,i,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,u=n.next;if(s?lW(n,r,i,s):aW(n)){e.push(l.i,n.i,u.i),Pf(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=cW(lc(n),e),Cf(n,e,t,r,i,s,2)):o===2&&uW(n,e,t,r,i,s):Cf(lc(n),e,t,r,i,s,1);break}}}function aW(n){const e=n.prev,t=n,r=n.next;if(bn(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,h=Math.min(i,s,o),f=Math.min(a,l,u),p=Math.max(i,s,o),m=Math.max(a,l,u);let v=r.next;for(;v!==e;){if(v.x>=h&&v.x<=p&&v.y>=f&&v.y<=m&&xh(i,a,s,l,o,u,v.x,v.y)&&bn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function lW(n,e,t,r){const i=n.prev,s=n,o=n.next;if(bn(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,h=i.y,f=s.y,p=o.y,m=Math.min(a,l,u),v=Math.min(h,f,p),x=Math.max(a,l,u),_=Math.max(h,f,p),g=nS(m,v,e,t,r),w=nS(x,_,e,t,r);let S=n.prevZ,E=n.nextZ;for(;S&&S.z>=g&&E&&E.z<=w;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&xh(a,h,l,f,u,p,S.x,S.y)&&bn(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=m&&E.x<=x&&E.y>=v&&E.y<=_&&E!==i&&E!==o&&xh(a,h,l,f,u,p,E.x,E.y)&&bn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&xh(a,h,l,f,u,p,S.x,S.y)&&bn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=w;){if(E.x>=m&&E.x<=x&&E.y>=v&&E.y<=_&&E!==i&&E!==o&&xh(a,h,l,f,u,p,E.x,E.y)&&bn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function cW(n,e){let t=n;do{const r=t.prev,i=t.next.next;!od(r,i)&&Ak(r,t,t.next,i)&&Rf(r,i)&&Rf(i,r)&&(e.push(r.i,t.i,i.i),Pf(t),Pf(t.next),t=n=i),t=t.next}while(t!==n);return lc(t)}function uW(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&xW(o,a)){let l=Ck(o,a);o=lc(o,o.next),l=lc(l,l.next),Cf(o,e,t,r,i,s,0),Cf(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function dW(n,e,t,r){const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=Ek(n,a,l,r,!1);u===u.next&&(u.steiner=!0),i.push(yW(u))}i.sort(hW);for(let s=0;s<i.length;s++)t=fW(i[s],t);return t}function hW(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function fW(n,e){const t=pW(n,e);if(!t)return e;const r=Ck(t,n);return lc(r,r.next),lc(t,t.next)}function pW(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;if(od(n,t))return t;do{if(od(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const f=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=r&&f>s&&(s=f,o=t.x<t.next.x?t:t.next,f===r))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let h=1/0;t=o;do{if(r>=t.x&&t.x>=l&&r!==t.x&&Tk(i<u?r:s,i,l,u,i<u?s:r,i,t.x,t.y)){const f=Math.abs(i-t.y)/(r-t.x);Rf(t,n)&&(f<h||f===h&&(t.x>o.x||t.x===o.x&&mW(o,t)))&&(o=t,h=f)}t=t.next}while(t!==a);return o}function mW(n,e){return bn(n.prev,n,e.prev)<0&&bn(e.next,n,n.next)<0}function gW(n,e,t,r){let i=n;do i.z===0&&(i.z=nS(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,vW(i)}function vW(n){let e,t=1;do{let r=n,i;n=null;let s=null;for(e=0;r;){e++;let o=r,a=0;for(let u=0;u<t&&(a++,o=o.nextZ,!!o);u++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,a--):(i=o,o=o.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;r=o}s.nextZ=null,t*=2}while(e>1);return n}function nS(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function yW(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Tk(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function xh(n,e,t,r,i,s,o,a){return!(n===o&&e===a)&&Tk(n,e,t,r,i,s,o,a)}function xW(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!_W(n,e)&&(Rf(n,e)&&Rf(e,n)&&wW(n,e)&&(bn(n.prev,n,e.prev)||bn(n,e.prev,e))||od(n,e)&&bn(n.prev,n,n.next)>0&&bn(e.prev,e,e.next)>0)}function bn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function od(n,e){return n.x===e.x&&n.y===e.y}function Ak(n,e,t,r){const i=cg(bn(n,e,t)),s=cg(bn(n,e,r)),o=cg(bn(t,r,n)),a=cg(bn(t,r,e));return!!(i!==s&&o!==a||i===0&&lg(n,t,e)||s===0&&lg(n,r,e)||o===0&&lg(t,n,r)||a===0&&lg(t,e,r))}function lg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function cg(n){return n>0?1:n<0?-1:0}function _W(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Ak(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Rf(n,e){return bn(n.prev,n,n.next)<0?bn(n,e,n.next)>=0&&bn(n,n.prev,e)>=0:bn(n,e,n.prev)<0||bn(n,n.next,e)<0}function wW(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Ck(n,e){const t=rS(n.i,n.x,n.y),r=rS(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function QC(n,e,t,r){const i=rS(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Pf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function rS(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function SW(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class bW{static triangulate(e,t,r=2){return oW(e,t,r)}}class ps{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ps.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];e2(e),t2(r,e);let o=e.length;t.forEach(e2);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,t2(r,t[l]);const a=bW.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function e2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function t2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class yy extends Ct{constructor(e=new Jl([new we(.5,.5),new we(-.5,.5),new we(-.5,-.5),new we(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new st(i,3)),this.setAttribute("uv",new st(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:MW;let S,E=!1,R,A,P,k;g&&(S=g.getSpacedPoints(h),E=!0,p=!1,R=g.computeFrenetFrames(h,!1),A=new j,P=new j,k=new j),p||(_=0,m=0,v=0,x=0);const N=a.extractPoints(u);let C=N.shape;const O=N.holes;if(!ps.isClockWise(C)){C=C.reverse();for(let B=0,Ne=O.length;B<Ne;B++){const Ee=O[B];ps.isClockWise(Ee)&&(O[B]=Ee.reverse())}}function W(B){const Ee=10000000000000001e-36;let Ie=B[0];for(let ge=1;ge<=B.length;ge++){const De=ge%B.length,Ae=B[De],qe=Ae.x-Ie.x,vt=Ae.y-Ie.y,H=qe*qe+vt*vt,U=Math.max(Math.abs(Ae.x),Math.abs(Ae.y),Math.abs(Ie.x),Math.abs(Ie.y)),se=Ee*U*U;if(H<=se){B.splice(De,1),ge--;continue}Ie=Ae}}W(C),O.forEach(W);const q=O.length,Z=C;for(let B=0;B<q;B++){const Ne=O[B];C=C.concat(Ne)}function K(B,Ne,Ee){return Ne||console.error("THREE.ExtrudeGeometry: vec does not exist"),B.clone().addScaledVector(Ne,Ee)}const Q=C.length;function D(B,Ne,Ee){let Ie,ge,De;const Ae=B.x-Ne.x,qe=B.y-Ne.y,vt=Ee.x-B.x,H=Ee.y-B.y,U=Ae*Ae+qe*qe,se=Ae*H-qe*vt;if(Math.abs(se)>Number.EPSILON){const de=Math.sqrt(U),ve=Math.sqrt(vt*vt+H*H),pe=Ne.x-qe/de,Ze=Ne.y+Ae/de,Fe=Ee.x-H/ve,tt=Ee.y+vt/ve,nt=((Fe-pe)*H-(tt-Ze)*vt)/(Ae*H-qe*vt);Ie=pe+Ae*nt-B.x,ge=Ze+qe*nt-B.y;const Ce=Ie*Ie+ge*ge;if(Ce<=2)return new we(Ie,ge);De=Math.sqrt(Ce/2)}else{let de=!1;Ae>Number.EPSILON?vt>Number.EPSILON&&(de=!0):Ae<-Number.EPSILON?vt<-Number.EPSILON&&(de=!0):Math.sign(qe)===Math.sign(H)&&(de=!0),de?(Ie=-qe,ge=Ae,De=Math.sqrt(U)):(Ie=Ae,ge=qe,De=Math.sqrt(U/2))}return new we(Ie/De,ge/De)}const V=[];for(let B=0,Ne=Z.length,Ee=Ne-1,Ie=B+1;B<Ne;B++,Ee++,Ie++)Ee===Ne&&(Ee=0),Ie===Ne&&(Ie=0),V[B]=D(Z[B],Z[Ee],Z[Ie]);const X=[];let J,oe=V.concat();for(let B=0,Ne=q;B<Ne;B++){const Ee=O[B];J=[];for(let Ie=0,ge=Ee.length,De=ge-1,Ae=Ie+1;Ie<ge;Ie++,De++,Ae++)De===ge&&(De=0),Ae===ge&&(Ae=0),J[Ie]=D(Ee[Ie],Ee[De],Ee[Ae]);X.push(J),oe=oe.concat(J)}let ye;if(_===0)ye=ps.triangulateShape(Z,O);else{const B=[],Ne=[];for(let Ee=0;Ee<_;Ee++){const Ie=Ee/_,ge=m*Math.cos(Ie*Math.PI/2),De=v*Math.sin(Ie*Math.PI/2)+x;for(let Ae=0,qe=Z.length;Ae<qe;Ae++){const vt=K(Z[Ae],V[Ae],De);lt(vt.x,vt.y,-ge),Ie===0&&B.push(vt)}for(let Ae=0,qe=q;Ae<qe;Ae++){const vt=O[Ae];J=X[Ae];const H=[];for(let U=0,se=vt.length;U<se;U++){const de=K(vt[U],J[U],De);lt(de.x,de.y,-ge),Ie===0&&H.push(de)}Ie===0&&Ne.push(H)}}ye=ps.triangulateShape(B,Ne)}const ie=ye.length,xe=v+x;for(let B=0;B<Q;B++){const Ne=p?K(C[B],oe[B],xe):C[B];E?(P.copy(R.normals[0]).multiplyScalar(Ne.x),A.copy(R.binormals[0]).multiplyScalar(Ne.y),k.copy(S[0]).add(P).add(A),lt(k.x,k.y,k.z)):lt(Ne.x,Ne.y,0)}for(let B=1;B<=h;B++)for(let Ne=0;Ne<Q;Ne++){const Ee=p?K(C[Ne],oe[Ne],xe):C[Ne];E?(P.copy(R.normals[B]).multiplyScalar(Ee.x),A.copy(R.binormals[B]).multiplyScalar(Ee.y),k.copy(S[B]).add(P).add(A),lt(k.x,k.y,k.z)):lt(Ee.x,Ee.y,f/h*B)}for(let B=_-1;B>=0;B--){const Ne=B/_,Ee=m*Math.cos(Ne*Math.PI/2),Ie=v*Math.sin(Ne*Math.PI/2)+x;for(let ge=0,De=Z.length;ge<De;ge++){const Ae=K(Z[ge],V[ge],Ie);lt(Ae.x,Ae.y,f+Ee)}for(let ge=0,De=O.length;ge<De;ge++){const Ae=O[ge];J=X[ge];for(let qe=0,vt=Ae.length;qe<vt;qe++){const H=K(Ae[qe],J[qe],Ie);E?lt(H.x,H.y+S[h-1].y,S[h-1].x+Ee):lt(H.x,H.y,f+Ee)}}}Me(),Re();function Me(){const B=i.length/3;if(p){let Ne=0,Ee=Q*Ne;for(let Ie=0;Ie<ie;Ie++){const ge=ye[Ie];ze(ge[2]+Ee,ge[1]+Ee,ge[0]+Ee)}Ne=h+_*2,Ee=Q*Ne;for(let Ie=0;Ie<ie;Ie++){const ge=ye[Ie];ze(ge[0]+Ee,ge[1]+Ee,ge[2]+Ee)}}else{for(let Ne=0;Ne<ie;Ne++){const Ee=ye[Ne];ze(Ee[2],Ee[1],Ee[0])}for(let Ne=0;Ne<ie;Ne++){const Ee=ye[Ne];ze(Ee[0]+Q*h,Ee[1]+Q*h,Ee[2]+Q*h)}}r.addGroup(B,i.length/3-B,0)}function Re(){const B=i.length/3;let Ne=0;He(Z,Ne),Ne+=Z.length;for(let Ee=0,Ie=O.length;Ee<Ie;Ee++){const ge=O[Ee];He(ge,Ne),Ne+=ge.length}r.addGroup(B,i.length/3-B,1)}function He(B,Ne){let Ee=B.length;for(;--Ee>=0;){const Ie=Ee;let ge=Ee-1;ge<0&&(ge=B.length-1);for(let De=0,Ae=h+_*2;De<Ae;De++){const qe=Q*De,vt=Q*(De+1),H=Ne+Ie+qe,U=Ne+ge+qe,se=Ne+ge+vt,de=Ne+Ie+vt;Je(H,U,se,de)}}}function lt(B,Ne,Ee){l.push(B),l.push(Ne),l.push(Ee)}function ze(B,Ne,Ee){ft(B),ft(Ne),ft(Ee);const Ie=i.length/3,ge=w.generateTopUV(r,i,Ie-3,Ie-2,Ie-1);Ve(ge[0]),Ve(ge[1]),Ve(ge[2])}function Je(B,Ne,Ee,Ie){ft(B),ft(Ne),ft(Ie),ft(Ne),ft(Ee),ft(Ie);const ge=i.length/3,De=w.generateSideWallUV(r,i,ge-6,ge-3,ge-2,ge-1);Ve(De[0]),Ve(De[1]),Ve(De[3]),Ve(De[1]),Ve(De[2]),Ve(De[3])}function ft(B){i.push(l[B*3+0]),i.push(l[B*3+1]),i.push(l[B*3+2])}function Ve(B){s.push(B.x),s.push(B.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return EW(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new av[i.type]().fromJSON(i)),new yy(r,e.options)}}const MW={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],h=e[i*3+1];return[new we(s,o),new we(a,l),new we(u,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],h=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],x=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new we(o,1-l),new we(u,1-f),new we(p,1-v),new we(x,1-g)]:[new we(a,1-l),new we(h,1-f),new we(m,1-v),new we(_,1-g)]}};function EW(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class xy extends Qa{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xy(e.radius,e.detail)}}class _y extends Ct{constructor(e=[new we(0,-.5),new we(.5,0),new we(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=St(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,f=new j,p=new we,m=new j,v=new j,x=new j;let _=0,g=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:_=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-_,m.z=g*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(v)}for(let w=0;w<=t;w++){const S=r+w*h*i,E=Math.sin(S),R=Math.cos(S);for(let A=0;A<=e.length-1;A++){f.x=e[A].x*E,f.y=e[A].y,f.z=e[A].x*R,o.push(f.x,f.y,f.z),p.x=w/t,p.y=A/(e.length-1),a.push(p.x,p.y);const P=l[3*A+0]*E,k=l[3*A+1],N=l[3*A+0]*R;u.push(P,k,N)}}for(let w=0;w<t;w++)for(let S=0;S<e.length-1;S++){const E=S+w*e.length,R=E,A=E+e.length,P=E+e.length+1,k=E+1;s.push(R,A,k),s.push(P,k,A)}this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("uv",new st(a,2)),this.setAttribute("normal",new st(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _y(e.points,e.segments,e.phiStart,e.phiLength)}}class Zf extends Qa{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zf(e.radius,e.detail)}}class Sd extends Ct{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,h=l+1,f=e/a,p=t/l,m=[],v=[],x=[],_=[];for(let g=0;g<h;g++){const w=g*p-o;for(let S=0;S<u;S++){const E=S*f-s;v.push(E,-w,0),x.push(0,0,1),_.push(S/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let w=0;w<a;w++){const S=w+u*g,E=w+u*(g+1),R=w+1+u*(g+1),A=w+1+u*g;m.push(S,E,A),m.push(E,R,A)}this.setIndex(m),this.setAttribute("position",new st(v,3)),this.setAttribute("normal",new st(x,3)),this.setAttribute("uv",new st(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sd(e.width,e.height,e.widthSegments,e.heightSegments)}}class wy extends Ct{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],h=[];let f=e;const p=(t-e)/i,m=new j,v=new we;for(let x=0;x<=i;x++){for(let _=0;_<=r;_++){const g=s+_/r*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}f+=p}for(let x=0;x<i;x++){const _=x*(r+1);for(let g=0;g<r;g++){const w=g+_,S=w,E=w+r+1,R=w+r+2,A=w+1;a.push(S,E,A),a.push(E,R,A)}}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(u,3)),this.setAttribute("uv",new st(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Sy extends Ct{constructor(e=new Jl([new we(0,.5),new we(-.5,-.5),new we(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new st(i,3)),this.setAttribute("normal",new st(s,3)),this.setAttribute("uv",new st(o,2));function u(h){const f=i.length/3,p=h.extractPoints(t);let m=p.shape;const v=p.holes;ps.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const w=v[_];ps.isClockWise(w)===!0&&(v[_]=w.reverse())}const x=ps.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const w=v[_];m=m.concat(w)}for(let _=0,g=m.length;_<g;_++){const w=m[_];i.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let _=0,g=x.length;_<g;_++){const w=x[_],S=w[0]+f,E=w[1]+f,R=w[2]+f;r.push(S,E,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return TW(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Sy(r,e.curveSegments)}}function TW(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Qf extends Ct{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const h=[],f=new j,p=new j,m=[],v=[],x=[],_=[];for(let g=0;g<=r;g++){const w=[],S=g/r;let E=0;g===0&&o===0?E=.5/t:g===r&&l===Math.PI&&(E=-.5/t);for(let R=0;R<=t;R++){const A=R/t;f.x=-e*Math.cos(i+A*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+A*s)*Math.sin(o+S*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),x.push(p.x,p.y,p.z),_.push(A+E,1-S),w.push(u++)}h.push(w)}for(let g=0;g<r;g++)for(let w=0;w<t;w++){const S=h[g][w+1],E=h[g][w],R=h[g+1][w],A=h[g+1][w+1];(g!==0||o>0)&&m.push(S,E,A),(g!==r-1||l<Math.PI)&&m.push(E,R,A)}this.setIndex(m),this.setAttribute("position",new st(v,3)),this.setAttribute("normal",new st(x,3)),this.setAttribute("uv",new st(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class by extends Qa{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new by(e.radius,e.detail)}}class My extends Ct{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],h=new j,f=new j,p=new j;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const x=v/i*s,_=m/r*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(x),f.y=(e+t*Math.cos(_))*Math.sin(x),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),h.x=e*Math.cos(x),h.y=e*Math.sin(x),p.subVectors(f,h).normalize(),l.push(p.x,p.y,p.z),u.push(v/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const x=(i+1)*m+v-1,_=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,w=(i+1)*m+v;o.push(x,_,w),o.push(_,g,w)}this.setIndex(o),this.setAttribute("position",new st(a,3)),this.setAttribute("normal",new st(l,3)),this.setAttribute("uv",new st(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new My(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ey extends Ct{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],h=[],f=new j,p=new j,m=new j,v=new j,x=new j,_=new j,g=new j;for(let S=0;S<=r;++S){const E=S/r*s*Math.PI*2;w(E,s,o,e,m),w(E+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),x.crossVectors(_,g),g.crossVectors(x,_),x.normalize(),g.normalize();for(let R=0;R<=i;++R){const A=R/i*Math.PI*2,P=-t*Math.cos(A),k=t*Math.sin(A);f.x=m.x+(P*g.x+k*x.x),f.y=m.y+(P*g.y+k*x.y),f.z=m.z+(P*g.z+k*x.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),u.push(p.x,p.y,p.z),h.push(S/r),h.push(R/i)}}for(let S=1;S<=r;S++)for(let E=1;E<=i;E++){const R=(i+1)*(S-1)+(E-1),A=(i+1)*S+(E-1),P=(i+1)*S+E,k=(i+1)*(S-1)+E;a.push(R,A,k),a.push(A,P,k)}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(u,3)),this.setAttribute("uv",new st(h,2));function w(S,E,R,A,P){const k=Math.cos(S),N=Math.sin(S),C=R/E*S,O=Math.cos(C);P.x=A*(2+O)*.5*k,P.y=A*(2+O)*N*.5,P.z=A*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ey(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ty extends Ct{constructor(e=new lM(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new j,l=new j,u=new we;let h=new j;const f=[],p=[],m=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new st(f,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function x(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),w(),g()}function _(S){h=e.getPointAt(S/t,h);const E=o.normals[S],R=o.binormals[S];for(let A=0;A<=i;A++){const P=A/i*Math.PI*2,k=Math.sin(P),N=-Math.cos(P);l.x=N*E.x+k*R.x,l.y=N*E.y+k*R.y,l.z=N*E.z+k*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let E=1;E<=i;E++){const R=(i+1)*(S-1)+(E-1),A=(i+1)*S+(E-1),P=(i+1)*S+E,k=(i+1)*(S-1)+E;v.push(R,A,k),v.push(A,P,k)}}function w(){for(let S=0;S<=t;S++)for(let E=0;E<=i;E++)u.x=S/t,u.y=E/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ty(new av[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Rk extends Ct{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new j,s=new j;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const f=l[u],p=f.start,m=f.count;for(let v=p,x=p+m;v<x;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),w=a.getX(v+(_+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,w),n2(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,f),n2(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new st(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function n2(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var r2=Object.freeze({__proto__:null,BoxGeometry:fc,CapsuleGeometry:py,CircleGeometry:my,ConeGeometry:Jf,CylinderGeometry:Kf,DodecahedronGeometry:gy,EdgesGeometry:xk,ExtrudeGeometry:yy,IcosahedronGeometry:xy,LatheGeometry:_y,OctahedronGeometry:Zf,PlaneGeometry:Sd,PolyhedronGeometry:Qa,RingGeometry:wy,ShapeGeometry:Sy,SphereGeometry:Qf,TetrahedronGeometry:by,TorusGeometry:My,TorusKnotGeometry:Ey,TubeGeometry:Ty,WireframeGeometry:Rk});class Pk extends Ir{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Ik extends ws{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class uM extends Ir{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nk extends uM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new we(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return St(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Lk extends Ir{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new et(16777215),this.specular=new et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=$f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kk extends Ir{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Dk extends Ir{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ok extends Ir{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=$f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dM extends Ir{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=WL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class hM extends Ir{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Uk extends Ir{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fk extends Gr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Bl(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function zk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Bk(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function iS(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function fM(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function AW(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),f=[],p=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*i;if(!(v<t||v>=r)){f.push(u.times[m]);for(let x=0;x<h;++x)p.push(u.values[m*h+x])}}f.length!==0&&(u.times=Bl(f,u.times.constructor),u.values=Bl(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function CW(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const g=h,w=f-h;x=a.values.slice(g,w)}else if(s>=a.times[v]){const g=v*f+h,w=g+f-h;x=a.values.slice(g,w)}else{const g=a.createInterpolant(),w=h,S=f-h;g.evaluate(s),x=g.resultBuffer.slice(w,S)}l==="quaternion"&&new Cr().fromArray(x).normalize().conjugate().toArray(x);const _=u.times.length;for(let g=0;g<_;++g){const w=g*m+p;if(l==="quaternion")Cr.multiplyQuaternionsFlat(u.values,w,x,0,u.values,w);else{const S=m-p*2;for(let E=0;E<S;++E)u.values[w+E]-=x[E]}}}return n.blendMode=Xb,n}class RW{static convertArray(e,t){return Bl(e,t)}static isTypedArray(e){return zk(e)}static getKeyframeOrder(e){return Bk(e)}static sortedArray(e,t,r){return iS(e,t,r)}static flattenJSON(e,t,r,i){fM(e,t,r,i)}static subclip(e,t,r,i,s=30){return AW(e,t,r,i,s)}static makeClipAdditive(e,t=0,r=e,i=30){return CW(e,t,r,i)}}class ep{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jk extends ep{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Fl,endingEnd:Fl}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case zl:s=e,a=2*t-r;break;case bf:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case zl:o=e,l=2*r-t;break;case bf:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),x=v*v,_=x*v,g=-p*_+2*p*x-p*v,w=(1+p)*_+(-1.5-2*p)*x+(-.5+p)*v+1,S=(-1-m)*_+(1.5+m)*x+.5*v,E=m*_-m*x;for(let R=0;R!==a;++R)s[R]=g*o[h+R]+w*o[u+R]+S*o[l+R]+E*o[f+R];return s}}class pM extends ep{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(r-t)/(i-t),f=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*f+o[l+p]*h;return s}}class Hk extends ep{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ji{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bl(t,this.TimeBufferType),this.values=Bl(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Bl(e.times,Array),values:Bl(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Hk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new jk(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Sf:t=this.InterpolantFactoryMethodDiscrete;break;case iv:t=this.InterpolantFactoryMethodLinear;break;case zg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sf;case this.InterpolantFactoryMethodLinear:return iv;case this.InterpolantFactoryMethodSmooth:return zg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&zk(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===zg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let v=0;v!==r;++v){const x=t[f+v];if(x!==t[p+v]||x!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ji.prototype.ValueTypeName="";Ji.prototype.TimeBufferType=Float32Array;Ji.prototype.ValueBufferType=Float32Array;Ji.prototype.DefaultInterpolation=iv;class pc extends Ji{constructor(e,t,r){super(e,t,r)}}pc.prototype.ValueTypeName="bool";pc.prototype.ValueBufferType=Array;pc.prototype.DefaultInterpolation=Sf;pc.prototype.InterpolantFactoryMethodLinear=void 0;pc.prototype.InterpolantFactoryMethodSmooth=void 0;class mM extends Ji{constructor(e,t,r,i){super(e,t,r,i)}}mM.prototype.ValueTypeName="color";class If extends Ji{constructor(e,t,r,i){super(e,t,r,i)}}If.prototype.ValueTypeName="number";class Vk extends ep{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let h=u+a;u!==h;u+=4)Cr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class tp extends Ji{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new Vk(this.times,this.values,this.getValueSize(),e)}}tp.prototype.ValueTypeName="quaternion";tp.prototype.InterpolantFactoryMethodSmooth=void 0;class mc extends Ji{constructor(e,t,r){super(e,t,r)}}mc.prototype.ValueTypeName="string";mc.prototype.ValueBufferType=Array;mc.prototype.DefaultInterpolation=Sf;mc.prototype.InterpolantFactoryMethodLinear=void 0;mc.prototype.InterpolantFactoryMethodSmooth=void 0;class Nf extends Ji{constructor(e,t,r,i){super(e,t,r,i)}}Nf.prototype.ValueTypeName="vector";class Lf{constructor(e="",t=-1,r=[],i=sy){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Mi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(IW(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Ji.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=Bk(l);l=iS(l,1,h),u=iS(u,1,h),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new If(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const f=h[1];let p=i[f];p||(i[f]=p=[]),p.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,v,x){if(m.length!==0){const _=[],g=[];fM(m,_,g,v),_.length!==0&&x.push(new f(p,_,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const p=u[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)m[p[v].morphTargets[x]]=-1;for(const x in m){const _=[],g=[];for(let w=0;w!==p[v].morphTargets.length;++w){const S=p[v];_.push(S.time),g.push(S.morphTarget===x?1:0)}i.push(new If(".morphTargetInfluence["+x+"]",_,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(Nf,m+".position",p,"pos",i),r(tp,m+".quaternion",p,"rot",i),r(Nf,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function PW(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return If;case"vector":case"vector2":case"vector3":case"vector4":return Nf;case"color":return mM;case"quaternion":return tp;case"bool":case"boolean":return pc;case"string":return mc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function IW(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=PW(n.type);if(n.times===void 0){const t=[],r=[];fM(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Bs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class gM{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return u.push(h,f),this},this.removeHandler=function(h){const f=u.indexOf(h);return f!==-1&&u.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=u.length;f<p;f+=2){const m=u[f],v=u[f+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const Gk=new gM;class li{constructor(e){this.manager=e!==void 0?e:Gk,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}li.DEFAULT_MATERIAL_NAME="__DEFAULT";const uo={};class NW extends Error{constructor(e,t){super(e),this.response=t}}class Fo extends li{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Bs.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(uo[e]!==void 0){uo[e].push({onLoad:t,onProgress:r,onError:i});return}uo[e]=[],uo[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=uo[e],f=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let x=0;const _=new ReadableStream({start(g){w();function w(){f.read().then(({done:S,value:E})=>{if(S)g.close();else{x+=E.byteLength;const R=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:m});for(let A=0,P=h.length;A<P;A++){const k=h[A];k.onProgress&&k.onProgress(R)}g.enqueue(E),w()}},S=>{g.error(S)})}}});return new Response(_)}else throw new NW(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a==="")return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{Bs.add(`file:${e}`,u);const h=uo[e];delete uo[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const h=uo[e];if(h===void 0)throw this.manager.itemError(e),u;delete uo[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class LW extends li{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Fo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Lf.parse(e[r]);t.push(i)}return t}}class kW extends li{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new fy,l=new Fo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=$n),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)h(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+x]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=$n),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}const Qc=new WeakMap;class kf extends li{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Bs.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let f=Qc.get(o);f===void 0&&(f=[],Qc.set(o,f)),f.push({onLoad:t,onError:i})}return o}const a=Af("img");function l(){h(),t&&t(this);const f=Qc.get(this)||[];for(let p=0;p<f.length;p++){const m=f[p];m.onLoad&&m.onLoad(this)}Qc.delete(this),s.manager.itemEnd(e)}function u(f){h(),i&&i(f),Bs.remove(`image:${e}`);const p=Qc.get(this)||[];for(let m=0;m<p.length;m++){const v=p[m];v.onError&&v.onError(f)}Qc.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),Bs.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class DW extends li{constructor(e){super(e)}load(e,t,r,i){const s=new Yf;s.colorSpace=Qr;const o=new kf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class OW extends li{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Gs,a=new Fo(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Vi,o.wrapT=u.wrapT!==void 0?u.wrapT:Vi,o.magFilter=u.magFilter!==void 0?u.magFilter:$n,o.minFilter=u.minFilter!==void 0?u.minFilter:$n,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=zs),u.mipmapCount===1&&(o.minFilter=$n),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class Wk extends li{constructor(e){super(e)}load(e,t,r,i){const s=new Pn,o=new kf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class el extends Yt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class $k extends el{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Yt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ow=new wt,i2=new j,s2=new j;class vM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new we(512,512),this.mapType=Ki,this.map=null,this.mapPass=null,this.matrix=new wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wd,this._frameExtents=new we(1,1),this._viewportCount=1,this._viewports=[new Xt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;i2.setFromMatrixPosition(e.matrixWorld),t.position.copy(i2),s2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(s2),t.updateMatrixWorld(),ow.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ow),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(ow)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class UW extends vM{constructor(){super(new Sn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=rd*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Xk extends el{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Yt.DEFAULT_UP),this.updateMatrix(),this.target=new Yt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new UW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const o2=new wt,uh=new j,aw=new j;class FW extends vM{constructor(){super(new Sn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new we(4,2),this._viewportCount=6,this._viewports=[new Xt(2,1,1,1),new Xt(0,1,1,1),new Xt(3,1,1,1),new Xt(1,1,1,1),new Xt(3,0,1,1),new Xt(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),uh.setFromMatrixPosition(e.matrixWorld),r.position.copy(uh),aw.copy(r.position),aw.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(aw),r.updateMatrixWorld(),i.makeTranslation(-uh.x,-uh.y,-uh.z),o2.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o2)}}class qk extends el{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new FW}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ws extends qf{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class zW extends vM{constructor(){super(new Ws(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Yk extends el{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yt.DEFAULT_UP),this.updateMatrix(),this.target=new Yt,this.shadow=new zW}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Kk extends el{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Jk extends el{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Zk{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class Qk extends el{constructor(e=new Zk,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ay extends li{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Fo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new et().setHex(o.value);break;case"v2":i.uniforms[s].value=new we().fromArray(o.value);break;case"v3":i.uniforms[s].value=new j().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Xt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Et().fromArray(o.value);break;case"m4":i.uniforms[s].value=new wt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new we().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new we().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Ay.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:Pk,SpriteMaterial:eM,RawShaderMaterial:Ik,ShaderMaterial:ws,PointsMaterial:nM,MeshPhysicalMaterial:Nk,MeshStandardMaterial:uM,MeshPhongMaterial:Lk,MeshToonMaterial:kk,MeshNormalMaterial:Dk,MeshLambertMaterial:Ok,MeshDepthMaterial:dM,MeshDistanceMaterial:hM,MeshBasicMaterial:Za,MeshMatcapMaterial:Uk,LineDashedMaterial:Fk,LineBasicMaterial:Gr,Material:Ir};return new t[e]}}class sS{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class eD extends Ct{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class tD extends li{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Fo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),w=xu(_.type,g),S=new uy(w,_.stride);return S.uuid=_.uuid,t[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new eD:new Ct,a=e.data.index;if(a!==void 0){const m=xu(a.type,a.array);o.setIndex(new on(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let x;if(v.isInterleavedBufferAttribute){const _=i(e.data,v.data);x=new ac(_,v.itemSize,v.offset,v.normalized)}else{const _=xu(v.type,v.array),g=v.isInstancedBufferAttribute?sd:on;x=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),o.setAttribute(m,x)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],x=[];for(let _=0,g=v.length;_<g;_++){const w=v[_];let S;if(w.isInterleavedBufferAttribute){const E=i(e.data,w.data);S=new ac(E,w.itemSize,w.offset,w.normalized)}else{const E=xu(w.type,w.array);S=new on(E,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),x.push(S)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const x=f[m];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;return p!==void 0&&(o.boundingSphere=new ur().fromJSON(p)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class BW extends li{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?sS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Fo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?sS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Fo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Jl().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new dy().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new tD;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in r2?a=r2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new Ay;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Lf.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(h)}else return l.data?{data:xu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new gM(t);s=new kf(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const f=e[u],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Gs(g.data,g.width,g.height)))}i[f.uuid]=new Ta(m)}else{const m=a(f.url);i[f.uuid]=new Ta(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:xu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new kf(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new Gs(v.data,v.width,v.height)))}r[l.uuid]=new Ta(h)}else{const h=await s(l.url);r[l.uuid]=new Ta(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new Yf,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Gs:h=new Pn,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,jW)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],a2),h.wrapT=r(a.wrap[1],a2)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,l2)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,l2)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,f;switch(e.type){case"Scene":o=new Qb,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new et(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new cy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ly(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Sn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ws(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Kk(e.color,e.intensity);break;case"DirectionalLight":o=new Yk(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new qk(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Jk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Xk(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new $k(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Qk().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),f=l(e.material),o=new hk(h,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),f=l(e.material),o=new jn(h,f);break;case"InstancedMesh":h=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new fk(h,f,p),o.instanceMatrix=new sd(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new sd(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":h=a(e.geometry),f=l(e.material),o=new pk(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(x=>{let _=null,g=null;return x.boundingBox!==void 0&&(_=new Rr().fromJSON(x.boundingBox)),x.boundingSphere!==void 0&&(g=new ur().fromJSON(x.boundingSphere)),{...x,boundingBox:_,boundingSphere:g}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=u(e.matricesTexture.uuid),o._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new ur().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Rr().fromJSON(e.boundingBox));break;case"LOD":o=new dk;break;case"Line":o=new $a(a(e.geometry),l(e.material));break;case"LineLoop":o=new mk(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ks(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new gk(a(e.geometry),l(e.material));break;case"Sprite":o=new uk(l(e.material));break;case"Group":o=new _u;break;case"Bone":o=new tM;break;default:o=new Yt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new Yt}})}}const jW={UVMapping:Zv,CubeReflectionMapping:Oo,CubeRefractionMapping:Wa,EquirectangularReflectionMapping:yf,EquirectangularRefractionMapping:xf,CubeUVReflectionMapping:xd},a2={RepeatWrapping:_f,ClampToEdgeWrapping:Vi,MirroredRepeatWrapping:wf},l2={NearestFilter:cr,NearestMipmapNearestFilter:zb,NearestMipmapLinearFilter:yu,LinearFilter:$n,LinearMipmapNearestFilter:Dh,LinearMipmapLinearFilter:zs},lw=new WeakMap;class HW extends li{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Bs.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{if(lw.has(o)===!0)i&&i(lw.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(u),s.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Bs.add(`image-bitmap:${e}`,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),lw.set(l,u),Bs.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Bs.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}}let ug;class yM{static getContext(){return ug===void 0&&(ug=new(window.AudioContext||window.webkitAudioContext)),ug}static setContext(e){ug=e}}class VW extends li{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Fo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);yM.getContext().decodeAudioData(u,function(f){t(f)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const c2=new wt,u2=new wt,yl=new wt;class GW{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Sn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Sn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,yl.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Yl*t.fov*.5)/t.zoom;let a,l;u2.elements[12]=-i,c2.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,yl.elements[0]=2*t.near/(l-a),yl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(yl),a=-o*t.aspect-s,l=o*t.aspect-s,yl.elements[0]=2*t.near/(l-a),yl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(yl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(u2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(c2)}}class nD extends Sn{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class xM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const xl=new j,cw=new Cr,WW=new j,_l=new j,wl=new j;class $W extends Yt{constructor(){super(),this.type="AudioListener",this.context=yM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xl,cw,WW),_l.set(0,0,-1).applyQuaternion(cw),wl.set(0,1,0).applyQuaternion(cw),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(xl.x,r),t.positionY.linearRampToValueAtTime(xl.y,r),t.positionZ.linearRampToValueAtTime(xl.z,r),t.forwardX.linearRampToValueAtTime(_l.x,r),t.forwardY.linearRampToValueAtTime(_l.y,r),t.forwardZ.linearRampToValueAtTime(_l.z,r),t.upX.linearRampToValueAtTime(wl.x,r),t.upY.linearRampToValueAtTime(wl.y,r),t.upZ.linearRampToValueAtTime(wl.z,r)}else t.setPosition(xl.x,xl.y,xl.z),t.setOrientation(_l.x,_l.y,_l.z,wl.x,wl.y,wl.z)}}class rD extends Yt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Sl=new j,d2=new Cr,XW=new j,bl=new j;class qW extends rD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Sl,d2,XW),bl.set(0,0,1).applyQuaternion(d2);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Sl.x,r),t.positionY.linearRampToValueAtTime(Sl.y,r),t.positionZ.linearRampToValueAtTime(Sl.z,r),t.orientationX.linearRampToValueAtTime(bl.x,r),t.orientationY.linearRampToValueAtTime(bl.y,r),t.orientationZ.linearRampToValueAtTime(bl.z,r)}else t.setPosition(Sl.x,Sl.y,Sl.z),t.setOrientation(bl.x,bl.y,bl.z)}}class YW{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class iD{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Cr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Cr.multiplyQuaternionsFlat(e,o,e,t,e,r),Cr.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const _M="\\[\\]\\.:\\/",KW=new RegExp("["+_M+"]","g"),wM="[^"+_M+"]",JW="[^"+_M.replace("\\.","")+"]",ZW=/((?:WC+[\/:])*)/.source.replace("WC",wM),QW=/(WCOD+)?/.source.replace("WCOD",JW),e9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wM),t9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wM),n9=new RegExp("^"+ZW+QW+e9+t9+"$"),r9=["material","materials","bones","map"];class i9{constructor(e,t,r){const i=r||$t.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class $t{constructor(e,t,r){this.path=t,this.parsedPath=r||$t.parseTrackName(t),this.node=$t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new $t.Composite(e,t,r):new $t(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(KW,"")}static parseTrackName(e){const t=n9.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);r9.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=$t.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$t.Composite=i9;$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray];$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class s9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Mi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let x=0,_=o;x!==_;++x)s[x].push(new $t(p,r[x],i[x]))}else if(v<u){a=e[v];const x=--u,_=e[x];t[_.uuid]=v,e[v]=_,t[m]=x,e[x]=p;for(let g=0,w=o;g!==w;++g){const S=s[g],E=S[x];let R=S[v];S[v]=E,R===void 0&&(R=new $t(p,r[g],i[g])),S[x]=R}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const f=s++,p=e[f];t[p.uuid]=h,e[h]=p,t[u]=f,e[f]=l;for(let m=0,v=i;m!==v;++m){const x=r[m],_=x[f],g=x[h];x[h]=_,x[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<s){const p=--s,m=e[p],v=--o,x=e[v];t[m.uuid]=f,e[f]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let _=0,g=i;_!==g;++_){const w=r[_],S=w[p],E=w[v];w[f]=S,w[p]=E,w.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,x=i;v!==x;++v){const _=r[v];_[f]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let p=h,m=l.length;p!==m;++p){const v=l[p];f[p]=new $t(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class sD{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Fl,endingEnd:Fl};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=VL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Xb:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case sy:default:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===GL;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===HL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=zl,i.endingEnd=zl):(e?i.endingStart=this.zeroSlopeAtStart?zl:Fl:i.endingStart=bf,t?i.endingEnd=this.zeroSlopeAtEnd?zl:Fl:i.endingEnd=bf)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const o9=new Float32Array(1);class a9 extends Ys{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const x=t&&t._propertyBindings[f].binding.parsedPath;v=new iD($t.create(r,m,x),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new pM(new Float32Array(2),new Float32Array(2),1,o9),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Lf.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=sy),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new sD(this,o,t,r);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Lf.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class l9 extends Kb{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new ay(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class SM{constructor(e){this.value=e}clone(){return new SM(this.value.clone===void 0?this.value:this.value.clone())}}let c9=0;class u9 extends Ys{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:c9++}),this.name="",this.usage=Ef,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class d9 extends uy{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class h9{constructor(e,t,r,i,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const h2=new wt;class oD{constructor(e,t,r=0,i=1/0){this.ray=new hc(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Kl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return h2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(h2),this}intersectObject(e,t=!0,r=[]){return oS(e,this,r,t),r.sort(f2),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)oS(e[i],this,r,t);return r.sort(f2),r}}function f2(n,e){return n.distance-e.distance}function oS(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)oS(s[o],e,t,!0)}}class aS{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=St(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(St(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class f9{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class bM{constructor(e,t,r,i){bM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const p2=new we;class p9{constructor(e=new we(1/0,1/0),t=new we(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=p2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,p2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const m2=new j,dg=new j;class m9{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){m2.subVectors(e,this.start),dg.subVectors(this.end,this.start);const r=dg.dot(dg);let s=dg.dot(m2)/r;return t&&(s=St(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const g2=new j;class g9 extends Yt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Ct,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new st(i,3));const s=new Gr({fog:!1,toneMapped:!1});this.cone=new Ks(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),g2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(g2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const oa=new j,hg=new wt,uw=new wt;class v9 extends Ks{constructor(e){const t=aD(e),r=new Ct,i=[],s=[],o=new et(0,0,1),a=new et(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new st(i,3)),r.setAttribute("color",new st(s,3));const l=new Gr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");uw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(hg.multiplyMatrices(uw,a.matrixWorld),oa.setFromMatrixPosition(hg),i.setXYZ(o,oa.x,oa.y,oa.z),hg.multiplyMatrices(uw,a.parent.matrixWorld),oa.setFromMatrixPosition(hg),i.setXYZ(o+1,oa.x,oa.y,oa.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function aD(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...aD(n.children[t]));return e}class y9 extends jn{constructor(e,t,r){const i=new Qf(t,4,2),s=new Za({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const x9=new j,v2=new et,y2=new et;class _9 extends Yt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Zf(t);i.rotateY(Math.PI*.5),this.material=new Za({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new on(o,3)),this.add(new jn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");v2.copy(this.light.color),y2.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?v2:y2;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(x9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class w9 extends Ks{constructor(e=10,t=10,r=4473924,i=8947848){r=new et(r),i=new et(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const x=p===s?r:i;x.toArray(u,m),m+=3,x.toArray(u,m),m+=3,x.toArray(u,m),m+=3,x.toArray(u,m),m+=3}const h=new Ct;h.setAttribute("position",new st(l,3)),h.setAttribute("color",new st(u,3));const f=new Gr({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class S9 extends Ks{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new et(s),o=new et(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const x=f&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let v=0;v<i;v++){let x=v/i*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),x=(v+1)/i*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const u=new Ct;u.setAttribute("position",new st(a,3)),u.setAttribute("color",new st(l,3));const h=new Gr({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const x2=new j,fg=new j,_2=new j;class b9 extends Yt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Ct;i.setAttribute("position",new st([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Gr({fog:!1,toneMapped:!1});this.lightPlane=new $a(i,s),this.add(this.lightPlane),i=new Ct,i.setAttribute("position",new st([0,0,0,0,0,1],3)),this.targetLine=new $a(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),x2.setFromMatrixPosition(this.light.matrixWorld),fg.setFromMatrixPosition(this.light.target.matrixWorld),_2.subVectors(fg,x2),this.lightPlane.lookAt(fg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(fg),this.targetLine.scale.z=_2.length()}}const pg=new j,An=new qf;class M9 extends Ks{constructor(e){const t=new Ct,r=new Gr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,x){l(v),l(x)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new st(i,3)),t.setAttribute("color",new st(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new et(16755200),h=new et(16711680),f=new et(43775),p=new et(16777215),m=new et(3355443);this.setColors(u,h,f,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;An.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Gi?-1:0;Nn("c",t,e,An,0,0,s),Nn("t",t,e,An,0,0,1),Nn("n1",t,e,An,-r,-i,s),Nn("n2",t,e,An,r,-i,s),Nn("n3",t,e,An,-r,i,s),Nn("n4",t,e,An,r,i,s),Nn("f1",t,e,An,-r,-i,1),Nn("f2",t,e,An,r,-i,1),Nn("f3",t,e,An,-r,i,1),Nn("f4",t,e,An,r,i,1),Nn("u1",t,e,An,r*.7,i*1.1,s),Nn("u2",t,e,An,-r*.7,i*1.1,s),Nn("u3",t,e,An,0,i*2,s),Nn("cf1",t,e,An,-r,0,1),Nn("cf2",t,e,An,r,0,1),Nn("cf3",t,e,An,0,-i,1),Nn("cf4",t,e,An,0,i,1),Nn("cn1",t,e,An,-r,0,s),Nn("cn2",t,e,An,r,0,s),Nn("cn3",t,e,An,0,-i,s),Nn("cn4",t,e,An,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Nn(n,e,t,r,i,s,o){pg.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],pg.x,pg.y,pg.z)}}const mg=new Rr;class E9 extends Ks{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Ct;s.setIndex(new on(r,1)),s.setAttribute("position",new on(i,3)),super(s,new Gr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&mg.setFromObject(this.object),mg.isEmpty())return;const e=mg.min,t=mg.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class T9 extends Ks{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ct;s.setIndex(new on(r,1)),s.setAttribute("position",new st(i,3)),super(s,new Gr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class A9 extends $a{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Ct;o.setAttribute("position",new st(s,3)),o.computeBoundingSphere(),super(o,new Gr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ct;l.setAttribute("position",new st(a,3)),l.computeBoundingSphere(),this.add(new jn(l,new Za({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const w2=new j;let gg,dw;class C9 extends Yt{constructor(e=new j(0,0,1),t=new j(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",gg===void 0&&(gg=new Ct,gg.setAttribute("position",new st([0,0,0,0,1,0],3)),dw=new Jf(.5,1,5,1),dw.translate(0,-.5,0)),this.position.copy(t),this.line=new $a(gg,new Gr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new jn(dw,new Za({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{w2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(w2,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class R9 extends Ks{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ct;i.setAttribute("position",new st(t,3)),i.setAttribute("color",new st(r,3));const s=new Gr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new et,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class P9{constructor(){this.type="ShapePath",this.color=new et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new lv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const w=[];for(let S=0,E=g.length;S<E;S++){const R=g[S],A=new Jl;A.curves=R.curves,w.push(A)}return w}function r(g,w){const S=w.length;let E=!1;for(let R=S-1,A=0;A<S;R=A++){let P=w[R],k=w[A],N=k.x-P.x,C=k.y-P.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(P=w[A],N=-N,k=w[R],C=-C),g.y<P.y||g.y>k.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const O=C*(g.x-P.x)-N*(g.y-P.y);if(O===0)return!0;if(O<0)continue;E=!E}}else{if(g.y!==P.y)continue;if(k.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=k.x)return!0}}return E}const i=ps.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Jl,l.curves=a.curves,u.push(l),u;let h=!i(s[0].getPoints());h=e?!h:h;const f=[],p=[];let m=[],v=0,x;p[v]=void 0,m[v]=[];for(let g=0,w=s.length;g<w;g++)a=s[g],x=a.getPoints(),o=i(x),o=e?!o:o,o?(!h&&p[v]&&v++,p[v]={s:new Jl,p:x},p[v].s.curves=a.curves,h&&v++,m[v]=[]):m[v].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,w=0;for(let S=0,E=p.length;S<E;S++)f[S]=[];for(let S=0,E=p.length;S<E;S++){const R=m[S];for(let A=0;A<R.length;A++){const P=R[A];let k=!0;for(let N=0;N<p.length;N++)r(P.p,p[N].p)&&(S!==N&&w++,k?(k=!1,f[N].push(P)):g=!0);k&&f[S].push(P)}}w>0&&g===!1&&(m=f)}let _;for(let g=0,w=p.length;g<w;g++){l=p[g].s,u.push(l),_=m[g];for(let S=0,E=_.length;S<E;S++)l.holes.push(_[S].h)}return u}}class I9 extends Ys{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function N9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function L9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function k9(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function lS(n,e,t,r){const i=D9(r);switch(t){case Vb:return n*e;case ny:return n*e/i.components*i.byteLength;case Xf:return n*e/i.components*i.byteLength;case Wb:return n*e*2/i.components*i.byteLength;case ry:return n*e*2/i.components*i.byteLength;case Gb:return n*e*3/i.components*i.byteLength;case Ar:return n*e*4/i.components*i.byteLength;case iy:return n*e*4/i.components*i.byteLength;case Oh:case Uh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Fh:case zh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case L0:case D0:return Math.max(n,16)*Math.max(e,8)/4;case N0:case k0:return Math.max(n,8)*Math.max(e,8)/2;case O0:case U0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case F0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case z0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case B0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case j0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case H0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case V0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case G0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case W0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case $0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case X0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case q0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Y0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case K0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case J0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Z0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Bh:case Q0:case ev:return Math.ceil(n/4)*Math.ceil(e/4)*16;case $b:case tv:return Math.ceil(n/4)*Math.ceil(e/4)*8;case nv:case rv:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function D9(n){switch(n){case Ki:case Bb:return{byteLength:1,components:1};case Qu:case jb:case _d:return{byteLength:2,components:1};case ey:case ty:return{byteLength:2,components:4};case Uo:case Qv:case ii:return{byteLength:4,components:1};case Hb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class O9{static contain(e,t){return N9(e,t)}static cover(e,t){return L9(e,t)}static fill(e){return k9(e)}static getByteLength(e,t,r,i){return lS(e,t,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Kv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Kv);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function lD(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function U9(n){const e=new WeakMap;function t(a,l){const u=a.array,h=a.usage,f=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,h),a.onUploadCallback();let m;if(u instanceof Float32Array)m=n.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)m=n.HALF_FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=n.SHORT;else if(u instanceof Uint32Array)m=n.UNSIGNED_INT;else if(u instanceof Int32Array)m=n.INT;else if(u instanceof Int8Array)m=n.BYTE;else if(u instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:f}}function r(a,l,u){const h=l.array,f=l.updateRanges;if(n.bindBuffer(u,a),f.length===0)n.bufferSubData(u,0,h);else{f.sort((m,v)=>m.start-v.start);let p=0;for(let m=1;m<f.length;m++){const v=f[p],x=f[m];x.start<=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++p,f[p]=x)}f.length=p+1;for(let m=0,v=f.length;m<v;m++){const x=f[m];n.bufferSubData(u,x.start*h.BYTES_PER_ELEMENT,h,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,a,l),u.version=a.version}}return{get:i,remove:s,update:o}}var F9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,z9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,B9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,j9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H9=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,V9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,G9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,W9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$9=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,X9=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,q9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Y9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,K9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,J9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Z9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Q9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,e7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,t7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,n7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,r7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,i7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,s7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,o7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,a7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,l7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,c7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,u7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,d7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,h7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,f7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,p7="gl_FragColor = linearToOutputTexel( gl_FragColor );",m7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,g7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,v7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,y7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,x7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,w7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,S7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,b7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,M7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,E7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,T7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,A7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,C7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,R7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,P7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,I7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,N7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,L7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,k7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,D7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,O7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,U7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,F7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,z7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,B7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,j7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,H7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,V7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,G7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,W7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,X7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,q7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Y7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,K7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,J7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Z7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Q7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,e$=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,t$=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,n$=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,r$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,i$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,s$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,o$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,a$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,l$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,c$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,u$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,d$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,h$=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,f$=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,p$=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,m$=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,g$=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,v$=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,y$=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,x$=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,_$=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,w$=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,S$=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,b$=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,M$=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,E$=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,T$=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,A$=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,C$=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,R$=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,P$=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,I$=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,N$=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,L$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,k$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,D$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,O$=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const U$=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,F$=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,z$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,B$=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,H$=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,V$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,G$=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,W$=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$$=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,X$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,q$=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Y$=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,K$=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,J$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Z$=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q$=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,nX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,iX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,sX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,lX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,hX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Pt={alphahash_fragment:F9,alphahash_pars_fragment:z9,alphamap_fragment:B9,alphamap_pars_fragment:j9,alphatest_fragment:H9,alphatest_pars_fragment:V9,aomap_fragment:G9,aomap_pars_fragment:W9,batching_pars_vertex:$9,batching_vertex:X9,begin_vertex:q9,beginnormal_vertex:Y9,bsdfs:K9,iridescence_fragment:J9,bumpmap_pars_fragment:Z9,clipping_planes_fragment:Q9,clipping_planes_pars_fragment:e7,clipping_planes_pars_vertex:t7,clipping_planes_vertex:n7,color_fragment:r7,color_pars_fragment:i7,color_pars_vertex:s7,color_vertex:o7,common:a7,cube_uv_reflection_fragment:l7,defaultnormal_vertex:c7,displacementmap_pars_vertex:u7,displacementmap_vertex:d7,emissivemap_fragment:h7,emissivemap_pars_fragment:f7,colorspace_fragment:p7,colorspace_pars_fragment:m7,envmap_fragment:g7,envmap_common_pars_fragment:v7,envmap_pars_fragment:y7,envmap_pars_vertex:x7,envmap_physical_pars_fragment:P7,envmap_vertex:_7,fog_vertex:w7,fog_pars_vertex:S7,fog_fragment:b7,fog_pars_fragment:M7,gradientmap_pars_fragment:E7,lightmap_pars_fragment:T7,lights_lambert_fragment:A7,lights_lambert_pars_fragment:C7,lights_pars_begin:R7,lights_toon_fragment:I7,lights_toon_pars_fragment:N7,lights_phong_fragment:L7,lights_phong_pars_fragment:k7,lights_physical_fragment:D7,lights_physical_pars_fragment:O7,lights_fragment_begin:U7,lights_fragment_maps:F7,lights_fragment_end:z7,logdepthbuf_fragment:B7,logdepthbuf_pars_fragment:j7,logdepthbuf_pars_vertex:H7,logdepthbuf_vertex:V7,map_fragment:G7,map_pars_fragment:W7,map_particle_fragment:$7,map_particle_pars_fragment:X7,metalnessmap_fragment:q7,metalnessmap_pars_fragment:Y7,morphinstance_vertex:K7,morphcolor_vertex:J7,morphnormal_vertex:Z7,morphtarget_pars_vertex:Q7,morphtarget_vertex:e$,normal_fragment_begin:t$,normal_fragment_maps:n$,normal_pars_fragment:r$,normal_pars_vertex:i$,normal_vertex:s$,normalmap_pars_fragment:o$,clearcoat_normal_fragment_begin:a$,clearcoat_normal_fragment_maps:l$,clearcoat_pars_fragment:c$,iridescence_pars_fragment:u$,opaque_fragment:d$,packing:h$,premultiplied_alpha_fragment:f$,project_vertex:p$,dithering_fragment:m$,dithering_pars_fragment:g$,roughnessmap_fragment:v$,roughnessmap_pars_fragment:y$,shadowmap_pars_fragment:x$,shadowmap_pars_vertex:_$,shadowmap_vertex:w$,shadowmask_pars_fragment:S$,skinbase_vertex:b$,skinning_pars_vertex:M$,skinning_vertex:E$,skinnormal_vertex:T$,specularmap_fragment:A$,specularmap_pars_fragment:C$,tonemapping_fragment:R$,tonemapping_pars_fragment:P$,transmission_fragment:I$,transmission_pars_fragment:N$,uv_pars_fragment:L$,uv_pars_vertex:k$,uv_vertex:D$,worldpos_vertex:O$,background_vert:U$,background_frag:F$,backgroundCube_vert:z$,backgroundCube_frag:B$,cube_vert:j$,cube_frag:H$,depth_vert:V$,depth_frag:G$,distanceRGBA_vert:W$,distanceRGBA_frag:$$,equirect_vert:X$,equirect_frag:q$,linedashed_vert:Y$,linedashed_frag:K$,meshbasic_vert:J$,meshbasic_frag:Z$,meshlambert_vert:Q$,meshlambert_frag:eX,meshmatcap_vert:tX,meshmatcap_frag:nX,meshnormal_vert:rX,meshnormal_frag:iX,meshphong_vert:sX,meshphong_frag:oX,meshphysical_vert:aX,meshphysical_frag:lX,meshtoon_vert:cX,meshtoon_frag:uX,points_vert:dX,points_frag:hX,shadow_vert:fX,shadow_frag:pX,sprite_vert:mX,sprite_frag:gX},We={common:{diffuse:{value:new et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Et}},envmap:{envMap:{value:null},envMapRotation:{value:new Et},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Et}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Et}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Et},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Et},normalScale:{value:new we(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Et},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Et}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Et}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Et}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0},uvTransform:{value:new Et}},sprite:{diffuse:{value:new et(16777215)},opacity:{value:1},center:{value:new we(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}}},fs={basic:{uniforms:Dr([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.fog]),vertexShader:Pt.meshbasic_vert,fragmentShader:Pt.meshbasic_frag},lambert:{uniforms:Dr([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new et(0)}}]),vertexShader:Pt.meshlambert_vert,fragmentShader:Pt.meshlambert_frag},phong:{uniforms:Dr([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new et(0)},specular:{value:new et(1118481)},shininess:{value:30}}]),vertexShader:Pt.meshphong_vert,fragmentShader:Pt.meshphong_frag},standard:{uniforms:Dr([We.common,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.roughnessmap,We.metalnessmap,We.fog,We.lights,{emissive:{value:new et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Pt.meshphysical_vert,fragmentShader:Pt.meshphysical_frag},toon:{uniforms:Dr([We.common,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.gradientmap,We.fog,We.lights,{emissive:{value:new et(0)}}]),vertexShader:Pt.meshtoon_vert,fragmentShader:Pt.meshtoon_frag},matcap:{uniforms:Dr([We.common,We.bumpmap,We.normalmap,We.displacementmap,We.fog,{matcap:{value:null}}]),vertexShader:Pt.meshmatcap_vert,fragmentShader:Pt.meshmatcap_frag},points:{uniforms:Dr([We.points,We.fog]),vertexShader:Pt.points_vert,fragmentShader:Pt.points_frag},dashed:{uniforms:Dr([We.common,We.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pt.linedashed_vert,fragmentShader:Pt.linedashed_frag},depth:{uniforms:Dr([We.common,We.displacementmap]),vertexShader:Pt.depth_vert,fragmentShader:Pt.depth_frag},normal:{uniforms:Dr([We.common,We.bumpmap,We.normalmap,We.displacementmap,{opacity:{value:1}}]),vertexShader:Pt.meshnormal_vert,fragmentShader:Pt.meshnormal_frag},sprite:{uniforms:Dr([We.sprite,We.fog]),vertexShader:Pt.sprite_vert,fragmentShader:Pt.sprite_frag},background:{uniforms:{uvTransform:{value:new Et},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Pt.background_vert,fragmentShader:Pt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Et}},vertexShader:Pt.backgroundCube_vert,fragmentShader:Pt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Pt.cube_vert,fragmentShader:Pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pt.equirect_vert,fragmentShader:Pt.equirect_frag},distanceRGBA:{uniforms:Dr([We.common,We.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pt.distanceRGBA_vert,fragmentShader:Pt.distanceRGBA_frag},shadow:{uniforms:Dr([We.lights,We.fog,{color:{value:new et(0)},opacity:{value:1}}]),vertexShader:Pt.shadow_vert,fragmentShader:Pt.shadow_frag}};fs.physical={uniforms:Dr([fs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Et},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Et},clearcoatNormalScale:{value:new we(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Et},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Et},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Et},sheen:{value:0},sheenColor:{value:new et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Et},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Et},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Et},transmissionSamplerSize:{value:new we},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Et},attenuationDistance:{value:0},attenuationColor:{value:new et(0)},specularColor:{value:new et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Et},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Et},anisotropyVector:{value:new we},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Et}}]),vertexShader:Pt.meshphysical_vert,fragmentShader:Pt.meshphysical_frag};const vg={r:0,b:0,g:0},Ml=new Ti,vX=new wt;function yX(n,e,t,r,i,s,o){const a=new et(0);let l=s===!0?0:1,u,h,f=null,p=0,m=null;function v(S){let E=S.isScene===!0?S.background:null;return E&&E.isTexture&&(E=(S.backgroundBlurriness>0?t:e).get(E)),E}function x(S){let E=!1;const R=v(S);R===null?g(a,l):R&&R.isColor&&(g(R,1),E=!0);const A=n.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(S,E){const R=v(E);R&&(R.isCubeTexture||R.mapping===xd)?(h===void 0&&(h=new jn(new fc(1,1,1),new ws({name:"BackgroundCubeMaterial",uniforms:id(fs.backgroundCube.uniforms),vertexShader:fs.backgroundCube.vertexShader,fragmentShader:fs.backgroundCube.fragmentShader,side:jr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(A,P,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),Ml.copy(E.backgroundRotation),Ml.x*=-1,Ml.y*=-1,Ml.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Ml.y*=-1,Ml.z*=-1),h.material.uniforms.envMap.value=R,h.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(vX.makeRotationFromEuler(Ml)),h.material.toneMapped=Wt.getTransfer(R.colorSpace)!==tn,(f!==R||p!==R.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,f=R,p=R.version,m=n.toneMapping),h.layers.enableAll(),S.unshift(h,h.geometry,h.material,0,0,null)):R&&R.isTexture&&(u===void 0&&(u=new jn(new Sd(2,2),new ws({name:"BackgroundMaterial",uniforms:id(fs.background.uniforms),vertexShader:fs.background.vertexShader,fragmentShader:fs.background.fragmentShader,side:Do,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=R,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.toneMapped=Wt.getTransfer(R.colorSpace)!==tn,R.matrixAutoUpdate===!0&&R.updateMatrix(),u.material.uniforms.uvTransform.value.copy(R.matrix),(f!==R||p!==R.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=R,p=R.version,m=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function g(S,E){S.getRGB(vg,sk(n)),r.buffers.color.setClear(vg.r,vg.g,vg.b,E,o)}function w(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(S,E=1){a.set(S),l=E,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,g(a,l)},render:x,addToRenderList:_,dispose:w}}function xX(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(C,O,F,W,q){let Z=!1;const K=f(W,F,O);s!==K&&(s=K,u(s.object)),Z=m(C,W,F,q),Z&&v(C,W,F,q),q!==null&&e.update(q,n.ELEMENT_ARRAY_BUFFER),(Z||o)&&(o=!1,E(C,O,F,W),q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(q).buffer))}function l(){return n.createVertexArray()}function u(C){return n.bindVertexArray(C)}function h(C){return n.deleteVertexArray(C)}function f(C,O,F){const W=F.wireframe===!0;let q=r[C.id];q===void 0&&(q={},r[C.id]=q);let Z=q[O.id];Z===void 0&&(Z={},q[O.id]=Z);let K=Z[W];return K===void 0&&(K=p(l()),Z[W]=K),K}function p(C){const O=[],F=[],W=[];for(let q=0;q<t;q++)O[q]=0,F[q]=0,W[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:F,attributeDivisors:W,object:C,attributes:{},index:null}}function m(C,O,F,W){const q=s.attributes,Z=O.attributes;let K=0;const Q=F.getAttributes();for(const D in Q)if(Q[D].location>=0){const X=q[D];let J=Z[D];if(J===void 0&&(D==="instanceMatrix"&&C.instanceMatrix&&(J=C.instanceMatrix),D==="instanceColor"&&C.instanceColor&&(J=C.instanceColor)),X===void 0||X.attribute!==J||J&&X.data!==J.data)return!0;K++}return s.attributesNum!==K||s.index!==W}function v(C,O,F,W){const q={},Z=O.attributes;let K=0;const Q=F.getAttributes();for(const D in Q)if(Q[D].location>=0){let X=Z[D];X===void 0&&(D==="instanceMatrix"&&C.instanceMatrix&&(X=C.instanceMatrix),D==="instanceColor"&&C.instanceColor&&(X=C.instanceColor));const J={};J.attribute=X,X&&X.data&&(J.data=X.data),q[D]=J,K++}s.attributes=q,s.attributesNum=K,s.index=W}function x(){const C=s.newAttributes;for(let O=0,F=C.length;O<F;O++)C[O]=0}function _(C){g(C,0)}function g(C,O){const F=s.newAttributes,W=s.enabledAttributes,q=s.attributeDivisors;F[C]=1,W[C]===0&&(n.enableVertexAttribArray(C),W[C]=1),q[C]!==O&&(n.vertexAttribDivisor(C,O),q[C]=O)}function w(){const C=s.newAttributes,O=s.enabledAttributes;for(let F=0,W=O.length;F<W;F++)O[F]!==C[F]&&(n.disableVertexAttribArray(F),O[F]=0)}function S(C,O,F,W,q,Z,K){K===!0?n.vertexAttribIPointer(C,O,F,q,Z):n.vertexAttribPointer(C,O,F,W,q,Z)}function E(C,O,F,W){x();const q=W.attributes,Z=F.getAttributes(),K=O.defaultAttributeValues;for(const Q in Z){const D=Z[Q];if(D.location>=0){let V=q[Q];if(V===void 0&&(Q==="instanceMatrix"&&C.instanceMatrix&&(V=C.instanceMatrix),Q==="instanceColor"&&C.instanceColor&&(V=C.instanceColor)),V!==void 0){const X=V.normalized,J=V.itemSize,oe=e.get(V);if(oe===void 0)continue;const ye=oe.buffer,ie=oe.type,xe=oe.bytesPerElement,Me=ie===n.INT||ie===n.UNSIGNED_INT||V.gpuType===Qv;if(V.isInterleavedBufferAttribute){const Re=V.data,He=Re.stride,lt=V.offset;if(Re.isInstancedInterleavedBuffer){for(let ze=0;ze<D.locationSize;ze++)g(D.location+ze,Re.meshPerAttribute);C.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let ze=0;ze<D.locationSize;ze++)_(D.location+ze);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let ze=0;ze<D.locationSize;ze++)S(D.location+ze,J/D.locationSize,ie,X,He*xe,(lt+J/D.locationSize*ze)*xe,Me)}else{if(V.isInstancedBufferAttribute){for(let Re=0;Re<D.locationSize;Re++)g(D.location+Re,V.meshPerAttribute);C.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let Re=0;Re<D.locationSize;Re++)_(D.location+Re);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let Re=0;Re<D.locationSize;Re++)S(D.location+Re,J/D.locationSize,ie,X,J*xe,J/D.locationSize*Re*xe,Me)}}else if(K!==void 0){const X=K[Q];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(D.location,X);break;case 3:n.vertexAttrib3fv(D.location,X);break;case 4:n.vertexAttrib4fv(D.location,X);break;default:n.vertexAttrib1fv(D.location,X)}}}}w()}function R(){k();for(const C in r){const O=r[C];for(const F in O){const W=O[F];for(const q in W)h(W[q].object),delete W[q];delete O[F]}delete r[C]}}function A(C){if(r[C.id]===void 0)return;const O=r[C.id];for(const F in O){const W=O[F];for(const q in W)h(W[q].object),delete W[q];delete O[F]}delete r[C.id]}function P(C){for(const O in r){const F=r[O];if(F[C.id]===void 0)continue;const W=F[C.id];for(const q in W)h(W[q].object),delete W[q];delete F[C.id]}}function k(){N(),o=!0,s!==i&&(s=i,u(s.object))}function N(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:k,resetDefaultState:N,dispose:R,releaseStatesOfGeometry:A,releaseStatesOfProgram:P,initAttributes:x,enableAttribute:_,disableUnusedAttributes:w}}function _X(n,e,t){let r;function i(u){r=u}function s(u,h){n.drawArrays(r,u,h),t.update(h,r,1)}function o(u,h,f){f!==0&&(n.drawArraysInstanced(r,u,h,f),t.update(h,r,f))}function a(u,h,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,h,0,f);let m=0;for(let v=0;v<f;v++)m+=h[v];t.update(m,r,1)}function l(u,h,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<u.length;v++)o(u[v],h[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(r,u,0,h,0,p,0,f);let v=0;for(let x=0;x<f;x++)v+=h[x]*p[x];t.update(v,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function wX(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(P){return!(P!==Ar&&r.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(P){const k=P===_d&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Ki&&r.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==ii&&!k)}function l(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=l(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const f=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),R=v>0,A=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:_,maxAttributes:g,maxVertexUniforms:w,maxVaryings:S,maxFragmentUniforms:E,vertexTextures:R,maxSamples:A}}function SX(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new xo,a=new Et,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,x=f.clipIntersection,_=f.clipShadows,g=n.get(f);if(!i||v===null||v.length===0||s&&!_)s?h(null):u();else{const w=s?0:r,S=w*4;let E=g.clippingState||null;l.value=E,E=h(v,p,S,m);for(let R=0;R!==S;++R)E[R]=t[R];g.clippingState=E,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=w}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(f,p,m,v){const x=f!==null?f.length:0;let _=null;if(x!==0){if(_=l.value,v!==!0||_===null){const g=m+x*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(_===null||_.length<g)&&(_=new Float32Array(g));for(let S=0,E=m;S!==x;++S,E+=4)o.copy(f[S]).applyMatrix4(w,a),o.normal.toArray(_,E),_[E+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function bX(n){let e=new WeakMap;function t(o,a){return a===yf?o.mapping=Oo:a===xf&&(o.mapping=Wa),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===yf||a===xf)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new lk(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const wu=4,S2=[.125,.215,.35,.446,.526,.582],kl=20,hw=new Ws,b2=new et;let fw=null,pw=0,mw=0,gw=!1;const Nl=(1+Math.sqrt(5))/2,eu=1/Nl,M2=[new j(-Nl,eu,0),new j(Nl,eu,0),new j(-eu,0,Nl),new j(eu,0,Nl),new j(0,Nl,-eu),new j(0,Nl,eu),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)],MX=new j;class cS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100,s={}){const{size:o=256,position:a=MX}=s;fw=this._renderer.getRenderTarget(),pw=this._renderer.getActiveCubeFace(),mw=this._renderer.getActiveMipmapLevel(),gw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=A2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=T2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(fw,pw,mw),this._renderer.xr.enabled=gw,e.scissorTest=!1,yg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oo||e.mapping===Wa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),fw=this._renderer.getRenderTarget(),pw=this._renderer.getActiveCubeFace(),mw=this._renderer.getActiveMipmapLevel(),gw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:$n,minFilter:$n,generateMipmaps:!1,type:_d,format:Ar,colorSpace:oc,depthBuffer:!1},i=E2(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=E2(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=EX(s)),this._blurMaterial=TX(s,e,t)}return i}_compileMaterial(e){const t=new jn(this._lodPlanes[0],e);this._renderer.compile(t,hw)}_sceneToCubeUV(e,t,r,i,s){const l=new Sn(90,1,t,r),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,m=f.toneMapping;f.getClearColor(b2),f.toneMapping=Vs,f.autoClear=!1;const v=new Za({name:"PMREM.Background",side:jr,depthWrite:!1,depthTest:!1}),x=new jn(new fc,v);let _=!1;const g=e.background;g?g.isColor&&(v.color.copy(g),e.background=null,_=!0):(v.color.copy(b2),_=!0);for(let w=0;w<6;w++){const S=w%3;S===0?(l.up.set(0,u[w],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+h[w],s.y,s.z)):S===1?(l.up.set(0,0,u[w]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+h[w],s.z)):(l.up.set(0,u[w],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+h[w]));const E=this._cubeSize;yg(i,S*E,w>2?E:0,E,E),f.setRenderTarget(i),_&&f.render(x,l),f.render(e,l)}x.geometry.dispose(),x.material.dispose(),f.toneMapping=m,f.autoClear=p,e.background=g}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Oo||e.mapping===Wa;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=A2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=T2());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new jn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;yg(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,hw)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=M2[(i-s-1)%M2.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new jn(this._lodPlanes[i],u),p=u.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*kl-1),x=s/v,_=isFinite(s)?1+Math.floor(h*x):kl;_>kl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${kl}`);const g=[];let w=0;for(let P=0;P<kl;++P){const k=P/x,N=Math.exp(-k*k/2);g.push(N),P===0?w+=N:P<_&&(w+=2*N)}for(let P=0;P<g.length;P++)g[P]=g[P]/w;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-r;const E=this._sizeLods[i],R=3*E*(i>S-wu?i-S+wu:0),A=4*(this._cubeSize-E);yg(t,R,A,3*E,2*E),l.setRenderTarget(t),l.render(f,hw)}}function EX(n){const e=[],t=[],r=[];let i=n;const s=n-wu+1+S2.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-wu?l=S2[o-n+wu-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),h=-u,f=1+u,p=[h,h,f,h,f,f,h,h,f,f,h,f],m=6,v=6,x=3,_=2,g=1,w=new Float32Array(x*v*m),S=new Float32Array(_*v*m),E=new Float32Array(g*v*m);for(let A=0;A<m;A++){const P=A%3*2/3-1,k=A>2?0:-1,N=[P,k,0,P+2/3,k,0,P+2/3,k+1,0,P,k,0,P+2/3,k+1,0,P,k+1,0];w.set(N,x*v*A),S.set(p,_*v*A);const C=[A,A,A,A,A,A];E.set(C,g*v*A)}const R=new Ct;R.setAttribute("position",new on(w,x)),R.setAttribute("uv",new on(S,_)),R.setAttribute("faceIndex",new on(E,g)),e.push(R),i>wu&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function E2(n,e,t){const r=new Xs(n,e,t);return r.texture.mapping=xd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function yg(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function TX(n,e,t){const r=new Float32Array(kl),i=new j(0,1,0);return new ws({name:"SphericalGaussianBlur",defines:{n:kl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:MM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function T2(){return new ws({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:MM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function A2(){return new ws({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:MM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:To,depthTest:!1,depthWrite:!1})}function MM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function AX(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===yf||l===xf,h=l===Oo||l===Wa;if(u||h){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new cS(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return u&&m&&m.height>0||h&&m&&i(m)?(t===null&&(t=new cS(n)),f=u?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function i(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function CX(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Nu("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function RX(n,e,t,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const m in p)e.update(p[m],n.ARRAY_BUFFER)}function u(f){const p=[],m=f.index,v=f.attributes.position;let x=0;if(m!==null){const w=m.array;x=m.version;for(let S=0,E=w.length;S<E;S+=3){const R=w[S+0],A=w[S+1],P=w[S+2];p.push(R,A,A,P,P,R)}}else if(v!==void 0){const w=v.array;x=v.version;for(let S=0,E=w.length/3-1;S<E;S+=3){const R=S+0,A=S+1,P=S+2;p.push(R,A,A,P,P,R)}}else return;const _=new(tk(p)?Zb:Jb)(p,1);_.version=x;const g=s.get(f);g&&e.remove(g),s.set(f,_)}function h(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:h}}function PX(n,e,t){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(r,m,s,p*o),t.update(m,r,1)}function u(p,m,v){v!==0&&(n.drawElementsInstanced(r,m,s,p*o,v),t.update(m,r,v))}function h(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,p,0,v);let _=0;for(let g=0;g<v;g++)_+=m[g];t.update(_,r,1)}function f(p,m,v,x){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<p.length;g++)u(p[g]/o,m[g],x[g]);else{_.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,x,0,v);let g=0;for(let w=0;w<v;w++)g+=m[w]*x[w];t.update(g,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function IX(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function NX(n,e,t){const r=new WeakMap,i=new Xt;function s(o,a,l){const u=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=h!==void 0?h.length:0;let p=r.get(a);if(p===void 0||p.count!==f){let C=function(){k.dispose(),r.delete(a),a.removeEventListener("dispose",C)};var m=C;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],w=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let E=0;v===!0&&(E=1),x===!0&&(E=2),_===!0&&(E=3);let R=a.attributes.position.count*E,A=1;R>e.maxTextureSize&&(A=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const P=new Float32Array(R*A*4*f),k=new oy(P,R,A,f);k.type=ii,k.needsUpdate=!0;const N=E*4;for(let O=0;O<f;O++){const F=g[O],W=w[O],q=S[O],Z=R*A*4*O;for(let K=0;K<F.count;K++){const Q=K*N;v===!0&&(i.fromBufferAttribute(F,K),P[Z+Q+0]=i.x,P[Z+Q+1]=i.y,P[Z+Q+2]=i.z,P[Z+Q+3]=0),x===!0&&(i.fromBufferAttribute(W,K),P[Z+Q+4]=i.x,P[Z+Q+5]=i.y,P[Z+Q+6]=i.z,P[Z+Q+7]=0),_===!0&&(i.fromBufferAttribute(q,K),P[Z+Q+8]=i.x,P[Z+Q+9]=i.y,P[Z+Q+10]=i.z,P[Z+Q+11]=q.itemSize===4?i.w:1)}}p={count:f,texture:k,size:new we(R,A)},r.set(a,p),a.addEventListener("dispose",C)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let _=0;_<u.length;_++)v+=u[_];const x=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function LX(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,h=l.geometry,f=e.get(l,h);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==u&&(p.update(),i.set(p,u))}return f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const cD=new Pn,C2=new rM(1,1),uD=new oy,dD=new ay,hD=new Yf,R2=[],P2=[],I2=new Float32Array(16),N2=new Float32Array(9),L2=new Float32Array(4);function bd(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=R2[i];if(s===void 0&&(s=new Float32Array(i),R2[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function qn(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Yn(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Cy(n,e){let t=P2[e];t===void 0&&(t=new Int32Array(e),P2[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function kX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function DX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2fv(this.addr,e),Yn(t,e)}}function OX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(qn(t,e))return;n.uniform3fv(this.addr,e),Yn(t,e)}}function UX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4fv(this.addr,e),Yn(t,e)}}function FX(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(qn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Yn(t,e)}else{if(qn(t,r))return;L2.set(r),n.uniformMatrix2fv(this.addr,!1,L2),Yn(t,r)}}function zX(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(qn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Yn(t,e)}else{if(qn(t,r))return;N2.set(r),n.uniformMatrix3fv(this.addr,!1,N2),Yn(t,r)}}function BX(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(qn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Yn(t,e)}else{if(qn(t,r))return;I2.set(r),n.uniformMatrix4fv(this.addr,!1,I2),Yn(t,r)}}function jX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function HX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2iv(this.addr,e),Yn(t,e)}}function VX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qn(t,e))return;n.uniform3iv(this.addr,e),Yn(t,e)}}function GX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4iv(this.addr,e),Yn(t,e)}}function WX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function $X(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2uiv(this.addr,e),Yn(t,e)}}function XX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qn(t,e))return;n.uniform3uiv(this.addr,e),Yn(t,e)}}function qX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4uiv(this.addr,e),Yn(t,e)}}function YX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(C2.compareFunction=qb,s=C2):s=cD,t.setTexture2D(e||s,i)}function KX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||dD,i)}function JX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||hD,i)}function ZX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||uD,i)}function QX(n){switch(n){case 5126:return kX;case 35664:return DX;case 35665:return OX;case 35666:return UX;case 35674:return FX;case 35675:return zX;case 35676:return BX;case 5124:case 35670:return jX;case 35667:case 35671:return HX;case 35668:case 35672:return VX;case 35669:case 35673:return GX;case 5125:return WX;case 36294:return $X;case 36295:return XX;case 36296:return qX;case 35678:case 36198:case 36298:case 36306:case 35682:return YX;case 35679:case 36299:case 36307:return KX;case 35680:case 36300:case 36308:case 36293:return JX;case 36289:case 36303:case 36311:case 36292:return ZX}}function eq(n,e){n.uniform1fv(this.addr,e)}function tq(n,e){const t=bd(e,this.size,2);n.uniform2fv(this.addr,t)}function nq(n,e){const t=bd(e,this.size,3);n.uniform3fv(this.addr,t)}function rq(n,e){const t=bd(e,this.size,4);n.uniform4fv(this.addr,t)}function iq(n,e){const t=bd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function sq(n,e){const t=bd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function oq(n,e){const t=bd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function aq(n,e){n.uniform1iv(this.addr,e)}function lq(n,e){n.uniform2iv(this.addr,e)}function cq(n,e){n.uniform3iv(this.addr,e)}function uq(n,e){n.uniform4iv(this.addr,e)}function dq(n,e){n.uniform1uiv(this.addr,e)}function hq(n,e){n.uniform2uiv(this.addr,e)}function fq(n,e){n.uniform3uiv(this.addr,e)}function pq(n,e){n.uniform4uiv(this.addr,e)}function mq(n,e,t){const r=this.cache,i=e.length,s=Cy(t,i);qn(r,s)||(n.uniform1iv(this.addr,s),Yn(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||cD,s[o])}function gq(n,e,t){const r=this.cache,i=e.length,s=Cy(t,i);qn(r,s)||(n.uniform1iv(this.addr,s),Yn(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||dD,s[o])}function vq(n,e,t){const r=this.cache,i=e.length,s=Cy(t,i);qn(r,s)||(n.uniform1iv(this.addr,s),Yn(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||hD,s[o])}function yq(n,e,t){const r=this.cache,i=e.length,s=Cy(t,i);qn(r,s)||(n.uniform1iv(this.addr,s),Yn(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||uD,s[o])}function xq(n){switch(n){case 5126:return eq;case 35664:return tq;case 35665:return nq;case 35666:return rq;case 35674:return iq;case 35675:return sq;case 35676:return oq;case 5124:case 35670:return aq;case 35667:case 35671:return lq;case 35668:case 35672:return cq;case 35669:case 35673:return uq;case 5125:return dq;case 36294:return hq;case 36295:return fq;case 36296:return pq;case 35678:case 36198:case 36298:case 36306:case 35682:return mq;case 35679:case 36299:case 36307:return gq;case 35680:case 36300:case 36308:case 36293:return vq;case 36289:case 36303:case 36311:case 36292:return yq}}class _q{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=QX(t.type)}}class wq{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=xq(t.type)}}class Sq{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const vw=/(\w+)(\])?(\[|\.)?/g;function k2(n,e){n.seq.push(e),n.map[e.id]=e}function bq(n,e,t){const r=n.name,i=r.length;for(vw.lastIndex=0;;){const s=vw.exec(r),o=vw.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){k2(t,u===void 0?new _q(a,n,e):new wq(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new Sq(a),k2(t,f)),t=f}}}class jg{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);bq(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function D2(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Mq=37297;let Eq=0;function Tq(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const O2=new Et;function Aq(n){Wt._getMatrix(O2,Wt.workingColorSpace,n);const e=`mat3( ${O2.elements.map(t=>t.toFixed(4))} )`;switch(Wt.getTransfer(n)){case Mf:return[e,"LinearTransferOETF"];case tn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function U2(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Tq(n.getShaderSource(e),o)}else return i}function Cq(n,e){const t=Aq(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Rq(n,e){let t;switch(e){case DL:t="Linear";break;case OL:t="Reinhard";break;case UL:t="Cineon";break;case Fb:t="ACESFilmic";break;case zL:t="AgX";break;case BL:t="Neutral";break;case FL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const xg=new j;function Pq(){Wt.getLuminanceCoefficients(xg);const n=xg.x.toFixed(4),e=xg.y.toFixed(4),t=xg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Iq(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_h).join(`
`)}function Nq(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Lq(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function _h(n){return n!==""}function F2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function z2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kq=/^[ \t]*#include +<([\w\d./]+)>/gm;function uS(n){return n.replace(kq,Oq)}const Dq=new Map;function Oq(n,e){let t=Pt[e];if(t===void 0){const r=Dq.get(e);if(r!==void 0)t=Pt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return uS(t)}const Uq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function B2(n){return n.replace(Uq,Fq)}function Fq(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function j2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function zq(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Jv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Iu?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ls&&(e="SHADOWMAP_TYPE_VSM"),e}function Bq(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Oo:case Wa:e="ENVMAP_TYPE_CUBE";break;case xd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jq(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Wa:e="ENVMAP_MODE_REFRACTION";break}return e}function Hq(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case $f:e="ENVMAP_BLENDING_MULTIPLY";break;case LL:e="ENVMAP_BLENDING_MIX";break;case kL:e="ENVMAP_BLENDING_ADD";break}return e}function Vq(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Gq(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=zq(t),u=Bq(t),h=jq(t),f=Hq(t),p=Vq(t),m=Iq(t),v=Nq(s),x=i.createProgram();let _,g,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(_h).join(`
`),_.length>0&&(_+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(_h).join(`
`),g.length>0&&(g+=`
`)):(_=[j2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_h).join(`
`),g=[j2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vs?"#define TONE_MAPPING":"",t.toneMapping!==Vs?Pt.tonemapping_pars_fragment:"",t.toneMapping!==Vs?Rq("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Pt.colorspace_pars_fragment,Cq("linearToOutputTexel",t.outputColorSpace),Pq(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(_h).join(`
`)),o=uS(o),o=F2(o,t),o=z2(o,t),a=uS(a),a=F2(a,t),a=z2(a,t),o=B2(o),a=B2(a),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,_=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,g=["#define varying in",t.glslVersion===eS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===eS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=w+_+o,E=w+g+a,R=D2(i,i.VERTEX_SHADER,S),A=D2(i,i.FRAGMENT_SHADER,E);i.attachShader(x,R),i.attachShader(x,A),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x);function P(O){if(n.debug.checkShaderErrors){const F=i.getProgramInfoLog(x).trim(),W=i.getShaderInfoLog(R).trim(),q=i.getShaderInfoLog(A).trim();let Z=!0,K=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(Z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,x,R,A);else{const Q=U2(i,R,"vertex"),D=U2(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+F+`
`+Q+`
`+D)}else F!==""?console.warn("THREE.WebGLProgram: Program Info Log:",F):(W===""||q==="")&&(K=!1);K&&(O.diagnostics={runnable:Z,programLog:F,vertexShader:{log:W,prefix:_},fragmentShader:{log:q,prefix:g}})}i.deleteShader(R),i.deleteShader(A),k=new jg(i,x),N=Lq(i,x)}let k;this.getUniforms=function(){return k===void 0&&P(this),k};let N;this.getAttributes=function(){return N===void 0&&P(this),N};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=i.getProgramParameter(x,Mq)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Eq++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=R,this.fragmentShader=A,this}let Wq=0;class $q{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Xq(e),t.set(e,r)),r}}class Xq{constructor(e){this.id=Wq++,this.code=e,this.usedTimes=0}}function qq(n,e,t,r,i,s,o){const a=new Kl,l=new $q,u=new Set,h=[],f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(N){return u.add(N),N===0?"uv":`uv${N}`}function _(N,C,O,F,W){const q=F.fog,Z=W.geometry,K=N.isMeshStandardMaterial?F.environment:null,Q=(N.isMeshStandardMaterial?t:e).get(N.envMap||K),D=Q&&Q.mapping===xd?Q.image.height:null,V=v[N.type];N.precision!==null&&(m=i.getMaxPrecision(N.precision),m!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",m,"instead."));const X=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,J=X!==void 0?X.length:0;let oe=0;Z.morphAttributes.position!==void 0&&(oe=1),Z.morphAttributes.normal!==void 0&&(oe=2),Z.morphAttributes.color!==void 0&&(oe=3);let ye,ie,xe,Me;if(V){const Ot=fs[V];ye=Ot.vertexShader,ie=Ot.fragmentShader}else ye=N.vertexShader,ie=N.fragmentShader,l.update(N),xe=l.getVertexShaderID(N),Me=l.getFragmentShaderID(N);const Re=n.getRenderTarget(),He=n.state.buffers.depth.getReversed(),lt=W.isInstancedMesh===!0,ze=W.isBatchedMesh===!0,Je=!!N.map,ft=!!N.matcap,Ve=!!Q,B=!!N.aoMap,Ne=!!N.lightMap,Ee=!!N.bumpMap,Ie=!!N.normalMap,ge=!!N.displacementMap,De=!!N.emissiveMap,Ae=!!N.metalnessMap,qe=!!N.roughnessMap,vt=N.anisotropy>0,H=N.clearcoat>0,U=N.dispersion>0,se=N.iridescence>0,de=N.sheen>0,ve=N.transmission>0,pe=vt&&!!N.anisotropyMap,Ze=H&&!!N.clearcoatMap,Fe=H&&!!N.clearcoatNormalMap,tt=H&&!!N.clearcoatRoughnessMap,nt=se&&!!N.iridescenceMap,Ce=se&&!!N.iridescenceThicknessMap,Ye=de&&!!N.sheenColorMap,ct=de&&!!N.sheenRoughnessMap,Y=!!N.specularMap,ae=!!N.specularColorMap,fe=!!N.specularIntensityMap,$=ve&&!!N.transmissionMap,_e=ve&&!!N.thicknessMap,Se=!!N.gradientMap,Ue=!!N.alphaMap,Pe=N.alphaTest>0,be=!!N.alphaHash,$e=!!N.extensions;let pt=Vs;N.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(pt=n.toneMapping);const Gt={shaderID:V,shaderType:N.type,shaderName:N.name,vertexShader:ye,fragmentShader:ie,defines:N.defines,customVertexShaderID:xe,customFragmentShaderID:Me,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:m,batching:ze,batchingColor:ze&&W._colorsTexture!==null,instancing:lt,instancingColor:lt&&W.instanceColor!==null,instancingMorph:lt&&W.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:oc,alphaToCoverage:!!N.alphaToCoverage,map:Je,matcap:ft,envMap:Ve,envMapMode:Ve&&Q.mapping,envMapCubeUVHeight:D,aoMap:B,lightMap:Ne,bumpMap:Ee,normalMap:Ie,displacementMap:p&&ge,emissiveMap:De,normalMapObjectSpace:Ie&&N.normalMapType===XL,normalMapTangentSpace:Ie&&N.normalMapType===Ja,metalnessMap:Ae,roughnessMap:qe,anisotropy:vt,anisotropyMap:pe,clearcoat:H,clearcoatMap:Ze,clearcoatNormalMap:Fe,clearcoatRoughnessMap:tt,dispersion:U,iridescence:se,iridescenceMap:nt,iridescenceThicknessMap:Ce,sheen:de,sheenColorMap:Ye,sheenRoughnessMap:ct,specularMap:Y,specularColorMap:ae,specularIntensityMap:fe,transmission:ve,transmissionMap:$,thicknessMap:_e,gradientMap:Se,opaque:N.transparent===!1&&N.blending===ql&&N.alphaToCoverage===!1,alphaMap:Ue,alphaTest:Pe,alphaHash:be,combine:N.combine,mapUv:Je&&x(N.map.channel),aoMapUv:B&&x(N.aoMap.channel),lightMapUv:Ne&&x(N.lightMap.channel),bumpMapUv:Ee&&x(N.bumpMap.channel),normalMapUv:Ie&&x(N.normalMap.channel),displacementMapUv:ge&&x(N.displacementMap.channel),emissiveMapUv:De&&x(N.emissiveMap.channel),metalnessMapUv:Ae&&x(N.metalnessMap.channel),roughnessMapUv:qe&&x(N.roughnessMap.channel),anisotropyMapUv:pe&&x(N.anisotropyMap.channel),clearcoatMapUv:Ze&&x(N.clearcoatMap.channel),clearcoatNormalMapUv:Fe&&x(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:tt&&x(N.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&x(N.iridescenceMap.channel),iridescenceThicknessMapUv:Ce&&x(N.iridescenceThicknessMap.channel),sheenColorMapUv:Ye&&x(N.sheenColorMap.channel),sheenRoughnessMapUv:ct&&x(N.sheenRoughnessMap.channel),specularMapUv:Y&&x(N.specularMap.channel),specularColorMapUv:ae&&x(N.specularColorMap.channel),specularIntensityMapUv:fe&&x(N.specularIntensityMap.channel),transmissionMapUv:$&&x(N.transmissionMap.channel),thicknessMapUv:_e&&x(N.thicknessMap.channel),alphaMapUv:Ue&&x(N.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(Ie||vt),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!Z.attributes.uv&&(Je||Ue),fog:!!q,useFog:N.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:N.flatShading===!0&&N.wireframe===!1,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:He,skinning:W.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:oe,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:N.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:pt,decodeVideoTexture:Je&&N.map.isVideoTexture===!0&&Wt.getTransfer(N.map.colorSpace)===tn,decodeVideoTextureEmissive:De&&N.emissiveMap.isVideoTexture===!0&&Wt.getTransfer(N.emissiveMap.colorSpace)===tn,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===ji,flipSided:N.side===jr,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:$e&&N.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:($e&&N.extensions.multiDraw===!0||ze)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Gt.vertexUv1s=u.has(1),Gt.vertexUv2s=u.has(2),Gt.vertexUv3s=u.has(3),u.clear(),Gt}function g(N){const C=[];if(N.shaderID?C.push(N.shaderID):(C.push(N.customVertexShaderID),C.push(N.customFragmentShaderID)),N.defines!==void 0)for(const O in N.defines)C.push(O),C.push(N.defines[O]);return N.isRawShaderMaterial===!1&&(w(C,N),S(C,N),C.push(n.outputColorSpace)),C.push(N.customProgramCacheKey),C.join()}function w(N,C){N.push(C.precision),N.push(C.outputColorSpace),N.push(C.envMapMode),N.push(C.envMapCubeUVHeight),N.push(C.mapUv),N.push(C.alphaMapUv),N.push(C.lightMapUv),N.push(C.aoMapUv),N.push(C.bumpMapUv),N.push(C.normalMapUv),N.push(C.displacementMapUv),N.push(C.emissiveMapUv),N.push(C.metalnessMapUv),N.push(C.roughnessMapUv),N.push(C.anisotropyMapUv),N.push(C.clearcoatMapUv),N.push(C.clearcoatNormalMapUv),N.push(C.clearcoatRoughnessMapUv),N.push(C.iridescenceMapUv),N.push(C.iridescenceThicknessMapUv),N.push(C.sheenColorMapUv),N.push(C.sheenRoughnessMapUv),N.push(C.specularMapUv),N.push(C.specularColorMapUv),N.push(C.specularIntensityMapUv),N.push(C.transmissionMapUv),N.push(C.thicknessMapUv),N.push(C.combine),N.push(C.fogExp2),N.push(C.sizeAttenuation),N.push(C.morphTargetsCount),N.push(C.morphAttributeCount),N.push(C.numDirLights),N.push(C.numPointLights),N.push(C.numSpotLights),N.push(C.numSpotLightMaps),N.push(C.numHemiLights),N.push(C.numRectAreaLights),N.push(C.numDirLightShadows),N.push(C.numPointLightShadows),N.push(C.numSpotLightShadows),N.push(C.numSpotLightShadowsWithMaps),N.push(C.numLightProbes),N.push(C.shadowMapType),N.push(C.toneMapping),N.push(C.numClippingPlanes),N.push(C.numClipIntersection),N.push(C.depthPacking)}function S(N,C){a.disableAll(),C.supportsVertexTextures&&a.enable(0),C.instancing&&a.enable(1),C.instancingColor&&a.enable(2),C.instancingMorph&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),C.dispersion&&a.enable(20),C.batchingColor&&a.enable(21),C.gradientMap&&a.enable(22),N.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.reverseDepthBuffer&&a.enable(4),C.skinning&&a.enable(5),C.morphTargets&&a.enable(6),C.morphNormals&&a.enable(7),C.morphColors&&a.enable(8),C.premultipliedAlpha&&a.enable(9),C.shadowMapEnabled&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),C.decodeVideoTextureEmissive&&a.enable(20),C.alphaToCoverage&&a.enable(21),N.push(a.mask)}function E(N){const C=v[N.type];let O;if(C){const F=fs[C];O=ok.clone(F.uniforms)}else O=N.uniforms;return O}function R(N,C){let O;for(let F=0,W=h.length;F<W;F++){const q=h[F];if(q.cacheKey===C){O=q,++O.usedTimes;break}}return O===void 0&&(O=new Gq(n,C,N,s),h.push(O)),O}function A(N){if(--N.usedTimes===0){const C=h.indexOf(N);h[C]=h[h.length-1],h.pop(),N.destroy()}}function P(N){l.remove(N)}function k(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:E,acquireProgram:R,releaseProgram:A,releaseShaderCache:P,programs:h,dispose:k}}function Yq(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Kq(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function H2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function V2(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,p,m,v,x,_){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:x,group:_},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=x,g.group=_),e++,g}function a(f,p,m,v,x,_){const g=o(f,p,m,v,x,_);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(f,p,m,v,x,_){const g=o(f,p,m,v,x,_);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function u(f,p){t.length>1&&t.sort(f||Kq),r.length>1&&r.sort(p||H2),i.length>1&&i.sort(p||H2)}function h(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:h,sort:u}}function Jq(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new V2,n.set(r,[o])):i>=s.length?(o=new V2,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Zq(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new et};break;case"SpotLight":t={position:new j,direction:new j,color:new et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new et,groundColor:new et};break;case"RectAreaLight":t={color:new et,position:new j,halfWidth:new j,halfHeight:new j};break}return n[e.id]=t,t}}}function Qq(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let eY=0;function tY(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function nY(n){const e=new Zq,t=Qq(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new j);const i=new j,s=new wt,o=new wt;function a(u){let h=0,f=0,p=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let m=0,v=0,x=0,_=0,g=0,w=0,S=0,E=0,R=0,A=0,P=0;u.sort(tY);for(let N=0,C=u.length;N<C;N++){const O=u[N],F=O.color,W=O.intensity,q=O.distance,Z=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)h+=F.r*W,f+=F.g*W,p+=F.b*W;else if(O.isLightProbe){for(let K=0;K<9;K++)r.probe[K].addScaledVector(O.sh.coefficients[K],W);P++}else if(O.isDirectionalLight){const K=e.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity),O.castShadow){const Q=O.shadow,D=t.get(O);D.shadowIntensity=Q.intensity,D.shadowBias=Q.bias,D.shadowNormalBias=Q.normalBias,D.shadowRadius=Q.radius,D.shadowMapSize=Q.mapSize,r.directionalShadow[m]=D,r.directionalShadowMap[m]=Z,r.directionalShadowMatrix[m]=O.shadow.matrix,w++}r.directional[m]=K,m++}else if(O.isSpotLight){const K=e.get(O);K.position.setFromMatrixPosition(O.matrixWorld),K.color.copy(F).multiplyScalar(W),K.distance=q,K.coneCos=Math.cos(O.angle),K.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),K.decay=O.decay,r.spot[x]=K;const Q=O.shadow;if(O.map&&(r.spotLightMap[R]=O.map,R++,Q.updateMatrices(O),O.castShadow&&A++),r.spotLightMatrix[x]=Q.matrix,O.castShadow){const D=t.get(O);D.shadowIntensity=Q.intensity,D.shadowBias=Q.bias,D.shadowNormalBias=Q.normalBias,D.shadowRadius=Q.radius,D.shadowMapSize=Q.mapSize,r.spotShadow[x]=D,r.spotShadowMap[x]=Z,E++}x++}else if(O.isRectAreaLight){const K=e.get(O);K.color.copy(F).multiplyScalar(W),K.halfWidth.set(O.width*.5,0,0),K.halfHeight.set(0,O.height*.5,0),r.rectArea[_]=K,_++}else if(O.isPointLight){const K=e.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity),K.distance=O.distance,K.decay=O.decay,O.castShadow){const Q=O.shadow,D=t.get(O);D.shadowIntensity=Q.intensity,D.shadowBias=Q.bias,D.shadowNormalBias=Q.normalBias,D.shadowRadius=Q.radius,D.shadowMapSize=Q.mapSize,D.shadowCameraNear=Q.camera.near,D.shadowCameraFar=Q.camera.far,r.pointShadow[v]=D,r.pointShadowMap[v]=Z,r.pointShadowMatrix[v]=O.shadow.matrix,S++}r.point[v]=K,v++}else if(O.isHemisphereLight){const K=e.get(O);K.skyColor.copy(O.color).multiplyScalar(W),K.groundColor.copy(O.groundColor).multiplyScalar(W),r.hemi[g]=K,g++}}_>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=We.LTC_FLOAT_1,r.rectAreaLTC2=We.LTC_FLOAT_2):(r.rectAreaLTC1=We.LTC_HALF_1,r.rectAreaLTC2=We.LTC_HALF_2)),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const k=r.hash;(k.directionalLength!==m||k.pointLength!==v||k.spotLength!==x||k.rectAreaLength!==_||k.hemiLength!==g||k.numDirectionalShadows!==w||k.numPointShadows!==S||k.numSpotShadows!==E||k.numSpotMaps!==R||k.numLightProbes!==P)&&(r.directional.length=m,r.spot.length=x,r.rectArea.length=_,r.point.length=v,r.hemi.length=g,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=E+R-A,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=A,r.numLightProbes=P,k.directionalLength=m,k.pointLength=v,k.spotLength=x,k.rectAreaLength=_,k.hemiLength=g,k.numDirectionalShadows=w,k.numPointShadows=S,k.numSpotShadows=E,k.numSpotMaps=R,k.numLightProbes=P,r.version=eY++)}function l(u,h){let f=0,p=0,m=0,v=0,x=0;const _=h.matrixWorldInverse;for(let g=0,w=u.length;g<w;g++){const S=u[g];if(S.isDirectionalLight){const E=r.directional[f];E.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(_),f++}else if(S.isSpotLight){const E=r.spot[m];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(_),E.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(_),m++}else if(S.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(_),o.identity(),s.copy(S.matrixWorld),s.premultiply(_),o.extractRotation(s),E.halfWidth.set(S.width*.5,0,0),E.halfHeight.set(0,S.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const E=r.point[p];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(_),p++}else if(S.isHemisphereLight){const E=r.hemi[x];E.direction.setFromMatrixPosition(S.matrixWorld),E.direction.transformDirection(_),x++}}}return{setup:a,setupView:l,state:r}}function G2(n){const e=new nY(n),t=[],r=[];function i(h){u.camera=h,t.length=0,r.length=0}function s(h){t.push(h)}function o(h){r.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function rY(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new G2(n),e.set(i,[a])):s>=o.length?(a=new G2(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const iY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sY=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function oY(n,e,t){let r=new wd;const i=new we,s=new we,o=new Xt,a=new dM({depthPacking:$L}),l=new hM,u={},h=t.maxTextureSize,f={[Do]:jr,[jr]:Do,[ji]:ji},p=new ws({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new we},radius:{value:4}},vertexShader:iY,fragmentShader:sY}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new Ct;v.setAttribute("position",new on(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new jn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Jv;let g=this.type;this.render=function(A,P,k){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||A.length===0)return;const N=n.getRenderTarget(),C=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),F=n.state;F.setBlending(To),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const W=g!==ls&&this.type===ls,q=g===ls&&this.type!==ls;for(let Z=0,K=A.length;Z<K;Z++){const Q=A[Z],D=Q.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;i.copy(D.mapSize);const V=D.getFrameExtents();if(i.multiply(V),s.copy(D.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/V.x),i.x=s.x*V.x,D.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/V.y),i.y=s.y*V.y,D.mapSize.y=s.y)),D.map===null||W===!0||q===!0){const J=this.type!==ls?{minFilter:cr,magFilter:cr}:{};D.map!==null&&D.map.dispose(),D.map=new Xs(i.x,i.y,J),D.map.texture.name=Q.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const X=D.getViewportCount();for(let J=0;J<X;J++){const oe=D.getViewport(J);o.set(s.x*oe.x,s.y*oe.y,s.x*oe.z,s.y*oe.w),F.viewport(o),D.updateMatrices(Q,J),r=D.getFrustum(),E(P,k,D.camera,Q,this.type)}D.isPointLightShadow!==!0&&this.type===ls&&w(D,k),D.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(N,C,O)};function w(A,P){const k=e.update(x);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Xs(i.x,i.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(P,null,k,p,x,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(P,null,k,m,x,null)}function S(A,P,k,N){let C=null;const O=k.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(O!==void 0)C=O;else if(C=k.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const F=C.uuid,W=P.uuid;let q=u[F];q===void 0&&(q={},u[F]=q);let Z=q[W];Z===void 0&&(Z=C.clone(),q[W]=Z,P.addEventListener("dispose",R)),C=Z}if(C.visible=P.visible,C.wireframe=P.wireframe,N===ls?C.side=P.shadowSide!==null?P.shadowSide:P.side:C.side=P.shadowSide!==null?P.shadowSide:f[P.side],C.alphaMap=P.alphaMap,C.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,C.map=P.map,C.clipShadows=P.clipShadows,C.clippingPlanes=P.clippingPlanes,C.clipIntersection=P.clipIntersection,C.displacementMap=P.displacementMap,C.displacementScale=P.displacementScale,C.displacementBias=P.displacementBias,C.wireframeLinewidth=P.wireframeLinewidth,C.linewidth=P.linewidth,k.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const F=n.properties.get(C);F.light=k}return C}function E(A,P,k,N,C){if(A.visible===!1)return;if(A.layers.test(P.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&C===ls)&&(!A.frustumCulled||r.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,A.matrixWorld);const W=e.update(A),q=A.material;if(Array.isArray(q)){const Z=W.groups;for(let K=0,Q=Z.length;K<Q;K++){const D=Z[K],V=q[D.materialIndex];if(V&&V.visible){const X=S(A,V,N,C);A.onBeforeShadow(n,A,P,k,W,X,D),n.renderBufferDirect(k,null,W,X,A,D),A.onAfterShadow(n,A,P,k,W,X,D)}}}else if(q.visible){const Z=S(A,q,N,C);A.onBeforeShadow(n,A,P,k,W,Z,null),n.renderBufferDirect(k,null,W,Z,A,null),A.onAfterShadow(n,A,P,k,W,Z,null)}}const F=A.children;for(let W=0,q=F.length;W<q;W++)E(F[W],P,k,N,C)}function R(A){A.target.removeEventListener("dispose",R);for(const k in u){const N=u[k],C=A.target.uuid;C in N&&(N[C].dispose(),delete N[C])}}}const aY={[E0]:T0,[A0]:P0,[C0]:I0,[sc]:R0,[T0]:E0,[P0]:A0,[I0]:C0,[R0]:sc};function lY(n,e){function t(){let $=!1;const _e=new Xt;let Se=null;const Ue=new Xt(0,0,0,0);return{setMask:function(Pe){Se!==Pe&&!$&&(n.colorMask(Pe,Pe,Pe,Pe),Se=Pe)},setLocked:function(Pe){$=Pe},setClear:function(Pe,be,$e,pt,Gt){Gt===!0&&(Pe*=pt,be*=pt,$e*=pt),_e.set(Pe,be,$e,pt),Ue.equals(_e)===!1&&(n.clearColor(Pe,be,$e,pt),Ue.copy(_e))},reset:function(){$=!1,Se=null,Ue.set(-1,0,0,0)}}}function r(){let $=!1,_e=!1,Se=null,Ue=null,Pe=null;return{setReversed:function(be){if(_e!==be){const $e=e.get("EXT_clip_control");be?$e.clipControlEXT($e.LOWER_LEFT_EXT,$e.ZERO_TO_ONE_EXT):$e.clipControlEXT($e.LOWER_LEFT_EXT,$e.NEGATIVE_ONE_TO_ONE_EXT),_e=be;const pt=Pe;Pe=null,this.setClear(pt)}},getReversed:function(){return _e},setTest:function(be){be?Re(n.DEPTH_TEST):He(n.DEPTH_TEST)},setMask:function(be){Se!==be&&!$&&(n.depthMask(be),Se=be)},setFunc:function(be){if(_e&&(be=aY[be]),Ue!==be){switch(be){case E0:n.depthFunc(n.NEVER);break;case T0:n.depthFunc(n.ALWAYS);break;case A0:n.depthFunc(n.LESS);break;case sc:n.depthFunc(n.LEQUAL);break;case C0:n.depthFunc(n.EQUAL);break;case R0:n.depthFunc(n.GEQUAL);break;case P0:n.depthFunc(n.GREATER);break;case I0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ue=be}},setLocked:function(be){$=be},setClear:function(be){Pe!==be&&(_e&&(be=1-be),n.clearDepth(be),Pe=be)},reset:function(){$=!1,Se=null,Ue=null,Pe=null,_e=!1}}}function i(){let $=!1,_e=null,Se=null,Ue=null,Pe=null,be=null,$e=null,pt=null,Gt=null;return{setTest:function(Ot){$||(Ot?Re(n.STENCIL_TEST):He(n.STENCIL_TEST))},setMask:function(Ot){_e!==Ot&&!$&&(n.stencilMask(Ot),_e=Ot)},setFunc:function(Ot,On,hr){(Se!==Ot||Ue!==On||Pe!==hr)&&(n.stencilFunc(Ot,On,hr),Se=Ot,Ue=On,Pe=hr)},setOp:function(Ot,On,hr){(be!==Ot||$e!==On||pt!==hr)&&(n.stencilOp(Ot,On,hr),be=Ot,$e=On,pt=hr)},setLocked:function(Ot){$=Ot},setClear:function(Ot){Gt!==Ot&&(n.clearStencil(Ot),Gt=Ot)},reset:function(){$=!1,_e=null,Se=null,Ue=null,Pe=null,be=null,$e=null,pt=null,Gt=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,u=new WeakMap;let h={},f={},p=new WeakMap,m=[],v=null,x=!1,_=null,g=null,w=null,S=null,E=null,R=null,A=null,P=new et(0,0,0),k=0,N=!1,C=null,O=null,F=null,W=null,q=null;const Z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let K=!1,Q=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(D)[1]),K=Q>=1):D.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),K=Q>=2);let V=null,X={};const J=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),ye=new Xt().fromArray(J),ie=new Xt().fromArray(oe);function xe($,_e,Se,Ue){const Pe=new Uint8Array(4),be=n.createTexture();n.bindTexture($,be),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let $e=0;$e<Se;$e++)$===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY?n.texImage3D(_e,0,n.RGBA,1,1,Ue,0,n.RGBA,n.UNSIGNED_BYTE,Pe):n.texImage2D(_e+$e,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Pe);return be}const Me={};Me[n.TEXTURE_2D]=xe(n.TEXTURE_2D,n.TEXTURE_2D,1),Me[n.TEXTURE_CUBE_MAP]=xe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Me[n.TEXTURE_2D_ARRAY]=xe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Me[n.TEXTURE_3D]=xe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Re(n.DEPTH_TEST),o.setFunc(sc),Ee(!1),Ie(q1),Re(n.CULL_FACE),B(To);function Re($){h[$]!==!0&&(n.enable($),h[$]=!0)}function He($){h[$]!==!1&&(n.disable($),h[$]=!1)}function lt($,_e){return f[$]!==_e?(n.bindFramebuffer($,_e),f[$]=_e,$===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=_e),$===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=_e),!0):!1}function ze($,_e){let Se=m,Ue=!1;if($){Se=p.get(_e),Se===void 0&&(Se=[],p.set(_e,Se));const Pe=$.textures;if(Se.length!==Pe.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let be=0,$e=Pe.length;be<$e;be++)Se[be]=n.COLOR_ATTACHMENT0+be;Se.length=Pe.length,Ue=!0}}else Se[0]!==n.BACK&&(Se[0]=n.BACK,Ue=!0);Ue&&n.drawBuffers(Se)}function Je($){return v!==$?(n.useProgram($),v=$,!0):!1}const ft={[va]:n.FUNC_ADD,[gL]:n.FUNC_SUBTRACT,[vL]:n.FUNC_REVERSE_SUBTRACT};ft[yL]=n.MIN,ft[xL]=n.MAX;const Ve={[_L]:n.ZERO,[wL]:n.ONE,[SL]:n.SRC_COLOR,[b0]:n.SRC_ALPHA,[CL]:n.SRC_ALPHA_SATURATE,[TL]:n.DST_COLOR,[ML]:n.DST_ALPHA,[bL]:n.ONE_MINUS_SRC_COLOR,[M0]:n.ONE_MINUS_SRC_ALPHA,[AL]:n.ONE_MINUS_DST_COLOR,[EL]:n.ONE_MINUS_DST_ALPHA,[RL]:n.CONSTANT_COLOR,[PL]:n.ONE_MINUS_CONSTANT_COLOR,[IL]:n.CONSTANT_ALPHA,[NL]:n.ONE_MINUS_CONSTANT_ALPHA};function B($,_e,Se,Ue,Pe,be,$e,pt,Gt,Ot){if($===To){x===!0&&(He(n.BLEND),x=!1);return}if(x===!1&&(Re(n.BLEND),x=!0),$!==mL){if($!==_||Ot!==N){if((g!==va||E!==va)&&(n.blendEquation(n.FUNC_ADD),g=va,E=va),Ot)switch($){case ql:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Y1:n.blendFunc(n.ONE,n.ONE);break;case K1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case J1:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case ql:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Y1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case K1:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case J1:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}w=null,S=null,R=null,A=null,P.set(0,0,0),k=0,_=$,N=Ot}return}Pe=Pe||_e,be=be||Se,$e=$e||Ue,(_e!==g||Pe!==E)&&(n.blendEquationSeparate(ft[_e],ft[Pe]),g=_e,E=Pe),(Se!==w||Ue!==S||be!==R||$e!==A)&&(n.blendFuncSeparate(Ve[Se],Ve[Ue],Ve[be],Ve[$e]),w=Se,S=Ue,R=be,A=$e),(pt.equals(P)===!1||Gt!==k)&&(n.blendColor(pt.r,pt.g,pt.b,Gt),P.copy(pt),k=Gt),_=$,N=!1}function Ne($,_e){$.side===ji?He(n.CULL_FACE):Re(n.CULL_FACE);let Se=$.side===jr;_e&&(Se=!Se),Ee(Se),$.blending===ql&&$.transparent===!1?B(To):B($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),o.setFunc($.depthFunc),o.setTest($.depthTest),o.setMask($.depthWrite),s.setMask($.colorWrite);const Ue=$.stencilWrite;a.setTest(Ue),Ue&&(a.setMask($.stencilWriteMask),a.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),a.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),De($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):He(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ee($){C!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),C=$)}function Ie($){$!==hL?(Re(n.CULL_FACE),$!==O&&($===q1?n.cullFace(n.BACK):$===fL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):He(n.CULL_FACE),O=$}function ge($){$!==F&&(K&&n.lineWidth($),F=$)}function De($,_e,Se){$?(Re(n.POLYGON_OFFSET_FILL),(W!==_e||q!==Se)&&(n.polygonOffset(_e,Se),W=_e,q=Se)):He(n.POLYGON_OFFSET_FILL)}function Ae($){$?Re(n.SCISSOR_TEST):He(n.SCISSOR_TEST)}function qe($){$===void 0&&($=n.TEXTURE0+Z-1),V!==$&&(n.activeTexture($),V=$)}function vt($,_e,Se){Se===void 0&&(V===null?Se=n.TEXTURE0+Z-1:Se=V);let Ue=X[Se];Ue===void 0&&(Ue={type:void 0,texture:void 0},X[Se]=Ue),(Ue.type!==$||Ue.texture!==_e)&&(V!==Se&&(n.activeTexture(Se),V=Se),n.bindTexture($,_e||Me[$]),Ue.type=$,Ue.texture=_e)}function H(){const $=X[V];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function U(){try{n.compressedTexImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function se(){try{n.compressedTexImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function de(){try{n.texSubImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ve(){try{n.texSubImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function pe(){try{n.compressedTexSubImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ze(){try{n.compressedTexSubImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Fe(){try{n.texStorage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function tt(){try{n.texStorage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function nt(){try{n.texImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ce(){try{n.texImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ye($){ye.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),ye.copy($))}function ct($){ie.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),ie.copy($))}function Y($,_e){let Se=u.get(_e);Se===void 0&&(Se=new WeakMap,u.set(_e,Se));let Ue=Se.get($);Ue===void 0&&(Ue=n.getUniformBlockIndex(_e,$.name),Se.set($,Ue))}function ae($,_e){const Ue=u.get(_e).get($);l.get(_e)!==Ue&&(n.uniformBlockBinding(_e,Ue,$.__bindingPointIndex),l.set(_e,Ue))}function fe(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},V=null,X={},f={},p=new WeakMap,m=[],v=null,x=!1,_=null,g=null,w=null,S=null,E=null,R=null,A=null,P=new et(0,0,0),k=0,N=!1,C=null,O=null,F=null,W=null,q=null,ye.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Re,disable:He,bindFramebuffer:lt,drawBuffers:ze,useProgram:Je,setBlending:B,setMaterial:Ne,setFlipSided:Ee,setCullFace:Ie,setLineWidth:ge,setPolygonOffset:De,setScissorTest:Ae,activeTexture:qe,bindTexture:vt,unbindTexture:H,compressedTexImage2D:U,compressedTexImage3D:se,texImage2D:nt,texImage3D:Ce,updateUBOMapping:Y,uniformBlockBinding:ae,texStorage2D:Fe,texStorage3D:tt,texSubImage2D:de,texSubImage3D:ve,compressedTexSubImage2D:pe,compressedTexSubImage3D:Ze,scissor:Ye,viewport:ct,reset:fe}}function cY(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new we,h=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(H,U){return m?new OffscreenCanvas(H,U):Af("canvas")}function x(H,U,se){let de=1;const ve=vt(H);if((ve.width>se||ve.height>se)&&(de=se/Math.max(ve.width,ve.height)),de<1)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const pe=Math.floor(de*ve.width),Ze=Math.floor(de*ve.height);f===void 0&&(f=v(pe,Ze));const Fe=U?v(pe,Ze):f;return Fe.width=pe,Fe.height=Ze,Fe.getContext("2d").drawImage(H,0,0,pe,Ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+pe+"x"+Ze+")."),Fe}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),H;return H}function _(H){return H.generateMipmaps}function g(H){n.generateMipmap(H)}function w(H){return H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:H.isWebGL3DRenderTarget?n.TEXTURE_3D:H.isWebGLArrayRenderTarget||H.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(H,U,se,de,ve=!1){if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let pe=U;if(U===n.RED&&(se===n.FLOAT&&(pe=n.R32F),se===n.HALF_FLOAT&&(pe=n.R16F),se===n.UNSIGNED_BYTE&&(pe=n.R8)),U===n.RED_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.R8UI),se===n.UNSIGNED_SHORT&&(pe=n.R16UI),se===n.UNSIGNED_INT&&(pe=n.R32UI),se===n.BYTE&&(pe=n.R8I),se===n.SHORT&&(pe=n.R16I),se===n.INT&&(pe=n.R32I)),U===n.RG&&(se===n.FLOAT&&(pe=n.RG32F),se===n.HALF_FLOAT&&(pe=n.RG16F),se===n.UNSIGNED_BYTE&&(pe=n.RG8)),U===n.RG_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.RG8UI),se===n.UNSIGNED_SHORT&&(pe=n.RG16UI),se===n.UNSIGNED_INT&&(pe=n.RG32UI),se===n.BYTE&&(pe=n.RG8I),se===n.SHORT&&(pe=n.RG16I),se===n.INT&&(pe=n.RG32I)),U===n.RGB_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.RGB8UI),se===n.UNSIGNED_SHORT&&(pe=n.RGB16UI),se===n.UNSIGNED_INT&&(pe=n.RGB32UI),se===n.BYTE&&(pe=n.RGB8I),se===n.SHORT&&(pe=n.RGB16I),se===n.INT&&(pe=n.RGB32I)),U===n.RGBA_INTEGER&&(se===n.UNSIGNED_BYTE&&(pe=n.RGBA8UI),se===n.UNSIGNED_SHORT&&(pe=n.RGBA16UI),se===n.UNSIGNED_INT&&(pe=n.RGBA32UI),se===n.BYTE&&(pe=n.RGBA8I),se===n.SHORT&&(pe=n.RGBA16I),se===n.INT&&(pe=n.RGBA32I)),U===n.RGB&&se===n.UNSIGNED_INT_5_9_9_9_REV&&(pe=n.RGB9_E5),U===n.RGBA){const Ze=ve?Mf:Wt.getTransfer(de);se===n.FLOAT&&(pe=n.RGBA32F),se===n.HALF_FLOAT&&(pe=n.RGBA16F),se===n.UNSIGNED_BYTE&&(pe=Ze===tn?n.SRGB8_ALPHA8:n.RGBA8),se===n.UNSIGNED_SHORT_4_4_4_4&&(pe=n.RGBA4),se===n.UNSIGNED_SHORT_5_5_5_1&&(pe=n.RGB5_A1)}return(pe===n.R16F||pe===n.R32F||pe===n.RG16F||pe===n.RG32F||pe===n.RGBA16F||pe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),pe}function E(H,U){let se;return H?U===null||U===Uo||U===ed?se=n.DEPTH24_STENCIL8:U===ii?se=n.DEPTH32F_STENCIL8:U===Qu&&(se=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):U===null||U===Uo||U===ed?se=n.DEPTH_COMPONENT24:U===ii?se=n.DEPTH_COMPONENT32F:U===Qu&&(se=n.DEPTH_COMPONENT16),se}function R(H,U){return _(H)===!0||H.isFramebufferTexture&&H.minFilter!==cr&&H.minFilter!==$n?Math.log2(Math.max(U.width,U.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?U.mipmaps.length:1}function A(H){const U=H.target;U.removeEventListener("dispose",A),k(U),U.isVideoTexture&&h.delete(U)}function P(H){const U=H.target;U.removeEventListener("dispose",P),C(U)}function k(H){const U=r.get(H);if(U.__webglInit===void 0)return;const se=H.source,de=p.get(se);if(de){const ve=de[U.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&N(H),Object.keys(de).length===0&&p.delete(se)}r.remove(H)}function N(H){const U=r.get(H);n.deleteTexture(U.__webglTexture);const se=H.source,de=p.get(se);delete de[U.__cacheKey],o.memory.textures--}function C(H){const U=r.get(H);if(H.depthTexture&&(H.depthTexture.dispose(),r.remove(H.depthTexture)),H.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(U.__webglFramebuffer[de]))for(let ve=0;ve<U.__webglFramebuffer[de].length;ve++)n.deleteFramebuffer(U.__webglFramebuffer[de][ve]);else n.deleteFramebuffer(U.__webglFramebuffer[de]);U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer[de])}else{if(Array.isArray(U.__webglFramebuffer))for(let de=0;de<U.__webglFramebuffer.length;de++)n.deleteFramebuffer(U.__webglFramebuffer[de]);else n.deleteFramebuffer(U.__webglFramebuffer);if(U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer),U.__webglMultisampledFramebuffer&&n.deleteFramebuffer(U.__webglMultisampledFramebuffer),U.__webglColorRenderbuffer)for(let de=0;de<U.__webglColorRenderbuffer.length;de++)U.__webglColorRenderbuffer[de]&&n.deleteRenderbuffer(U.__webglColorRenderbuffer[de]);U.__webglDepthRenderbuffer&&n.deleteRenderbuffer(U.__webglDepthRenderbuffer)}const se=H.textures;for(let de=0,ve=se.length;de<ve;de++){const pe=r.get(se[de]);pe.__webglTexture&&(n.deleteTexture(pe.__webglTexture),o.memory.textures--),r.remove(se[de])}r.remove(H)}let O=0;function F(){O=0}function W(){const H=O;return H>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+i.maxTextures),O+=1,H}function q(H){const U=[];return U.push(H.wrapS),U.push(H.wrapT),U.push(H.wrapR||0),U.push(H.magFilter),U.push(H.minFilter),U.push(H.anisotropy),U.push(H.internalFormat),U.push(H.format),U.push(H.type),U.push(H.generateMipmaps),U.push(H.premultiplyAlpha),U.push(H.flipY),U.push(H.unpackAlignment),U.push(H.colorSpace),U.join()}function Z(H,U){const se=r.get(H);if(H.isVideoTexture&&Ae(H),H.isRenderTargetTexture===!1&&H.version>0&&se.__version!==H.version){const de=H.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Me(se,H,U);return}}t.bindTexture(n.TEXTURE_2D,se.__webglTexture,n.TEXTURE0+U)}function K(H,U){const se=r.get(H);if(H.version>0&&se.__version!==H.version){Me(se,H,U);return}t.bindTexture(n.TEXTURE_2D_ARRAY,se.__webglTexture,n.TEXTURE0+U)}function Q(H,U){const se=r.get(H);if(H.version>0&&se.__version!==H.version){Me(se,H,U);return}t.bindTexture(n.TEXTURE_3D,se.__webglTexture,n.TEXTURE0+U)}function D(H,U){const se=r.get(H);if(H.version>0&&se.__version!==H.version){Re(se,H,U);return}t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+U)}const V={[_f]:n.REPEAT,[Vi]:n.CLAMP_TO_EDGE,[wf]:n.MIRRORED_REPEAT},X={[cr]:n.NEAREST,[zb]:n.NEAREST_MIPMAP_NEAREST,[yu]:n.NEAREST_MIPMAP_LINEAR,[$n]:n.LINEAR,[Dh]:n.LINEAR_MIPMAP_NEAREST,[zs]:n.LINEAR_MIPMAP_LINEAR},J={[qL]:n.NEVER,[ek]:n.ALWAYS,[YL]:n.LESS,[qb]:n.LEQUAL,[KL]:n.EQUAL,[QL]:n.GEQUAL,[JL]:n.GREATER,[ZL]:n.NOTEQUAL};function oe(H,U){if(U.type===ii&&e.has("OES_texture_float_linear")===!1&&(U.magFilter===$n||U.magFilter===Dh||U.magFilter===yu||U.magFilter===zs||U.minFilter===$n||U.minFilter===Dh||U.minFilter===yu||U.minFilter===zs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(H,n.TEXTURE_WRAP_S,V[U.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,V[U.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,V[U.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,X[U.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,X[U.minFilter]),U.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,J[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(U.magFilter===cr||U.minFilter!==yu&&U.minFilter!==zs||U.type===ii&&e.has("OES_texture_float_linear")===!1)return;if(U.anisotropy>1||r.get(U).__currentAnisotropy){const se=e.get("EXT_texture_filter_anisotropic");n.texParameterf(H,se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,i.getMaxAnisotropy())),r.get(U).__currentAnisotropy=U.anisotropy}}}function ye(H,U){let se=!1;H.__webglInit===void 0&&(H.__webglInit=!0,U.addEventListener("dispose",A));const de=U.source;let ve=p.get(de);ve===void 0&&(ve={},p.set(de,ve));const pe=q(U);if(pe!==H.__cacheKey){ve[pe]===void 0&&(ve[pe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,se=!0),ve[pe].usedTimes++;const Ze=ve[H.__cacheKey];Ze!==void 0&&(ve[H.__cacheKey].usedTimes--,Ze.usedTimes===0&&N(U)),H.__cacheKey=pe,H.__webglTexture=ve[pe].texture}return se}function ie(H,U,se){return Math.floor(Math.floor(H/se)/U)}function xe(H,U,se,de){const pe=H.updateRanges;if(pe.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,U.width,U.height,se,de,U.data);else{pe.sort((Ce,Ye)=>Ce.start-Ye.start);let Ze=0;for(let Ce=1;Ce<pe.length;Ce++){const Ye=pe[Ze],ct=pe[Ce],Y=Ye.start+Ye.count,ae=ie(ct.start,U.width,4),fe=ie(Ye.start,U.width,4);ct.start<=Y+1&&ae===fe&&ie(ct.start+ct.count-1,U.width,4)===ae?Ye.count=Math.max(Ye.count,ct.start+ct.count-Ye.start):(++Ze,pe[Ze]=ct)}pe.length=Ze+1;const Fe=n.getParameter(n.UNPACK_ROW_LENGTH),tt=n.getParameter(n.UNPACK_SKIP_PIXELS),nt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,U.width);for(let Ce=0,Ye=pe.length;Ce<Ye;Ce++){const ct=pe[Ce],Y=Math.floor(ct.start/4),ae=Math.ceil(ct.count/4),fe=Y%U.width,$=Math.floor(Y/U.width),_e=ae,Se=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,fe),n.pixelStorei(n.UNPACK_SKIP_ROWS,$),t.texSubImage2D(n.TEXTURE_2D,0,fe,$,_e,Se,se,de,U.data)}H.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Fe),n.pixelStorei(n.UNPACK_SKIP_PIXELS,tt),n.pixelStorei(n.UNPACK_SKIP_ROWS,nt)}}function Me(H,U,se){let de=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(de=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(de=n.TEXTURE_3D);const ve=ye(H,U),pe=U.source;t.bindTexture(de,H.__webglTexture,n.TEXTURE0+se);const Ze=r.get(pe);if(pe.version!==Ze.__version||ve===!0){t.activeTexture(n.TEXTURE0+se);const Fe=Wt.getPrimaries(Wt.workingColorSpace),tt=U.colorSpace===wo?null:Wt.getPrimaries(U.colorSpace),nt=U.colorSpace===wo||Fe===tt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);let Ce=x(U.image,!1,i.maxTextureSize);Ce=qe(U,Ce);const Ye=s.convert(U.format,U.colorSpace),ct=s.convert(U.type);let Y=S(U.internalFormat,Ye,ct,U.colorSpace,U.isVideoTexture);oe(de,U);let ae;const fe=U.mipmaps,$=U.isVideoTexture!==!0,_e=Ze.__version===void 0||ve===!0,Se=pe.dataReady,Ue=R(U,Ce);if(U.isDepthTexture)Y=E(U.format===nd,U.type),_e&&($?t.texStorage2D(n.TEXTURE_2D,1,Y,Ce.width,Ce.height):t.texImage2D(n.TEXTURE_2D,0,Y,Ce.width,Ce.height,0,Ye,ct,null));else if(U.isDataTexture)if(fe.length>0){$&&_e&&t.texStorage2D(n.TEXTURE_2D,Ue,Y,fe[0].width,fe[0].height);for(let Pe=0,be=fe.length;Pe<be;Pe++)ae=fe[Pe],$?Se&&t.texSubImage2D(n.TEXTURE_2D,Pe,0,0,ae.width,ae.height,Ye,ct,ae.data):t.texImage2D(n.TEXTURE_2D,Pe,Y,ae.width,ae.height,0,Ye,ct,ae.data);U.generateMipmaps=!1}else $?(_e&&t.texStorage2D(n.TEXTURE_2D,Ue,Y,Ce.width,Ce.height),Se&&xe(U,Ce,Ye,ct)):t.texImage2D(n.TEXTURE_2D,0,Y,Ce.width,Ce.height,0,Ye,ct,Ce.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){$&&_e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ue,Y,fe[0].width,fe[0].height,Ce.depth);for(let Pe=0,be=fe.length;Pe<be;Pe++)if(ae=fe[Pe],U.format!==Ar)if(Ye!==null)if($){if(Se)if(U.layerUpdates.size>0){const $e=lS(ae.width,ae.height,U.format,U.type);for(const pt of U.layerUpdates){const Gt=ae.data.subarray(pt*$e/ae.data.BYTES_PER_ELEMENT,(pt+1)*$e/ae.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,pt,ae.width,ae.height,1,Ye,Gt)}U.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,0,ae.width,ae.height,Ce.depth,Ye,ae.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Pe,Y,ae.width,ae.height,Ce.depth,0,ae.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $?Se&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,0,ae.width,ae.height,Ce.depth,Ye,ct,ae.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Pe,Y,ae.width,ae.height,Ce.depth,0,Ye,ct,ae.data)}else{$&&_e&&t.texStorage2D(n.TEXTURE_2D,Ue,Y,fe[0].width,fe[0].height);for(let Pe=0,be=fe.length;Pe<be;Pe++)ae=fe[Pe],U.format!==Ar?Ye!==null?$?Se&&t.compressedTexSubImage2D(n.TEXTURE_2D,Pe,0,0,ae.width,ae.height,Ye,ae.data):t.compressedTexImage2D(n.TEXTURE_2D,Pe,Y,ae.width,ae.height,0,ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$?Se&&t.texSubImage2D(n.TEXTURE_2D,Pe,0,0,ae.width,ae.height,Ye,ct,ae.data):t.texImage2D(n.TEXTURE_2D,Pe,Y,ae.width,ae.height,0,Ye,ct,ae.data)}else if(U.isDataArrayTexture)if($){if(_e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ue,Y,Ce.width,Ce.height,Ce.depth),Se)if(U.layerUpdates.size>0){const Pe=lS(Ce.width,Ce.height,U.format,U.type);for(const be of U.layerUpdates){const $e=Ce.data.subarray(be*Pe/Ce.data.BYTES_PER_ELEMENT,(be+1)*Pe/Ce.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,be,Ce.width,Ce.height,1,Ye,ct,$e)}U.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,Ye,ct,Ce.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Y,Ce.width,Ce.height,Ce.depth,0,Ye,ct,Ce.data);else if(U.isData3DTexture)$?(_e&&t.texStorage3D(n.TEXTURE_3D,Ue,Y,Ce.width,Ce.height,Ce.depth),Se&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,Ye,ct,Ce.data)):t.texImage3D(n.TEXTURE_3D,0,Y,Ce.width,Ce.height,Ce.depth,0,Ye,ct,Ce.data);else if(U.isFramebufferTexture){if(_e)if($)t.texStorage2D(n.TEXTURE_2D,Ue,Y,Ce.width,Ce.height);else{let Pe=Ce.width,be=Ce.height;for(let $e=0;$e<Ue;$e++)t.texImage2D(n.TEXTURE_2D,$e,Y,Pe,be,0,Ye,ct,null),Pe>>=1,be>>=1}}else if(fe.length>0){if($&&_e){const Pe=vt(fe[0]);t.texStorage2D(n.TEXTURE_2D,Ue,Y,Pe.width,Pe.height)}for(let Pe=0,be=fe.length;Pe<be;Pe++)ae=fe[Pe],$?Se&&t.texSubImage2D(n.TEXTURE_2D,Pe,0,0,Ye,ct,ae):t.texImage2D(n.TEXTURE_2D,Pe,Y,Ye,ct,ae);U.generateMipmaps=!1}else if($){if(_e){const Pe=vt(Ce);t.texStorage2D(n.TEXTURE_2D,Ue,Y,Pe.width,Pe.height)}Se&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ye,ct,Ce)}else t.texImage2D(n.TEXTURE_2D,0,Y,Ye,ct,Ce);_(U)&&g(de),Ze.__version=pe.version,U.onUpdate&&U.onUpdate(U)}H.__version=U.version}function Re(H,U,se){if(U.image.length!==6)return;const de=ye(H,U),ve=U.source;t.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+se);const pe=r.get(ve);if(ve.version!==pe.__version||de===!0){t.activeTexture(n.TEXTURE0+se);const Ze=Wt.getPrimaries(Wt.workingColorSpace),Fe=U.colorSpace===wo?null:Wt.getPrimaries(U.colorSpace),tt=U.colorSpace===wo||Ze===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt);const nt=U.isCompressedTexture||U.image[0].isCompressedTexture,Ce=U.image[0]&&U.image[0].isDataTexture,Ye=[];for(let be=0;be<6;be++)!nt&&!Ce?Ye[be]=x(U.image[be],!0,i.maxCubemapSize):Ye[be]=Ce?U.image[be].image:U.image[be],Ye[be]=qe(U,Ye[be]);const ct=Ye[0],Y=s.convert(U.format,U.colorSpace),ae=s.convert(U.type),fe=S(U.internalFormat,Y,ae,U.colorSpace),$=U.isVideoTexture!==!0,_e=pe.__version===void 0||de===!0,Se=ve.dataReady;let Ue=R(U,ct);oe(n.TEXTURE_CUBE_MAP,U);let Pe;if(nt){$&&_e&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ue,fe,ct.width,ct.height);for(let be=0;be<6;be++){Pe=Ye[be].mipmaps;for(let $e=0;$e<Pe.length;$e++){const pt=Pe[$e];U.format!==Ar?Y!==null?$?Se&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e,0,0,pt.width,pt.height,Y,pt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e,fe,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e,0,0,pt.width,pt.height,Y,ae,pt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e,fe,pt.width,pt.height,0,Y,ae,pt.data)}}}else{if(Pe=U.mipmaps,$&&_e){Pe.length>0&&Ue++;const be=vt(Ye[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ue,fe,be.width,be.height)}for(let be=0;be<6;be++)if(Ce){$?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,0,0,Ye[be].width,Ye[be].height,Y,ae,Ye[be].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,fe,Ye[be].width,Ye[be].height,0,Y,ae,Ye[be].data);for(let $e=0;$e<Pe.length;$e++){const Gt=Pe[$e].image[be].image;$?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e+1,0,0,Gt.width,Gt.height,Y,ae,Gt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e+1,fe,Gt.width,Gt.height,0,Y,ae,Gt.data)}}else{$?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,0,0,Y,ae,Ye[be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,fe,Y,ae,Ye[be]);for(let $e=0;$e<Pe.length;$e++){const pt=Pe[$e];$?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e+1,0,0,Y,ae,pt.image[be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+be,$e+1,fe,Y,ae,pt.image[be])}}}_(U)&&g(n.TEXTURE_CUBE_MAP),pe.__version=ve.version,U.onUpdate&&U.onUpdate(U)}H.__version=U.version}function He(H,U,se,de,ve,pe){const Ze=s.convert(se.format,se.colorSpace),Fe=s.convert(se.type),tt=S(se.internalFormat,Ze,Fe,se.colorSpace),nt=r.get(U),Ce=r.get(se);if(Ce.__renderTarget=U,!nt.__hasExternalTextures){const Ye=Math.max(1,U.width>>pe),ct=Math.max(1,U.height>>pe);ve===n.TEXTURE_3D||ve===n.TEXTURE_2D_ARRAY?t.texImage3D(ve,pe,tt,Ye,ct,U.depth,0,Ze,Fe,null):t.texImage2D(ve,pe,tt,Ye,ct,0,Ze,Fe,null)}t.bindFramebuffer(n.FRAMEBUFFER,H),De(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,de,ve,Ce.__webglTexture,0,ge(U)):(ve===n.TEXTURE_2D||ve>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ve<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,de,ve,Ce.__webglTexture,pe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function lt(H,U,se){if(n.bindRenderbuffer(n.RENDERBUFFER,H),U.depthBuffer){const de=U.depthTexture,ve=de&&de.isDepthTexture?de.type:null,pe=E(U.stencilBuffer,ve),Ze=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=ge(U);De(U)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,pe,U.width,U.height):se?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,pe,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,pe,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,H)}else{const de=U.textures;for(let ve=0;ve<de.length;ve++){const pe=de[ve],Ze=s.convert(pe.format,pe.colorSpace),Fe=s.convert(pe.type),tt=S(pe.internalFormat,Ze,Fe,pe.colorSpace),nt=ge(U);se&&De(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,tt,U.width,U.height):De(U)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,nt,tt,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,tt,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ze(H,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,H),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const de=r.get(U.depthTexture);de.__renderTarget=U,(!de.__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),Z(U.depthTexture,0);const ve=de.__webglTexture,pe=ge(U);if(U.depthTexture.format===td)De(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0,pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0);else if(U.depthTexture.format===nd)De(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0,pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0);else throw new Error("Unknown depthTexture format")}function Je(H){const U=r.get(H),se=H.isWebGLCubeRenderTarget===!0;if(U.__boundDepthTexture!==H.depthTexture){const de=H.depthTexture;if(U.__depthDisposeCallback&&U.__depthDisposeCallback(),de){const ve=()=>{delete U.__boundDepthTexture,delete U.__depthDisposeCallback,de.removeEventListener("dispose",ve)};de.addEventListener("dispose",ve),U.__depthDisposeCallback=ve}U.__boundDepthTexture=de}if(H.depthTexture&&!U.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");const de=H.texture.mipmaps;de&&de.length>0?ze(U.__webglFramebuffer[0],H):ze(U.__webglFramebuffer,H)}else if(se){U.__webglDepthbuffer=[];for(let de=0;de<6;de++)if(t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[de]),U.__webglDepthbuffer[de]===void 0)U.__webglDepthbuffer[de]=n.createRenderbuffer(),lt(U.__webglDepthbuffer[de],H,!1);else{const ve=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=U.__webglDepthbuffer[de];n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ve,n.RENDERBUFFER,pe)}}else{const de=H.texture.mipmaps;if(de&&de.length>0?t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer===void 0)U.__webglDepthbuffer=n.createRenderbuffer(),lt(U.__webglDepthbuffer,H,!1);else{const ve=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=U.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ve,n.RENDERBUFFER,pe)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ft(H,U,se){const de=r.get(H);U!==void 0&&He(de.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),se!==void 0&&Je(H)}function Ve(H){const U=H.texture,se=r.get(H),de=r.get(U);H.addEventListener("dispose",P);const ve=H.textures,pe=H.isWebGLCubeRenderTarget===!0,Ze=ve.length>1;if(Ze||(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=U.version,o.memory.textures++),pe){se.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)if(U.mipmaps&&U.mipmaps.length>0){se.__webglFramebuffer[Fe]=[];for(let tt=0;tt<U.mipmaps.length;tt++)se.__webglFramebuffer[Fe][tt]=n.createFramebuffer()}else se.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(U.mipmaps&&U.mipmaps.length>0){se.__webglFramebuffer=[];for(let Fe=0;Fe<U.mipmaps.length;Fe++)se.__webglFramebuffer[Fe]=n.createFramebuffer()}else se.__webglFramebuffer=n.createFramebuffer();if(Ze)for(let Fe=0,tt=ve.length;Fe<tt;Fe++){const nt=r.get(ve[Fe]);nt.__webglTexture===void 0&&(nt.__webglTexture=n.createTexture(),o.memory.textures++)}if(H.samples>0&&De(H)===!1){se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Fe=0;Fe<ve.length;Fe++){const tt=ve[Fe];se.__webglColorRenderbuffer[Fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,se.__webglColorRenderbuffer[Fe]);const nt=s.convert(tt.format,tt.colorSpace),Ce=s.convert(tt.type),Ye=S(tt.internalFormat,nt,Ce,tt.colorSpace,H.isXRRenderTarget===!0),ct=ge(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,Ye,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,se.__webglColorRenderbuffer[Fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),lt(se.__webglDepthRenderbuffer,H,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(pe){t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture),oe(n.TEXTURE_CUBE_MAP,U);for(let Fe=0;Fe<6;Fe++)if(U.mipmaps&&U.mipmaps.length>0)for(let tt=0;tt<U.mipmaps.length;tt++)He(se.__webglFramebuffer[Fe][tt],H,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,tt);else He(se.__webglFramebuffer[Fe],H,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0);_(U)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ze){for(let Fe=0,tt=ve.length;Fe<tt;Fe++){const nt=ve[Fe],Ce=r.get(nt);t.bindTexture(n.TEXTURE_2D,Ce.__webglTexture),oe(n.TEXTURE_2D,nt),He(se.__webglFramebuffer,H,nt,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,0),_(nt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Fe=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(Fe=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Fe,de.__webglTexture),oe(Fe,U),U.mipmaps&&U.mipmaps.length>0)for(let tt=0;tt<U.mipmaps.length;tt++)He(se.__webglFramebuffer[tt],H,U,n.COLOR_ATTACHMENT0,Fe,tt);else He(se.__webglFramebuffer,H,U,n.COLOR_ATTACHMENT0,Fe,0);_(U)&&g(Fe),t.unbindTexture()}H.depthBuffer&&Je(H)}function B(H){const U=H.textures;for(let se=0,de=U.length;se<de;se++){const ve=U[se];if(_(ve)){const pe=w(H),Ze=r.get(ve).__webglTexture;t.bindTexture(pe,Ze),g(pe),t.unbindTexture()}}}const Ne=[],Ee=[];function Ie(H){if(H.samples>0){if(De(H)===!1){const U=H.textures,se=H.width,de=H.height;let ve=n.COLOR_BUFFER_BIT;const pe=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=r.get(H),Fe=U.length>1;if(Fe)for(let nt=0;nt<U.length;nt++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer);const tt=H.texture.mipmaps;tt&&tt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let nt=0;nt<U.length;nt++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(ve|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(ve|=n.STENCIL_BUFFER_BIT)),Fe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[nt]);const Ce=r.get(U[nt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ce,0)}n.blitFramebuffer(0,0,se,de,0,0,se,de,ve,n.NEAREST),l===!0&&(Ne.length=0,Ee.length=0,Ne.push(n.COLOR_ATTACHMENT0+nt),H.depthBuffer&&H.resolveDepthBuffer===!1&&(Ne.push(pe),Ee.push(pe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ee)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ne))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Fe)for(let nt=0;nt<U.length;nt++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[nt]);const Ce=r.get(U[nt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,Ce,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(H.depthBuffer&&H.resolveDepthBuffer===!1&&l){const U=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[U])}}}function ge(H){return Math.min(i.maxSamples,H.samples)}function De(H){const U=r.get(H);return H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function Ae(H){const U=o.render.frame;h.get(H)!==U&&(h.set(H,U),H.update())}function qe(H,U){const se=H.colorSpace,de=H.format,ve=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||se!==oc&&se!==wo&&(Wt.getTransfer(se)===tn?(de!==Ar||ve!==Ki)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),U}function vt(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(u.width=H.naturalWidth||H.width,u.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(u.width=H.displayWidth,u.height=H.displayHeight):(u.width=H.width,u.height=H.height),u}this.allocateTextureUnit=W,this.resetTextureUnits=F,this.setTexture2D=Z,this.setTexture2DArray=K,this.setTexture3D=Q,this.setTextureCube=D,this.rebindTextures=ft,this.setupRenderTarget=Ve,this.updateRenderTargetMipmap=B,this.updateMultisampleRenderTarget=Ie,this.setupDepthRenderbuffer=Je,this.setupFrameBufferTexture=He,this.useMultisampledRTT=De}function fD(n,e){function t(r,i=wo){let s;const o=Wt.getTransfer(i);if(r===Ki)return n.UNSIGNED_BYTE;if(r===ey)return n.UNSIGNED_SHORT_4_4_4_4;if(r===ty)return n.UNSIGNED_SHORT_5_5_5_1;if(r===Hb)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===Bb)return n.BYTE;if(r===jb)return n.SHORT;if(r===Qu)return n.UNSIGNED_SHORT;if(r===Qv)return n.INT;if(r===Uo)return n.UNSIGNED_INT;if(r===ii)return n.FLOAT;if(r===_d)return n.HALF_FLOAT;if(r===Vb)return n.ALPHA;if(r===Gb)return n.RGB;if(r===Ar)return n.RGBA;if(r===td)return n.DEPTH_COMPONENT;if(r===nd)return n.DEPTH_STENCIL;if(r===ny)return n.RED;if(r===Xf)return n.RED_INTEGER;if(r===Wb)return n.RG;if(r===ry)return n.RG_INTEGER;if(r===iy)return n.RGBA_INTEGER;if(r===Oh||r===Uh||r===Fh||r===zh)if(o===tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Oh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Uh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Fh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===zh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Oh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Uh)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Fh)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===zh)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===N0||r===L0||r===k0||r===D0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===N0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===L0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===k0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===D0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===O0||r===U0||r===F0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===O0||r===U0)return o===tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===F0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===z0||r===B0||r===j0||r===H0||r===V0||r===G0||r===W0||r===$0||r===X0||r===q0||r===Y0||r===K0||r===J0||r===Z0)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===z0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===B0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===j0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===H0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===V0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===G0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===W0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===$0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===X0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===q0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Y0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===K0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===J0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Z0)return o===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Bh||r===Q0||r===ev)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Bh)return o===tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Q0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===ev)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===$b||r===tv||r===nv||r===rv)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Bh)return s.COMPRESSED_RED_RGTC1_EXT;if(r===tv)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===nv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===rv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===ed?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const uY=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,dY=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hY{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Pn,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==r.depthNear||t.depthFar!==r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new ws({vertexShader:uY,fragmentShader:dY,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new jn(new Sd(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class fY extends Ys{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,f=null,p=null,m=null,v=null;const x=new hY,_=t.getContextAttributes();let g=null,w=null;const S=[],E=[],R=new we;let A=null;const P=new Sn;P.viewport=new Xt;const k=new Sn;k.viewport=new Xt;const N=[P,k],C=new nD;let O=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let xe=S[ie];return xe===void 0&&(xe=new Bg,S[ie]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(ie){let xe=S[ie];return xe===void 0&&(xe=new Bg,S[ie]=xe),xe.getGripSpace()},this.getHand=function(ie){let xe=S[ie];return xe===void 0&&(xe=new Bg,S[ie]=xe),xe.getHandSpace()};function W(ie){const xe=E.indexOf(ie.inputSource);if(xe===-1)return;const Me=S[xe];Me!==void 0&&(Me.update(ie.inputSource,ie.frame,u||o),Me.dispatchEvent({type:ie.type,data:ie.inputSource}))}function q(){i.removeEventListener("select",W),i.removeEventListener("selectstart",W),i.removeEventListener("selectend",W),i.removeEventListener("squeeze",W),i.removeEventListener("squeezestart",W),i.removeEventListener("squeezeend",W),i.removeEventListener("end",q),i.removeEventListener("inputsourceschange",Z);for(let ie=0;ie<S.length;ie++){const xe=E[ie];xe!==null&&(E[ie]=null,S[ie].disconnect(xe))}O=null,F=null,x.reset(),e.setRenderTarget(g),m=null,p=null,f=null,i=null,w=null,ye.stop(),r.isPresenting=!1,e.setPixelRatio(A),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ie){u=ie},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(ie){if(i=ie,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",W),i.addEventListener("selectstart",W),i.addEventListener("selectend",W),i.addEventListener("squeeze",W),i.addEventListener("squeezestart",W),i.addEventListener("squeezeend",W),i.addEventListener("end",q),i.addEventListener("inputsourceschange",Z),_.xrCompatible!==!0&&await t.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(R),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Me=null,Re=null,He=null;_.depth&&(He=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Me=_.stencil?nd:td,Re=_.stencil?ed:Uo);const lt={colorFormat:t.RGBA8,depthFormat:He,scaleFactor:s};f=new XRWebGLBinding(i,t),p=f.createProjectionLayer(lt),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),w=new Xs(p.textureWidth,p.textureHeight,{format:Ar,type:Ki,depthTexture:new rM(p.textureWidth,p.textureHeight,Re,void 0,void 0,void 0,void 0,void 0,void 0,Me),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{const Me={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,Me),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),w=new Xs(m.framebufferWidth,m.framebufferHeight,{format:Ar,type:Ki,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),ye.setContext(i),ye.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Z(ie){for(let xe=0;xe<ie.removed.length;xe++){const Me=ie.removed[xe],Re=E.indexOf(Me);Re>=0&&(E[Re]=null,S[Re].disconnect(Me))}for(let xe=0;xe<ie.added.length;xe++){const Me=ie.added[xe];let Re=E.indexOf(Me);if(Re===-1){for(let lt=0;lt<S.length;lt++)if(lt>=E.length){E.push(Me),Re=lt;break}else if(E[lt]===null){E[lt]=Me,Re=lt;break}if(Re===-1)break}const He=S[Re];He&&He.connect(Me)}}const K=new j,Q=new j;function D(ie,xe,Me){K.setFromMatrixPosition(xe.matrixWorld),Q.setFromMatrixPosition(Me.matrixWorld);const Re=K.distanceTo(Q),He=xe.projectionMatrix.elements,lt=Me.projectionMatrix.elements,ze=He[14]/(He[10]-1),Je=He[14]/(He[10]+1),ft=(He[9]+1)/He[5],Ve=(He[9]-1)/He[5],B=(He[8]-1)/He[0],Ne=(lt[8]+1)/lt[0],Ee=ze*B,Ie=ze*Ne,ge=Re/(-B+Ne),De=ge*-B;if(xe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(De),ie.translateZ(ge),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),He[10]===-1)ie.projectionMatrix.copy(xe.projectionMatrix),ie.projectionMatrixInverse.copy(xe.projectionMatrixInverse);else{const Ae=ze+ge,qe=Je+ge,vt=Ee-De,H=Ie+(Re-De),U=ft*Je/qe*Ae,se=Ve*Je/qe*Ae;ie.projectionMatrix.makePerspective(vt,H,U,se,Ae,qe),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function V(ie,xe){xe===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(xe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(i===null)return;let xe=ie.near,Me=ie.far;x.texture!==null&&(x.depthNear>0&&(xe=x.depthNear),x.depthFar>0&&(Me=x.depthFar)),C.near=k.near=P.near=xe,C.far=k.far=P.far=Me,(O!==C.near||F!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),O=C.near,F=C.far),P.layers.mask=ie.layers.mask|2,k.layers.mask=ie.layers.mask|4,C.layers.mask=P.layers.mask|k.layers.mask;const Re=ie.parent,He=C.cameras;V(C,Re);for(let lt=0;lt<He.length;lt++)V(He[lt],Re);He.length===2?D(C,P,k):C.projectionMatrix.copy(P.projectionMatrix),X(ie,C,Re)};function X(ie,xe,Me){Me===null?ie.matrix.copy(xe.matrixWorld):(ie.matrix.copy(Me.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(xe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(xe.projectionMatrix),ie.projectionMatrixInverse.copy(xe.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=rd*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ie){l=ie,p!==null&&(p.fixedFoveation=ie),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ie)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(C)};let J=null;function oe(ie,xe){if(h=xe.getViewerPose(u||o),v=xe,h!==null){const Me=h.views;m!==null&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));let Re=!1;Me.length!==C.cameras.length&&(C.cameras.length=0,Re=!0);for(let ze=0;ze<Me.length;ze++){const Je=Me[ze];let ft=null;if(m!==null)ft=m.getViewport(Je);else{const B=f.getViewSubImage(p,Je);ft=B.viewport,ze===0&&(e.setRenderTargetTextures(w,B.colorTexture,B.depthStencilTexture),e.setRenderTarget(w))}let Ve=N[ze];Ve===void 0&&(Ve=new Sn,Ve.layers.enable(ze),Ve.viewport=new Xt,N[ze]=Ve),Ve.matrix.fromArray(Je.transform.matrix),Ve.matrix.decompose(Ve.position,Ve.quaternion,Ve.scale),Ve.projectionMatrix.fromArray(Je.projectionMatrix),Ve.projectionMatrixInverse.copy(Ve.projectionMatrix).invert(),Ve.viewport.set(ft.x,ft.y,ft.width,ft.height),ze===0&&(C.matrix.copy(Ve.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Re===!0&&C.cameras.push(Ve)}const He=i.enabledFeatures;if(He&&He.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&f){const ze=f.getDepthInformation(Me[0]);ze&&ze.isValid&&ze.texture&&x.init(e,ze,i.renderState)}}for(let Me=0;Me<S.length;Me++){const Re=E[Me],He=S[Me];Re!==null&&He!==void 0&&He.update(Re,xe,u||o)}J&&J(ie,xe),xe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:xe}),v=null}const ye=new lD;ye.setAnimationLoop(oe),this.setAnimationLoop=function(ie){J=ie},this.dispose=function(){}}}const El=new Ti,pY=new wt;function mY(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function r(_,g){g.color.getRGB(_.fogColor.value,sk(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function i(_,g,w,S,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),f(_,g)):g.isMeshPhongMaterial?(s(_,g),h(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,E)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),x(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,w,S):g.isSpriteMaterial?u(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===jr&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===jr&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const w=e.get(g),S=w.envMap,E=w.envMapRotation;S&&(_.envMap.value=S,El.copy(E),El.x*=-1,El.y*=-1,El.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(El.y*=-1,El.z*=-1),_.envMapRotation.value.setFromMatrix4(pY.makeRotationFromEuler(El)),_.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap&&(_.lightMap.value=g.lightMap,_.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,_.lightMapTransform)),g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,w,S){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*w,_.scale.value=S*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function u(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function h(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function f(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),g.envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,w){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===jr&&_.clearcoatNormalScale.value.negate())),g.dispersion>0&&(_.dispersion.value=g.dispersion),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=w.texture,_.transmissionSamplerSize.value.set(w.width,w.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function x(_,g){const w=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(w.matrixWorld),_.nearDistance.value=w.shadow.camera.near,_.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function gY(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(w,S){const E=S.program;r.uniformBlockBinding(w,E)}function u(w,S){let E=i[w.id];E===void 0&&(v(w),E=h(w),i[w.id]=E,w.addEventListener("dispose",_));const R=S.program;r.updateUBOMapping(w,R);const A=e.render.frame;s[w.id]!==A&&(p(w),s[w.id]=A)}function h(w){const S=f();w.__bindingPointIndex=S;const E=n.createBuffer(),R=w.__size,A=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,R,A),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,E),E}function f(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const S=i[w.id],E=w.uniforms,R=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let A=0,P=E.length;A<P;A++){const k=Array.isArray(E[A])?E[A]:[E[A]];for(let N=0,C=k.length;N<C;N++){const O=k[N];if(m(O,A,N,R)===!0){const F=O.__offset,W=Array.isArray(O.value)?O.value:[O.value];let q=0;for(let Z=0;Z<W.length;Z++){const K=W[Z],Q=x(K);typeof K=="number"||typeof K=="boolean"?(O.__data[0]=K,n.bufferSubData(n.UNIFORM_BUFFER,F+q,O.__data)):K.isMatrix3?(O.__data[0]=K.elements[0],O.__data[1]=K.elements[1],O.__data[2]=K.elements[2],O.__data[3]=0,O.__data[4]=K.elements[3],O.__data[5]=K.elements[4],O.__data[6]=K.elements[5],O.__data[7]=0,O.__data[8]=K.elements[6],O.__data[9]=K.elements[7],O.__data[10]=K.elements[8],O.__data[11]=0):(K.toArray(O.__data,q),q+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,F,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(w,S,E,R){const A=w.value,P=S+"_"+E;if(R[P]===void 0)return typeof A=="number"||typeof A=="boolean"?R[P]=A:R[P]=A.clone(),!0;{const k=R[P];if(typeof A=="number"||typeof A=="boolean"){if(k!==A)return R[P]=A,!0}else if(k.equals(A)===!1)return k.copy(A),!0}return!1}function v(w){const S=w.uniforms;let E=0;const R=16;for(let P=0,k=S.length;P<k;P++){const N=Array.isArray(S[P])?S[P]:[S[P]];for(let C=0,O=N.length;C<O;C++){const F=N[C],W=Array.isArray(F.value)?F.value:[F.value];for(let q=0,Z=W.length;q<Z;q++){const K=W[q],Q=x(K),D=E%R,V=D%Q.boundary,X=D+V;E+=V,X!==0&&R-X<Q.storage&&(E+=R-X),F.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=E,E+=Q.storage}}}const A=E%R;return A>0&&(E+=R-A),w.__size=E,w.__cache={},this}function x(w){const S={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function _(w){const S=w.target;S.removeEventListener("dispose",_);const E=o.indexOf(S.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},s={}}return{bind:l,update:u,dispose:g}}class pD{constructor(e={}){const{canvas:t=nk(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=o;const v=new Uint32Array(4),x=new Int32Array(4);let _=null,g=null;const w=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Vs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const E=this;let R=!1;this._outputColorSpace=Qr;let A=0,P=0,k=null,N=-1,C=null;const O=new Xt,F=new Xt;let W=null;const q=new et(0);let Z=0,K=t.width,Q=t.height,D=1,V=null,X=null;const J=new Xt(0,0,K,Q),oe=new Xt(0,0,K,Q);let ye=!1;const ie=new wd;let xe=!1,Me=!1;const Re=new wt,He=new wt,lt=new j,ze=new Xt,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ft=!1;function Ve(){return k===null?D:1}let B=r;function Ne(z,re){return t.getContext(z,re)}try{const z={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Kv}`),t.addEventListener("webglcontextlost",Ue,!1),t.addEventListener("webglcontextrestored",Pe,!1),t.addEventListener("webglcontextcreationerror",be,!1),B===null){const re="webgl2";if(B=Ne(re,z),B===null)throw Ne(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let Ee,Ie,ge,De,Ae,qe,vt,H,U,se,de,ve,pe,Ze,Fe,tt,nt,Ce,Ye,ct,Y,ae,fe,$;function _e(){Ee=new CX(B),Ee.init(),ae=new fD(B,Ee),Ie=new wX(B,Ee,e,ae),ge=new lY(B,Ee),Ie.reverseDepthBuffer&&p&&ge.buffers.depth.setReversed(!0),De=new IX(B),Ae=new Yq,qe=new cY(B,Ee,ge,Ae,Ie,ae,De),vt=new bX(E),H=new AX(E),U=new U9(B),fe=new xX(B,U),se=new RX(B,U,De,fe),de=new LX(B,se,U,De),Ye=new NX(B,Ie,qe),tt=new SX(Ae),ve=new qq(E,vt,H,Ee,Ie,fe,tt),pe=new mY(E,Ae),Ze=new Jq,Fe=new rY(Ee),Ce=new yX(E,vt,H,ge,de,m,l),nt=new oY(E,de,Ie),$=new gY(B,De,Ie,ge),ct=new _X(B,Ee,De),Y=new PX(B,Ee,De),De.programs=ve.programs,E.capabilities=Ie,E.extensions=Ee,E.properties=Ae,E.renderLists=Ze,E.shadowMap=nt,E.state=ge,E.info=De}_e();const Se=new fY(E,B);this.xr=Se,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){const z=Ee.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=Ee.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(z){z!==void 0&&(D=z,this.setSize(K,Q,!1))},this.getSize=function(z){return z.set(K,Q)},this.setSize=function(z,re,ce=!0){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=z,Q=re,t.width=Math.floor(z*D),t.height=Math.floor(re*D),ce===!0&&(t.style.width=z+"px",t.style.height=re+"px"),this.setViewport(0,0,z,re)},this.getDrawingBufferSize=function(z){return z.set(K*D,Q*D).floor()},this.setDrawingBufferSize=function(z,re,ce){K=z,Q=re,D=ce,t.width=Math.floor(z*ce),t.height=Math.floor(re*ce),this.setViewport(0,0,z,re)},this.getCurrentViewport=function(z){return z.copy(O)},this.getViewport=function(z){return z.copy(J)},this.setViewport=function(z,re,ce,ue){z.isVector4?J.set(z.x,z.y,z.z,z.w):J.set(z,re,ce,ue),ge.viewport(O.copy(J).multiplyScalar(D).round())},this.getScissor=function(z){return z.copy(oe)},this.setScissor=function(z,re,ce,ue){z.isVector4?oe.set(z.x,z.y,z.z,z.w):oe.set(z,re,ce,ue),ge.scissor(F.copy(oe).multiplyScalar(D).round())},this.getScissorTest=function(){return ye},this.setScissorTest=function(z){ge.setScissorTest(ye=z)},this.setOpaqueSort=function(z){V=z},this.setTransparentSort=function(z){X=z},this.getClearColor=function(z){return z.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor(...arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha(...arguments)},this.clear=function(z=!0,re=!0,ce=!0){let ue=0;if(z){let ne=!1;if(k!==null){const Le=k.texture.format;ne=Le===iy||Le===ry||Le===Xf}if(ne){const Le=k.texture.type,Ge=Le===Ki||Le===Uo||Le===Qu||Le===ed||Le===ey||Le===ty,ot=Ce.getClearColor(),Qe=Ce.getClearAlpha(),gt=ot.r,mt=ot.g,je=ot.b;Ge?(v[0]=gt,v[1]=mt,v[2]=je,v[3]=Qe,B.clearBufferuiv(B.COLOR,0,v)):(x[0]=gt,x[1]=mt,x[2]=je,x[3]=Qe,B.clearBufferiv(B.COLOR,0,x))}else ue|=B.COLOR_BUFFER_BIT}re&&(ue|=B.DEPTH_BUFFER_BIT),ce&&(ue|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ue,!1),t.removeEventListener("webglcontextrestored",Pe,!1),t.removeEventListener("webglcontextcreationerror",be,!1),Ce.dispose(),Ze.dispose(),Fe.dispose(),Ae.dispose(),vt.dispose(),H.dispose(),de.dispose(),fe.dispose(),$.dispose(),ve.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",ip),Se.removeEventListener("sessionend",sp),bs.stop()};function Ue(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function Pe(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const z=De.autoReset,re=nt.enabled,ce=nt.autoUpdate,ue=nt.needsUpdate,ne=nt.type;_e(),De.autoReset=z,nt.enabled=re,nt.autoUpdate=ce,nt.needsUpdate=ue,nt.type=ne}function be(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function $e(z){const re=z.target;re.removeEventListener("dispose",$e),pt(re)}function pt(z){Gt(z),Ae.remove(z)}function Gt(z){const re=Ae.get(z).programs;re!==void 0&&(re.forEach(function(ce){ve.releaseProgram(ce)}),z.isShaderMaterial&&ve.releaseShaderCache(z))}this.renderBufferDirect=function(z,re,ce,ue,ne,Le){re===null&&(re=Je);const Ge=ne.isMesh&&ne.matrixWorld.determinant()<0,ot=Py(z,re,ce,ue,ne);ge.setMaterial(ue,Ge);let Qe=ce.index,gt=1;if(ue.wireframe===!0){if(Qe=se.getWireframeAttribute(ce),Qe===void 0)return;gt=2}const mt=ce.drawRange,je=ce.attributes.position;let at=mt.start*gt,Ft=(mt.start+mt.count)*gt;Le!==null&&(at=Math.max(at,Le.start*gt),Ft=Math.min(Ft,(Le.start+Le.count)*gt)),Qe!==null?(at=Math.max(at,0),Ft=Math.min(Ft,Qe.count)):je!=null&&(at=Math.max(at,0),Ft=Math.min(Ft,je.count));const kt=Ft-at;if(kt<0||kt===1/0)return;fe.setup(ne,ue,ot,ce,Qe);let It,Vt=ct;if(Qe!==null&&(It=U.get(Qe),Vt=Y,Vt.setIndex(It)),ne.isMesh)ue.wireframe===!0?(ge.setLineWidth(ue.wireframeLinewidth*Ve()),Vt.setMode(B.LINES)):Vt.setMode(B.TRIANGLES);else if(ne.isLine){let ut=ue.linewidth;ut===void 0&&(ut=1),ge.setLineWidth(ut*Ve()),ne.isLineSegments?Vt.setMode(B.LINES):ne.isLineLoop?Vt.setMode(B.LINE_LOOP):Vt.setMode(B.LINE_STRIP)}else ne.isPoints?Vt.setMode(B.POINTS):ne.isSprite&&Vt.setMode(B.TRIANGLES);if(ne.isBatchedMesh)if(ne._multiDrawInstances!==null)Nu("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Vt.renderMultiDrawInstances(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount,ne._multiDrawInstances);else if(Ee.get("WEBGL_multi_draw"))Vt.renderMultiDraw(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount);else{const ut=ne._multiDrawStarts,Ut=ne._multiDrawCounts,zt=ne._multiDrawCount,fr=Qe?U.get(Qe).bytesPerElement:1,Js=Ae.get(ue).currentProgram.getUniforms();for(let Kn=0;Kn<zt;Kn++)Js.setValue(B,"_gl_DrawID",Kn),Vt.render(ut[Kn]/fr,Ut[Kn])}else if(ne.isInstancedMesh)Vt.renderInstances(at,kt,ne.count);else if(ce.isInstancedBufferGeometry){const ut=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,Ut=Math.min(ce.instanceCount,ut);Vt.renderInstances(at,kt,Ut)}else Vt.render(at,kt)};function Ot(z,re,ce){z.transparent===!0&&z.side===ji&&z.forceSinglePass===!1?(z.side=jr,z.needsUpdate=!0,yc(z,re,ce),z.side=Do,z.needsUpdate=!0,yc(z,re,ce),z.side=ji):yc(z,re,ce)}this.compile=function(z,re,ce=null){ce===null&&(ce=z),g=Fe.get(ce),g.init(re),S.push(g),ce.traverseVisible(function(ne){ne.isLight&&ne.layers.test(re.layers)&&(g.pushLight(ne),ne.castShadow&&g.pushShadow(ne))}),z!==ce&&z.traverseVisible(function(ne){ne.isLight&&ne.layers.test(re.layers)&&(g.pushLight(ne),ne.castShadow&&g.pushShadow(ne))}),g.setupLights();const ue=new Set;return z.traverse(function(ne){if(!(ne.isMesh||ne.isPoints||ne.isLine||ne.isSprite))return;const Le=ne.material;if(Le)if(Array.isArray(Le))for(let Ge=0;Ge<Le.length;Ge++){const ot=Le[Ge];Ot(ot,ce,ne),ue.add(ot)}else Ot(Le,ce,ne),ue.add(Le)}),g=S.pop(),ue},this.compileAsync=function(z,re,ce=null){const ue=this.compile(z,re,ce);return new Promise(ne=>{function Le(){if(ue.forEach(function(Ge){Ae.get(Ge).currentProgram.isReady()&&ue.delete(Ge)}),ue.size===0){ne(z);return}setTimeout(Le,10)}Ee.get("KHR_parallel_shader_compile")!==null?Le():setTimeout(Le,10)})};let On=null;function hr(z){On&&On(z)}function ip(){bs.stop()}function sp(){bs.start()}const bs=new lD;bs.setAnimationLoop(hr),typeof self<"u"&&bs.setContext(self),this.setAnimationLoop=function(z){On=z,Se.setAnimationLoop(z),z===null?bs.stop():bs.start()},Se.addEventListener("sessionstart",ip),Se.addEventListener("sessionend",sp),this.render=function(z,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(re),re=Se.getCamera()),z.isScene===!0&&z.onBeforeRender(E,z,re,k),g=Fe.get(z,S.length),g.init(re),S.push(g),He.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),ie.setFromProjectionMatrix(He),Me=this.localClippingEnabled,xe=tt.init(this.clippingPlanes,Me),_=Ze.get(z,w.length),_.init(),w.push(_),Se.enabled===!0&&Se.isPresenting===!0){const Le=E.xr.getDepthSensingMesh();Le!==null&&tl(Le,re,-1/0,E.sortObjects)}tl(z,re,0,E.sortObjects),_.finish(),E.sortObjects===!0&&_.sort(V,X),ft=Se.enabled===!1||Se.isPresenting===!1||Se.hasDepthSensing()===!1,ft&&Ce.addToRenderList(_,z),this.info.render.frame++,xe===!0&&tt.beginShadows();const ce=g.state.shadowsArray;nt.render(ce,z,re),xe===!0&&tt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ue=_.opaque,ne=_.transmissive;if(g.setupLights(),re.isArrayCamera){const Le=re.cameras;if(ne.length>0)for(let Ge=0,ot=Le.length;Ge<ot;Ge++){const Qe=Le[Ge];Bo(ue,ne,z,Qe)}ft&&Ce.render(z);for(let Ge=0,ot=Le.length;Ge<ot;Ge++){const Qe=Le[Ge];op(_,z,Qe,Qe.viewport)}}else ne.length>0&&Bo(ue,ne,z,re),ft&&Ce.render(z),op(_,z,re);k!==null&&P===0&&(qe.updateMultisampleRenderTarget(k),qe.updateRenderTargetMipmap(k)),z.isScene===!0&&z.onAfterRender(E,z,re),fe.resetDefaultState(),N=-1,C=null,S.pop(),S.length>0?(g=S[S.length-1],xe===!0&&tt.setGlobalState(E.clippingPlanes,g.state.camera)):g=null,w.pop(),w.length>0?_=w[w.length-1]:_=null};function tl(z,re,ce,ue){if(z.visible===!1)return;if(z.layers.test(re.layers)){if(z.isGroup)ce=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(re);else if(z.isLight)g.pushLight(z),z.castShadow&&g.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||ie.intersectsSprite(z)){ue&&ze.setFromMatrixPosition(z.matrixWorld).applyMatrix4(He);const Ge=de.update(z),ot=z.material;ot.visible&&_.push(z,Ge,ot,ce,ze.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||ie.intersectsObject(z))){const Ge=de.update(z),ot=z.material;if(ue&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),ze.copy(z.boundingSphere.center)):(Ge.boundingSphere===null&&Ge.computeBoundingSphere(),ze.copy(Ge.boundingSphere.center)),ze.applyMatrix4(z.matrixWorld).applyMatrix4(He)),Array.isArray(ot)){const Qe=Ge.groups;for(let gt=0,mt=Qe.length;gt<mt;gt++){const je=Qe[gt],at=ot[je.materialIndex];at&&at.visible&&_.push(z,Ge,at,ce,ze.z,je)}}else ot.visible&&_.push(z,Ge,ot,ce,ze.z,null)}}const Le=z.children;for(let Ge=0,ot=Le.length;Ge<ot;Ge++)tl(Le[Ge],re,ce,ue)}function op(z,re,ce,ue){const ne=z.opaque,Le=z.transmissive,Ge=z.transparent;g.setupLightsView(ce),xe===!0&&tt.setGlobalState(E.clippingPlanes,ce),ue&&ge.viewport(O.copy(ue)),ne.length>0&&vc(ne,re,ce),Le.length>0&&vc(Le,re,ce),Ge.length>0&&vc(Ge,re,ce),ge.buffers.depth.setTest(!0),ge.buffers.depth.setMask(!0),ge.buffers.color.setMask(!0),ge.setPolygonOffset(!1)}function Bo(z,re,ce,ue){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[ue.id]===void 0&&(g.state.transmissionRenderTarget[ue.id]=new Xs(1,1,{generateMipmaps:!0,type:Ee.has("EXT_color_buffer_half_float")||Ee.has("EXT_color_buffer_float")?_d:Ki,minFilter:zs,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Wt.workingColorSpace}));const Le=g.state.transmissionRenderTarget[ue.id],Ge=ue.viewport||O;Le.setSize(Ge.z*E.transmissionResolutionScale,Ge.w*E.transmissionResolutionScale);const ot=E.getRenderTarget(),Qe=E.getActiveCubeFace(),gt=E.getActiveMipmapLevel();E.setRenderTarget(Le),E.getClearColor(q),Z=E.getClearAlpha(),Z<1&&E.setClearColor(16777215,.5),E.clear(),ft&&Ce.render(ce);const mt=E.toneMapping;E.toneMapping=Vs;const je=ue.viewport;if(ue.viewport!==void 0&&(ue.viewport=void 0),g.setupLightsView(ue),xe===!0&&tt.setGlobalState(E.clippingPlanes,ue),vc(z,ce,ue),qe.updateMultisampleRenderTarget(Le),qe.updateRenderTargetMipmap(Le),Ee.has("WEBGL_multisampled_render_to_texture")===!1){let at=!1;for(let Ft=0,kt=re.length;Ft<kt;Ft++){const It=re[Ft],Vt=It.object,ut=It.geometry,Ut=It.material,zt=It.group;if(Ut.side===ji&&Vt.layers.test(ue.layers)){const fr=Ut.side;Ut.side=jr,Ut.needsUpdate=!0,ap(Vt,ce,ue,ut,Ut,zt),Ut.side=fr,Ut.needsUpdate=!0,at=!0}}at===!0&&(qe.updateMultisampleRenderTarget(Le),qe.updateRenderTargetMipmap(Le))}E.setRenderTarget(ot,Qe,gt),E.setClearColor(q,Z),je!==void 0&&(ue.viewport=je),E.toneMapping=mt}function vc(z,re,ce){const ue=re.isScene===!0?re.overrideMaterial:null;for(let ne=0,Le=z.length;ne<Le;ne++){const Ge=z[ne],ot=Ge.object,Qe=Ge.geometry,gt=Ge.group;let mt=Ge.material;mt.allowOverride===!0&&ue!==null&&(mt=ue),ot.layers.test(ce.layers)&&ap(ot,re,ce,Qe,mt,gt)}}function ap(z,re,ce,ue,ne,Le){z.onBeforeRender(E,re,ce,ue,ne,Le),z.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),ne.onBeforeRender(E,re,ce,ue,z,Le),ne.transparent===!0&&ne.side===ji&&ne.forceSinglePass===!1?(ne.side=jr,ne.needsUpdate=!0,E.renderBufferDirect(ce,re,ue,ne,z,Le),ne.side=Do,ne.needsUpdate=!0,E.renderBufferDirect(ce,re,ue,ne,z,Le),ne.side=ji):E.renderBufferDirect(ce,re,ue,ne,z,Le),z.onAfterRender(E,re,ce,ue,ne,Le)}function yc(z,re,ce){re.isScene!==!0&&(re=Je);const ue=Ae.get(z),ne=g.state.lights,Le=g.state.shadowsArray,Ge=ne.state.version,ot=ve.getParameters(z,ne.state,Le,re,ce),Qe=ve.getProgramCacheKey(ot);let gt=ue.programs;ue.environment=z.isMeshStandardMaterial?re.environment:null,ue.fog=re.fog,ue.envMap=(z.isMeshStandardMaterial?H:vt).get(z.envMap||ue.environment),ue.envMapRotation=ue.environment!==null&&z.envMap===null?re.environmentRotation:z.envMapRotation,gt===void 0&&(z.addEventListener("dispose",$e),gt=new Map,ue.programs=gt);let mt=gt.get(Qe);if(mt!==void 0){if(ue.currentProgram===mt&&ue.lightsStateVersion===Ge)return cp(z,ot),mt}else ot.uniforms=ve.getUniforms(z),z.onBeforeCompile(ot,E),mt=ve.acquireProgram(ot,Qe),gt.set(Qe,mt),ue.uniforms=ot.uniforms;const je=ue.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(je.clippingPlanes=tt.uniform),cp(z,ot),ue.needsLights=up(z),ue.lightsStateVersion=Ge,ue.needsLights&&(je.ambientLightColor.value=ne.state.ambient,je.lightProbe.value=ne.state.probe,je.directionalLights.value=ne.state.directional,je.directionalLightShadows.value=ne.state.directionalShadow,je.spotLights.value=ne.state.spot,je.spotLightShadows.value=ne.state.spotShadow,je.rectAreaLights.value=ne.state.rectArea,je.ltc_1.value=ne.state.rectAreaLTC1,je.ltc_2.value=ne.state.rectAreaLTC2,je.pointLights.value=ne.state.point,je.pointLightShadows.value=ne.state.pointShadow,je.hemisphereLights.value=ne.state.hemi,je.directionalShadowMap.value=ne.state.directionalShadowMap,je.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,je.spotShadowMap.value=ne.state.spotShadowMap,je.spotLightMatrix.value=ne.state.spotLightMatrix,je.spotLightMap.value=ne.state.spotLightMap,je.pointShadowMap.value=ne.state.pointShadowMap,je.pointShadowMatrix.value=ne.state.pointShadowMatrix),ue.currentProgram=mt,ue.uniformsList=null,mt}function lp(z){if(z.uniformsList===null){const re=z.currentProgram.getUniforms();z.uniformsList=jg.seqWithValue(re.seq,z.uniforms)}return z.uniformsList}function cp(z,re){const ce=Ae.get(z);ce.outputColorSpace=re.outputColorSpace,ce.batching=re.batching,ce.batchingColor=re.batchingColor,ce.instancing=re.instancing,ce.instancingColor=re.instancingColor,ce.instancingMorph=re.instancingMorph,ce.skinning=re.skinning,ce.morphTargets=re.morphTargets,ce.morphNormals=re.morphNormals,ce.morphColors=re.morphColors,ce.morphTargetsCount=re.morphTargetsCount,ce.numClippingPlanes=re.numClippingPlanes,ce.numIntersection=re.numClipIntersection,ce.vertexAlphas=re.vertexAlphas,ce.vertexTangents=re.vertexTangents,ce.toneMapping=re.toneMapping}function Py(z,re,ce,ue,ne){re.isScene!==!0&&(re=Je),qe.resetTextureUnits();const Le=re.fog,Ge=ue.isMeshStandardMaterial?re.environment:null,ot=k===null?E.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:oc,Qe=(ue.isMeshStandardMaterial?H:vt).get(ue.envMap||Ge),gt=ue.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,mt=!!ce.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),je=!!ce.morphAttributes.position,at=!!ce.morphAttributes.normal,Ft=!!ce.morphAttributes.color;let kt=Vs;ue.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(kt=E.toneMapping);const It=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,Vt=It!==void 0?It.length:0,ut=Ae.get(ue),Ut=g.state.lights;if(xe===!0&&(Me===!0||z!==C)){const sr=z===C&&ue.id===N;tt.setState(ue,z,sr)}let zt=!1;ue.version===ut.__version?(ut.needsLights&&ut.lightsStateVersion!==Ut.state.version||ut.outputColorSpace!==ot||ne.isBatchedMesh&&ut.batching===!1||!ne.isBatchedMesh&&ut.batching===!0||ne.isBatchedMesh&&ut.batchingColor===!0&&ne.colorTexture===null||ne.isBatchedMesh&&ut.batchingColor===!1&&ne.colorTexture!==null||ne.isInstancedMesh&&ut.instancing===!1||!ne.isInstancedMesh&&ut.instancing===!0||ne.isSkinnedMesh&&ut.skinning===!1||!ne.isSkinnedMesh&&ut.skinning===!0||ne.isInstancedMesh&&ut.instancingColor===!0&&ne.instanceColor===null||ne.isInstancedMesh&&ut.instancingColor===!1&&ne.instanceColor!==null||ne.isInstancedMesh&&ut.instancingMorph===!0&&ne.morphTexture===null||ne.isInstancedMesh&&ut.instancingMorph===!1&&ne.morphTexture!==null||ut.envMap!==Qe||ue.fog===!0&&ut.fog!==Le||ut.numClippingPlanes!==void 0&&(ut.numClippingPlanes!==tt.numPlanes||ut.numIntersection!==tt.numIntersection)||ut.vertexAlphas!==gt||ut.vertexTangents!==mt||ut.morphTargets!==je||ut.morphNormals!==at||ut.morphColors!==Ft||ut.toneMapping!==kt||ut.morphTargetsCount!==Vt)&&(zt=!0):(zt=!0,ut.__version=ue.version);let fr=ut.currentProgram;zt===!0&&(fr=yc(ue,re,ne));let Js=!1,Kn=!1,jo=!1;const Ht=fr.getUniforms(),Wr=ut.uniforms;if(ge.useProgram(fr.program)&&(Js=!0,Kn=!0,jo=!0),ue.id!==N&&(N=ue.id,Kn=!0),Js||C!==z){ge.buffers.depth.getReversed()?(Re.copy(z.projectionMatrix),oG(Re),aG(Re),Ht.setValue(B,"projectionMatrix",Re)):Ht.setValue(B,"projectionMatrix",z.projectionMatrix),Ht.setValue(B,"viewMatrix",z.matrixWorldInverse);const Hn=Ht.map.cameraPosition;Hn!==void 0&&Hn.setValue(B,lt.setFromMatrixPosition(z.matrixWorld)),Ie.logarithmicDepthBuffer&&Ht.setValue(B,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&Ht.setValue(B,"isOrthographic",z.isOrthographicCamera===!0),C!==z&&(C=z,Kn=!0,jo=!0)}if(ne.isSkinnedMesh){Ht.setOptional(B,ne,"bindMatrix"),Ht.setOptional(B,ne,"bindMatrixInverse");const sr=ne.skeleton;sr&&(sr.boneTexture===null&&sr.computeBoneTexture(),Ht.setValue(B,"boneTexture",sr.boneTexture,qe))}ne.isBatchedMesh&&(Ht.setOptional(B,ne,"batchingTexture"),Ht.setValue(B,"batchingTexture",ne._matricesTexture,qe),Ht.setOptional(B,ne,"batchingIdTexture"),Ht.setValue(B,"batchingIdTexture",ne._indirectTexture,qe),Ht.setOptional(B,ne,"batchingColorTexture"),ne._colorsTexture!==null&&Ht.setValue(B,"batchingColorTexture",ne._colorsTexture,qe));const $r=ce.morphAttributes;if(($r.position!==void 0||$r.normal!==void 0||$r.color!==void 0)&&Ye.update(ne,ce,fr),(Kn||ut.receiveShadow!==ne.receiveShadow)&&(ut.receiveShadow=ne.receiveShadow,Ht.setValue(B,"receiveShadow",ne.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(Wr.envMap.value=Qe,Wr.flipEnvMap.value=Qe.isCubeTexture&&Qe.isRenderTargetTexture===!1?-1:1),ue.isMeshStandardMaterial&&ue.envMap===null&&re.environment!==null&&(Wr.envMapIntensity.value=re.environmentIntensity),Kn&&(Ht.setValue(B,"toneMappingExposure",E.toneMappingExposure),ut.needsLights&&Iy(Wr,jo),Le&&ue.fog===!0&&pe.refreshFogUniforms(Wr,Le),pe.refreshMaterialUniforms(Wr,ue,D,Q,g.state.transmissionRenderTarget[z.id]),jg.upload(B,lp(ut),Wr,qe)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(jg.upload(B,lp(ut),Wr,qe),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&Ht.setValue(B,"center",ne.center),Ht.setValue(B,"modelViewMatrix",ne.modelViewMatrix),Ht.setValue(B,"normalMatrix",ne.normalMatrix),Ht.setValue(B,"modelMatrix",ne.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const sr=ue.uniformsGroups;for(let Hn=0,Ho=sr.length;Hn<Ho;Hn++){const ci=sr[Hn];$.update(ci,fr),$.bind(ci,fr)}}return fr}function Iy(z,re){z.ambientLightColor.needsUpdate=re,z.lightProbe.needsUpdate=re,z.directionalLights.needsUpdate=re,z.directionalLightShadows.needsUpdate=re,z.pointLights.needsUpdate=re,z.pointLightShadows.needsUpdate=re,z.spotLights.needsUpdate=re,z.spotLightShadows.needsUpdate=re,z.rectAreaLights.needsUpdate=re,z.hemisphereLights.needsUpdate=re}function up(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(z,re,ce){const ue=Ae.get(z);ue.__autoAllocateDepthBuffer=z.resolveDepthBuffer===!1,ue.__autoAllocateDepthBuffer===!1&&(ue.__useRenderToTexture=!1),Ae.get(z.texture).__webglTexture=re,Ae.get(z.depthTexture).__webglTexture=ue.__autoAllocateDepthBuffer?void 0:ce,ue.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(z,re){const ce=Ae.get(z);ce.__webglFramebuffer=re,ce.__useDefaultFramebuffer=re===void 0};const Ny=B.createFramebuffer();this.setRenderTarget=function(z,re=0,ce=0){k=z,A=re,P=ce;let ue=!0,ne=null,Le=!1,Ge=!1;if(z){const Qe=Ae.get(z);if(Qe.__useDefaultFramebuffer!==void 0)ge.bindFramebuffer(B.FRAMEBUFFER,null),ue=!1;else if(Qe.__webglFramebuffer===void 0)qe.setupRenderTarget(z);else if(Qe.__hasExternalTextures)qe.rebindTextures(z,Ae.get(z.texture).__webglTexture,Ae.get(z.depthTexture).__webglTexture);else if(z.depthBuffer){const je=z.depthTexture;if(Qe.__boundDepthTexture!==je){if(je!==null&&Ae.has(je)&&(z.width!==je.image.width||z.height!==je.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");qe.setupDepthRenderbuffer(z)}}const gt=z.texture;(gt.isData3DTexture||gt.isDataArrayTexture||gt.isCompressedArrayTexture)&&(Ge=!0);const mt=Ae.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(mt[re])?ne=mt[re][ce]:ne=mt[re],Le=!0):z.samples>0&&qe.useMultisampledRTT(z)===!1?ne=Ae.get(z).__webglMultisampledFramebuffer:Array.isArray(mt)?ne=mt[ce]:ne=mt,O.copy(z.viewport),F.copy(z.scissor),W=z.scissorTest}else O.copy(J).multiplyScalar(D).floor(),F.copy(oe).multiplyScalar(D).floor(),W=ye;if(ce!==0&&(ne=Ny),ge.bindFramebuffer(B.FRAMEBUFFER,ne)&&ue&&ge.drawBuffers(z,ne),ge.viewport(O),ge.scissor(F),ge.setScissorTest(W),Le){const Qe=Ae.get(z.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+re,Qe.__webglTexture,ce)}else if(Ge){const Qe=Ae.get(z.texture),gt=re;B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,Qe.__webglTexture,ce,gt)}else if(z!==null&&ce!==0){const Qe=Ae.get(z.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Qe.__webglTexture,ce)}N=-1},this.readRenderTargetPixels=function(z,re,ce,ue,ne,Le,Ge,ot=0){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Qe=Ae.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Ge!==void 0&&(Qe=Qe[Ge]),Qe){ge.bindFramebuffer(B.FRAMEBUFFER,Qe);try{const gt=z.textures[ot],mt=gt.format,je=gt.type;if(!Ie.textureFormatReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ie.textureTypeReadable(je)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=z.width-ue&&ce>=0&&ce<=z.height-ne&&(z.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+ot),B.readPixels(re,ce,ue,ne,ae.convert(mt),ae.convert(je),Le))}finally{const gt=k!==null?Ae.get(k).__webglFramebuffer:null;ge.bindFramebuffer(B.FRAMEBUFFER,gt)}}},this.readRenderTargetPixelsAsync=async function(z,re,ce,ue,ne,Le,Ge,ot=0){if(!(z&&z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Qe=Ae.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Ge!==void 0&&(Qe=Qe[Ge]),Qe)if(re>=0&&re<=z.width-ue&&ce>=0&&ce<=z.height-ne){ge.bindFramebuffer(B.FRAMEBUFFER,Qe);const gt=z.textures[ot],mt=gt.format,je=gt.type;if(!Ie.textureFormatReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ie.textureTypeReadable(je))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const at=B.createBuffer();B.bindBuffer(B.PIXEL_PACK_BUFFER,at),B.bufferData(B.PIXEL_PACK_BUFFER,Le.byteLength,B.STREAM_READ),z.textures.length>1&&B.readBuffer(B.COLOR_ATTACHMENT0+ot),B.readPixels(re,ce,ue,ne,ae.convert(mt),ae.convert(je),0);const Ft=k!==null?Ae.get(k).__webglFramebuffer:null;ge.bindFramebuffer(B.FRAMEBUFFER,Ft);const kt=B.fenceSync(B.SYNC_GPU_COMMANDS_COMPLETE,0);return B.flush(),await sG(B,kt,4),B.bindBuffer(B.PIXEL_PACK_BUFFER,at),B.getBufferSubData(B.PIXEL_PACK_BUFFER,0,Le),B.deleteBuffer(at),B.deleteSync(kt),Le}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(z,re=null,ce=0){const ue=Math.pow(2,-ce),ne=Math.floor(z.image.width*ue),Le=Math.floor(z.image.height*ue),Ge=re!==null?re.x:0,ot=re!==null?re.y:0;qe.setTexture2D(z,0),B.copyTexSubImage2D(B.TEXTURE_2D,ce,0,0,Ge,ot,ne,Le),ge.unbindTexture()};const Ly=B.createFramebuffer(),ky=B.createFramebuffer();this.copyTextureToTexture=function(z,re,ce=null,ue=null,ne=0,Le=null){Le===null&&(ne!==0?(Nu("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Le=ne,ne=0):Le=0);let Ge,ot,Qe,gt,mt,je,at,Ft,kt;const It=z.isCompressedTexture?z.mipmaps[Le]:z.image;if(ce!==null)Ge=ce.max.x-ce.min.x,ot=ce.max.y-ce.min.y,Qe=ce.isBox3?ce.max.z-ce.min.z:1,gt=ce.min.x,mt=ce.min.y,je=ce.isBox3?ce.min.z:0;else{const $r=Math.pow(2,-ne);Ge=Math.floor(It.width*$r),ot=Math.floor(It.height*$r),z.isDataArrayTexture?Qe=It.depth:z.isData3DTexture?Qe=Math.floor(It.depth*$r):Qe=1,gt=0,mt=0,je=0}ue!==null?(at=ue.x,Ft=ue.y,kt=ue.z):(at=0,Ft=0,kt=0);const Vt=ae.convert(re.format),ut=ae.convert(re.type);let Ut;re.isData3DTexture?(qe.setTexture3D(re,0),Ut=B.TEXTURE_3D):re.isDataArrayTexture||re.isCompressedArrayTexture?(qe.setTexture2DArray(re,0),Ut=B.TEXTURE_2D_ARRAY):(qe.setTexture2D(re,0),Ut=B.TEXTURE_2D),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,re.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,re.unpackAlignment);const zt=B.getParameter(B.UNPACK_ROW_LENGTH),fr=B.getParameter(B.UNPACK_IMAGE_HEIGHT),Js=B.getParameter(B.UNPACK_SKIP_PIXELS),Kn=B.getParameter(B.UNPACK_SKIP_ROWS),jo=B.getParameter(B.UNPACK_SKIP_IMAGES);B.pixelStorei(B.UNPACK_ROW_LENGTH,It.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,It.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,gt),B.pixelStorei(B.UNPACK_SKIP_ROWS,mt),B.pixelStorei(B.UNPACK_SKIP_IMAGES,je);const Ht=z.isDataArrayTexture||z.isData3DTexture,Wr=re.isDataArrayTexture||re.isData3DTexture;if(z.isDepthTexture){const $r=Ae.get(z),sr=Ae.get(re),Hn=Ae.get($r.__renderTarget),Ho=Ae.get(sr.__renderTarget);ge.bindFramebuffer(B.READ_FRAMEBUFFER,Hn.__webglFramebuffer),ge.bindFramebuffer(B.DRAW_FRAMEBUFFER,Ho.__webglFramebuffer);for(let ci=0;ci<Qe;ci++)Ht&&(B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Ae.get(z).__webglTexture,ne,je+ci),B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,Ae.get(re).__webglTexture,Le,kt+ci)),B.blitFramebuffer(gt,mt,Ge,ot,at,Ft,Ge,ot,B.DEPTH_BUFFER_BIT,B.NEAREST);ge.bindFramebuffer(B.READ_FRAMEBUFFER,null),ge.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else if(ne!==0||z.isRenderTargetTexture||Ae.has(z)){const $r=Ae.get(z),sr=Ae.get(re);ge.bindFramebuffer(B.READ_FRAMEBUFFER,Ly),ge.bindFramebuffer(B.DRAW_FRAMEBUFFER,ky);for(let Hn=0;Hn<Qe;Hn++)Ht?B.framebufferTextureLayer(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,$r.__webglTexture,ne,je+Hn):B.framebufferTexture2D(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,$r.__webglTexture,ne),Wr?B.framebufferTextureLayer(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,sr.__webglTexture,Le,kt+Hn):B.framebufferTexture2D(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,sr.__webglTexture,Le),ne!==0?B.blitFramebuffer(gt,mt,Ge,ot,at,Ft,Ge,ot,B.COLOR_BUFFER_BIT,B.NEAREST):Wr?B.copyTexSubImage3D(Ut,Le,at,Ft,kt+Hn,gt,mt,Ge,ot):B.copyTexSubImage2D(Ut,Le,at,Ft,gt,mt,Ge,ot);ge.bindFramebuffer(B.READ_FRAMEBUFFER,null),ge.bindFramebuffer(B.DRAW_FRAMEBUFFER,null)}else Wr?z.isDataTexture||z.isData3DTexture?B.texSubImage3D(Ut,Le,at,Ft,kt,Ge,ot,Qe,Vt,ut,It.data):re.isCompressedArrayTexture?B.compressedTexSubImage3D(Ut,Le,at,Ft,kt,Ge,ot,Qe,Vt,It.data):B.texSubImage3D(Ut,Le,at,Ft,kt,Ge,ot,Qe,Vt,ut,It):z.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,Le,at,Ft,Ge,ot,Vt,ut,It.data):z.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,Le,at,Ft,It.width,It.height,Vt,It.data):B.texSubImage2D(B.TEXTURE_2D,Le,at,Ft,Ge,ot,Vt,ut,It);B.pixelStorei(B.UNPACK_ROW_LENGTH,zt),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,fr),B.pixelStorei(B.UNPACK_SKIP_PIXELS,Js),B.pixelStorei(B.UNPACK_SKIP_ROWS,Kn),B.pixelStorei(B.UNPACK_SKIP_IMAGES,jo),Le===0&&re.generateMipmaps&&B.generateMipmap(Ut),ge.unbindTexture()},this.copyTextureToTexture3D=function(z,re,ce=null,ue=null,ne=0){return Nu('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(z,re,ce,ue,ne)},this.initRenderTarget=function(z){Ae.get(z).__webglFramebuffer===void 0&&qe.setupRenderTarget(z)},this.initTexture=function(z){z.isCubeTexture?qe.setTextureCube(z,0):z.isData3DTexture?qe.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?qe.setTexture2DArray(z,0):qe.setTexture2D(z,0),ge.unbindTexture()},this.resetState=function(){A=0,P=0,k=null,ge.reset(),fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Gi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Wt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Wt._getUnpackColorSpace()}}const vY=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Fb,AddEquation:va,AddOperation:kL,AdditiveAnimationBlendMode:Xb,AdditiveBlending:Y1,AgXToneMapping:zL,AlphaFormat:Vb,AlwaysCompare:ek,AlwaysDepth:T0,AlwaysStencilFunc:Q1,AmbientLight:Kk,AnimationAction:sD,AnimationClip:Lf,AnimationLoader:LW,AnimationMixer:a9,AnimationObjectGroup:s9,AnimationUtils:RW,ArcCurve:_k,ArrayCamera:nD,ArrowHelper:C9,AttachedBindMode:Z1,Audio:rD,AudioAnalyser:YW,AudioContext:yM,AudioListener:$W,AudioLoader:VW,AxesHelper:R9,BackSide:jr,BasicDepthPacking:WL,BasicShadowMap:pL,BatchedMesh:pk,Bone:tM,BooleanKeyframeTrack:pc,Box2:p9,Box3:Rr,Box3Helper:T9,BoxGeometry:fc,BoxHelper:E9,BufferAttribute:on,BufferGeometry:Ct,BufferGeometryLoader:tD,ByteType:Bb,Cache:Bs,Camera:qf,CameraHelper:M9,CanvasTexture:yk,CapsuleGeometry:py,CatmullRomCurve3:wk,CineonToneMapping:UL,CircleGeometry:my,ClampToEdgeWrapping:Vi,Clock:xM,Color:et,ColorKeyframeTrack:mM,ColorManagement:Wt,CompressedArrayTexture:JG,CompressedCubeTexture:ZG,CompressedTexture:fy,CompressedTextureLoader:kW,ConeGeometry:Jf,ConstantAlphaFactor:IL,ConstantColorFactor:RL,Controls:I9,CubeCamera:ak,CubeReflectionMapping:Oo,CubeRefractionMapping:Wa,CubeTexture:Yf,CubeTextureLoader:DW,CubeUVReflectionMapping:xd,CubicBezierCurve:sM,CubicBezierCurve3:Sk,CubicInterpolant:jk,CullFaceBack:q1,CullFaceFront:fL,CullFaceFrontBack:i8,CullFaceNone:hL,Curve:Ss,CurvePath:Mk,CustomBlending:mL,CustomToneMapping:FL,CylinderGeometry:Kf,Cylindrical:f9,Data3DTexture:ay,DataArrayTexture:oy,DataTexture:Gs,DataTextureLoader:OW,DataUtils:SG,DecrementStencilOp:y8,DecrementWrapStencilOp:_8,DefaultLoadingManager:Gk,DepthFormat:td,DepthStencilFormat:nd,DepthTexture:rM,DetachedBindMode:jL,DirectionalLight:Yk,DirectionalLightHelper:b9,DiscreteInterpolant:Hk,DodecahedronGeometry:gy,DoubleSide:ji,DstAlphaFactor:ML,DstColorFactor:TL,DynamicCopyUsage:D8,DynamicDrawUsage:R8,DynamicReadUsage:N8,EdgesGeometry:xk,EllipseCurve:vy,EqualCompare:KL,EqualDepth:C0,EqualStencilFunc:M8,EquirectangularReflectionMapping:yf,EquirectangularRefractionMapping:xf,Euler:Ti,EventDispatcher:Ys,ExtrudeGeometry:yy,FileLoader:Fo,Float16BufferAttribute:RG,Float32BufferAttribute:st,FloatType:ii,Fog:cy,FogExp2:ly,FramebufferTexture:KG,FrontSide:Do,Frustum:wd,FrustumArray:hy,GLBufferAttribute:h9,GLSL1:U8,GLSL3:eS,GreaterCompare:JL,GreaterDepth:P0,GreaterEqualCompare:QL,GreaterEqualDepth:R0,GreaterEqualStencilFunc:C8,GreaterStencilFunc:T8,GridHelper:w9,Group:_u,HalfFloatType:_d,HemisphereLight:$k,HemisphereLightHelper:_9,IcosahedronGeometry:xy,ImageBitmapLoader:HW,ImageLoader:kf,ImageUtils:rk,IncrementStencilOp:v8,IncrementWrapStencilOp:x8,InstancedBufferAttribute:sd,InstancedBufferGeometry:eD,InstancedInterleavedBuffer:d9,InstancedMesh:fk,Int16BufferAttribute:AG,Int32BufferAttribute:CG,Int8BufferAttribute:MG,IntType:Qv,InterleavedBuffer:uy,InterleavedBufferAttribute:ac,Interpolant:ep,InterpolateDiscrete:Sf,InterpolateLinear:iv,InterpolateSmooth:zg,InterpolationSamplingMode:B8,InterpolationSamplingType:z8,InvertStencilOp:w8,KeepStencilOp:Il,KeyframeTrack:Ji,LOD:dk,LatheGeometry:_y,Layers:Kl,LessCompare:YL,LessDepth:A0,LessEqualCompare:qb,LessEqualDepth:sc,LessEqualStencilFunc:E8,LessStencilFunc:b8,Light:el,LightProbe:Qk,Line:$a,Line3:m9,LineBasicMaterial:Gr,LineCurve:oM,LineCurve3:bk,LineDashedMaterial:Fk,LineLoop:mk,LineSegments:Ks,LinearFilter:$n,LinearInterpolant:pM,LinearMipMapLinearFilter:l8,LinearMipMapNearestFilter:a8,LinearMipmapLinearFilter:zs,LinearMipmapNearestFilter:Dh,LinearSRGBColorSpace:oc,LinearToneMapping:DL,LinearTransfer:Mf,Loader:li,LoaderUtils:sS,LoadingManager:gM,LoopOnce:HL,LoopPingPong:GL,LoopRepeat:VL,MOUSE:Rl,Material:Ir,MaterialLoader:Ay,MathUtils:rG,Matrix2:bM,Matrix3:Et,Matrix4:wt,MaxEquation:xL,Mesh:jn,MeshBasicMaterial:Za,MeshDepthMaterial:dM,MeshDistanceMaterial:hM,MeshLambertMaterial:Ok,MeshMatcapMaterial:Uk,MeshNormalMaterial:Dk,MeshPhongMaterial:Lk,MeshPhysicalMaterial:Nk,MeshStandardMaterial:uM,MeshToonMaterial:kk,MinEquation:yL,MirroredRepeatWrapping:wf,MixOperation:LL,MultiplyBlending:J1,MultiplyOperation:$f,NearestFilter:cr,NearestMipMapLinearFilter:o8,NearestMipMapNearestFilter:s8,NearestMipmapLinearFilter:yu,NearestMipmapNearestFilter:zb,NeutralToneMapping:BL,NeverCompare:qL,NeverDepth:E0,NeverStencilFunc:S8,NoBlending:To,NoColorSpace:wo,NoToneMapping:Vs,NormalAnimationBlendMode:sy,NormalBlending:ql,NotEqualCompare:ZL,NotEqualDepth:I0,NotEqualStencilFunc:A8,NumberKeyframeTrack:If,Object3D:Yt,ObjectLoader:BW,ObjectSpaceNormalMap:XL,OctahedronGeometry:Zf,OneFactor:wL,OneMinusConstantAlphaFactor:NL,OneMinusConstantColorFactor:PL,OneMinusDstAlphaFactor:EL,OneMinusDstColorFactor:AL,OneMinusSrcAlphaFactor:M0,OneMinusSrcColorFactor:bL,OrthographicCamera:Ws,PCFShadowMap:Jv,PCFSoftShadowMap:Iu,PMREMGenerator:cS,Path:lv,PerspectiveCamera:Sn,Plane:xo,PlaneGeometry:Sd,PlaneHelper:A9,PointLight:qk,PointLightHelper:y9,Points:gk,PointsMaterial:nM,PolarGridHelper:S9,PolyhedronGeometry:Qa,PositionalAudio:qW,PropertyBinding:$t,PropertyMixer:iD,QuadraticBezierCurve:aM,QuadraticBezierCurve3:lM,Quaternion:Cr,QuaternionKeyframeTrack:tp,QuaternionLinearInterpolant:Vk,RED_GREEN_RGTC2_Format:nv,RED_RGTC1_Format:$b,REVISION:Kv,RGBADepthPacking:$L,RGBAFormat:Ar,RGBAIntegerFormat:iy,RGBA_ASTC_10x10_Format:K0,RGBA_ASTC_10x5_Format:X0,RGBA_ASTC_10x6_Format:q0,RGBA_ASTC_10x8_Format:Y0,RGBA_ASTC_12x10_Format:J0,RGBA_ASTC_12x12_Format:Z0,RGBA_ASTC_4x4_Format:z0,RGBA_ASTC_5x4_Format:B0,RGBA_ASTC_5x5_Format:j0,RGBA_ASTC_6x5_Format:H0,RGBA_ASTC_6x6_Format:V0,RGBA_ASTC_8x5_Format:G0,RGBA_ASTC_8x6_Format:W0,RGBA_ASTC_8x8_Format:$0,RGBA_BPTC_Format:Bh,RGBA_ETC2_EAC_Format:F0,RGBA_PVRTC_2BPPV1_Format:D0,RGBA_PVRTC_4BPPV1_Format:k0,RGBA_S3TC_DXT1_Format:Uh,RGBA_S3TC_DXT3_Format:Fh,RGBA_S3TC_DXT5_Format:zh,RGBDepthPacking:f8,RGBFormat:Gb,RGBIntegerFormat:c8,RGB_BPTC_SIGNED_Format:Q0,RGB_BPTC_UNSIGNED_Format:ev,RGB_ETC1_Format:O0,RGB_ETC2_Format:U0,RGB_PVRTC_2BPPV1_Format:L0,RGB_PVRTC_4BPPV1_Format:N0,RGB_S3TC_DXT1_Format:Oh,RGDepthPacking:p8,RGFormat:Wb,RGIntegerFormat:ry,RawShaderMaterial:Ik,Ray:hc,Raycaster:oD,RectAreaLight:Jk,RedFormat:ny,RedIntegerFormat:Xf,ReinhardToneMapping:OL,RenderTarget:Kb,RenderTarget3D:l9,RepeatWrapping:_f,ReplaceStencilOp:g8,ReverseSubtractEquation:vL,RingGeometry:wy,SIGNED_RED_GREEN_RGTC2_Format:rv,SIGNED_RED_RGTC1_Format:tv,SRGBColorSpace:Qr,SRGBTransfer:tn,Scene:Qb,ShaderChunk:Pt,ShaderLib:fs,ShaderMaterial:ws,ShadowMaterial:Pk,Shape:Jl,ShapeGeometry:Sy,ShapePath:P9,ShapeUtils:ps,ShortType:jb,Skeleton:dy,SkeletonHelper:v9,SkinnedMesh:hk,Source:Ta,Sphere:ur,SphereGeometry:Qf,Spherical:aS,SphericalHarmonics3:Zk,SplineCurve:cM,SpotLight:Xk,SpotLightHelper:g9,Sprite:uk,SpriteMaterial:eM,SrcAlphaFactor:b0,SrcAlphaSaturateFactor:CL,SrcColorFactor:SL,StaticCopyUsage:k8,StaticDrawUsage:Ef,StaticReadUsage:I8,StereoCamera:GW,StreamCopyUsage:O8,StreamDrawUsage:P8,StreamReadUsage:L8,StringKeyframeTrack:mc,SubtractEquation:gL,SubtractiveBlending:K1,TOUCH:Pl,TangentSpaceNormalMap:Ja,TetrahedronGeometry:by,Texture:Pn,TextureLoader:Wk,TextureUtils:O9,TimestampQuery:F8,TorusGeometry:My,TorusKnotGeometry:Ey,Triangle:ni,TriangleFanDrawMode:h8,TriangleStripDrawMode:d8,TrianglesDrawMode:u8,TubeGeometry:Ty,UVMapping:Zv,Uint16BufferAttribute:Jb,Uint32BufferAttribute:Zb,Uint8BufferAttribute:EG,Uint8ClampedBufferAttribute:TG,Uniform:SM,UniformsGroup:u9,UniformsLib:We,UniformsUtils:ok,UnsignedByteType:Ki,UnsignedInt248Type:ed,UnsignedInt5999Type:Hb,UnsignedIntType:Uo,UnsignedShort4444Type:ey,UnsignedShort5551Type:ty,UnsignedShortType:Qu,VSMShadowMap:ls,Vector2:we,Vector3:j,Vector4:Xt,VectorKeyframeTrack:Nf,VideoFrameTexture:YG,VideoTexture:vk,WebGL3DRenderTarget:hG,WebGLArrayRenderTarget:dG,WebGLCoordinateSystem:Gi,WebGLCubeRenderTarget:lk,WebGLRenderTarget:Xs,WebGLRenderer:pD,WebGLUtils:fD,WebGPUCoordinateSystem:Tf,WebXRController:Bg,WireframeGeometry:Rk,WrapAroundEnding:bf,ZeroCurvatureEnding:Fl,ZeroFactor:_L,ZeroSlopeEnding:zl,ZeroStencilOp:m8,createCanvasElement:nk},Symbol.toStringTag,{value:"Module"}));var mD={exports:{}},gc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */gc.ConcurrentRoot=1;gc.ContinuousEventPriority=4;gc.DefaultEventPriority=16;gc.DiscreteEventPriority=1;gc.IdleEventPriority=536870912;gc.LegacyRoot=0;mD.exports=gc;var Su=mD.exports;function yY(n){let e;const t=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const p=e;e=h?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,s=(u,h=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const v=h(e);if(!f(p,v)){const x=p;u(p=v,x)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,h,f)=>h||f?s(u,h,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const xY=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),W2=xY?L.useEffect:L.useLayoutEffect;function _Y(n){const e=typeof n=="function"?yY(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=L.useReducer(_=>_+1,0),o=e.getState(),a=L.useRef(o),l=L.useRef(r),u=L.useRef(i),h=L.useRef(!1),f=L.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||u.current!==i||h.current)&&(p=r(o),m=!i(f.current,p)),W2(()=>{m&&(f.current=p),a.current=o,l.current=r,u.current=i,h.current=!1});const v=L.useRef(o);W2(()=>{const _=()=>{try{const w=e.getState(),S=l.current(w);u.current(f.current,S)||(a.current=w,f.current=S,s())}catch{h.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const x=m?p:f.current;return L.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var gD={exports:{}},yw={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $2;function wY(){return $2||($2=1,function(n){function e(D,V){var X=D.length;D.push(V);e:for(;0<X;){var J=X-1>>>1,oe=D[J];if(0<i(oe,V))D[J]=V,D[X]=oe,X=J;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],X=D.pop();if(X!==V){D[0]=X;e:for(var J=0,oe=D.length,ye=oe>>>1;J<ye;){var ie=2*(J+1)-1,xe=D[ie],Me=ie+1,Re=D[Me];if(0>i(xe,X))Me<oe&&0>i(Re,xe)?(D[J]=Re,D[Me]=X,J=Me):(D[J]=xe,D[ie]=X,J=ie);else if(Me<oe&&0>i(Re,X))D[J]=Re,D[Me]=X,J=Me;else break e}}return V}function i(D,V){var X=D.sortIndex-V.sortIndex;return X!==0?X:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var V=t(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=D)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(u)}}function E(D){if(x=!1,S(D),!v)if(t(l)!==null)v=!0,K(R);else{var V=t(u);V!==null&&Q(E,V.startTime-D)}}function R(D,V){v=!1,x&&(x=!1,g(k),k=-1),m=!0;var X=p;try{for(S(V),f=t(l);f!==null&&(!(f.expirationTime>V)||D&&!O());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var oe=J(f.expirationTime<=V);V=n.unstable_now(),typeof oe=="function"?f.callback=oe:f===t(l)&&r(l),S(V)}else r(l);f=t(l)}if(f!==null)var ye=!0;else{var ie=t(u);ie!==null&&Q(E,ie.startTime-V),ye=!1}return ye}finally{f=null,p=X,m=!1}}var A=!1,P=null,k=-1,N=5,C=-1;function O(){return!(n.unstable_now()-C<N)}function F(){if(P!==null){var D=n.unstable_now();C=D;var V=!0;try{V=P(!0,D)}finally{V?W():(A=!1,P=null)}}else A=!1}var W;if(typeof w=="function")W=function(){w(F)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=F,W=function(){Z.postMessage(null)}}else W=function(){_(F,0)};function K(D){P=D,A||(A=!0,W())}function Q(D,V){k=_(function(){D(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,K(R))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var X=p;p=V;try{return D()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=p;p=D;try{return V()}finally{p=X}},n.unstable_scheduleCallback=function(D,V,X){var J=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,D){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,D={id:h++,callback:V,priorityLevel:D,startTime:X,expirationTime:oe,sortIndex:-1},X>J?(D.sortIndex=X,e(u,D),t(l)===null&&D===t(u)&&(x?(g(k),k=-1):x=!0,Q(E,X-J))):(D.sortIndex=oe,e(l,D),v||m||(v=!0,K(R))),D},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(D){var V=p;return function(){var X=p;p=V;try{return D.apply(this,arguments)}finally{p=X}}}}(xw)),xw}var X2;function SY(){return X2||(X2=1,yw.exports=wY()),yw.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bY=function(e){var t={},r=L,i=SY(),s=Object.assign;function o(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),R=Symbol.iterator;function A(c){return c===null||typeof c!="object"?null:(c=R&&c[R]||c["@@iterator"],typeof c=="function"?c:null)}function P(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case v:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case x:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case w:return d=c.displayName||null,d!==null?d:P(c.type)||"Memo";case S:d=c._payload,c=c._init;try{return P(c(d))}catch{}}return null}function k(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function N(c){var d=c,y=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,d.flags&4098&&(y=d.return),c=d.return;while(c)}return d.tag===3?y:null}function C(c){if(N(c)!==c)throw Error(o(188))}function O(c){var d=c.alternate;if(!d){if(d=N(c),d===null)throw Error(o(188));return d!==c?null:c}for(var y=c,b=d;;){var T=y.return;if(T===null)break;var I=T.alternate;if(I===null){if(b=T.return,b!==null){y=b;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===y)return C(T),c;if(I===b)return C(T),d;I=I.sibling}throw Error(o(188))}if(y.return!==b.return)y=T,b=I;else{for(var G=!1,ee=T.child;ee;){if(ee===y){G=!0,y=T,b=I;break}if(ee===b){G=!0,b=T,y=I;break}ee=ee.sibling}if(!G){for(ee=I.child;ee;){if(ee===y){G=!0,y=I,b=T;break}if(ee===b){G=!0,b=I,y=T;break}ee=ee.sibling}if(!G)throw Error(o(189))}}if(y.alternate!==b)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?c:d}function F(c){return c=O(c),c!==null?W(c):null}function W(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=W(c);if(d!==null)return d;c=c.sibling}return null}function q(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var d=q(c);if(d!==null)return d}c=c.sibling}return null}var Z=Array.isArray,K=e.getPublicInstance,Q=e.getRootHostContext,D=e.getChildHostContext,V=e.prepareForCommit,X=e.resetAfterCommit,J=e.createInstance,oe=e.appendInitialChild,ye=e.finalizeInitialChildren,ie=e.prepareUpdate,xe=e.shouldSetTextContent,Me=e.createTextInstance,Re=e.scheduleTimeout,He=e.cancelTimeout,lt=e.noTimeout,ze=e.isPrimaryRenderer,Je=e.supportsMutation,ft=e.supportsPersistence,Ve=e.supportsHydration,B=e.getInstanceFromNode,Ne=e.preparePortalMount,Ee=e.getCurrentEventPriority,Ie=e.detachDeletedInstance,ge=e.supportsMicrotasks,De=e.scheduleMicrotask,Ae=e.supportsTestSelectors,qe=e.findFiberRoot,vt=e.getBoundingRect,H=e.getTextContent,U=e.isHiddenSubtree,se=e.matchAccessibilityRole,de=e.setFocusIfFocusable,ve=e.setupIntersectionObserver,pe=e.appendChild,Ze=e.appendChildToContainer,Fe=e.commitTextUpdate,tt=e.commitMount,nt=e.commitUpdate,Ce=e.insertBefore,Ye=e.insertInContainerBefore,ct=e.removeChild,Y=e.removeChildFromContainer,ae=e.resetTextContent,fe=e.hideInstance,$=e.hideTextInstance,_e=e.unhideInstance,Se=e.unhideTextInstance,Ue=e.clearContainer,Pe=e.cloneInstance,be=e.createContainerChildSet,$e=e.appendChildToContainerChildSet,pt=e.finalizeContainerChildren,Gt=e.replaceContainerChildren,Ot=e.cloneHiddenInstance,On=e.cloneHiddenTextInstance,hr=e.canHydrateInstance,ip=e.canHydrateTextInstance,sp=e.canHydrateSuspenseInstance,bs=e.isSuspenseInstancePending,tl=e.isSuspenseInstanceFallback,op=e.registerSuspenseInstanceRetry,Bo=e.getNextHydratableSibling,vc=e.getFirstHydratableChild,ap=e.getFirstHydratableChildWithinContainer,yc=e.getFirstHydratableChildWithinSuspenseInstance,lp=e.hydrateInstance,cp=e.hydrateTextInstance,Py=e.hydrateSuspenseInstance,Iy=e.getNextHydratableInstanceAfterSuspenseInstance,up=e.commitHydratedContainer,Ny=e.commitHydratedSuspenseInstance,Ly=e.clearSuspenseBoundary,ky=e.clearSuspenseBoundaryFromContainer,z=e.shouldDeleteUnhydratedTailInstances,re=e.didNotMatchHydratedContainerTextInstance,ce=e.didNotMatchHydratedTextInstance,ue;function ne(c){if(ue===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);ue=d&&d[1]||""}return`
`+ue+c}var Le=!1;function Ge(c,d){if(!c||Le)return"";Le=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Oe){var b=Oe}Reflect.construct(c,[],d)}else{try{d.call()}catch(Oe){b=Oe}c.call(d.prototype)}else{try{throw Error()}catch(Oe){b=Oe}c()}}catch(Oe){if(Oe&&b&&typeof Oe.stack=="string"){for(var T=Oe.stack.split(`
`),I=b.stack.split(`
`),G=T.length-1,ee=I.length-1;1<=G&&0<=ee&&T[G]!==I[ee];)ee--;for(;1<=G&&0<=ee;G--,ee--)if(T[G]!==I[ee]){if(G!==1||ee!==1)do if(G--,ee--,0>ee||T[G]!==I[ee]){var me=`
`+T[G].replace(" at new "," at ");return c.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",c.displayName)),me}while(1<=G&&0<=ee);break}}}finally{Le=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?ne(c):""}var ot=Object.prototype.hasOwnProperty,Qe=[],gt=-1;function mt(c){return{current:c}}function je(c){0>gt||(c.current=Qe[gt],Qe[gt]=null,gt--)}function at(c,d){gt++,Qe[gt]=c.current,c.current=d}var Ft={},kt=mt(Ft),It=mt(!1),Vt=Ft;function ut(c,d){var y=c.type.contextTypes;if(!y)return Ft;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in y)T[I]=d[I];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=T),T}function Ut(c){return c=c.childContextTypes,c!=null}function zt(){je(It),je(kt)}function fr(c,d,y){if(kt.current!==Ft)throw Error(o(168));at(kt,d),at(It,y)}function Js(c,d,y){var b=c.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return y;b=b.getChildContext();for(var T in b)if(!(T in d))throw Error(o(108,k(c)||"Unknown",T));return s({},y,b)}function Kn(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ft,Vt=kt.current,at(kt,c),at(It,It.current),!0}function jo(c,d,y){var b=c.stateNode;if(!b)throw Error(o(169));y?(c=Js(c,d,Vt),b.__reactInternalMemoizedMergedChildContext=c,je(It),je(kt),at(kt,c)):je(It),at(It,y)}var Ht=Math.clz32?Math.clz32:sr,Wr=Math.log,$r=Math.LN2;function sr(c){return c>>>=0,c===0?32:31-(Wr(c)/$r|0)|0}var Hn=64,Ho=4194304;function ci(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function dp(c,d){var y=c.pendingLanes;if(y===0)return 0;var b=0,T=c.suspendedLanes,I=c.pingedLanes,G=y&268435455;if(G!==0){var ee=G&~T;ee!==0?b=ci(ee):(I&=G,I!==0&&(b=ci(I)))}else G=y&~T,G!==0?b=ci(G):I!==0&&(b=ci(I));if(b===0)return 0;if(d!==0&&d!==b&&!(d&T)&&(T=b&-b,I=d&-d,T>=I||T===16&&(I&4194240)!==0))return d;if(b&4&&(b|=y&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=b;0<d;)y=31-Ht(d),T=1<<y,b|=c[y],d&=~T;return b}function OD(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UD(c,d){for(var y=c.suspendedLanes,b=c.pingedLanes,T=c.expirationTimes,I=c.pendingLanes;0<I;){var G=31-Ht(I),ee=1<<G,me=T[G];me===-1?(!(ee&y)||ee&b)&&(T[G]=OD(ee,d)):me<=d&&(c.expiredLanes|=ee),I&=~ee}}function Dy(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Oy(c){for(var d=[],y=0;31>y;y++)d.push(c);return d}function Md(c,d,y){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Ht(d),c[d]=y}function FD(c,d){var y=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<y;){var T=31-Ht(y),I=1<<T;d[T]=0,b[T]=-1,c[T]=-1,y&=~I}}function Uy(c,d){var y=c.entangledLanes|=d;for(c=c.entanglements;y;){var b=31-Ht(y),T=1<<b;T&d|c[b]&d&&(c[b]|=d),y&=~T}}var Kt=0;function CM(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Fy=i.unstable_scheduleCallback,RM=i.unstable_cancelCallback,zD=i.unstable_shouldYield,BD=i.unstable_requestPaint,Jn=i.unstable_now,zy=i.unstable_ImmediatePriority,jD=i.unstable_UserBlockingPriority,By=i.unstable_NormalPriority,HD=i.unstable_IdlePriority,hp=null,Ms=null;function VD(c){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(hp,c,void 0,(c.current.flags&128)===128)}catch{}}function GD(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Es=typeof Object.is=="function"?Object.is:GD,Zs=null,fp=!1,jy=!1;function PM(c){Zs===null?Zs=[c]:Zs.push(c)}function WD(c){fp=!0,PM(c)}function Ts(){if(!jy&&Zs!==null){jy=!0;var c=0,d=Kt;try{var y=Zs;for(Kt=1;c<y.length;c++){var b=y[c];do b=b(!0);while(b!==null)}Zs=null,fp=!1}catch(T){throw Zs!==null&&(Zs=Zs.slice(c+1)),Fy(zy,Ts),T}finally{Kt=d,jy=!1}}return null}var $D=a.ReactCurrentBatchConfig;function pp(c,d){if(Es(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var y=Object.keys(c),b=Object.keys(d);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var T=y[b];if(!ot.call(d,T)||!Es(c[T],d[T]))return!1}return!0}function XD(c){switch(c.tag){case 5:return ne(c.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return c=Ge(c.type,!1),c;case 11:return c=Ge(c.type.render,!1),c;case 1:return c=Ge(c.type,!0),c;default:return""}}function Zi(c,d){if(c&&c.defaultProps){d=s({},d),c=c.defaultProps;for(var y in c)d[y]===void 0&&(d[y]=c[y]);return d}return d}var mp=mt(null),gp=null,xc=null,Hy=null;function Vy(){Hy=xc=gp=null}function IM(c,d,y){ze?(at(mp,d._currentValue),d._currentValue=y):(at(mp,d._currentValue2),d._currentValue2=y)}function Gy(c){var d=mp.current;je(mp),ze?c._currentValue=d:c._currentValue2=d}function Wy(c,d,y){for(;c!==null;){var b=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),c===y)break;c=c.return}}function _c(c,d){gp=c,Hy=xc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&d&&(hi=!0),c.firstContext=null)}function Ri(c){var d=ze?c._currentValue:c._currentValue2;if(Hy!==c)if(c={context:c,memoizedValue:d,next:null},xc===null){if(gp===null)throw Error(o(308));xc=c,gp.dependencies={lanes:0,firstContext:c}}else xc=xc.next=c;return d}var As=null,Vo=!1;function $y(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NM(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Qs(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Go(c,d){var y=c.updateQueue;y!==null&&(y=y.shared,Un!==null&&c.mode&1&&!(Dt&2)?(c=y.interleaved,c===null?(d.next=d,As===null?As=[y]:As.push(y)):(d.next=c.next,c.next=d),y.interleaved=d):(c=y.pending,c===null?d.next=d:(d.next=c.next,c.next=d),y.pending=d))}function vp(c,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var b=d.lanes;b&=c.pendingLanes,y|=b,d.lanes=y,Uy(c,y)}}function LM(c,d){var y=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var T=null,I=null;if(y=y.firstBaseUpdate,y!==null){do{var G={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};I===null?T=I=G:I=I.next=G,y=y.next}while(y!==null);I===null?T=I=d:I=I.next=d}else T=I=d;y={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:b.shared,effects:b.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=d:c.next=d,y.lastBaseUpdate=d}function yp(c,d,y,b){var T=c.updateQueue;Vo=!1;var I=T.firstBaseUpdate,G=T.lastBaseUpdate,ee=T.shared.pending;if(ee!==null){T.shared.pending=null;var me=ee,Oe=me.next;me.next=null,G===null?I=Oe:G.next=Oe,G=me;var it=c.alternate;it!==null&&(it=it.updateQueue,ee=it.lastBaseUpdate,ee!==G&&(ee===null?it.firstBaseUpdate=Oe:ee.next=Oe,it.lastBaseUpdate=me))}if(I!==null){var bt=T.baseState;G=0,it=Oe=me=null,ee=I;do{var yt=ee.lane,an=ee.eventTime;if((b&yt)===yt){it!==null&&(it=it.next={eventTime:an,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var ht=c,vr=ee;switch(yt=d,an=y,vr.tag){case 1:if(ht=vr.payload,typeof ht=="function"){bt=ht.call(an,bt,yt);break e}bt=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=vr.payload,yt=typeof ht=="function"?ht.call(an,bt,yt):ht,yt==null)break e;bt=s({},bt,yt);break e;case 2:Vo=!0}}ee.callback!==null&&ee.lane!==0&&(c.flags|=64,yt=T.effects,yt===null?T.effects=[ee]:yt.push(ee))}else an={eventTime:an,lane:yt,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},it===null?(Oe=it=an,me=bt):it=it.next=an,G|=yt;if(ee=ee.next,ee===null){if(ee=T.shared.pending,ee===null)break;yt=ee,ee=yt.next,yt.next=null,T.lastBaseUpdate=yt,T.shared.pending=null}}while(!0);if(it===null&&(me=bt),T.baseState=me,T.firstBaseUpdate=Oe,T.lastBaseUpdate=it,d=T.shared.interleaved,d!==null){T=d;do G|=T.lane,T=T.next;while(T!==d)}else I===null&&(T.shared.lanes=0);Rc|=G,c.lanes=G,c.memoizedState=bt}}function kM(c,d,y){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var b=c[d],T=b.callback;if(T!==null){if(b.callback=null,b=y,typeof T!="function")throw Error(o(191,T));T.call(b)}}}var DM=new r.Component().refs;function Xy(c,d,y,b){d=c.memoizedState,y=y(b,d),y=y==null?d:s({},d,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var xp={isMounted:function(c){return(c=c._reactInternals)?N(c)===c:!1},enqueueSetState:function(c,d,y){c=c._reactInternals;var b=Lr(),T=Xo(c),I=Qs(b,T);I.payload=d,y!=null&&(I.callback=y),Go(c,I),d=ki(c,T,b),d!==null&&vp(d,c,T)},enqueueReplaceState:function(c,d,y){c=c._reactInternals;var b=Lr(),T=Xo(c),I=Qs(b,T);I.tag=1,I.payload=d,y!=null&&(I.callback=y),Go(c,I),d=ki(c,T,b),d!==null&&vp(d,c,T)},enqueueForceUpdate:function(c,d){c=c._reactInternals;var y=Lr(),b=Xo(c),T=Qs(y,b);T.tag=2,d!=null&&(T.callback=d),Go(c,T),d=ki(c,b,y),d!==null&&vp(d,c,b)}};function OM(c,d,y,b,T,I,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,I,G):d.prototype&&d.prototype.isPureReactComponent?!pp(y,b)||!pp(T,I):!0}function UM(c,d,y){var b=!1,T=Ft,I=d.contextType;return typeof I=="object"&&I!==null?I=Ri(I):(T=Ut(d)?Vt:kt.current,b=d.contextTypes,I=(b=b!=null)?ut(c,T):Ft),d=new d(y,I),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=xp,c.stateNode=d,d._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=I),d}function FM(c,d,y,b){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,b),d.state!==c&&xp.enqueueReplaceState(d,d.state,null)}function qy(c,d,y,b){var T=c.stateNode;T.props=y,T.state=c.memoizedState,T.refs=DM,$y(c);var I=d.contextType;typeof I=="object"&&I!==null?T.context=Ri(I):(I=Ut(d)?Vt:kt.current,T.context=ut(c,I)),T.state=c.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(Xy(c,d,I,y),T.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(d=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),d!==T.state&&xp.enqueueReplaceState(T,T.state,null),yp(c,y,T,b),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}var wc=[],Sc=0,_p=null,wp=0,Pi=[],Ii=0,nl=null,eo=1,to="";function rl(c,d){wc[Sc++]=wp,wc[Sc++]=_p,_p=c,wp=d}function zM(c,d,y){Pi[Ii++]=eo,Pi[Ii++]=to,Pi[Ii++]=nl,nl=c;var b=eo;c=to;var T=32-Ht(b)-1;b&=~(1<<T),y+=1;var I=32-Ht(d)+T;if(30<I){var G=T-T%5;I=(b&(1<<G)-1).toString(32),b>>=G,T-=G,eo=1<<32-Ht(d)+T|y<<T|b,to=I+c}else eo=1<<I|y<<T|b,to=c}function Yy(c){c.return!==null&&(rl(c,1),zM(c,1,0))}function Ky(c){for(;c===_p;)_p=wc[--Sc],wc[Sc]=null,wp=wc[--Sc],wc[Sc]=null;for(;c===nl;)nl=Pi[--Ii],Pi[Ii]=null,to=Pi[--Ii],Pi[Ii]=null,eo=Pi[--Ii],Pi[Ii]=null}var ui=null,di=null,yn=!1,Ed=!1,Qi=null;function BM(c,d){var y=Di(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=c,d=c.deletions,d===null?(c.deletions=[y],c.flags|=16):d.push(y)}function jM(c,d){switch(c.tag){case 5:return d=hr(d,c.type,c.pendingProps),d!==null?(c.stateNode=d,ui=c,di=vc(d),!0):!1;case 6:return d=ip(d,c.pendingProps),d!==null?(c.stateNode=d,ui=c,di=null,!0):!1;case 13:if(d=sp(d),d!==null){var y=nl!==null?{id:eo,overflow:to}:null;return c.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=Di(18,null,null,0),y.stateNode=d,y.return=c,c.child=y,ui=c,di=null,!0}return!1;default:return!1}}function Jy(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Zy(c){if(yn){var d=di;if(d){var y=d;if(!jM(c,d)){if(Jy(c))throw Error(o(418));d=Bo(y);var b=ui;d&&jM(c,d)?BM(b,y):(c.flags=c.flags&-4097|2,yn=!1,ui=c)}}else{if(Jy(c))throw Error(o(418));c.flags=c.flags&-4097|2,yn=!1,ui=c}}}function HM(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ui=c}function Td(c){if(!Ve||c!==ui)return!1;if(!yn)return HM(c),yn=!0,!1;if(c.tag!==3&&(c.tag!==5||z(c.type)&&!xe(c.type,c.memoizedProps))){var d=di;if(d){if(Jy(c)){for(c=di;c;)c=Bo(c);throw Error(o(418))}for(;d;)BM(c,d),d=Bo(d)}}if(HM(c),c.tag===13){if(!Ve)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));di=Iy(c)}else di=ui?Bo(c.stateNode):null;return!0}function bc(){Ve&&(di=ui=null,Ed=yn=!1)}function Qy(c){Qi===null?Qi=[c]:Qi.push(c)}function Ad(c,d,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var b=y.stateNode}if(!b)throw Error(o(147,c));var T=b,I=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===I?d.ref:(d=function(G){var ee=T.refs;ee===DM&&(ee=T.refs={}),G===null?delete ee[I]:ee[I]=G},d._stringRef=I,d)}if(typeof c!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,c))}return c}function Sp(c,d){throw c=Object.prototype.toString.call(d),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function VM(c){var d=c._init;return d(c._payload)}function GM(c){function d(le,te){if(c){var he=le.deletions;he===null?(le.deletions=[te],le.flags|=16):he.push(te)}}function y(le,te){if(!c)return null;for(;te!==null;)d(le,te),te=te.sibling;return null}function b(le,te){for(le=new Map;te!==null;)te.key!==null?le.set(te.key,te):le.set(te.index,te),te=te.sibling;return le}function T(le,te){return le=Yo(le,te),le.index=0,le.sibling=null,le}function I(le,te,he){return le.index=he,c?(he=le.alternate,he!==null?(he=he.index,he<te?(le.flags|=2,te):he):(le.flags|=2,te)):(le.flags|=1048576,te)}function G(le){return c&&le.alternate===null&&(le.flags|=2),le}function ee(le,te,he,Ke){return te===null||te.tag!==6?(te=Ox(he,le.mode,Ke),te.return=le,te):(te=T(te,he),te.return=le,te)}function me(le,te,he,Ke){var dt=he.type;return dt===h?it(le,te,he.props.children,Ke,he.key):te!==null&&(te.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&VM(dt)===te.type)?(Ke=T(te,he.props),Ke.ref=Ad(le,te,he),Ke.return=le,Ke):(Ke=Qp(he.type,he.key,he.props,null,le.mode,Ke),Ke.ref=Ad(le,te,he),Ke.return=le,Ke)}function Oe(le,te,he,Ke){return te===null||te.tag!==4||te.stateNode.containerInfo!==he.containerInfo||te.stateNode.implementation!==he.implementation?(te=Ux(he,le.mode,Ke),te.return=le,te):(te=T(te,he.children||[]),te.return=le,te)}function it(le,te,he,Ke,dt){return te===null||te.tag!==7?(te=ul(he,le.mode,Ke,dt),te.return=le,te):(te=T(te,he),te.return=le,te)}function bt(le,te,he){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Ox(""+te,le.mode,he),te.return=le,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case l:return he=Qp(te.type,te.key,te.props,null,le.mode,he),he.ref=Ad(le,null,te),he.return=le,he;case u:return te=Ux(te,le.mode,he),te.return=le,te;case S:var Ke=te._init;return bt(le,Ke(te._payload),he)}if(Z(te)||A(te))return te=ul(te,le.mode,he,null),te.return=le,te;Sp(le,te)}return null}function yt(le,te,he,Ke){var dt=te!==null?te.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return dt!==null?null:ee(le,te,""+he,Ke);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return he.key===dt?me(le,te,he,Ke):null;case u:return he.key===dt?Oe(le,te,he,Ke):null;case S:return dt=he._init,yt(le,te,dt(he._payload),Ke)}if(Z(he)||A(he))return dt!==null?null:it(le,te,he,Ke,null);Sp(le,he)}return null}function an(le,te,he,Ke,dt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return le=le.get(he)||null,ee(te,le,""+Ke,dt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return le=le.get(Ke.key===null?he:Ke.key)||null,me(te,le,Ke,dt);case u:return le=le.get(Ke.key===null?he:Ke.key)||null,Oe(te,le,Ke,dt);case S:var Nt=Ke._init;return an(le,te,he,Nt(Ke._payload),dt)}if(Z(Ke)||A(Ke))return le=le.get(he)||null,it(te,le,Ke,dt,null);Sp(te,Ke)}return null}function ht(le,te,he,Ke){for(var dt=null,Nt=null,Mt=te,Jt=te=0,Qn=null;Mt!==null&&Jt<he.length;Jt++){Mt.index>Jt?(Qn=Mt,Mt=null):Qn=Mt.sibling;var Zt=yt(le,Mt,he[Jt],Ke);if(Zt===null){Mt===null&&(Mt=Qn);break}c&&Mt&&Zt.alternate===null&&d(le,Mt),te=I(Zt,te,Jt),Nt===null?dt=Zt:Nt.sibling=Zt,Nt=Zt,Mt=Qn}if(Jt===he.length)return y(le,Mt),yn&&rl(le,Jt),dt;if(Mt===null){for(;Jt<he.length;Jt++)Mt=bt(le,he[Jt],Ke),Mt!==null&&(te=I(Mt,te,Jt),Nt===null?dt=Mt:Nt.sibling=Mt,Nt=Mt);return yn&&rl(le,Jt),dt}for(Mt=b(le,Mt);Jt<he.length;Jt++)Qn=an(Mt,le,Jt,he[Jt],Ke),Qn!==null&&(c&&Qn.alternate!==null&&Mt.delete(Qn.key===null?Jt:Qn.key),te=I(Qn,te,Jt),Nt===null?dt=Qn:Nt.sibling=Qn,Nt=Qn);return c&&Mt.forEach(function(Ko){return d(le,Ko)}),yn&&rl(le,Jt),dt}function vr(le,te,he,Ke){var dt=A(he);if(typeof dt!="function")throw Error(o(150));if(he=dt.call(he),he==null)throw Error(o(151));for(var Nt=dt=null,Mt=te,Jt=te=0,Qn=null,Zt=he.next();Mt!==null&&!Zt.done;Jt++,Zt=he.next()){Mt.index>Jt?(Qn=Mt,Mt=null):Qn=Mt.sibling;var Ko=yt(le,Mt,Zt.value,Ke);if(Ko===null){Mt===null&&(Mt=Qn);break}c&&Mt&&Ko.alternate===null&&d(le,Mt),te=I(Ko,te,Jt),Nt===null?dt=Ko:Nt.sibling=Ko,Nt=Ko,Mt=Qn}if(Zt.done)return y(le,Mt),yn&&rl(le,Jt),dt;if(Mt===null){for(;!Zt.done;Jt++,Zt=he.next())Zt=bt(le,Zt.value,Ke),Zt!==null&&(te=I(Zt,te,Jt),Nt===null?dt=Zt:Nt.sibling=Zt,Nt=Zt);return yn&&rl(le,Jt),dt}for(Mt=b(le,Mt);!Zt.done;Jt++,Zt=he.next())Zt=an(Mt,le,Jt,Zt.value,Ke),Zt!==null&&(c&&Zt.alternate!==null&&Mt.delete(Zt.key===null?Jt:Zt.key),te=I(Zt,te,Jt),Nt===null?dt=Zt:Nt.sibling=Zt,Nt=Zt);return c&&Mt.forEach(function(bO){return d(le,bO)}),yn&&rl(le,Jt),dt}function Oi(le,te,he,Ke){if(typeof he=="object"&&he!==null&&he.type===h&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case l:e:{for(var dt=he.key,Nt=te;Nt!==null;){if(Nt.key===dt){if(dt=he.type,dt===h){if(Nt.tag===7){y(le,Nt.sibling),te=T(Nt,he.props.children),te.return=le,le=te;break e}}else if(Nt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&VM(dt)===Nt.type){y(le,Nt.sibling),te=T(Nt,he.props),te.ref=Ad(le,Nt,he),te.return=le,le=te;break e}y(le,Nt);break}else d(le,Nt);Nt=Nt.sibling}he.type===h?(te=ul(he.props.children,le.mode,Ke,he.key),te.return=le,le=te):(Ke=Qp(he.type,he.key,he.props,null,le.mode,Ke),Ke.ref=Ad(le,te,he),Ke.return=le,le=Ke)}return G(le);case u:e:{for(Nt=he.key;te!==null;){if(te.key===Nt)if(te.tag===4&&te.stateNode.containerInfo===he.containerInfo&&te.stateNode.implementation===he.implementation){y(le,te.sibling),te=T(te,he.children||[]),te.return=le,le=te;break e}else{y(le,te);break}else d(le,te);te=te.sibling}te=Ux(he,le.mode,Ke),te.return=le,le=te}return G(le);case S:return Nt=he._init,Oi(le,te,Nt(he._payload),Ke)}if(Z(he))return ht(le,te,he,Ke);if(A(he))return vr(le,te,he,Ke);Sp(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,te!==null&&te.tag===6?(y(le,te.sibling),te=T(te,he),te.return=le,le=te):(y(le,te),te=Ox(he,le.mode,Ke),te.return=le,le=te),G(le)):y(le,te)}return Oi}var Mc=GM(!0),WM=GM(!1),Cd={},Ni=mt(Cd),Rd=mt(Cd),Ec=mt(Cd);function Cs(c){if(c===Cd)throw Error(o(174));return c}function ex(c,d){at(Ec,d),at(Rd,c),at(Ni,Cd),c=Q(d),je(Ni),at(Ni,c)}function Tc(){je(Ni),je(Rd),je(Ec)}function $M(c){var d=Cs(Ec.current),y=Cs(Ni.current);d=D(y,c.type,d),y!==d&&(at(Rd,c),at(Ni,d))}function tx(c){Rd.current===c&&(je(Ni),je(Rd))}var _n=mt(0);function bp(c){for(var d=c;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||bs(y)||tl(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var nx=[];function rx(){for(var c=0;c<nx.length;c++){var d=nx[c];ze?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}nx.length=0}var Mp=a.ReactCurrentDispatcher,Li=a.ReactCurrentBatchConfig,Ac=0,Tn=null,pr=null,Zn=null,Ep=!1,Pd=!1,Id=0,qD=0;function mr(){throw Error(o(321))}function ix(c,d){if(d===null)return!1;for(var y=0;y<d.length&&y<c.length;y++)if(!Es(c[y],d[y]))return!1;return!0}function sx(c,d,y,b,T,I){if(Ac=I,Tn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Mp.current=c===null||c.memoizedState===null?ZD:QD,c=y(b,T),Pd){I=0;do{if(Pd=!1,Id=0,25<=I)throw Error(o(301));I+=1,Zn=pr=null,d.updateQueue=null,Mp.current=eO,c=y(b,T)}while(Pd)}if(Mp.current=Pp,d=pr!==null&&pr.next!==null,Ac=0,Zn=pr=Tn=null,Ep=!1,d)throw Error(o(300));return c}function ox(){var c=Id!==0;return Id=0,c}function no(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?Tn.memoizedState=Zn=c:Zn=Zn.next=c,Zn}function Rs(){if(pr===null){var c=Tn.alternate;c=c!==null?c.memoizedState:null}else c=pr.next;var d=Zn===null?Tn.memoizedState:Zn.next;if(d!==null)Zn=d,pr=c;else{if(c===null)throw Error(o(310));pr=c,c={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Zn===null?Tn.memoizedState=Zn=c:Zn=Zn.next=c}return Zn}function il(c,d){return typeof d=="function"?d(c):d}function Tp(c){var d=Rs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var b=pr,T=b.baseQueue,I=y.pending;if(I!==null){if(T!==null){var G=T.next;T.next=I.next,I.next=G}b.baseQueue=T=I,y.pending=null}if(T!==null){I=T.next,b=b.baseState;var ee=G=null,me=null,Oe=I;do{var it=Oe.lane;if((Ac&it)===it)me!==null&&(me=me.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),b=Oe.hasEagerState?Oe.eagerState:c(b,Oe.action);else{var bt={lane:it,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};me===null?(ee=me=bt,G=b):me=me.next=bt,Tn.lanes|=it,Rc|=it}Oe=Oe.next}while(Oe!==null&&Oe!==I);me===null?G=b:me.next=ee,Es(b,d.memoizedState)||(hi=!0),d.memoizedState=b,d.baseState=G,d.baseQueue=me,y.lastRenderedState=b}if(c=y.interleaved,c!==null){T=c;do I=T.lane,Tn.lanes|=I,Rc|=I,T=T.next;while(T!==c)}else T===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function Ap(c){var d=Rs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var b=y.dispatch,T=y.pending,I=d.memoizedState;if(T!==null){y.pending=null;var G=T=T.next;do I=c(I,G.action),G=G.next;while(G!==T);Es(I,d.memoizedState)||(hi=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),y.lastRenderedState=I}return[I,b]}function XM(){}function qM(c,d){var y=Tn,b=Rs(),T=d(),I=!Es(b.memoizedState,T);if(I&&(b.memoizedState=T,hi=!0),b=b.queue,Ld(JM.bind(null,y,b,c),[c]),b.getSnapshot!==d||I||Zn!==null&&Zn.memoizedState.tag&1){if(y.flags|=2048,Nd(9,KM.bind(null,y,b,T,d),void 0,null),Un===null)throw Error(o(349));Ac&30||YM(y,d,T)}return T}function YM(c,d,y){c.flags|=16384,c={getSnapshot:d,value:y},d=Tn.updateQueue,d===null?(d={lastEffect:null,stores:null},Tn.updateQueue=d,d.stores=[c]):(y=d.stores,y===null?d.stores=[c]:y.push(c))}function KM(c,d,y,b){d.value=y,d.getSnapshot=b,ZM(d)&&ki(c,1,-1)}function JM(c,d,y){return y(function(){ZM(d)&&ki(c,1,-1)})}function ZM(c){var d=c.getSnapshot;c=c.value;try{var y=d();return!Es(c,y)}catch{return!0}}function ax(c){var d=no();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:c},d.queue=c,c=c.dispatch=JD.bind(null,Tn,c),[d.memoizedState,c]}function Nd(c,d,y,b){return c={tag:c,create:d,destroy:y,deps:b,next:null},d=Tn.updateQueue,d===null?(d={lastEffect:null,stores:null},Tn.updateQueue=d,d.lastEffect=c.next=c):(y=d.lastEffect,y===null?d.lastEffect=c.next=c:(b=y.next,y.next=c,c.next=b,d.lastEffect=c)),c}function QM(){return Rs().memoizedState}function Cp(c,d,y,b){var T=no();Tn.flags|=c,T.memoizedState=Nd(1|d,y,void 0,b===void 0?null:b)}function Rp(c,d,y,b){var T=Rs();b=b===void 0?null:b;var I=void 0;if(pr!==null){var G=pr.memoizedState;if(I=G.destroy,b!==null&&ix(b,G.deps)){T.memoizedState=Nd(d,y,I,b);return}}Tn.flags|=c,T.memoizedState=Nd(1|d,y,I,b)}function lx(c,d){return Cp(8390656,8,c,d)}function Ld(c,d){return Rp(2048,8,c,d)}function eE(c,d){return Rp(4,2,c,d)}function tE(c,d){return Rp(4,4,c,d)}function nE(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function rE(c,d,y){return y=y!=null?y.concat([c]):null,Rp(4,4,nE.bind(null,d,c),y)}function cx(){}function iE(c,d){var y=Rs();d=d===void 0?null:d;var b=y.memoizedState;return b!==null&&d!==null&&ix(d,b[1])?b[0]:(y.memoizedState=[c,d],c)}function sE(c,d){var y=Rs();d=d===void 0?null:d;var b=y.memoizedState;return b!==null&&d!==null&&ix(d,b[1])?b[0]:(c=c(),y.memoizedState=[c,d],c)}function YD(c,d){var y=Kt;Kt=y!==0&&4>y?y:4,c(!0);var b=Li.transition;Li.transition={};try{c(!1),d()}finally{Kt=y,Li.transition=b}}function oE(){return Rs().memoizedState}function KD(c,d,y){var b=Xo(c);y={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null},aE(c)?lE(d,y):(cE(c,d,y),y=Lr(),c=ki(c,b,y),c!==null&&uE(c,d,b))}function JD(c,d,y){var b=Xo(c),T={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null};if(aE(c))lE(d,T);else{cE(c,d,T);var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var G=d.lastRenderedState,ee=I(G,y);if(T.hasEagerState=!0,T.eagerState=ee,Es(ee,G))return}catch{}finally{}y=Lr(),c=ki(c,b,y),c!==null&&uE(c,d,b)}}function aE(c){var d=c.alternate;return c===Tn||d!==null&&d===Tn}function lE(c,d){Pd=Ep=!0;var y=c.pending;y===null?d.next=d:(d.next=y.next,y.next=d),c.pending=d}function cE(c,d,y){Un!==null&&c.mode&1&&!(Dt&2)?(c=d.interleaved,c===null?(y.next=y,As===null?As=[d]:As.push(d)):(y.next=c.next,c.next=y),d.interleaved=y):(c=d.pending,c===null?y.next=y:(y.next=c.next,c.next=y),d.pending=y)}function uE(c,d,y){if(y&4194240){var b=d.lanes;b&=c.pendingLanes,y|=b,d.lanes=y,Uy(c,y)}}var Pp={readContext:Ri,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},ZD={readContext:Ri,useCallback:function(c,d){return no().memoizedState=[c,d===void 0?null:d],c},useContext:Ri,useEffect:lx,useImperativeHandle:function(c,d,y){return y=y!=null?y.concat([c]):null,Cp(4194308,4,nE.bind(null,d,c),y)},useLayoutEffect:function(c,d){return Cp(4194308,4,c,d)},useInsertionEffect:function(c,d){return Cp(4,2,c,d)},useMemo:function(c,d){var y=no();return d=d===void 0?null:d,c=c(),y.memoizedState=[c,d],c},useReducer:function(c,d,y){var b=no();return d=y!==void 0?y(d):d,b.memoizedState=b.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},b.queue=c,c=c.dispatch=KD.bind(null,Tn,c),[b.memoizedState,c]},useRef:function(c){var d=no();return c={current:c},d.memoizedState=c},useState:ax,useDebugValue:cx,useDeferredValue:function(c){var d=ax(c),y=d[0],b=d[1];return lx(function(){var T=Li.transition;Li.transition={};try{b(c)}finally{Li.transition=T}},[c]),y},useTransition:function(){var c=ax(!1),d=c[0];return c=YD.bind(null,c[1]),no().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,y){var b=Tn,T=no();if(yn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=d(),Un===null)throw Error(o(349));Ac&30||YM(b,d,y)}T.memoizedState=y;var I={value:y,getSnapshot:d};return T.queue=I,lx(JM.bind(null,b,I,c),[c]),b.flags|=2048,Nd(9,KM.bind(null,b,I,y,d),void 0,null),y},useId:function(){var c=no(),d=Un.identifierPrefix;if(yn){var y=to,b=eo;y=(b&~(1<<32-Ht(b)-1)).toString(32)+y,d=":"+d+"R"+y,y=Id++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=qD++,d=":"+d+"r"+y.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},QD={readContext:Ri,useCallback:iE,useContext:Ri,useEffect:Ld,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:Tp,useRef:QM,useState:function(){return Tp(il)},useDebugValue:cx,useDeferredValue:function(c){var d=Tp(il),y=d[0],b=d[1];return Ld(function(){var T=Li.transition;Li.transition={};try{b(c)}finally{Li.transition=T}},[c]),y},useTransition:function(){var c=Tp(il)[0],d=Rs().memoizedState;return[c,d]},useMutableSource:XM,useSyncExternalStore:qM,useId:oE,unstable_isNewReconciler:!1},eO={readContext:Ri,useCallback:iE,useContext:Ri,useEffect:Ld,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:Ap,useRef:QM,useState:function(){return Ap(il)},useDebugValue:cx,useDeferredValue:function(c){var d=Ap(il),y=d[0],b=d[1];return Ld(function(){var T=Li.transition;Li.transition={};try{b(c)}finally{Li.transition=T}},[c]),y},useTransition:function(){var c=Ap(il)[0],d=Rs().memoizedState;return[c,d]},useMutableSource:XM,useSyncExternalStore:qM,useId:oE,unstable_isNewReconciler:!1};function ux(c,d){try{var y="",b=d;do y+=XD(b),b=b.return;while(b);var T=y}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:d,stack:T}}function dx(c,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var tO=typeof WeakMap=="function"?WeakMap:Map;function dE(c,d,y){y=Qs(-1,y),y.tag=3,y.payload={element:null};var b=d.value;return y.callback=function(){$p||($p=!0,Rx=b),dx(c,d)},y}function hE(c,d,y){y=Qs(-1,y),y.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var T=d.value;y.payload=function(){return b(T)},y.callback=function(){dx(c,d)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(y.callback=function(){dx(c,d),typeof b!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),y}function fE(c,d,y){var b=c.pingCache;if(b===null){b=c.pingCache=new tO;var T=new Set;b.set(d,T)}else T=b.get(d),T===void 0&&(T=new Set,b.set(d,T));T.has(y)||(T.add(y),c=mO.bind(null,c,d,y),d.then(c,c))}function pE(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function mE(c,d,y,b,T){return c.mode&1?(c.flags|=65536,c.lanes=T,c):(c===d?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=Qs(-1,1),d.tag=2,Go(y,d))),y.lanes|=1),c)}function Ps(c){c.flags|=4}function gE(c,d){if(c!==null&&c.child===d.child)return!0;if(d.flags&16)return!1;for(c=d.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var kd,Dd,Ip,Np;if(Je)kd=function(c,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)oe(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Dd=function(){},Ip=function(c,d,y,b,T){if(c=c.memoizedProps,c!==b){var I=d.stateNode,G=Cs(Ni.current);y=ie(I,y,c,b,T,G),(d.updateQueue=y)&&Ps(d)}},Np=function(c,d,y,b){y!==b&&Ps(d)};else if(ft){kd=function(c,d,y,b){for(var T=d.child;T!==null;){if(T.tag===5){var I=T.stateNode;y&&b&&(I=Ot(I,T.type,T.memoizedProps,T)),oe(c,I)}else if(T.tag===6)I=T.stateNode,y&&b&&(I=On(I,T.memoizedProps,T)),oe(c,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),kd(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===d)break;for(;T.sibling===null;){if(T.return===null||T.return===d)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var vE=function(c,d,y,b){for(var T=d.child;T!==null;){if(T.tag===5){var I=T.stateNode;y&&b&&(I=Ot(I,T.type,T.memoizedProps,T)),$e(c,I)}else if(T.tag===6)I=T.stateNode,y&&b&&(I=On(I,T.memoizedProps,T)),$e(c,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),vE(c,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===d)break;for(;T.sibling===null;){if(T.return===null||T.return===d)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Dd=function(c,d){var y=d.stateNode;if(!gE(c,d)){c=y.containerInfo;var b=be(c);vE(b,d,!1,!1),y.pendingChildren=b,Ps(d),pt(c,b)}},Ip=function(c,d,y,b,T){var I=c.stateNode,G=c.memoizedProps;if((c=gE(c,d))&&G===b)d.stateNode=I;else{var ee=d.stateNode,me=Cs(Ni.current),Oe=null;G!==b&&(Oe=ie(ee,y,G,b,T,me)),c&&Oe===null?d.stateNode=I:(I=Pe(I,Oe,y,G,b,d,c,ee),ye(I,y,b,T,me)&&Ps(d),d.stateNode=I,c?Ps(d):kd(I,d,!1,!1))}},Np=function(c,d,y,b){y!==b?(c=Cs(Ec.current),y=Cs(Ni.current),d.stateNode=Me(b,c,y,d),Ps(d)):d.stateNode=c.stateNode}}else Dd=function(){},Ip=function(){},Np=function(){};function Od(c,d){if(!yn)switch(c.tailMode){case"hidden":d=c.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function gr(c){var d=c.alternate!==null&&c.alternate.child===c.child,y=0,b=0;if(d)for(var T=c.child;T!==null;)y|=T.lanes|T.childLanes,b|=T.subtreeFlags&14680064,b|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)y|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=b,c.childLanes=y,d}function nO(c,d,y){var b=d.pendingProps;switch(Ky(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(d),null;case 1:return Ut(d.type)&&zt(),gr(d),null;case 3:return b=d.stateNode,Tc(),je(It),je(kt),rx(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Td(d)?Ps(d):c===null||c.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Qi!==null&&(Nx(Qi),Qi=null))),Dd(c,d),gr(d),null;case 5:tx(d),y=Cs(Ec.current);var T=d.type;if(c!==null&&d.stateNode!=null)Ip(c,d,T,b,y),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(o(166));return gr(d),null}if(c=Cs(Ni.current),Td(d)){if(!Ve)throw Error(o(175));c=lp(d.stateNode,d.type,d.memoizedProps,y,c,d,!Ed),d.updateQueue=c,c!==null&&Ps(d)}else{var I=J(T,b,y,c,d);kd(I,d,!1,!1),d.stateNode=I,ye(I,T,b,y,c)&&Ps(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return gr(d),null;case 6:if(c&&d.stateNode!=null)Np(c,d,c.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(o(166));if(c=Cs(Ec.current),y=Cs(Ni.current),Td(d)){if(!Ve)throw Error(o(176));if(c=d.stateNode,b=d.memoizedProps,(y=cp(c,b,d,!Ed))&&(T=ui,T!==null))switch(I=(T.mode&1)!==0,T.tag){case 3:re(T.stateNode.containerInfo,c,b,I);break;case 5:ce(T.type,T.memoizedProps,T.stateNode,c,b,I)}y&&Ps(d)}else d.stateNode=Me(b,c,y,d)}return gr(d),null;case 13:if(je(_n),b=d.memoizedState,yn&&di!==null&&d.mode&1&&!(d.flags&128)){for(c=di;c;)c=Bo(c);return bc(),d.flags|=98560,d}if(b!==null&&b.dehydrated!==null){if(b=Td(d),c===null){if(!b)throw Error(o(318));if(!Ve)throw Error(o(344));if(c=d.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Py(c,d)}else bc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return gr(d),null}return Qi!==null&&(Nx(Qi),Qi=null),d.flags&128?(d.lanes=y,d):(b=b!==null,y=!1,c===null?Td(d):y=c.memoizedState!==null,b&&!y&&(d.child.flags|=8192,d.mode&1&&(c===null||_n.current&1?Vn===0&&(Vn=3):kx())),d.updateQueue!==null&&(d.flags|=4),gr(d),null);case 4:return Tc(),Dd(c,d),c===null&&Ne(d.stateNode.containerInfo),gr(d),null;case 10:return Gy(d.type._context),gr(d),null;case 17:return Ut(d.type)&&zt(),gr(d),null;case 19:if(je(_n),T=d.memoizedState,T===null)return gr(d),null;if(b=(d.flags&128)!==0,I=T.rendering,I===null)if(b)Od(T,!1);else{if(Vn!==0||c!==null&&c.flags&128)for(c=d.child;c!==null;){if(I=bp(c),I!==null){for(d.flags|=128,Od(T,!1),c=I.updateQueue,c!==null&&(d.updateQueue=c,d.flags|=4),d.subtreeFlags=0,c=y,b=d.child;b!==null;)y=b,T=c,y.flags&=14680066,I=y.alternate,I===null?(y.childLanes=0,y.lanes=T,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=I.childLanes,y.lanes=I.lanes,y.child=I.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=I.memoizedProps,y.memoizedState=I.memoizedState,y.updateQueue=I.updateQueue,y.type=I.type,T=I.dependencies,y.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),b=b.sibling;return at(_n,_n.current&1|2),d.child}c=c.sibling}T.tail!==null&&Jn()>Cx&&(d.flags|=128,b=!0,Od(T,!1),d.lanes=4194304)}else{if(!b)if(c=bp(I),c!==null){if(d.flags|=128,b=!0,c=c.updateQueue,c!==null&&(d.updateQueue=c,d.flags|=4),Od(T,!0),T.tail===null&&T.tailMode==="hidden"&&!I.alternate&&!yn)return gr(d),null}else 2*Jn()-T.renderingStartTime>Cx&&y!==1073741824&&(d.flags|=128,b=!0,Od(T,!1),d.lanes=4194304);T.isBackwards?(I.sibling=d.child,d.child=I):(c=T.last,c!==null?c.sibling=I:d.child=I,T.last=I)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=Jn(),d.sibling=null,c=_n.current,at(_n,b?c&1|2:c&1),d):(gr(d),null);case 22:case 23:return Lx(),b=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(d.flags|=8192),b&&d.mode&1?fi&1073741824&&(gr(d),Je&&d.subtreeFlags&6&&(d.flags|=8192)):gr(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var rO=a.ReactCurrentOwner,hi=!1;function Nr(c,d,y,b){d.child=c===null?WM(d,null,y,b):Mc(d,c.child,y,b)}function yE(c,d,y,b,T){y=y.render;var I=d.ref;return _c(d,T),b=sx(c,d,y,b,I,T),y=ox(),c!==null&&!hi?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~T,ro(c,d,T)):(yn&&y&&Yy(d),d.flags|=1,Nr(c,d,b,T),d.child)}function xE(c,d,y,b,T){if(c===null){var I=y.type;return typeof I=="function"&&!Dx(I)&&I.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=I,_E(c,d,I,b,T)):(c=Qp(y.type,null,b,d,d.mode,T),c.ref=d.ref,c.return=d,d.child=c)}if(I=c.child,!(c.lanes&T)){var G=I.memoizedProps;if(y=y.compare,y=y!==null?y:pp,y(G,b)&&c.ref===d.ref)return ro(c,d,T)}return d.flags|=1,c=Yo(I,b),c.ref=d.ref,c.return=d,d.child=c}function _E(c,d,y,b,T){if(c!==null&&pp(c.memoizedProps,b)&&c.ref===d.ref)if(hi=!1,(c.lanes&T)!==0)c.flags&131072&&(hi=!0);else return d.lanes=c.lanes,ro(c,d,T);return hx(c,d,y,b,T)}function wE(c,d,y){var b=d.pendingProps,T=b.children,I=c!==null?c.memoizedState:null;if(b.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},at(Cc,fi),fi|=y;else if(y&1073741824)d.memoizedState={baseLanes:0,cachePool:null},b=I!==null?I.baseLanes:y,at(Cc,fi),fi|=b;else return c=I!==null?I.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null},d.updateQueue=null,at(Cc,fi),fi|=c,null;else I!==null?(b=I.baseLanes|y,d.memoizedState=null):b=y,at(Cc,fi),fi|=b;return Nr(c,d,T,y),d.child}function SE(c,d){var y=d.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function hx(c,d,y,b,T){var I=Ut(y)?Vt:kt.current;return I=ut(d,I),_c(d,T),y=sx(c,d,y,b,I,T),b=ox(),c!==null&&!hi?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~T,ro(c,d,T)):(yn&&b&&Yy(d),d.flags|=1,Nr(c,d,y,T),d.child)}function bE(c,d,y,b,T){if(Ut(y)){var I=!0;Kn(d)}else I=!1;if(_c(d,T),d.stateNode===null)c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),UM(d,y,b),qy(d,y,b,T),b=!0;else if(c===null){var G=d.stateNode,ee=d.memoizedProps;G.props=ee;var me=G.context,Oe=y.contextType;typeof Oe=="object"&&Oe!==null?Oe=Ri(Oe):(Oe=Ut(y)?Vt:kt.current,Oe=ut(d,Oe));var it=y.getDerivedStateFromProps,bt=typeof it=="function"||typeof G.getSnapshotBeforeUpdate=="function";bt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ee!==b||me!==Oe)&&FM(d,G,b,Oe),Vo=!1;var yt=d.memoizedState;G.state=yt,yp(d,b,G,T),me=d.memoizedState,ee!==b||yt!==me||It.current||Vo?(typeof it=="function"&&(Xy(d,y,it,b),me=d.memoizedState),(ee=Vo||OM(d,y,ee,b,yt,me,Oe))?(bt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=me),G.props=b,G.state=me,G.context=Oe,b=ee):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{G=d.stateNode,NM(c,d),ee=d.memoizedProps,Oe=d.type===d.elementType?ee:Zi(d.type,ee),G.props=Oe,bt=d.pendingProps,yt=G.context,me=y.contextType,typeof me=="object"&&me!==null?me=Ri(me):(me=Ut(y)?Vt:kt.current,me=ut(d,me));var an=y.getDerivedStateFromProps;(it=typeof an=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ee!==bt||yt!==me)&&FM(d,G,b,me),Vo=!1,yt=d.memoizedState,G.state=yt,yp(d,b,G,T);var ht=d.memoizedState;ee!==bt||yt!==ht||It.current||Vo?(typeof an=="function"&&(Xy(d,y,an,b),ht=d.memoizedState),(Oe=Vo||OM(d,y,Oe,b,yt,ht,me)||!1)?(it||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(b,ht,me),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(b,ht,me)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||ee===c.memoizedProps&&yt===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ee===c.memoizedProps&&yt===c.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=ht),G.props=b,G.state=ht,G.context=me,b=Oe):(typeof G.componentDidUpdate!="function"||ee===c.memoizedProps&&yt===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ee===c.memoizedProps&&yt===c.memoizedState||(d.flags|=1024),b=!1)}return fx(c,d,y,b,I,T)}function fx(c,d,y,b,T,I){SE(c,d);var G=(d.flags&128)!==0;if(!b&&!G)return T&&jo(d,y,!1),ro(c,d,I);b=d.stateNode,rO.current=d;var ee=G&&typeof y.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,c!==null&&G?(d.child=Mc(d,c.child,null,I),d.child=Mc(d,null,ee,I)):Nr(c,d,ee,I),d.memoizedState=b.state,T&&jo(d,y,!0),d.child}function ME(c){var d=c.stateNode;d.pendingContext?fr(c,d.pendingContext,d.pendingContext!==d.context):d.context&&fr(c,d.context,!1),ex(c,d.containerInfo)}function EE(c,d,y,b,T){return bc(),Qy(T),d.flags|=256,Nr(c,d,y,b),d.child}var Lp={dehydrated:null,treeContext:null,retryLane:0};function kp(c){return{baseLanes:c,cachePool:null}}function TE(c,d,y){var b=d.pendingProps,T=_n.current,I=!1,G=(d.flags&128)!==0,ee;if((ee=G)||(ee=c!==null&&c.memoizedState===null?!1:(T&2)!==0),ee?(I=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),at(_n,T&1),c===null)return Zy(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(d.mode&1?tl(c)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(T=b.children,c=b.fallback,I?(b=d.mode,I=d.child,T={mode:"hidden",children:T},!(b&1)&&I!==null?(I.childLanes=0,I.pendingProps=T):I=em(T,b,0,null),c=ul(c,b,y,null),I.return=d,c.return=d,I.sibling=c,d.child=I,d.child.memoizedState=kp(y),d.memoizedState=Lp,c):px(d,T));if(T=c.memoizedState,T!==null){if(ee=T.dehydrated,ee!==null){if(G)return d.flags&256?(d.flags&=-257,Dp(c,d,y,Error(o(422)))):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(I=b.fallback,T=d.mode,b=em({mode:"visible",children:b.children},T,0,null),I=ul(I,T,y,null),I.flags|=2,b.return=d,I.return=d,b.sibling=I,d.child=b,d.mode&1&&Mc(d,c.child,null,y),d.child.memoizedState=kp(y),d.memoizedState=Lp,I);if(!(d.mode&1))d=Dp(c,d,y,null);else if(tl(ee))d=Dp(c,d,y,Error(o(419)));else if(b=(y&c.childLanes)!==0,hi||b){if(b=Un,b!==null){switch(y&-y){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}b=I&(b.suspendedLanes|y)?0:I,b!==0&&b!==T.retryLane&&(T.retryLane=b,ki(c,b,-1))}kx(),d=Dp(c,d,y,Error(o(421)))}else bs(ee)?(d.flags|=128,d.child=c.child,d=gO.bind(null,c),op(ee,d),d=null):(y=T.treeContext,Ve&&(di=yc(ee),ui=d,yn=!0,Qi=null,Ed=!1,y!==null&&(Pi[Ii++]=eo,Pi[Ii++]=to,Pi[Ii++]=nl,eo=y.id,to=y.overflow,nl=d)),d=px(d,d.pendingProps.children),d.flags|=4096);return d}return I?(b=CE(c,d,b.children,b.fallback,y),I=d.child,T=c.child.memoizedState,I.memoizedState=T===null?kp(y):{baseLanes:T.baseLanes|y,cachePool:null},I.childLanes=c.childLanes&~y,d.memoizedState=Lp,b):(y=AE(c,d,b.children,y),d.memoizedState=null,y)}return I?(b=CE(c,d,b.children,b.fallback,y),I=d.child,T=c.child.memoizedState,I.memoizedState=T===null?kp(y):{baseLanes:T.baseLanes|y,cachePool:null},I.childLanes=c.childLanes&~y,d.memoizedState=Lp,b):(y=AE(c,d,b.children,y),d.memoizedState=null,y)}function px(c,d){return d=em({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function AE(c,d,y,b){var T=c.child;return c=T.sibling,y=Yo(T,{mode:"visible",children:y}),!(d.mode&1)&&(y.lanes=b),y.return=d,y.sibling=null,c!==null&&(b=d.deletions,b===null?(d.deletions=[c],d.flags|=16):b.push(c)),d.child=y}function CE(c,d,y,b,T){var I=d.mode;c=c.child;var G=c.sibling,ee={mode:"hidden",children:y};return!(I&1)&&d.child!==c?(y=d.child,y.childLanes=0,y.pendingProps=ee,d.deletions=null):(y=Yo(c,ee),y.subtreeFlags=c.subtreeFlags&14680064),G!==null?b=Yo(G,b):(b=ul(b,I,T,null),b.flags|=2),b.return=d,y.return=d,y.sibling=b,d.child=y,b}function Dp(c,d,y,b){return b!==null&&Qy(b),Mc(d,c.child,null,y),c=px(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function RE(c,d,y){c.lanes|=d;var b=c.alternate;b!==null&&(b.lanes|=d),Wy(c.return,d,y)}function mx(c,d,y,b,T){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:T}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=b,I.tail=y,I.tailMode=T)}function PE(c,d,y){var b=d.pendingProps,T=b.revealOrder,I=b.tail;if(Nr(c,d,b.children,y),b=_n.current,b&2)b=b&1|2,d.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&RE(c,y,d);else if(c.tag===19)RE(c,y,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(at(_n,b),!(d.mode&1))d.memoizedState=null;else switch(T){case"forwards":for(y=d.child,T=null;y!==null;)c=y.alternate,c!==null&&bp(c)===null&&(T=y),y=y.sibling;y=T,y===null?(T=d.child,d.child=null):(T=y.sibling,y.sibling=null),mx(d,!1,T,y,I);break;case"backwards":for(y=null,T=d.child,d.child=null;T!==null;){if(c=T.alternate,c!==null&&bp(c)===null){d.child=T;break}c=T.sibling,T.sibling=y,y=T,T=c}mx(d,!0,y,null,I);break;case"together":mx(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ro(c,d,y){if(c!==null&&(d.dependencies=c.dependencies),Rc|=d.lanes,!(y&d.childLanes))return null;if(c!==null&&d.child!==c.child)throw Error(o(153));if(d.child!==null){for(c=d.child,y=Yo(c,c.pendingProps),d.child=y,y.return=d;c.sibling!==null;)c=c.sibling,y=y.sibling=Yo(c,c.pendingProps),y.return=d;y.sibling=null}return d.child}function iO(c,d,y){switch(d.tag){case 3:ME(d),bc();break;case 5:$M(d);break;case 1:Ut(d.type)&&Kn(d);break;case 4:ex(d,d.stateNode.containerInfo);break;case 10:IM(d,d.type._context,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(at(_n,_n.current&1),d.flags|=128,null):y&d.child.childLanes?TE(c,d,y):(at(_n,_n.current&1),c=ro(c,d,y),c!==null?c.sibling:null);at(_n,_n.current&1);break;case 19:if(b=(y&d.childLanes)!==0,c.flags&128){if(b)return PE(c,d,y);d.flags|=128}var T=d.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),at(_n,_n.current),b)break;return null;case 22:case 23:return d.lanes=0,wE(c,d,y)}return ro(c,d,y)}function sO(c,d){switch(Ky(d),d.tag){case 1:return Ut(d.type)&&zt(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Tc(),je(It),je(kt),rx(),c=d.flags,c&65536&&!(c&128)?(d.flags=c&-65537|128,d):null;case 5:return tx(d),null;case 13:if(je(_n),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(o(340));bc()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return je(_n),null;case 4:return Tc(),null;case 10:return Gy(d.type._context),null;case 22:case 23:return Lx(),null;case 24:return null;default:return null}}var Op=!1,sl=!1,oO=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Up(c,d){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(b){Yr(c,d,b)}else y.current=null}function gx(c,d,y){try{y()}catch(b){Yr(c,d,b)}}var IE=!1;function aO(c,d){for(V(c.containerInfo),Xe=d;Xe!==null;)if(c=Xe,d=c.child,(c.subtreeFlags&1028)!==0&&d!==null)d.return=c,Xe=d;else for(;Xe!==null;){c=Xe;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,T=y.memoizedState,I=c.stateNode,G=I.getSnapshotBeforeUpdate(c.elementType===c.type?b:Zi(c.type,b),T);I.__reactInternalSnapshotBeforeUpdate=G}break;case 3:Je&&Ue(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ee){Yr(c,c.return,ee)}if(d=c.sibling,d!==null){d.return=c.return,Xe=d;break}Xe=c.return}return y=IE,IE=!1,y}function ol(c,d,y){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var T=b=b.next;do{if((T.tag&c)===c){var I=T.destroy;T.destroy=void 0,I!==void 0&&gx(d,y,I)}T=T.next}while(T!==b)}}function Ud(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&c)===c){var b=y.create;y.destroy=b()}y=y.next}while(y!==d)}}function vx(c){var d=c.ref;if(d!==null){var y=c.stateNode;switch(c.tag){case 5:c=K(y);break;default:c=y}typeof d=="function"?d(c):d.current=c}}function NE(c,d,y){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(hp,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(c=d.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var b=c=c.next;do{var T=b,I=T.destroy;T=T.tag,I!==void 0&&(T&2||T&4)&&gx(d,y,I),b=b.next}while(b!==c)}break;case 1:if(Up(d,y),c=d.stateNode,typeof c.componentWillUnmount=="function")try{c.props=d.memoizedProps,c.state=d.memoizedState,c.componentWillUnmount()}catch(G){Yr(d,y,G)}break;case 5:Up(d,y);break;case 4:Je?FE(c,d,y):ft&&ft&&(d=d.stateNode.containerInfo,y=be(d),Gt(d,y))}}function LE(c,d,y){for(var b=d;;)if(NE(c,b,y),b.child===null||Je&&b.tag===4){if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function kE(c){var d=c.alternate;d!==null&&(c.alternate=null,kE(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&Ie(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function DE(c){return c.tag===5||c.tag===3||c.tag===4}function OE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||DE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function UE(c){if(Je){e:{for(var d=c.return;d!==null;){if(DE(d))break e;d=d.return}throw Error(o(160))}var y=d;switch(y.tag){case 5:d=y.stateNode,y.flags&32&&(ae(d),y.flags&=-33),y=OE(c),xx(c,y,d);break;case 3:case 4:d=y.stateNode.containerInfo,y=OE(c),yx(c,y,d);break;default:throw Error(o(161))}}}function yx(c,d,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?Ye(y,c,d):Ze(y,c);else if(b!==4&&(c=c.child,c!==null))for(yx(c,d,y),c=c.sibling;c!==null;)yx(c,d,y),c=c.sibling}function xx(c,d,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?Ce(y,c,d):pe(y,c);else if(b!==4&&(c=c.child,c!==null))for(xx(c,d,y),c=c.sibling;c!==null;)xx(c,d,y),c=c.sibling}function FE(c,d,y){for(var b=d,T=!1,I,G;;){if(!T){T=b.return;e:for(;;){if(T===null)throw Error(o(160));switch(I=T.stateNode,T.tag){case 5:G=!1;break e;case 3:I=I.containerInfo,G=!0;break e;case 4:I=I.containerInfo,G=!0;break e}T=T.return}T=!0}if(b.tag===5||b.tag===6)LE(c,b,y),G?Y(I,b.stateNode):ct(I,b.stateNode);else if(b.tag===18)G?ky(I,b.stateNode):Ly(I,b.stateNode);else if(b.tag===4){if(b.child!==null){I=b.stateNode.containerInfo,G=!0,b.child.return=b,b=b.child;continue}}else if(NE(c,b,y),b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return,b.tag===4&&(T=!1)}b.sibling.return=b.return,b=b.sibling}}function _x(c,d){if(Je){switch(d.tag){case 0:case 11:case 14:case 15:ol(3,d,d.return),Ud(3,d),ol(5,d,d.return);return;case 1:return;case 5:var y=d.stateNode;if(y!=null){var b=d.memoizedProps;c=c!==null?c.memoizedProps:b;var T=d.type,I=d.updateQueue;d.updateQueue=null,I!==null&&nt(y,I,T,c,b,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));y=d.memoizedProps,Fe(d.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:Ve&&c!==null&&c.memoizedState.isDehydrated&&up(d.stateNode.containerInfo);return;case 12:return;case 13:Fp(d);return;case 19:Fp(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:ol(3,d,d.return),Ud(3,d),ol(5,d,d.return);return;case 12:return;case 13:Fp(d);return;case 19:Fp(d);return;case 3:Ve&&c!==null&&c.memoizedState.isDehydrated&&up(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(ft){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Gt(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Fp(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new oO),d.forEach(function(b){var T=vO.bind(null,c,b);y.has(b)||(y.add(b),b.then(T,T))})}}function lO(c,d){for(Xe=d;Xe!==null;){d=Xe;var y=d.deletions;if(y!==null)for(var b=0;b<y.length;b++){var T=y[b];try{var I=c;Je?FE(I,T,d):LE(I,T,d);var G=T.alternate;G!==null&&(G.return=null),T.return=null}catch(dt){Yr(T,d,dt)}}if(y=d.child,d.subtreeFlags&12854&&y!==null)y.return=d,Xe=y;else for(;Xe!==null;){d=Xe;try{var ee=d.flags;if(ee&32&&Je&&ae(d.stateNode),ee&512){var me=d.alternate;if(me!==null){var Oe=me.ref;Oe!==null&&(typeof Oe=="function"?Oe(null):Oe.current=null)}}if(ee&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var it=d.alternate;(it===null||it.memoizedState===null)&&(Ax=Jn())}break;case 22:var bt=d.memoizedState!==null,yt=d.alternate,an=yt!==null&&yt.memoizedState!==null;if(y=d,Je){e:if(b=y,T=bt,I=null,Je)for(var ht=b;;){if(ht.tag===5){if(I===null){I=ht;var vr=ht.stateNode;T?fe(vr):_e(ht.stateNode,ht.memoizedProps)}}else if(ht.tag===6){if(I===null){var Oi=ht.stateNode;T?$(Oi):Se(Oi,ht.memoizedProps)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===b)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===b)break;for(;ht.sibling===null;){if(ht.return===null||ht.return===b)break e;I===ht&&(I=null),ht=ht.return}I===ht&&(I=null),ht.sibling.return=ht.return,ht=ht.sibling}}if(bt&&!an&&y.mode&1){Xe=y;for(var le=y.child;le!==null;){for(y=Xe=le;Xe!==null;){b=Xe;var te=b.child;switch(b.tag){case 0:case 11:case 14:case 15:ol(4,b,b.return);break;case 1:Up(b,b.return);var he=b.stateNode;if(typeof he.componentWillUnmount=="function"){var Ke=b.return;try{he.props=b.memoizedProps,he.state=b.memoizedState,he.componentWillUnmount()}catch(dt){Yr(b,Ke,dt)}}break;case 5:Up(b,b.return);break;case 22:if(b.memoizedState!==null){jE(y);continue}}te!==null?(te.return=b,Xe=te):jE(y)}le=le.sibling}}}switch(ee&4102){case 2:UE(d),d.flags&=-3;break;case 6:UE(d),d.flags&=-3,_x(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,_x(d.alternate,d);break;case 4:_x(d.alternate,d)}}catch(dt){Yr(d,d.return,dt)}if(y=d.sibling,y!==null){y.return=d.return,Xe=y;break}Xe=d.return}}}function cO(c,d,y){Xe=c,zE(c)}function zE(c,d,y){for(var b=(c.mode&1)!==0;Xe!==null;){var T=Xe,I=T.child;if(T.tag===22&&b){var G=T.memoizedState!==null||Op;if(!G){var ee=T.alternate,me=ee!==null&&ee.memoizedState!==null||sl;ee=Op;var Oe=sl;if(Op=G,(sl=me)&&!Oe)for(Xe=T;Xe!==null;)G=Xe,me=G.child,G.tag===22&&G.memoizedState!==null?HE(T):me!==null?(me.return=G,Xe=me):HE(T);for(;I!==null;)Xe=I,zE(I),I=I.sibling;Xe=T,Op=ee,sl=Oe}BE(c)}else T.subtreeFlags&8772&&I!==null?(I.return=T,Xe=I):BE(c)}}function BE(c){for(;Xe!==null;){var d=Xe;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:sl||Ud(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!sl)if(y===null)b.componentDidMount();else{var T=d.elementType===d.type?y.memoizedProps:Zi(d.type,y.memoizedProps);b.componentDidUpdate(T,y.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var I=d.updateQueue;I!==null&&kM(d,I,b);break;case 3:var G=d.updateQueue;if(G!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=K(d.child.stateNode);break;case 1:y=d.child.stateNode}kM(d,G,y)}break;case 5:var ee=d.stateNode;y===null&&d.flags&4&&tt(ee,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Ve&&d.memoizedState===null){var me=d.alternate;if(me!==null){var Oe=me.memoizedState;if(Oe!==null){var it=Oe.dehydrated;it!==null&&Ny(it)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}sl||d.flags&512&&vx(d)}catch(bt){Yr(d,d.return,bt)}}if(d===c){Xe=null;break}if(y=d.sibling,y!==null){y.return=d.return,Xe=y;break}Xe=d.return}}function jE(c){for(;Xe!==null;){var d=Xe;if(d===c){Xe=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Xe=y;break}Xe=d.return}}function HE(c){for(;Xe!==null;){var d=Xe;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{Ud(4,d)}catch(me){Yr(d,y,me)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var T=d.return;try{b.componentDidMount()}catch(me){Yr(d,T,me)}}var I=d.return;try{vx(d)}catch(me){Yr(d,I,me)}break;case 5:var G=d.return;try{vx(d)}catch(me){Yr(d,G,me)}}}catch(me){Yr(d,d.return,me)}if(d===c){Xe=null;break}var ee=d.sibling;if(ee!==null){ee.return=d.return,Xe=ee;break}Xe=d.return}}var zp=0,Bp=1,jp=2,Hp=3,Vp=4;if(typeof Symbol=="function"&&Symbol.for){var Fd=Symbol.for;zp=Fd("selector.component"),Bp=Fd("selector.has_pseudo_class"),jp=Fd("selector.role"),Hp=Fd("selector.test_id"),Vp=Fd("selector.text")}function wx(c){var d=B(c);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(c=qe(c),c===null)throw Error(o(362));return c.stateNode.current}function Sx(c,d){switch(d.$$typeof){case zp:if(c.type===d.value)return!0;break;case Bp:e:{d=d.value,c=[c,0];for(var y=0;y<c.length;){var b=c[y++],T=c[y++],I=d[T];if(b.tag!==5||!U(b)){for(;I!=null&&Sx(b,I);)T++,I=d[T];if(T===d.length){d=!0;break e}else for(b=b.child;b!==null;)c.push(b,T),b=b.sibling}}d=!1}return d;case jp:if(c.tag===5&&se(c.stateNode,d.value))return!0;break;case Vp:if((c.tag===5||c.tag===6)&&(c=H(c),c!==null&&0<=c.indexOf(d.value)))return!0;break;case Hp:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function bx(c){switch(c.$$typeof){case zp:return"<"+(P(c.value)||"Unknown")+">";case Bp:return":has("+(bx(c)||"")+")";case jp:return'[role="'+c.value+'"]';case Vp:return'"'+c.value+'"';case Hp:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function VE(c,d){var y=[];c=[c,0];for(var b=0;b<c.length;){var T=c[b++],I=c[b++],G=d[I];if(T.tag!==5||!U(T)){for(;G!=null&&Sx(T,G);)I++,G=d[I];if(I===d.length)y.push(T);else for(T=T.child;T!==null;)c.push(T,I),T=T.sibling}}return y}function Mx(c,d){if(!Ae)throw Error(o(363));c=wx(c),c=VE(c,d),d=[],c=Array.from(c);for(var y=0;y<c.length;){var b=c[y++];if(b.tag===5)U(b)||d.push(b.stateNode);else for(b=b.child;b!==null;)c.push(b),b=b.sibling}return d}var uO=Math.ceil,Gp=a.ReactCurrentDispatcher,Ex=a.ReactCurrentOwner,In=a.ReactCurrentBatchConfig,Dt=0,Un=null,Fn=null,or=0,fi=0,Cc=mt(0),Vn=0,zd=null,Rc=0,Wp=0,Tx=0,Bd=null,Xr=null,Ax=0,Cx=1/0;function Pc(){Cx=Jn()+500}var $p=!1,Rx=null,Wo=null,Xp=!1,$o=null,qp=0,jd=0,Px=null,Yp=-1,Kp=0;function Lr(){return Dt&6?Jn():Yp!==-1?Yp:Yp=Jn()}function Xo(c){return c.mode&1?Dt&2&&or!==0?or&-or:$D.transition!==null?(Kp===0&&(c=Hn,Hn<<=1,!(Hn&4194240)&&(Hn=64),Kp=c),Kp):(c=Kt,c!==0?c:Ee()):1}function ki(c,d,y){if(50<jd)throw jd=0,Px=null,Error(o(185));var b=Jp(c,d);return b===null?null:(Md(b,d,y),(!(Dt&2)||b!==Un)&&(b===Un&&(!(Dt&2)&&(Wp|=d),Vn===4&&qo(b,or)),qr(b,y),d===1&&Dt===0&&!(c.mode&1)&&(Pc(),fp&&Ts())),b)}function Jp(c,d){c.lanes|=d;var y=c.alternate;for(y!==null&&(y.lanes|=d),y=c,c=c.return;c!==null;)c.childLanes|=d,y=c.alternate,y!==null&&(y.childLanes|=d),y=c,c=c.return;return y.tag===3?y.stateNode:null}function qr(c,d){var y=c.callbackNode;UD(c,d);var b=dp(c,c===Un?or:0);if(b===0)y!==null&&RM(y),c.callbackNode=null,c.callbackPriority=0;else if(d=b&-b,c.callbackPriority!==d){if(y!=null&&RM(y),d===1)c.tag===0?WD(WE.bind(null,c)):PM(WE.bind(null,c)),ge?De(function(){Dt===0&&Ts()}):Fy(zy,Ts),y=null;else{switch(CM(b)){case 1:y=zy;break;case 4:y=jD;break;case 16:y=By;break;case 536870912:y=HD;break;default:y=By}y=eT(y,GE.bind(null,c))}c.callbackPriority=d,c.callbackNode=y}}function GE(c,d){if(Yp=-1,Kp=0,Dt&6)throw Error(o(327));var y=c.callbackNode;if(cl()&&c.callbackNode!==y)return null;var b=dp(c,c===Un?or:0);if(b===0)return null;if(b&30||b&c.expiredLanes||d)d=Zp(c,b);else{d=b;var T=Dt;Dt|=2;var I=qE();(Un!==c||or!==d)&&(Pc(),al(c,d));do try{fO();break}catch(ee){XE(c,ee)}while(!0);Vy(),Gp.current=I,Dt=T,Fn!==null?d=0:(Un=null,or=0,d=Vn)}if(d!==0){if(d===2&&(T=Dy(c),T!==0&&(b=T,d=Ix(c,T))),d===1)throw y=zd,al(c,0),qo(c,b),qr(c,Jn()),y;if(d===6)qo(c,b);else{if(T=c.current.alternate,!(b&30)&&!dO(T)&&(d=Zp(c,b),d===2&&(I=Dy(c),I!==0&&(b=I,d=Ix(c,I))),d===1))throw y=zd,al(c,0),qo(c,b),qr(c,Jn()),y;switch(c.finishedWork=T,c.finishedLanes=b,d){case 0:case 1:throw Error(o(345));case 2:ll(c,Xr);break;case 3:if(qo(c,b),(b&130023424)===b&&(d=Ax+500-Jn(),10<d)){if(dp(c,0)!==0)break;if(T=c.suspendedLanes,(T&b)!==b){Lr(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Re(ll.bind(null,c,Xr),d);break}ll(c,Xr);break;case 4:if(qo(c,b),(b&4194240)===b)break;for(d=c.eventTimes,T=-1;0<b;){var G=31-Ht(b);I=1<<G,G=d[G],G>T&&(T=G),b&=~I}if(b=T,b=Jn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*uO(b/1960))-b,10<b){c.timeoutHandle=Re(ll.bind(null,c,Xr),b);break}ll(c,Xr);break;case 5:ll(c,Xr);break;default:throw Error(o(329))}}}return qr(c,Jn()),c.callbackNode===y?GE.bind(null,c):null}function Ix(c,d){var y=Bd;return c.current.memoizedState.isDehydrated&&(al(c,d).flags|=256),c=Zp(c,d),c!==2&&(d=Xr,Xr=y,d!==null&&Nx(d)),c}function Nx(c){Xr===null?Xr=c:Xr.push.apply(Xr,c)}function dO(c){for(var d=c;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var b=0;b<y.length;b++){var T=y[b],I=T.getSnapshot;T=T.value;try{if(!Es(I(),T))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function qo(c,d){for(d&=~Tx,d&=~Wp,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var y=31-Ht(d),b=1<<y;c[y]=-1,d&=~b}}function WE(c){if(Dt&6)throw Error(o(327));cl();var d=dp(c,0);if(!(d&1))return qr(c,Jn()),null;var y=Zp(c,d);if(c.tag!==0&&y===2){var b=Dy(c);b!==0&&(d=b,y=Ix(c,b))}if(y===1)throw y=zd,al(c,0),qo(c,d),qr(c,Jn()),y;if(y===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,ll(c,Xr),qr(c,Jn()),null}function $E(c){$o!==null&&$o.tag===0&&!(Dt&6)&&cl();var d=Dt;Dt|=1;var y=In.transition,b=Kt;try{if(In.transition=null,Kt=1,c)return c()}finally{Kt=b,In.transition=y,Dt=d,!(Dt&6)&&Ts()}}function Lx(){fi=Cc.current,je(Cc)}function al(c,d){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==lt&&(c.timeoutHandle=lt,He(y)),Fn!==null)for(y=Fn.return;y!==null;){var b=y;switch(Ky(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&zt();break;case 3:Tc(),je(It),je(kt),rx();break;case 5:tx(b);break;case 4:Tc();break;case 13:je(_n);break;case 19:je(_n);break;case 10:Gy(b.type._context);break;case 22:case 23:Lx()}y=y.return}if(Un=c,Fn=c=Yo(c.current,null),or=fi=d,Vn=0,zd=null,Tx=Wp=Rc=0,Xr=Bd=null,As!==null){for(d=0;d<As.length;d++)if(y=As[d],b=y.interleaved,b!==null){y.interleaved=null;var T=b.next,I=y.pending;if(I!==null){var G=I.next;I.next=T,b.next=G}y.pending=b}As=null}return c}function XE(c,d){do{var y=Fn;try{if(Vy(),Mp.current=Pp,Ep){for(var b=Tn.memoizedState;b!==null;){var T=b.queue;T!==null&&(T.pending=null),b=b.next}Ep=!1}if(Ac=0,Zn=pr=Tn=null,Pd=!1,Id=0,Ex.current=null,y===null||y.return===null){Vn=1,zd=d,Fn=null;break}e:{var I=c,G=y.return,ee=y,me=d;if(d=or,ee.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Oe=me,it=ee,bt=it.tag;if(!(it.mode&1)&&(bt===0||bt===11||bt===15)){var yt=it.alternate;yt?(it.updateQueue=yt.updateQueue,it.memoizedState=yt.memoizedState,it.lanes=yt.lanes):(it.updateQueue=null,it.memoizedState=null)}var an=pE(G);if(an!==null){an.flags&=-257,mE(an,G,ee,I,d),an.mode&1&&fE(I,Oe,d),d=an,me=Oe;var ht=d.updateQueue;if(ht===null){var vr=new Set;vr.add(me),d.updateQueue=vr}else ht.add(me);break e}else{if(!(d&1)){fE(I,Oe,d),kx();break e}me=Error(o(426))}}else if(yn&&ee.mode&1){var Oi=pE(G);if(Oi!==null){!(Oi.flags&65536)&&(Oi.flags|=256),mE(Oi,G,ee,I,d),Qy(me);break e}}I=me,Vn!==4&&(Vn=2),Bd===null?Bd=[I]:Bd.push(I),me=ux(me,ee),ee=G;do{switch(ee.tag){case 3:ee.flags|=65536,d&=-d,ee.lanes|=d;var le=dE(ee,me,d);LM(ee,le);break e;case 1:I=me;var te=ee.type,he=ee.stateNode;if(!(ee.flags&128)&&(typeof te.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Wo===null||!Wo.has(he)))){ee.flags|=65536,d&=-d,ee.lanes|=d;var Ke=hE(ee,I,d);LM(ee,Ke);break e}}ee=ee.return}while(ee!==null)}KE(y)}catch(dt){d=dt,Fn===y&&y!==null&&(Fn=y=y.return);continue}break}while(!0)}function qE(){var c=Gp.current;return Gp.current=Pp,c===null?Pp:c}function kx(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),Un===null||!(Rc&268435455)&&!(Wp&268435455)||qo(Un,or)}function Zp(c,d){var y=Dt;Dt|=2;var b=qE();Un===c&&or===d||al(c,d);do try{hO();break}catch(T){XE(c,T)}while(!0);if(Vy(),Dt=y,Gp.current=b,Fn!==null)throw Error(o(261));return Un=null,or=0,Vn}function hO(){for(;Fn!==null;)YE(Fn)}function fO(){for(;Fn!==null&&!zD();)YE(Fn)}function YE(c){var d=QE(c.alternate,c,fi);c.memoizedProps=c.pendingProps,d===null?KE(c):Fn=d,Ex.current=null}function KE(c){var d=c;do{var y=d.alternate;if(c=d.return,d.flags&32768){if(y=sO(y,d),y!==null){y.flags&=32767,Fn=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Vn=6,Fn=null;return}}else if(y=nO(y,d,fi),y!==null){Fn=y;return}if(d=d.sibling,d!==null){Fn=d;return}Fn=d=c}while(d!==null);Vn===0&&(Vn=5)}function ll(c,d){var y=Kt,b=In.transition;try{In.transition=null,Kt=1,pO(c,d,y)}finally{In.transition=b,Kt=y}return null}function pO(c,d,y){do cl();while($o!==null);if(Dt&6)throw Error(o(327));var b=c.finishedWork,T=c.finishedLanes;if(b===null)return null;if(c.finishedWork=null,c.finishedLanes=0,b===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var I=b.lanes|b.childLanes;if(FD(c,I),c===Un&&(Fn=Un=null,or=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||Xp||(Xp=!0,eT(By,function(){return cl(),null})),I=(b.flags&15990)!==0,b.subtreeFlags&15990||I){I=In.transition,In.transition=null;var G=Kt;Kt=1;var ee=Dt;Dt|=4,Ex.current=null,aO(c,b),lO(c,b),X(c.containerInfo),c.current=b,cO(b),BD(),Dt=ee,Kt=G,In.transition=I}else c.current=b;if(Xp&&(Xp=!1,$o=c,qp=T),I=c.pendingLanes,I===0&&(Wo=null),VD(b.stateNode),qr(c,Jn()),d!==null)for(y=c.onRecoverableError,b=0;b<d.length;b++)y(d[b]);if($p)throw $p=!1,c=Rx,Rx=null,c;return qp&1&&c.tag!==0&&cl(),I=c.pendingLanes,I&1?c===Px?jd++:(jd=0,Px=c):jd=0,Ts(),null}function cl(){if($o!==null){var c=CM(qp),d=In.transition,y=Kt;try{if(In.transition=null,Kt=16>c?16:c,$o===null)var b=!1;else{if(c=$o,$o=null,qp=0,Dt&6)throw Error(o(331));var T=Dt;for(Dt|=4,Xe=c.current;Xe!==null;){var I=Xe,G=I.child;if(Xe.flags&16){var ee=I.deletions;if(ee!==null){for(var me=0;me<ee.length;me++){var Oe=ee[me];for(Xe=Oe;Xe!==null;){var it=Xe;switch(it.tag){case 0:case 11:case 15:ol(8,it,I)}var bt=it.child;if(bt!==null)bt.return=it,Xe=bt;else for(;Xe!==null;){it=Xe;var yt=it.sibling,an=it.return;if(kE(it),it===Oe){Xe=null;break}if(yt!==null){yt.return=an,Xe=yt;break}Xe=an}}}var ht=I.alternate;if(ht!==null){var vr=ht.child;if(vr!==null){ht.child=null;do{var Oi=vr.sibling;vr.sibling=null,vr=Oi}while(vr!==null)}}Xe=I}}if(I.subtreeFlags&2064&&G!==null)G.return=I,Xe=G;else e:for(;Xe!==null;){if(I=Xe,I.flags&2048)switch(I.tag){case 0:case 11:case 15:ol(9,I,I.return)}var le=I.sibling;if(le!==null){le.return=I.return,Xe=le;break e}Xe=I.return}}var te=c.current;for(Xe=te;Xe!==null;){G=Xe;var he=G.child;if(G.subtreeFlags&2064&&he!==null)he.return=G,Xe=he;else e:for(G=te;Xe!==null;){if(ee=Xe,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:Ud(9,ee)}}catch(dt){Yr(ee,ee.return,dt)}if(ee===G){Xe=null;break e}var Ke=ee.sibling;if(Ke!==null){Ke.return=ee.return,Xe=Ke;break e}Xe=ee.return}}if(Dt=T,Ts(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(hp,c)}catch{}b=!0}return b}finally{Kt=y,In.transition=d}}return!1}function JE(c,d,y){d=ux(y,d),d=dE(c,d,1),Go(c,d),d=Lr(),c=Jp(c,1),c!==null&&(Md(c,1,d),qr(c,d))}function Yr(c,d,y){if(c.tag===3)JE(c,c,y);else for(;d!==null;){if(d.tag===3){JE(d,c,y);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Wo===null||!Wo.has(b))){c=ux(y,c),c=hE(d,c,1),Go(d,c),c=Lr(),d=Jp(d,1),d!==null&&(Md(d,1,c),qr(d,c));break}}d=d.return}}function mO(c,d,y){var b=c.pingCache;b!==null&&b.delete(d),d=Lr(),c.pingedLanes|=c.suspendedLanes&y,Un===c&&(or&y)===y&&(Vn===4||Vn===3&&(or&130023424)===or&&500>Jn()-Ax?al(c,0):Tx|=y),qr(c,d)}function ZE(c,d){d===0&&(c.mode&1?(d=Ho,Ho<<=1,!(Ho&130023424)&&(Ho=4194304)):d=1);var y=Lr();c=Jp(c,d),c!==null&&(Md(c,d,y),qr(c,y))}function gO(c){var d=c.memoizedState,y=0;d!==null&&(y=d.retryLane),ZE(c,y)}function vO(c,d){var y=0;switch(c.tag){case 13:var b=c.stateNode,T=c.memoizedState;T!==null&&(y=T.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(d),ZE(c,y)}var QE;QE=function(c,d,y){if(c!==null)if(c.memoizedProps!==d.pendingProps||It.current)hi=!0;else{if(!(c.lanes&y)&&!(d.flags&128))return hi=!1,iO(c,d,y);hi=!!(c.flags&131072)}else hi=!1,yn&&d.flags&1048576&&zM(d,wp,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),c=d.pendingProps;var T=ut(d,kt.current);_c(d,y),T=sx(null,d,b,c,T,y);var I=ox();return d.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Ut(b)?(I=!0,Kn(d)):I=!1,d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,$y(d),T.updater=xp,d.stateNode=T,T._reactInternals=d,qy(d,b,c,y),d=fx(null,d,b,!0,I,y)):(d.tag=0,yn&&I&&Yy(d),Nr(null,d,T,y),d=d.child),d;case 16:b=d.elementType;e:{switch(c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),c=d.pendingProps,T=b._init,b=T(b._payload),d.type=b,T=d.tag=xO(b),c=Zi(b,c),T){case 0:d=hx(null,d,b,c,y);break e;case 1:d=bE(null,d,b,c,y);break e;case 11:d=yE(null,d,b,c,y);break e;case 14:d=xE(null,d,b,Zi(b.type,c),y);break e}throw Error(o(306,b,""))}return d;case 0:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:Zi(b,T),hx(c,d,b,T,y);case 1:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:Zi(b,T),bE(c,d,b,T,y);case 3:e:{if(ME(d),c===null)throw Error(o(387));b=d.pendingProps,I=d.memoizedState,T=I.element,NM(c,d),yp(d,b,null,y);var G=d.memoizedState;if(b=G.element,Ve&&I.isDehydrated)if(I={element:b,isDehydrated:!1,cache:G.cache,transitions:G.transitions},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){T=Error(o(423)),d=EE(c,d,b,y,T);break e}else if(b!==T){T=Error(o(424)),d=EE(c,d,b,y,T);break e}else for(Ve&&(di=ap(d.stateNode.containerInfo),ui=d,yn=!0,Qi=null,Ed=!1),y=WM(d,null,b,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(bc(),b===T){d=ro(c,d,y);break e}Nr(c,d,b,y)}d=d.child}return d;case 5:return $M(d),c===null&&Zy(d),b=d.type,T=d.pendingProps,I=c!==null?c.memoizedProps:null,G=T.children,xe(b,T)?G=null:I!==null&&xe(b,I)&&(d.flags|=32),SE(c,d),Nr(c,d,G,y),d.child;case 6:return c===null&&Zy(d),null;case 13:return TE(c,d,y);case 4:return ex(d,d.stateNode.containerInfo),b=d.pendingProps,c===null?d.child=Mc(d,null,b,y):Nr(c,d,b,y),d.child;case 11:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:Zi(b,T),yE(c,d,b,T,y);case 7:return Nr(c,d,d.pendingProps,y),d.child;case 8:return Nr(c,d,d.pendingProps.children,y),d.child;case 12:return Nr(c,d,d.pendingProps.children,y),d.child;case 10:e:{if(b=d.type._context,T=d.pendingProps,I=d.memoizedProps,G=T.value,IM(d,b,G),I!==null)if(Es(I.value,G)){if(I.children===T.children&&!It.current){d=ro(c,d,y);break e}}else for(I=d.child,I!==null&&(I.return=d);I!==null;){var ee=I.dependencies;if(ee!==null){G=I.child;for(var me=ee.firstContext;me!==null;){if(me.context===b){if(I.tag===1){me=Qs(-1,y&-y),me.tag=2;var Oe=I.updateQueue;if(Oe!==null){Oe=Oe.shared;var it=Oe.pending;it===null?me.next=me:(me.next=it.next,it.next=me),Oe.pending=me}}I.lanes|=y,me=I.alternate,me!==null&&(me.lanes|=y),Wy(I.return,y,d),ee.lanes|=y;break}me=me.next}}else if(I.tag===10)G=I.type===d.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(o(341));G.lanes|=y,ee=G.alternate,ee!==null&&(ee.lanes|=y),Wy(G,y,d),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===d){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}Nr(c,d,T.children,y),d=d.child}return d;case 9:return T=d.type,b=d.pendingProps.children,_c(d,y),T=Ri(T),b=b(T),d.flags|=1,Nr(c,d,b,y),d.child;case 14:return b=d.type,T=Zi(b,d.pendingProps),T=Zi(b.type,T),xE(c,d,b,T,y);case 15:return _E(c,d,d.type,d.pendingProps,y);case 17:return b=d.type,T=d.pendingProps,T=d.elementType===b?T:Zi(b,T),c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,Ut(b)?(c=!0,Kn(d)):c=!1,_c(d,y),UM(d,b,T),qy(d,b,T,y),fx(null,d,b,!0,c,y);case 19:return PE(c,d,y);case 22:return wE(c,d,y)}throw Error(o(156,d.tag))};function eT(c,d){return Fy(c,d)}function yO(c,d,y,b){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(c,d,y,b){return new yO(c,d,y,b)}function Dx(c){return c=c.prototype,!(!c||!c.isReactComponent)}function xO(c){if(typeof c=="function")return Dx(c)?1:0;if(c!=null){if(c=c.$$typeof,c===x)return 11;if(c===w)return 14}return 2}function Yo(c,d){var y=c.alternate;return y===null?(y=Di(c.tag,d,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=d,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,d=c.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function Qp(c,d,y,b,T,I){var G=2;if(b=c,typeof c=="function")Dx(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case h:return ul(y.children,T,I,d);case f:G=8,T|=8;break;case p:return c=Di(12,y,d,T|2),c.elementType=p,c.lanes=I,c;case _:return c=Di(13,y,d,T),c.elementType=_,c.lanes=I,c;case g:return c=Di(19,y,d,T),c.elementType=g,c.lanes=I,c;case E:return em(y,T,I,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:G=10;break e;case v:G=9;break e;case x:G=11;break e;case w:G=14;break e;case S:G=16,b=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return d=Di(G,y,d,T),d.elementType=c,d.type=b,d.lanes=I,d}function ul(c,d,y,b){return c=Di(7,c,b,d),c.lanes=y,c}function em(c,d,y,b){return c=Di(22,c,b,d),c.elementType=E,c.lanes=y,c.stateNode={},c}function Ox(c,d,y){return c=Di(6,c,null,d),c.lanes=y,c}function Ux(c,d,y){return d=Di(4,c.children!==null?c.children:[],c.key,d),d.lanes=y,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function _O(c,d,y,b,T){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=lt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oy(0),this.expirationTimes=Oy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oy(0),this.identifierPrefix=b,this.onRecoverableError=T,Ve&&(this.mutableSourceEagerHydrationData=null)}function tT(c,d,y,b,T,I,G,ee,me){return c=new _O(c,d,y,ee,me),d===1?(d=1,I===!0&&(d|=8)):d=0,I=Di(3,null,null,d),c.current=I,I.stateNode=c,I.memoizedState={element:b,isDehydrated:y,cache:null,transitions:null},$y(I),c}function nT(c){if(!c)return Ft;c=c._reactInternals;e:{if(N(c)!==c||c.tag!==1)throw Error(o(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Ut(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(c.tag===1){var y=c.type;if(Ut(y))return Js(c,y,d)}return d}function rT(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=F(d),c===null?null:c.stateNode}function iT(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<d?y:d}}function Fx(c,d){iT(c,d),(c=c.alternate)&&iT(c,d)}function wO(c){return c=F(c),c===null?null:c.stateNode}function SO(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var d=Lr();ki(c,134217728,d),Fx(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var d=Lr(),y=Xo(c);ki(c,y,d),Fx(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var y=ci(d.pendingLanes);y!==0&&(Uy(d,y|1),qr(d,Jn()),!(Dt&6)&&(Pc(),Ts()))}break;case 13:var b=Lr();$E(function(){return ki(c,1,b)}),Fx(c,1)}},t.batchedUpdates=function(c,d){var y=Dt;Dt|=1;try{return c(d)}finally{Dt=y,Dt===0&&(Pc(),fp&&Ts())}},t.createComponentSelector=function(c){return{$$typeof:zp,value:c}},t.createContainer=function(c,d,y,b,T,I,G){return tT(c,d,!1,null,y,b,T,I,G)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Bp,value:c}},t.createHydrationContainer=function(c,d,y,b,T,I,G,ee,me){return c=tT(y,b,!0,c,T,I,G,ee,me),c.context=nT(null),y=c.current,b=Lr(),T=Xo(y),I=Qs(b,T),I.callback=d??null,Go(y,I),c.current.lanes=T,Md(c,T,b),qr(c,b),c},t.createPortal=function(c,d,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:c,containerInfo:d,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:jp,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Hp,value:c}},t.createTextSelector=function(c){return{$$typeof:Vp,value:c}},t.deferredUpdates=function(c){var d=Kt,y=In.transition;try{return In.transition=null,Kt=16,c()}finally{Kt=d,In.transition=y}},t.discreteUpdates=function(c,d,y,b,T){var I=Kt,G=In.transition;try{return In.transition=null,Kt=1,c(d,y,b,T)}finally{Kt=I,In.transition=G,Dt===0&&Pc()}},t.findAllNodes=Mx,t.findBoundingRects=function(c,d){if(!Ae)throw Error(o(363));d=Mx(c,d),c=[];for(var y=0;y<d.length;y++)c.push(vt(d[y]));for(d=c.length-1;0<d;d--){y=c[d];for(var b=y.x,T=b+y.width,I=y.y,G=I+y.height,ee=d-1;0<=ee;ee--)if(d!==ee){var me=c[ee],Oe=me.x,it=Oe+me.width,bt=me.y,yt=bt+me.height;if(b>=Oe&&I>=bt&&T<=it&&G<=yt){c.splice(d,1);break}else if(b!==Oe||y.width!==me.width||yt<I||bt>G){if(!(I!==bt||y.height!==me.height||it<b||Oe>T)){Oe>b&&(me.width+=Oe-b,me.x=b),it<T&&(me.width=T-Oe),c.splice(d,1);break}}else{bt>I&&(me.height+=bt-I,me.y=I),yt<G&&(me.height=G-bt),c.splice(d,1);break}}}return c},t.findHostInstance=rT,t.findHostInstanceWithNoPortals=function(c){return c=O(c),c=c!==null?q(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return rT(c)},t.flushControlled=function(c){var d=Dt;Dt|=1;var y=In.transition,b=Kt;try{In.transition=null,Kt=1,c()}finally{Kt=b,In.transition=y,Dt=d,Dt===0&&(Pc(),Ts())}},t.flushPassiveEffects=cl,t.flushSync=$E,t.focusWithin=function(c,d){if(!Ae)throw Error(o(363));for(c=wx(c),d=VE(c,d),d=Array.from(d),c=0;c<d.length;){var y=d[c++];if(!U(y)){if(y.tag===5&&de(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Kt},t.getFindAllNodesFailureDescription=function(c,d){if(!Ae)throw Error(o(363));var y=0,b=[];c=[wx(c),0];for(var T=0;T<c.length;){var I=c[T++],G=c[T++],ee=d[G];if((I.tag!==5||!U(I))&&(Sx(I,ee)&&(b.push(bx(ee)),G++,G>y&&(y=G)),G<d.length))for(I=I.child;I!==null;)c.push(I,G),I=I.sibling}if(y<d.length){for(c=[];y<d.length;y++)c.push(bx(d[y]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return K(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:wO,findFiberByHostInstance:c.findFiberByHostInstance||SO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)c=!0;else{try{hp=d.inject(c),Ms=d}catch{}c=!!d.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,d,y,b){if(!Ae)throw Error(o(363));c=Mx(c,d);var T=ve(c,y,b).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(c,d){var y=d._getVersion;y=y(d._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[d,y]:c.mutableSourceEagerHydrationData.push(d,y)},t.runWithPriority=function(c,d){var y=Kt;try{return Kt=c,d()}finally{Kt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,d,y,b){var T=d.current,I=Lr(),G=Xo(T);return y=nT(y),d.context===null?d.context=y:d.pendingContext=y,d=Qs(I,G),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),Go(T,d),c=ki(T,G,I),c!==null&&vp(c,T,G),G},t};gD.exports=bY;var MY=gD.exports;const EY=pS(MY);var vD={exports:{}},yD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,V){var X=D.length;D.push(V);e:for(;0<X;){var J=X-1>>>1,oe=D[J];if(0<i(oe,V))D[J]=V,D[X]=oe,X=J;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],X=D.pop();if(X!==V){D[0]=X;e:for(var J=0,oe=D.length,ye=oe>>>1;J<ye;){var ie=2*(J+1)-1,xe=D[ie],Me=ie+1,Re=D[Me];if(0>i(xe,X))Me<oe&&0>i(Re,xe)?(D[J]=Re,D[Me]=X,J=Me):(D[J]=xe,D[ie]=X,J=ie);else if(Me<oe&&0>i(Re,X))D[J]=Re,D[Me]=X,J=Me;else break e}}return V}function i(D,V){var X=D.sortIndex-V.sortIndex;return X!==0?X:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var V=t(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=D)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(u)}}function E(D){if(x=!1,S(D),!v)if(t(l)!==null)v=!0,K(R);else{var V=t(u);V!==null&&Q(E,V.startTime-D)}}function R(D,V){v=!1,x&&(x=!1,g(k),k=-1),m=!0;var X=p;try{for(S(V),f=t(l);f!==null&&(!(f.expirationTime>V)||D&&!O());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var oe=J(f.expirationTime<=V);V=n.unstable_now(),typeof oe=="function"?f.callback=oe:f===t(l)&&r(l),S(V)}else r(l);f=t(l)}if(f!==null)var ye=!0;else{var ie=t(u);ie!==null&&Q(E,ie.startTime-V),ye=!1}return ye}finally{f=null,p=X,m=!1}}var A=!1,P=null,k=-1,N=5,C=-1;function O(){return!(n.unstable_now()-C<N)}function F(){if(P!==null){var D=n.unstable_now();C=D;var V=!0;try{V=P(!0,D)}finally{V?W():(A=!1,P=null)}}else A=!1}var W;if(typeof w=="function")W=function(){w(F)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=F,W=function(){Z.postMessage(null)}}else W=function(){_(F,0)};function K(D){P=D,A||(A=!0,W())}function Q(D,V){k=_(function(){D(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,K(R))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var X=p;p=V;try{return D()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=p;p=D;try{return V()}finally{p=X}},n.unstable_scheduleCallback=function(D,V,X){var J=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,D){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=X+oe,D={id:h++,callback:V,priorityLevel:D,startTime:X,expirationTime:oe,sortIndex:-1},X>J?(D.sortIndex=X,e(u,D),t(l)===null&&D===t(u)&&(x?(g(k),k=-1):x=!0,Q(E,X-J))):(D.sortIndex=oe,e(l,D),v||m||(v=!0,K(R))),D},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(D){var V=p;return function(){var X=p;p=V;try{return D.apply(this,arguments)}finally{p=X}}}})(yD);vD.exports=yD;var q2=vD.exports;const EM={},TY=n=>void Object.assign(EM,n);function AY(n,e){function t(h,{args:f=[],attach:p,...m},v){let x=`${h[0].toUpperCase()}${h.slice(1)}`,_;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=iu(g,{type:h,root:v,attach:p,primitive:!0})}else{const g=EM[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=iu(new g(...f),{type:h,root:v,attach:p,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),x!=="inject"&&Sw(_,m),_}function r(h,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?ww(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),p=!0),p||(v=h.__r3f)==null||v.objects.push(f),f.__r3f||iu(f,{}),f.__r3f.parent=h,hS(f),su(f)}}function i(h,f,p){let m=!1;if(f){var v,x;if((v=f.__r3f)!=null&&v.attach)ww(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:f});const _=h.children.filter(w=>w!==f),g=_.indexOf(p);h.children=[..._.slice(0,g),f,..._.slice(g)],m=!0}m||(x=h.__r3f)==null||x.objects.push(f),f.__r3f||iu(f,{}),f.__r3f.parent=h,hS(f),su(f)}}function s(h,f,p=!1){h&&[...h].forEach(m=>o(f,m,p))}function o(h,f,p){if(f){var m,v,x;if(f.__r3f&&(f.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(E=>E!==f)),(v=f.__r3f)!=null&&v.attach)Q2(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var _;h.remove(f),(_=f.__r3f)!=null&&_.root&&DY(Hg(f),f)}const w=(x=f.__r3f)==null?void 0:x.primitive,S=!w&&(p===void 0?f.dispose!==null:p);if(!w){var g;s((g=f.__r3f)==null?void 0:g.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?q2.unstable_scheduleCallback(q2.unstable_IdlePriority,E):E()}su(h)}}function a(h,f,p,m){var v;const x=(v=h.__r3f)==null?void 0:v.parent;if(!x)return;const _=t(f,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&r(_,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>r(_,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(x,h),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(x,_),_.raycast&&_.__r3f.eventCount&&Hg(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>{};return{reconciler:EY({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,r(p,f))},removeChildFromContainer:(h,f)=>{f&&o(h.getState().scene,f)},insertInContainerBefore:(h,f,p)=>{if(!f||!p)return;const m=h.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,p,m){var v;if(((v=h==null?void 0:h.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:_=[],children:g,...w}=m,{args:S=[],children:E,...R}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((P,k)=>P!==S[k]))return[!0];const A=ED(h,w,R,!0);return A.changes.length?[!1,A]:null}},commitUpdate(h,[f,p],m,v,x,_){f?a(h,m,x,_):Sw(h,p)},commitMount(h,f,p,m){var v;const x=(v=h.__r3f)!=null?v:{};h.raycast&&x.handlers&&x.eventCount&&Hg(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>iu(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:p,parent:m}=(f=h.__r3f)!=null?f:{};p&&m&&Q2(m,h,p),h.isObject3D&&(h.visible=!1),su(h)},unhideInstance(h,f){var p;const{attach:m,parent:v}=(p=h.__r3f)!=null?p:{};m&&v&&ww(v,h,m),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),su(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Su.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&fn.fun(performance.now)?performance.now:fn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:fn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:fn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Sw}}var Y2,K2;const _w=n=>"colorSpace"in n||"outputColorSpace"in n,xD=()=>{var n;return(n=EM.ColorManagement)!=null?n:null},_D=n=>n&&n.isOrthographicCamera,CY=n=>n&&n.hasOwnProperty("current"),np=typeof window<"u"&&((Y2=window.document)!=null&&Y2.createElement||((K2=window.navigator)==null?void 0:K2.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function wD(n){const e=L.useRef(n);return np(()=>void(e.current=n),[n]),e}function RY({set:n}){return np(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class SD extends L.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}SD.getDerivedStateFromError=()=>({error:!0});const bD="__default",J2=new Map,PY=n=>n&&!!n.memoized&&!!n.changes;function MD(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const dh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Hg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const fn={obj:n=>n===Object(n)&&!fn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(fn.str(n)||fn.num(n)||fn.boo(n))return n===e;const s=fn.obj(n);if(s&&r==="reference")return n===e;const o=fn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!fn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(fn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function IY(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function iu(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function dS(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const Z2=/-\d+$/;function ww(n,e,t){if(fn.str(t)){if(Z2.test(t)){const s=t.replace(Z2,""),{target:o,key:a}=dS(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=dS(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function Q2(n,e,t){var r,i;if(fn.str(t)){const{target:s,key:o}=dS(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function ED(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){const h=n.__r3f,f=Object.entries(i),p=[];if(u){const v=Object.keys(l);for(let x=0;x<v.length;x++)i.hasOwnProperty(v[x])||f.unshift([v[x],bD+"remove"])}f.forEach(([v,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&v==="object"||fn.equ(x,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,x,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,x,!1,g]);for(const w in i){const S=i[w];w.startsWith(`${v}-`)&&p.push([w,S,!1,w.split("-")])}});const m={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const NY=typeof process<"u"&&!1;function Sw(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=PY(e)?e:ED(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,x,_]=a[p];if(_w(n)){const E="srgb",R="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?E:R):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?E:R)}let g=n,w=g[m];if(_.length&&(w=_.reduce((S,E)=>S[E],n),!(w&&w.set))){const[S,...E]=_.reverse();g=E.reverse().reduce((R,A)=>R[A],n),m=S}if(v===bD+"remove")if(g.constructor){let S=J2.get(g.constructor);S||(S=new g.constructor,J2.set(g.constructor,S)),v=S[m]}else v=0;if(x&&r)v?r.handlers[m]=v:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(w&&w.set&&(w.copy||w instanceof Kl)){if(Array.isArray(v))w.fromArray?w.fromArray(v):w.set(...v);else if(w.copy&&v&&v.constructor&&(NY?w.constructor.name===v.constructor.name:w.constructor===v.constructor))w.copy(v);else if(v!==void 0){var u;const S=(u=w)==null?void 0:u.isColor;!S&&w.setScalar?w.setScalar(v):w instanceof Kl&&v instanceof Kl?w.mask=v.mask:w.set(v),!xD()&&s&&!s.linear&&S&&w.convertSRGBToLinear()}}else{var h;if(g[m]=v,(h=g[m])!=null&&h.isTexture&&g[m].format===Ar&&g[m].type===Ki&&s){const S=g[m];_w(S)&&_w(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}su(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const p=Hg(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),r.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&hS(n),n}function su(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function hS(n){n.onUpdate==null||n.onUpdate(n)}function LY(n,e){n.manual||(_D(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function _g(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function kY(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Su.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Su.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Su.ContinuousEventPriority;default:return Su.DefaultEventPriority}}function TD(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function DY(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{TD(t.capturedMap,e,r,i)})}function OY(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function r(l,u){const h=n.getState(),f=new Set,p=[],m=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const w=dh(m[g]);w&&(w.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function v(g){const w=dh(g);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var S;w.events.compute==null||w.events.compute(l,w,(S=w.previousRoot)==null?void 0:S.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(g,!0):[]}let x=m.flatMap(v).sort((g,w)=>{const S=dh(g.object),E=dh(w.object);return!S||!E?g.distance-w.distance:E.events.priority-S.events.priority||g.distance-w.distance}).filter(g=>{const w=_g(g);return f.has(w)?!1:(f.add(w),!0)});h.events.filter&&(x=h.events.filter(x,h));for(const g of x){let w=g.object;for(;w;){var _;(_=w.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:w}),w=w.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())f.has(_g(g.intersection))||p.push(g.intersection);return p}function i(l,u,h,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const x=dh(v.object)||p,{raycaster:_,pointer:g,camera:w,internal:S}=x,E=new j(g.x,g.y,0).unproject(w),R=C=>{var O,F;return(O=(F=S.capturedMap.get(C))==null?void 0:F.has(v.eventObject))!=null?O:!1},A=C=>{const O={intersection:v,target:u.target};S.capturedMap.has(C)?S.capturedMap.get(C).set(v.eventObject,O):S.capturedMap.set(C,new Map([[v.eventObject,O]])),u.target.setPointerCapture(C)},P=C=>{const O=S.capturedMap.get(C);O&&TD(S.capturedMap,v.eventObject,O,C)};let k={};for(let C in u){let O=u[C];typeof O!="function"&&(k[C]=O)}let N={...v,...k,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:E,ray:_.ray,camera:w,stopPropagation(){const C="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!C||C.has(v.eventObject))&&(N.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:R,setPointerCapture:A,releasePointerCapture:P},currentTarget:{hasPointerCapture:R,setPointerCapture:A,releasePointerCapture:P},nativeEvent:u};if(f(N),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(_g(h)),p!=null&&p.eventCount){const v={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let h=0;h<u.length;h++){const f=u[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(h,m?t:void 0),g=v?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=_.map(S=>S.eventObject)),v&&!_.length&&g<=2&&(o(h,p.interaction),f&&f(h)),m&&s(_);function w(S){const E=S.eventObject,R=E.__r3f,A=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(m){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const P=_g(S),k=p.hovered.get(P);k?k.stopped&&S.stopPropagation():(p.hovered.set(P,S),A.onPointerOver==null||A.onPointerOver(S),A.onPointerEnter==null||A.onPointerEnter(S))}A.onPointerMove==null||A.onPointerMove(S)}else{const P=A[l];P?(!v||p.initialHits.includes(E))&&(o(h,p.interaction.filter(k=>!p.initialHits.includes(k))),P(S)):v&&p.initialHits.includes(E)&&o(h,p.interaction.filter(k=>!p.initialHits.includes(k)))}}i(_,h,g,w)}}return{handlePointer:a}}const AD=n=>!!(n!=null&&n.render),CD=L.createContext(null),UY=(n,e)=>{const t=_Y((a,l)=>{const u=new j,h=new j,f=new j;function p(g=l().camera,w=h,S=l().size){const{width:E,height:R,top:A,left:P}=S,k=E/R;w.isVector3?f.copy(w):f.set(...w);const N=g.getWorldPosition(u).distanceTo(f);if(_D(g))return{width:E/g.zoom,height:R/g.zoom,top:A,left:P,factor:1,distance:N,aspect:k};{const C=g.fov*Math.PI/180,O=2*Math.tan(C/2)*N,F=O*(E/R);return{width:F,height:O,top:A,left:P,factor:E/F,distance:N,aspect:k}}}let m;const v=g=>a(w=>({performance:{...w.performance,current:g}})),x=new we;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,w)=>e(g,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new xM,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(w=>({...w,events:{...w.events,...g}})),setSize:(g,w,S,E,R)=>{const A=l().camera,P={width:g,height:w,top:E||0,left:R||0,updateStyle:S};a(k=>({size:P,viewport:{...k.viewport,...p(A,h,P)}}))},setDpr:g=>a(w=>{const S=MD(g);return{viewport:{...w.viewport,dpr:S,initialDpr:w.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,g!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:L.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,w,S)=>{const E=l().internal;return E.priority=E.priority+(w>0?1:0),E.subscribers.push({ref:g,priority:w,store:S}),E.subscribers=E.subscribers.sort((R,A)=>R.priority-A.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(w>0?1:0),R.subscribers=R.subscribers.filter(A=>A.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var p;i=l,s=u.dpr,LY(a,l),h.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let wg,FY=new Set,zY=new Set,BY=new Set;function bw(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function hh(n,e){switch(n){case"before":return bw(FY,e);case"after":return bw(zY,e);case"tail":return bw(BY,e)}}let Mw,Ew;function Tw(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Mw=e.internal.subscribers,wg=0;wg<Mw.length;wg++)Ew=Mw[wg],Ew.ref.current(Ew.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function jY(n){let e=!1,t=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,hh("before",u),t=!0;for(const f of n.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(r+=Tw(u,s))}if(t=!1,hh("after",u),r===0)return hh("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,h=1){var f;if(!u)return n.forEach(p=>a(p.store.getState(),h));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,f,p){if(h&&hh("before",u),f)Tw(u,f,p);else for(const m of n.values())Tw(u,m.store.getState());h&&hh("after",u)}return{loop:o,invalidate:a,advance:l}}function RD(){const n=L.useContext(CD);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function mo(n=t=>t,e){return RD()(n,e)}function Ry(n,e=0){const t=RD(),r=t.getState().internal.subscribe,i=wD(n);return np(()=>r(i,e,t),[e,r,t]),null}const ad=new Map,{invalidate:eR,advance:tR}=jY(ad),{reconciler:cv,applyProps:tu}=AY(ad,kY),nu={objects:"shallow",strict:!1},HY=(n,e)=>{const t=typeof n=="function"?n(e):n;return AD(t)?t:new pD({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function VY(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function GY(n){const e=ad.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||UY(eR,tR),o=t||cv.createContainer(s,Su.ConcurrentRoot,null,!1,null,"",i,null);e||ad.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:f,size:p,scene:m,events:v,onCreated:x,shadows:_=!1,linear:g=!1,flat:w=!1,legacy:S=!1,orthographic:E=!1,frameloop:R="always",dpr:A=[1,2],performance:P,raycaster:k,camera:N,onPointerMissed:C}=h,O=s.getState(),F=O.gl;O.gl||O.set({gl:F=HY(f,n)});let W=O.raycaster;W||O.set({raycaster:W=new oD});const{params:q,...Z}=k||{};if(fn.equ(Z,W,nu)||tu(W,{...Z}),fn.equ(q,W.params,nu)||tu(W,{params:{...W.params,...q}}),!O.camera||O.camera===u&&!fn.equ(u,N,nu)){u=N;const X=N instanceof qf,J=X?N:E?new Ws(0,0,0,0,.1,1e3):new Sn(75,0,.1,1e3);X||(J.position.z=5,N&&(tu(J,N),("aspect"in N||"left"in N||"right"in N||"bottom"in N||"top"in N)&&(J.manual=!0,J.updateProjectionMatrix())),!O.camera&&!(N!=null&&N.rotation)&&J.lookAt(0,0,0)),O.set({camera:J}),W.camera=J}if(!O.scene){let X;m!=null&&m.isScene?X=m:(X=new Qb,m&&tu(X,m)),O.set({scene:iu(X)})}if(!O.xr){var K;const X=(ye,ie)=>{const xe=s.getState();xe.frameloop!=="never"&&tR(ye,!0,xe,ie)},J=()=>{const ye=s.getState();ye.gl.xr.enabled=ye.gl.xr.isPresenting,ye.gl.xr.setAnimationLoop(ye.gl.xr.isPresenting?X:null),ye.gl.xr.isPresenting||eR(ye)},oe={connect(){const ye=s.getState().gl;ye.xr.addEventListener("sessionstart",J),ye.xr.addEventListener("sessionend",J)},disconnect(){const ye=s.getState().gl;ye.xr.removeEventListener("sessionstart",J),ye.xr.removeEventListener("sessionend",J)}};typeof((K=F.xr)==null?void 0:K.addEventListener)=="function"&&oe.connect(),O.set({xr:oe})}if(F.shadowMap){const X=F.shadowMap.enabled,J=F.shadowMap.type;if(F.shadowMap.enabled=!!_,fn.boo(_))F.shadowMap.type=Iu;else if(fn.str(_)){var Q;const oe={basic:pL,percentage:Jv,soft:Iu,variance:ls};F.shadowMap.type=(Q=oe[_])!=null?Q:Iu}else fn.obj(_)&&Object.assign(F.shadowMap,_);(X!==F.shadowMap.enabled||J!==F.shadowMap.type)&&(F.shadowMap.needsUpdate=!0)}const D=xD();D&&("enabled"in D?D.enabled=!S:"legacyMode"in D&&(D.legacyMode=S)),l||tu(F,{outputEncoding:g?3e3:3001,toneMapping:w?Vs:Fb}),O.legacy!==S&&O.set(()=>({legacy:S})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==w&&O.set(()=>({flat:w})),f&&!fn.fun(f)&&!AD(f)&&!fn.equ(f,F,nu)&&tu(F,f),v&&!O.events.handlers&&O.set({events:v(s)});const V=VY(n,p);return fn.equ(V,O.size,nu)||O.setSize(V.width,V.height,V.updateStyle,V.top,V.left),A&&O.viewport.dpr!==MD(A)&&O.setDpr(A),O.frameloop!==R&&O.setFrameloop(R),O.onPointerMissed||O.set({onPointerMissed:C}),P&&!fn.equ(P,O.performance,nu)&&O.set(X=>({performance:{...X.performance,...P}})),a=x,l=!0,this},render(h){return l||this.configure(),cv.updateContainer(M.jsx(WY,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){PD(n)}}}function WY({store:n,children:e,onCreated:t,rootElement:r}){return np(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),M.jsx(CD.Provider,{value:n,children:e})}function PD(n,e){const t=ad.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),cv.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),IY(i),ad.delete(n)}catch{}},500)})}}cv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version});const Aw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function $Y(n){const{handlePointer:e}=OY(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Aw).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=Aw[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Aw[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function nR(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function XY({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=L.useRef(!1);L.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,p,m]=L.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:w,top:S,width:E,height:R,bottom:A,right:P,x:k,y:N}=a.current.element.getBoundingClientRect(),C={left:w,top:S,width:E,height:R,bottom:A,right:P,x:k,y:N};a.current.element instanceof HTMLElement&&r&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),h.current&&!JY(a.current.lastBounds,C)&&o(a.current.lastBounds=C)};return[g,u?nR(g,u):g,l?nR(g,l):g]},[o,r,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=ID(g),x())};return YY(m,!!e),qY(p),L.useEffect(()=>{v(),x()},[e,m,p]),L.useEffect(()=>v,[]),[_,s,f]}function qY(n){L.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function YY(n,e){L.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function ID(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...ID(n.parentElement)]}const KY=["x","y","top","bottom","left","right","width","height"],JY=(n,e)=>KY.every(t=>n[t]===e[t]);var ZY=Object.defineProperty,QY=Object.defineProperties,eK=Object.getOwnPropertyDescriptors,rR=Object.getOwnPropertySymbols,tK=Object.prototype.hasOwnProperty,nK=Object.prototype.propertyIsEnumerable,iR=(n,e,t)=>e in n?ZY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sR=(n,e)=>{for(var t in e||(e={}))tK.call(e,t)&&iR(n,t,e[t]);if(rR)for(var t of rR(e))nK.call(e,t)&&iR(n,t,e[t]);return n},rK=(n,e)=>QY(n,eK(e)),oR,aR;typeof window<"u"&&((oR=window.document)!=null&&oR.createElement||((aR=window.navigator)==null?void 0:aR.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function ND(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=ND(r,e,t);if(i)return i;r=r.sibling}}function LD(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const lR=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=lR;return}return lR.apply(this,arguments)};const TM=LD(L.createContext(null));class kD extends L.Component{render(){return L.createElement(TM.Provider,{value:this._reactInternals},this.props.children)}}function iK(){const n=L.useContext(TM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=L.useId();return L.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=ND(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function sK(){const n=iK(),[e]=L.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==TM&&!e.has(i)&&e.set(i,L.useContext(LD(i)))}t=t.return}return e}function oK(){const n=sK();return L.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>L.createElement(e,null,L.createElement(t.Provider,rK(sR({},r),{value:n.get(t)}))),e=>L.createElement(kD,sR({},e))),[n])}const aK=L.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=$Y,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:w,scene:S,onPointerMissed:E,onCreated:R,...A},P){L.useMemo(()=>TY(vY),[]);const k=oK(),[N,C]=XY({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=L.useRef(null),F=L.useRef(null);L.useImperativeHandle(P,()=>O.current);const W=wD(E),[q,Z]=L.useState(!1),[K,Q]=L.useState(!1);if(q)throw q;if(K)throw K;const D=L.useRef(null);np(()=>{const X=O.current;C.width>0&&C.height>0&&X&&(D.current||(D.current=GY(X)),D.current.configure({gl:s,events:o,shadows:u,linear:h,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:w,scene:S,size:C,onPointerMissed:(...J)=>W.current==null?void 0:W.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(a?CY(a)?a.current:a:F.current),l&&J.setEvents({compute:(oe,ye)=>{const ie=oe[l+"X"],xe=oe[l+"Y"];ye.pointer.set(ie/ye.size.width*2-1,-(xe/ye.size.height)*2+1),ye.raycaster.setFromCamera(ye.pointer,ye.camera)}}),R==null||R(J)}}),D.current.render(M.jsx(k,{children:M.jsx(SD,{set:Q,children:M.jsx(L.Suspense,{fallback:M.jsx(RY,{set:Z}),children:e??null})})})))}),L.useEffect(()=>{const X=O.current;if(X)return()=>PD(X)},[]);const V=a?"none":"auto";return M.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...i},...A,children:M.jsx("div",{ref:N,style:{width:"100%",height:"100%"},children:M.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}),lK=L.forwardRef(function(e,t){return M.jsx(kD,{children:M.jsx(aK,{...e,ref:t})})});function uv(){return uv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uv.apply(null,arguments)}const rp=new j,AM=new j,cK=new j,cR=new we;function uK(n,e,t){const r=rp.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function dK(n,e){const t=rp.setFromMatrixPosition(n.matrixWorld),r=AM.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(cK);return i.angleTo(s)>Math.PI/2}function hK(n,e,t,r){const i=rp.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),cR.set(s.x,s.y),t.setFromCamera(cR,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function fK(n,e){if(e instanceof Ws)return e.zoom;if(e instanceof Sn){const t=rp.setFromMatrixPosition(n.matrixWorld),r=AM.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function pK(n,e,t){if(e instanceof Sn||e instanceof Ws){const r=rp.setFromMatrixPosition(n.matrixWorld),i=AM.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const fS=n=>Math.abs(n)<1e-10?0:n;function DD(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=fS(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const mK=(n=>e=>DD(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),gK=(n=>(e,t)=>DD(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function vK(n){return n&&typeof n=="object"&&"current"in n}const yK=L.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:f,onOcclude:p,castShadow:m,receiveShadow:v,material:x,geometry:_,zIndexRange:g=[16777271,0],calculatePosition:w=uK,as:S="div",wrapperClass:E,pointerEvents:R="auto",...A},P)=>{const{gl:k,camera:N,scene:C,size:O,raycaster:F,events:W,viewport:q}=mo(),[Z]=L.useState(()=>document.createElement(S)),K=L.useRef(),Q=L.useRef(null),D=L.useRef(0),V=L.useRef([0,0]),X=L.useRef(null),J=L.useRef(null),oe=(a==null?void 0:a.current)||W.connected||k.domElement.parentNode,ye=L.useRef(null),ie=L.useRef(!1),xe=L.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&vK(f[0]),[f]);L.useLayoutEffect(()=>{const ze=k.domElement;f&&f==="blending"?(ze.style.zIndex=`${Math.floor(g[0]/2)}`,ze.style.position="absolute",ze.style.pointerEvents="none"):(ze.style.zIndex=null,ze.style.position=null,ze.style.pointerEvents=null)},[f]),L.useLayoutEffect(()=>{if(Q.current){const ze=K.current=cb(Z);if(C.updateMatrixWorld(),h)Z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Je=w(Q.current,N,O);Z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Je[0]}px,${Je[1]}px,0);transform-origin:0 0;`}return oe&&(i?oe.prepend(Z):oe.appendChild(Z)),()=>{oe&&oe.removeChild(Z),ze.unmount()}}},[oe,h]),L.useLayoutEffect(()=>{E&&(Z.className=E)},[E]);const Me=L.useMemo(()=>h?{position:"absolute",top:0,left:0,width:O.width,height:O.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-O.height/2,left:-O.width/2,width:O.width,height:O.height},...t},[t,s,o,O,h]),Re=L.useMemo(()=>({position:"absolute",pointerEvents:R}),[R]);L.useLayoutEffect(()=>{if(ie.current=!1,h){var ze;(ze=K.current)==null||ze.render(L.createElement("div",{ref:X,style:Me},L.createElement("div",{ref:J,style:Re},L.createElement("div",{ref:P,className:r,style:t,children:n}))))}else{var Je;(Je=K.current)==null||Je.render(L.createElement("div",{ref:P,style:Me,className:r,children:n}))}});const He=L.useRef(!0);Ry(ze=>{if(Q.current){N.updateMatrixWorld(),Q.current.updateWorldMatrix(!0,!1);const Je=h?V.current:w(Q.current,N,O);if(h||Math.abs(D.current-N.zoom)>e||Math.abs(V.current[0]-Je[0])>e||Math.abs(V.current[1]-Je[1])>e){const ft=dK(Q.current,N);let Ve=!1;xe&&(Array.isArray(f)?Ve=f.map(Ie=>Ie.current):f!=="blending"&&(Ve=[C]));const B=He.current;if(Ve){const Ie=hK(Q.current,N,F,Ve);He.current=Ie&&!ft}else He.current=!ft;B!==He.current&&(p?p(!He.current):Z.style.display=He.current?"block":"none");const Ne=Math.floor(g[0]/2),Ee=f?xe?[g[0],Ne]:[Ne-1,0]:g;if(Z.style.zIndex=`${pK(Q.current,N,Ee)}`,h){const[Ie,ge]=[O.width/2,O.height/2],De=N.projectionMatrix.elements[5]*ge,{isOrthographicCamera:Ae,top:qe,left:vt,bottom:H,right:U}=N,se=mK(N.matrixWorldInverse),de=Ae?`scale(${De})translate(${fS(-(U+vt)/2)}px,${fS((qe+H)/2)}px)`:`translateZ(${De}px)`;let ve=Q.current.matrixWorld;u&&(ve=N.matrixWorldInverse.clone().transpose().copyPosition(ve).scale(Q.current.scale),ve.elements[3]=ve.elements[7]=ve.elements[11]=0,ve.elements[15]=1),Z.style.width=O.width+"px",Z.style.height=O.height+"px",Z.style.perspective=Ae?"":`${De}px`,X.current&&J.current&&(X.current.style.transform=`${de}${se}translate(${Ie}px,${ge}px)`,J.current.style.transform=gK(ve,1/((l||10)/400)))}else{const Ie=l===void 0?1:fK(Q.current,N)*l;Z.style.transform=`translate3d(${Je[0]}px,${Je[1]}px,0) scale(${Ie})`}V.current=Je,D.current=N.zoom}}if(!xe&&ye.current&&!ie.current)if(h){if(X.current){const Je=X.current.children[0];if(Je!=null&&Je.clientWidth&&Je!=null&&Je.clientHeight){const{isOrthographicCamera:ft}=N;if(ft||_)A.scale&&(Array.isArray(A.scale)?A.scale instanceof j?ye.current.scale.copy(A.scale.clone().divideScalar(1)):ye.current.scale.set(1/A.scale[0],1/A.scale[1],1/A.scale[2]):ye.current.scale.setScalar(1/A.scale));else{const Ve=(l||10)/400,B=Je.clientWidth*Ve,Ne=Je.clientHeight*Ve;ye.current.scale.set(B,Ne,1)}ie.current=!0}}}else{const Je=Z.children[0];if(Je!=null&&Je.clientWidth&&Je!=null&&Je.clientHeight){const ft=1/q.factor,Ve=Je.clientWidth*ft,B=Je.clientHeight*ft;ye.current.scale.set(Ve,B,1),ie.current=!0}ye.current.lookAt(ze.camera.position)}});const lt=L.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return L.createElement("group",uv({},A,{ref:Q}),f&&!xe&&L.createElement("mesh",{castShadow:m,receiveShadow:v,ref:ye},_||L.createElement("planeGeometry",null),x||L.createElement("shaderMaterial",{side:ji,vertexShader:lt.vertexShader,fragmentShader:lt.fragmentShader})))});var xK=Object.defineProperty,_K=(n,e,t)=>e in n?xK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wK=(n,e,t)=>(_K(n,e+"",t),t);class SK{constructor(){wK(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var bK=Object.defineProperty,MK=(n,e,t)=>e in n?bK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xt=(n,e,t)=>(MK(n,typeof e!="symbol"?e+"":e,t),t);const Sg=new hc,uR=new xo,EK=Math.cos(70*(Math.PI/180)),dR=(n,e)=>(n%e+e)%e;let TK=class extends SK{constructor(e,t){super(),xt(this,"object"),xt(this,"domElement"),xt(this,"enabled",!0),xt(this,"target",new j),xt(this,"minDistance",0),xt(this,"maxDistance",1/0),xt(this,"minZoom",0),xt(this,"maxZoom",1/0),xt(this,"minPolarAngle",0),xt(this,"maxPolarAngle",Math.PI),xt(this,"minAzimuthAngle",-1/0),xt(this,"maxAzimuthAngle",1/0),xt(this,"enableDamping",!1),xt(this,"dampingFactor",.05),xt(this,"enableZoom",!0),xt(this,"zoomSpeed",1),xt(this,"enableRotate",!0),xt(this,"rotateSpeed",1),xt(this,"enablePan",!0),xt(this,"panSpeed",1),xt(this,"screenSpacePanning",!0),xt(this,"keyPanSpeed",7),xt(this,"zoomToCursor",!1),xt(this,"autoRotate",!1),xt(this,"autoRotateSpeed",2),xt(this,"reverseOrbit",!1),xt(this,"reverseHorizontalOrbit",!1),xt(this,"reverseVerticalOrbit",!1),xt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),xt(this,"mouseButtons",{LEFT:Rl.ROTATE,MIDDLE:Rl.DOLLY,RIGHT:Rl.PAN}),xt(this,"touches",{ONE:Pl.ROTATE,TWO:Pl.DOLLY_PAN}),xt(this,"target0"),xt(this,"position0"),xt(this,"zoom0"),xt(this,"_domElementKeyEvents",null),xt(this,"getPolarAngle"),xt(this,"getAzimuthalAngle"),xt(this,"setPolarAngle"),xt(this,"setAzimuthalAngle"),xt(this,"getDistance"),xt(this,"getZoomScale"),xt(this,"listenToKeyEvents"),xt(this,"stopListenToKeyEvents"),xt(this,"saveState"),xt(this,"reset"),xt(this,"update"),xt(this,"connect"),xt(this,"dispose"),xt(this,"dollyIn"),xt(this,"dollyOut"),xt(this,"getScale"),xt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=Y=>{let ae=dR(Y,2*Math.PI),fe=h.phi;fe<0&&(fe+=2*Math.PI),ae<0&&(ae+=2*Math.PI);let $=Math.abs(ae-fe);2*Math.PI-$<$&&(ae<fe?ae+=2*Math.PI:fe+=2*Math.PI),f.phi=ae-fe,r.update()},this.setAzimuthalAngle=Y=>{let ae=dR(Y,2*Math.PI),fe=h.theta;fe<0&&(fe+=2*Math.PI),ae<0&&(ae+=2*Math.PI);let $=Math.abs(ae-fe);2*Math.PI-$<$&&(ae<fe?ae+=2*Math.PI:fe+=2*Math.PI),f.theta=ae-fe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Y=>{Y.addEventListener("keydown",pe),this._domElementKeyEvents=Y},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",pe),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Y=new j,ae=new j(0,1,0),fe=new Cr().setFromUnitVectors(e.up,ae),$=fe.clone().invert(),_e=new j,Se=new Cr,Ue=2*Math.PI;return function(){const be=r.object.position;fe.setFromUnitVectors(e.up,ae),$.copy(fe).invert(),Y.copy(be).sub(r.target),Y.applyQuaternion(fe),h.setFromVector3(Y),r.autoRotate&&l===a.NONE&&q(F()),r.enableDamping?(h.theta+=f.theta*r.dampingFactor,h.phi+=f.phi*r.dampingFactor):(h.theta+=f.theta,h.phi+=f.phi);let $e=r.minAzimuthAngle,pt=r.maxAzimuthAngle;isFinite($e)&&isFinite(pt)&&($e<-Math.PI?$e+=Ue:$e>Math.PI&&($e-=Ue),pt<-Math.PI?pt+=Ue:pt>Math.PI&&(pt-=Ue),$e<=pt?h.theta=Math.max($e,Math.min(pt,h.theta)):h.theta=h.theta>($e+pt)/2?Math.max($e,h.theta):Math.min(pt,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&N||r.object.isOrthographicCamera?h.radius=ye(h.radius):h.radius=ye(h.radius*p),Y.setFromSpherical(h),Y.applyQuaternion($),be.copy(r.target).add(Y),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let Gt=!1;if(r.zoomToCursor&&N){let Ot=null;if(r.object instanceof Sn&&r.object.isPerspectiveCamera){const On=Y.length();Ot=ye(On*p);const hr=On-Ot;r.object.position.addScaledVector(P,hr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const On=new j(k.x,k.y,0);On.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Gt=!0;const hr=new j(k.x,k.y,0);hr.unproject(r.object),r.object.position.sub(hr).add(On),r.object.updateMatrixWorld(),Ot=Y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ot!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ot).add(r.object.position):(Sg.origin.copy(r.object.position),Sg.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Sg.direction))<EK?e.lookAt(r.target):(uR.setFromNormalAndCoplanarPoint(r.object.up,r.target),Sg.intersectPlane(uR,r.target))))}else r.object instanceof Ws&&r.object.isOrthographicCamera&&(Gt=p!==1,Gt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,N=!1,Gt||_e.distanceToSquared(r.object.position)>u||8*(1-Se.dot(r.object.quaternion))>u?(r.dispatchEvent(i),_e.copy(r.object.position),Se.copy(r.object.quaternion),Gt=!1,!0):!1}})(),this.connect=Y=>{r.domElement=Y,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",tt),r.domElement.addEventListener("pointerdown",vt),r.domElement.addEventListener("pointercancel",U),r.domElement.addEventListener("wheel",ve)},this.dispose=()=>{var Y,ae,fe,$,_e,Se;r.domElement&&(r.domElement.style.touchAction="auto"),(Y=r.domElement)==null||Y.removeEventListener("contextmenu",tt),(ae=r.domElement)==null||ae.removeEventListener("pointerdown",vt),(fe=r.domElement)==null||fe.removeEventListener("pointercancel",U),($=r.domElement)==null||$.removeEventListener("wheel",ve),(_e=r.domElement)==null||_e.ownerDocument.removeEventListener("pointermove",H),(Se=r.domElement)==null||Se.ownerDocument.removeEventListener("pointerup",U),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",pe)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,h=new aS,f=new aS;let p=1;const m=new j,v=new we,x=new we,_=new we,g=new we,w=new we,S=new we,E=new we,R=new we,A=new we,P=new j,k=new we;let N=!1;const C=[],O={};function F(){return 2*Math.PI/60/60*r.autoRotateSpeed}function W(){return Math.pow(.95,r.zoomSpeed)}function q(Y){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=Y:f.theta-=Y}function Z(Y){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=Y:f.phi-=Y}const K=(()=>{const Y=new j;return function(fe,$){Y.setFromMatrixColumn($,0),Y.multiplyScalar(-fe),m.add(Y)}})(),Q=(()=>{const Y=new j;return function(fe,$){r.screenSpacePanning===!0?Y.setFromMatrixColumn($,1):(Y.setFromMatrixColumn($,0),Y.crossVectors(r.object.up,Y)),Y.multiplyScalar(fe),m.add(Y)}})(),D=(()=>{const Y=new j;return function(fe,$){const _e=r.domElement;if(_e&&r.object instanceof Sn&&r.object.isPerspectiveCamera){const Se=r.object.position;Y.copy(Se).sub(r.target);let Ue=Y.length();Ue*=Math.tan(r.object.fov/2*Math.PI/180),K(2*fe*Ue/_e.clientHeight,r.object.matrix),Q(2*$*Ue/_e.clientHeight,r.object.matrix)}else _e&&r.object instanceof Ws&&r.object.isOrthographicCamera?(K(fe*(r.object.right-r.object.left)/r.object.zoom/_e.clientWidth,r.object.matrix),Q($*(r.object.top-r.object.bottom)/r.object.zoom/_e.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function V(Y){r.object instanceof Sn&&r.object.isPerspectiveCamera||r.object instanceof Ws&&r.object.isOrthographicCamera?p=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function X(Y){V(p/Y)}function J(Y){V(p*Y)}function oe(Y){if(!r.zoomToCursor||!r.domElement)return;N=!0;const ae=r.domElement.getBoundingClientRect(),fe=Y.clientX-ae.left,$=Y.clientY-ae.top,_e=ae.width,Se=ae.height;k.x=fe/_e*2-1,k.y=-($/Se)*2+1,P.set(k.x,k.y,1).unproject(r.object).sub(r.object.position).normalize()}function ye(Y){return Math.max(r.minDistance,Math.min(r.maxDistance,Y))}function ie(Y){v.set(Y.clientX,Y.clientY)}function xe(Y){oe(Y),E.set(Y.clientX,Y.clientY)}function Me(Y){g.set(Y.clientX,Y.clientY)}function Re(Y){x.set(Y.clientX,Y.clientY),_.subVectors(x,v).multiplyScalar(r.rotateSpeed);const ae=r.domElement;ae&&(q(2*Math.PI*_.x/ae.clientHeight),Z(2*Math.PI*_.y/ae.clientHeight)),v.copy(x),r.update()}function He(Y){R.set(Y.clientX,Y.clientY),A.subVectors(R,E),A.y>0?X(W()):A.y<0&&J(W()),E.copy(R),r.update()}function lt(Y){w.set(Y.clientX,Y.clientY),S.subVectors(w,g).multiplyScalar(r.panSpeed),D(S.x,S.y),g.copy(w),r.update()}function ze(Y){oe(Y),Y.deltaY<0?J(W()):Y.deltaY>0&&X(W()),r.update()}function Je(Y){let ae=!1;switch(Y.code){case r.keys.UP:D(0,r.keyPanSpeed),ae=!0;break;case r.keys.BOTTOM:D(0,-r.keyPanSpeed),ae=!0;break;case r.keys.LEFT:D(r.keyPanSpeed,0),ae=!0;break;case r.keys.RIGHT:D(-r.keyPanSpeed,0),ae=!0;break}ae&&(Y.preventDefault(),r.update())}function ft(){if(C.length==1)v.set(C[0].pageX,C[0].pageY);else{const Y=.5*(C[0].pageX+C[1].pageX),ae=.5*(C[0].pageY+C[1].pageY);v.set(Y,ae)}}function Ve(){if(C.length==1)g.set(C[0].pageX,C[0].pageY);else{const Y=.5*(C[0].pageX+C[1].pageX),ae=.5*(C[0].pageY+C[1].pageY);g.set(Y,ae)}}function B(){const Y=C[0].pageX-C[1].pageX,ae=C[0].pageY-C[1].pageY,fe=Math.sqrt(Y*Y+ae*ae);E.set(0,fe)}function Ne(){r.enableZoom&&B(),r.enablePan&&Ve()}function Ee(){r.enableZoom&&B(),r.enableRotate&&ft()}function Ie(Y){if(C.length==1)x.set(Y.pageX,Y.pageY);else{const fe=ct(Y),$=.5*(Y.pageX+fe.x),_e=.5*(Y.pageY+fe.y);x.set($,_e)}_.subVectors(x,v).multiplyScalar(r.rotateSpeed);const ae=r.domElement;ae&&(q(2*Math.PI*_.x/ae.clientHeight),Z(2*Math.PI*_.y/ae.clientHeight)),v.copy(x)}function ge(Y){if(C.length==1)w.set(Y.pageX,Y.pageY);else{const ae=ct(Y),fe=.5*(Y.pageX+ae.x),$=.5*(Y.pageY+ae.y);w.set(fe,$)}S.subVectors(w,g).multiplyScalar(r.panSpeed),D(S.x,S.y),g.copy(w)}function De(Y){const ae=ct(Y),fe=Y.pageX-ae.x,$=Y.pageY-ae.y,_e=Math.sqrt(fe*fe+$*$);R.set(0,_e),A.set(0,Math.pow(R.y/E.y,r.zoomSpeed)),X(A.y),E.copy(R)}function Ae(Y){r.enableZoom&&De(Y),r.enablePan&&ge(Y)}function qe(Y){r.enableZoom&&De(Y),r.enableRotate&&Ie(Y)}function vt(Y){var ae,fe;r.enabled!==!1&&(C.length===0&&((ae=r.domElement)==null||ae.ownerDocument.addEventListener("pointermove",H),(fe=r.domElement)==null||fe.ownerDocument.addEventListener("pointerup",U)),nt(Y),Y.pointerType==="touch"?Ze(Y):se(Y))}function H(Y){r.enabled!==!1&&(Y.pointerType==="touch"?Fe(Y):de(Y))}function U(Y){var ae,fe,$;Ce(Y),C.length===0&&((ae=r.domElement)==null||ae.releasePointerCapture(Y.pointerId),(fe=r.domElement)==null||fe.ownerDocument.removeEventListener("pointermove",H),($=r.domElement)==null||$.ownerDocument.removeEventListener("pointerup",U)),r.dispatchEvent(o),l=a.NONE}function se(Y){let ae;switch(Y.button){case 0:ae=r.mouseButtons.LEFT;break;case 1:ae=r.mouseButtons.MIDDLE;break;case 2:ae=r.mouseButtons.RIGHT;break;default:ae=-1}switch(ae){case Rl.DOLLY:if(r.enableZoom===!1)return;xe(Y),l=a.DOLLY;break;case Rl.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enablePan===!1)return;Me(Y),l=a.PAN}else{if(r.enableRotate===!1)return;ie(Y),l=a.ROTATE}break;case Rl.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enableRotate===!1)return;ie(Y),l=a.ROTATE}else{if(r.enablePan===!1)return;Me(Y),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function de(Y){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Re(Y);break;case a.DOLLY:if(r.enableZoom===!1)return;He(Y);break;case a.PAN:if(r.enablePan===!1)return;lt(Y);break}}function ve(Y){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Y.preventDefault(),r.dispatchEvent(s),ze(Y),r.dispatchEvent(o))}function pe(Y){r.enabled===!1||r.enablePan===!1||Je(Y)}function Ze(Y){switch(Ye(Y),C.length){case 1:switch(r.touches.ONE){case Pl.ROTATE:if(r.enableRotate===!1)return;ft(),l=a.TOUCH_ROTATE;break;case Pl.PAN:if(r.enablePan===!1)return;Ve(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Pl.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ne(),l=a.TOUCH_DOLLY_PAN;break;case Pl.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ee(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Fe(Y){switch(Ye(Y),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ie(Y),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;ge(Y),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ae(Y),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;qe(Y),r.update();break;default:l=a.NONE}}function tt(Y){r.enabled!==!1&&Y.preventDefault()}function nt(Y){C.push(Y)}function Ce(Y){delete O[Y.pointerId];for(let ae=0;ae<C.length;ae++)if(C[ae].pointerId==Y.pointerId){C.splice(ae,1);return}}function Ye(Y){let ae=O[Y.pointerId];ae===void 0&&(ae=new we,O[Y.pointerId]=ae),ae.set(Y.pageX,Y.pageY)}function ct(Y){const ae=Y.pointerId===C[0].pointerId?C[1]:C[0];return O[ae.pointerId]}this.dollyIn=(Y=W())=>{J(Y),r.update()},this.dollyOut=(Y=W())=>{X(Y),r.update()},this.getScale=()=>p,this.setScale=Y=>{V(Y),r.update()},this.getZoomScale=()=>W(),t!==void 0&&this.connect(t),this.update()}};const AK=L.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},h)=>{const f=mo(A=>A.invalidate),p=mo(A=>A.camera),m=mo(A=>A.gl),v=mo(A=>A.events),x=mo(A=>A.setEvents),_=mo(A=>A.set),g=mo(A=>A.get),w=mo(A=>A.performance),S=e||p,E=r||v.connected||m.domElement,R=L.useMemo(()=>new TK(S),[S]);return Ry(()=>{R.enabled&&R.update()},-1),L.useEffect(()=>(s&&R.connect(s===!0?E:s),R.connect(E),()=>void R.dispose()),[s,E,t,R,f]),L.useEffect(()=>{const A=N=>{f(),t&&w.regress(),o&&o(N)},P=N=>{a&&a(N)},k=N=>{l&&l(N)};return R.addEventListener("change",A),R.addEventListener("start",P),R.addEventListener("end",k),()=>{R.removeEventListener("start",P),R.removeEventListener("end",k),R.removeEventListener("change",A)}},[o,a,l,R,f,x]),L.useEffect(()=>{if(n){const A=g().controls;return _({controls:R}),()=>_({controls:A})}},[n,R]),L.createElement("primitive",uv({ref:h,object:R,enableDamping:i},u))}),gi={Sun:{name:"Sun",type:"G-type Main-sequence Star",diameter:"1,392,700 km",distanceFromSun:"0 km (center)",dayLength:"25 Earth days (at equator)",yearLength:"N/A",moons:0,temperature:"5,778 K (surface), 15,000,000 K (core)",atmosphere:"Hydrogen (73%), Helium (25%), heavier elements (2%)",funFact:"The Sun contains 99.86% of the mass in our solar system and could fit 1.3 million Earths inside it!",mass:"1.989  10 kg",gravity:"274 m/s (28 times Earth)",composition:"Plasma - ionized hydrogen and helium"},Mercury:{name:"Mercury",type:"Terrestrial Planet",diameter:"4,879 km",distanceFromSun:"57.9 million km",dayLength:"58.6 Earth days",yearLength:"88 Earth days",moons:0,temperature:"427C (day), -173C (night)",atmosphere:"Extremely thin - oxygen, sodium, hydrogen, helium, potassium",funFact:"Mercury has the most extreme temperature variations in the solar system, with a 600C difference between day and night!",mass:"3.301  10 kg",gravity:"3.7 m/s (38% of Earth)",composition:"Large iron core (75% of radius), thin silicate mantle"},Venus:{name:"Venus",type:"Terrestrial Planet",diameter:"12,104 km",distanceFromSun:"108.2 million km",dayLength:"243 Earth days (retrograde)",yearLength:"225 Earth days",moons:0,temperature:"462C (hottest planet)",atmosphere:"96.5% Carbon dioxide, 3.5% Nitrogen, thick sulfuric acid clouds",funFact:"Venus rotates backwards and has the densest atmosphere of any terrestrial planet, creating a runaway greenhouse effect!",mass:"4.867  10 kg",gravity:"8.87 m/s (90% of Earth)",composition:"Iron core, silicate mantle, basaltic crust"},Earth:{name:"Earth",type:"Terrestrial Planet",diameter:"12,756 km",distanceFromSun:"149.6 million km (1 AU)",dayLength:"23 hours 56 minutes",yearLength:"365.25 days",moons:1,temperature:"15C (average surface)",atmosphere:"78% Nitrogen, 21% Oxygen, 1% other gases",funFact:"Earth is the only known planet with life and liquid water on its surface. The Moon stabilizes Earth's axial tilt!",mass:"5.972  10 kg",gravity:"9.8 m/s",composition:"Iron-nickel core, silicate mantle, continental and oceanic crust"},Mars:{name:"Mars",type:"Terrestrial Planet",diameter:"6,792 km",distanceFromSun:"227.9 million km",dayLength:"24 hours 37 minutes",yearLength:"687 Earth days",moons:2,temperature:"-65C (average)",atmosphere:"95% Carbon dioxide, 3% Nitrogen, 2% Argon (very thin)",funFact:"Mars has the largest volcano in the solar system (Olympus Mons) and evidence of ancient riverbeds and polar ice caps!",mass:"6.417  10 kg",gravity:"3.71 m/s (38% of Earth)",composition:"Iron core, basaltic mantle, iron oxide surface (rust)"},Jupiter:{name:"Jupiter",type:"Gas Giant",diameter:"142,984 km",distanceFromSun:"778.5 million km",dayLength:"9 hours 56 minutes",yearLength:"11.9 Earth years",moons:95,temperature:"-110C (cloud tops)",atmosphere:"89% Hydrogen, 10% Helium, traces of methane, ammonia",funFact:'Jupiter is so massive it could contain all other planets combined and acts as a "cosmic vacuum cleaner" protecting inner planets!',mass:"1.898  10 kg",gravity:"24.79 m/s (2.5 times Earth)",composition:"Hydrogen and helium with possible rocky core"},Saturn:{name:"Saturn",type:"Gas Giant",diameter:"120,536 km",distanceFromSun:"1.43 billion km",dayLength:"10 hours 42 minutes",yearLength:"29.5 Earth years",moons:146,temperature:"-140C (cloud tops)",atmosphere:"96% Hydrogen, 3% Helium, traces of ammonia and methane",funFact:"Saturn is less dense than water and has the most spectacular ring system made of ice and rock particles!",mass:"5.683  10 kg",gravity:"10.44 m/s (91% of Earth)",composition:"Hydrogen and helium with possible rocky core"},Uranus:{name:"Uranus",type:"Ice Giant",diameter:"51,118 km",distanceFromSun:"2.87 billion km",dayLength:"17 hours 14 minutes (retrograde)",yearLength:"84 Earth years",moons:27,temperature:"-195C",atmosphere:"83% Hydrogen, 15% Helium, 2% Methane",funFact:"Uranus rotates on its side (98 tilt) likely due to an ancient collision, and has faint rings discovered in 1977!",mass:"8.681  10 kg",gravity:"8.69 m/s (87% of Earth)",composition:"Water, methane, ammonia ices with rocky core"},Neptune:{name:"Neptune",type:"Ice Giant",diameter:"49,528 km",distanceFromSun:"4.5 billion km",dayLength:"16 hours 7 minutes",yearLength:"165 Earth years",moons:16,temperature:"-200C",atmosphere:"80% Hydrogen, 19% Helium, 1% Methane",funFact:"Neptune has the fastest winds in the solar system (up to 2,100 km/h) and was discovered mathematically before being observed!",mass:"1.024  10 kg",gravity:"11.15 m/s (114% of Earth)",composition:"Water, methane, ammonia ices with rocky core"}};function ho({name:n,distance:e,size:t,color:r,speed:i,onClick:s,position:o}){var m;const a=L.useRef(null),[l,u]=L.useState(!1);new Wk;const h=()=>{const v=document.createElement("canvas");v.width=1024,v.height=1024;const x=v.getContext("2d");switch(n){case"Sun":const _=x.createRadialGradient(512,512,0,512,512,512);_.addColorStop(0,"#FFFF99"),_.addColorStop(.3,"#FFD700"),_.addColorStop(.6,"#FF8C00"),_.addColorStop(1,"#FF4500"),x.fillStyle=_,x.fillRect(0,0,1024,1024);for(let A=0;A<200;A++)x.fillStyle=`rgba(255, ${200+Math.random()*55}, 0, ${.1+Math.random()*.3})`,x.beginPath(),x.arc(Math.random()*1024,Math.random()*1024,Math.random()*20+5,0,Math.PI*2),x.fill();break;case"Mercury":x.fillStyle="#8C7853",x.fillRect(0,0,1024,1024);for(let A=0;A<100;A++){const P=Math.random()*1024,k=Math.random()*1024,N=Math.random()*30+5;x.fillStyle=`rgba(60, 50, 40, ${.3+Math.random()*.4})`,x.beginPath(),x.arc(P,k,N,0,Math.PI*2),x.fill()}break;case"Venus":const g=x.createLinearGradient(0,0,1024,1024);g.addColorStop(0,"#FFC649"),g.addColorStop(.5,"#FFB347"),g.addColorStop(1,"#FF8C69"),x.fillStyle=g,x.fillRect(0,0,1024,1024);for(let A=0;A<50;A++)x.strokeStyle=`rgba(255, 255, 200, ${.1+Math.random()*.2})`,x.lineWidth=3+Math.random()*5,x.beginPath(),x.arc(Math.random()*1024,Math.random()*1024,Math.random()*100+50,0,Math.PI),x.stroke();break;case"Earth":x.fillStyle="#4169E1",x.fillRect(0,0,1024,1024),x.fillStyle="#228B22";for(let A=0;A<20;A++)x.beginPath(),x.ellipse(Math.random()*1024,Math.random()*1024,Math.random()*150+50,Math.random()*100+30,Math.random()*Math.PI*2,0,Math.PI*2),x.fill();for(let A=0;A<40;A++)x.fillStyle=`rgba(255, 255, 255, ${.2+Math.random()*.3})`,x.beginPath(),x.arc(Math.random()*1024,Math.random()*1024,Math.random()*40+10,0,Math.PI*2),x.fill();break;case"Mars":x.fillStyle="#CD5C5C",x.fillRect(0,0,1024,1024);for(let A=0;A<30;A++)x.fillStyle=`rgba(139, 69, 19, ${.3+Math.random()*.4})`,x.beginPath(),x.ellipse(Math.random()*1024,Math.random()*1024,Math.random()*100+20,Math.random()*50+10,Math.random()*Math.PI*2,0,Math.PI*2),x.fill();x.fillStyle="rgba(255, 255, 255, 0.8)",x.beginPath(),x.arc(512,100,80,0,Math.PI*2),x.fill(),x.beginPath(),x.arc(512,924,60,0,Math.PI*2),x.fill();break;case"Jupiter":const w=x.createLinearGradient(0,0,0,1024);w.addColorStop(0,"#D2691E"),w.addColorStop(.2,"#CD853F"),w.addColorStop(.4,"#DEB887"),w.addColorStop(.6,"#F4A460"),w.addColorStop(.8,"#D2691E"),w.addColorStop(1,"#8B4513"),x.fillStyle=w,x.fillRect(0,0,1024,1024);for(let A=0;A<15;A++)x.fillStyle=`rgba(${100+Math.random()*100}, ${80+Math.random()*80}, 40, ${.1+Math.random()*.2})`,x.fillRect(0,A*70,1024,30+Math.random()*20);x.fillStyle="rgba(200, 50, 50, 0.8)",x.beginPath(),x.ellipse(700,400,120,80,0,0,Math.PI*2),x.fill();break;case"Saturn":const S=x.createLinearGradient(0,0,0,1024);S.addColorStop(0,"#FAD5A5"),S.addColorStop(.5,"#DEB887"),S.addColorStop(1,"#D2B48C"),x.fillStyle=S,x.fillRect(0,0,1024,1024);for(let A=0;A<10;A++)x.fillStyle=`rgba(200, 180, 140, ${.1+Math.random()*.1})`,x.fillRect(0,A*100,1024,50);break;case"Uranus":const E=x.createRadialGradient(512,512,0,512,512,512);E.addColorStop(0,"#87CEEB"),E.addColorStop(.5,"#4FD0E3"),E.addColorStop(1,"#4682B4"),x.fillStyle=E,x.fillRect(0,0,1024,1024);for(let A=0;A<20;A++)x.fillStyle=`rgba(255, 255, 255, ${.05+Math.random()*.1})`,x.beginPath(),x.arc(Math.random()*1024,Math.random()*1024,Math.random()*50+20,0,Math.PI*2),x.fill();break;case"Neptune":const R=x.createRadialGradient(512,512,0,512,512,512);R.addColorStop(0,"#1E90FF"),R.addColorStop(.5,"#4B70DD"),R.addColorStop(1,"#191970"),x.fillStyle=R,x.fillRect(0,0,1024,1024);for(let A=0;A<15;A++)x.fillStyle=`rgba(100, 150, 255, ${.2+Math.random()*.3})`,x.beginPath(),x.ellipse(Math.random()*1024,Math.random()*1024,Math.random()*80+30,Math.random()*40+20,Math.random()*Math.PI*2,0,Math.PI*2),x.fill();break}return new yk(v)};Ry(v=>{const x=v.clock.getElapsedTime();a.current&&n!=="Sun"&&(a.current.position.x=Math.cos(x*i)*e,a.current.position.z=Math.sin(x*i)*e),a.current&&(a.current.rotation.y+=.01)});const f=()=>{s(n)},p=L.useMemo(()=>h(),[n]);return M.jsxs("group",{children:[M.jsxs("mesh",{ref:a,onClick:f,onPointerOver:()=>u(!0),onPointerOut:()=>u(!1),scale:l?t*1.2:t,position:o,castShadow:!0,receiveShadow:!0,children:[M.jsx("sphereGeometry",{args:[1,64,64]}),M.jsx("meshPhongMaterial",{map:p,shininess:n==="Sun"?100:30,emissive:n==="Sun"?"#FFA500":"#000000",emissiveIntensity:n==="Sun"?.3:0})]}),n==="Saturn"&&M.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[M.jsx("ringGeometry",{args:[1.2,2,64]}),M.jsx("meshBasicMaterial",{color:"#D2B48C",transparent:!0,opacity:.6,side:ji})]}),n!=="Sun"&&M.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[M.jsx("ringGeometry",{args:[e-.02,e+.02,128]}),M.jsx("meshBasicMaterial",{color:"white",transparent:!0,opacity:.2})]}),l&&M.jsx(yK,{position:[0,t+1,0],children:M.jsxs("div",{className:"bg-black/90 text-white px-3 py-2 rounded-lg text-sm pointer-events-none border border-white/20 backdrop-blur-sm",children:[M.jsx("div",{className:"font-bold",children:n}),M.jsx("div",{className:"text-xs text-gray-300",children:(m=gi[n])==null?void 0:m.type})]})})]})}function CK(){const e=L.useMemo(()=>{const t=new Float32Array(3e3);for(let r=0;r<1e3;r++)t[r*3]=(Math.random()-.5)*1e3,t[r*3+1]=(Math.random()-.5)*1e3,t[r*3+2]=(Math.random()-.5)*1e3;return t},[]);return M.jsxs("points",{children:[M.jsx("bufferGeometry",{children:M.jsx("bufferAttribute",{attach:"attributes-position",count:1e3,array:e,itemSize:3})}),M.jsx("pointsMaterial",{color:"white",size:2})]})}function RK({initialPosition:n}){const e=L.useRef(null),t=L.useMemo(()=>[(Math.random()-.5)*.2,(Math.random()-.5)*.1,(Math.random()-.5)*.2],[]);return Ry(()=>{e.current&&(e.current.position.x+=t[0],e.current.position.y+=t[1],e.current.position.z+=t[2],e.current.rotation.x+=.02,e.current.rotation.y+=.01,(Math.abs(e.current.position.x)>100||Math.abs(e.current.position.z)>100)&&e.current.position.set(n[0],n[1],n[2]))}),M.jsxs("mesh",{ref:e,position:n,children:[M.jsx("dodecahedronGeometry",{args:[Math.random()*.1+.05]}),M.jsx("meshPhongMaterial",{color:"#8B4513"})]})}function PK(){const e=L.useMemo(()=>{const t=[];for(let r=0;r<200;r++){const i=r/200*Math.PI*2,s=15+Math.random()*5,o=Math.cos(i)*s,a=Math.sin(i)*s,l=(Math.random()-.5)*2;t.push(M.jsxs("mesh",{position:[o,l,a],children:[M.jsx("sphereGeometry",{args:[.1+Math.random()*.1,8,8]}),M.jsx("meshStandardMaterial",{color:"#8C7853"})]},r))}return t},[]);return M.jsx(M.Fragment,{children:e})}function IK(){var o,a,l,u,h,f,p,m,v,x,_,g;const[n,e]=L.useState(null),[t,r]=L.useState([0,0,0]),i=w=>{e(w)},s=()=>{e(null),r([0,0,0])};return M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 space-text",children:"3D Solar System Explorer"}),M.jsx("p",{className:"text-xl text-gray-200 space-text",children:"Navigate through our cosmic neighborhood in full 3D"})]}),M.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[M.jsx("div",{className:"lg:col-span-2",children:M.jsxs(ln,{className:"space-card border-white/20 h-[600px] bg-black/40",children:[M.jsxs(pn,{className:"pb-2",children:[M.jsxs(mn,{className:"text-white space-text flex items-center gap-2",children:[M.jsx(A1,{className:"h-6 w-6 text-blue-400"}),"Interactive 3D Solar System"]}),M.jsx("div",{className:"flex gap-2",children:M.jsx(Qt,{onClick:s,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10 bg-black/40",children:"Reset View"})})]}),M.jsx(gn,{className:"p-2 h-[520px]",children:M.jsxs(lK,{camera:{position:[0,20,30],fov:75},onCreated:({gl:w})=>{w.shadowMap.enabled=!0,w.shadowMap.type=Iu},children:[M.jsx("ambientLight",{intensity:.2}),M.jsx("pointLight",{position:[0,0,0],intensity:3,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),M.jsx("directionalLight",{position:[50,50,50],intensity:.5,castShadow:!0}),M.jsx(CK,{}),M.jsx(ho,{name:"Sun",distance:0,size:2,color:"#FFA500",speed:0,onClick:i}),M.jsx(ho,{name:"Mercury",distance:4,size:.3,color:"#8C7853",speed:.8,onClick:i}),M.jsx(ho,{name:"Venus",distance:6,size:.5,color:"#FFC649",speed:.6,onClick:i}),M.jsx(ho,{name:"Earth",distance:8,size:.6,color:"#6B93D6",speed:.5,onClick:i}),M.jsx(ho,{name:"Mars",distance:10,size:.4,color:"#CD5C5C",speed:.4,onClick:i}),M.jsx(ho,{name:"Jupiter",distance:20,size:1.5,color:"#D8CA9D",speed:.2,onClick:i}),M.jsx(ho,{name:"Saturn",distance:25,size:1.2,color:"#FAD5A5",speed:.15,onClick:i}),M.jsx(ho,{name:"Uranus",distance:30,size:.8,color:"#4FD0E3",speed:.1,onClick:i}),M.jsx(ho,{name:"Neptune",distance:35,size:.8,color:"#4B70DD",speed:.08,onClick:i}),M.jsx(PK,{}),Array.from({length:8},(w,S)=>M.jsx(RK,{initialPosition:[(Math.random()-.5)*80,(Math.random()-.5)*20,(Math.random()-.5)*80]},`flying-${S}`)),M.jsx(AK,{enablePan:!0,enableZoom:!0,enableRotate:!0,zoomToCursor:!0,panSpeed:2,rotateSpeed:1,zoomSpeed:.8,minDistance:2,maxDistance:500,enableDamping:!0,dampingFactor:.05,onDoubleClick:()=>{var w,S;(S=(w=document.querySelector("canvas"))==null?void 0:w.parentElement)==null||S.querySelector("canvas")}})]})})]})}),M.jsxs("div",{className:"space-y-6",children:[n?M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsxs(pn,{children:[M.jsxs(mn,{className:"text-white space-text flex items-center gap-2",children:[M.jsx(Oa,{className:"h-6 w-6 text-yellow-400"}),n]}),M.jsx(rr,{variant:"outline",className:"border-white/20 text-white w-fit bg-black/20",children:(o=gi[n])==null?void 0:o.type})]}),M.jsx(gn,{className:"space-y-3 text-white",children:M.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Diameter:"}),M.jsx("p",{className:"text-white font-medium",children:(a=gi[n])==null?void 0:a.diameter})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Distance from Sun:"}),M.jsx("p",{className:"text-white font-medium",children:(l=gi[n])==null?void 0:l.distanceFromSun})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Day Length:"}),M.jsx("p",{className:"text-white font-medium",children:(u=gi[n])==null?void 0:u.dayLength})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Year Length:"}),M.jsx("p",{className:"text-white font-medium",children:(h=gi[n])==null?void 0:h.yearLength})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Moons:"}),M.jsx("p",{className:"text-white font-medium",children:(f=gi[n])==null?void 0:f.moons})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Temperature:"}),M.jsx("p",{className:"text-white font-medium",children:(p=gi[n])==null?void 0:p.temperature})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Mass:"}),M.jsx("p",{className:"text-white font-medium",children:(m=gi[n])==null?void 0:m.mass})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Gravity:"}),M.jsx("p",{className:"text-white font-medium",children:(v=gi[n])==null?void 0:v.gravity})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Atmosphere:"}),M.jsx("p",{className:"text-white font-medium",children:(x=gi[n])==null?void 0:x.atmosphere})]}),M.jsxs("div",{className:"bg-white/5 p-3 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Composition:"}),M.jsx("p",{className:"text-white font-medium",children:(_=gi[n])==null?void 0:_.composition})]}),M.jsxs("div",{className:"bg-blue/10 p-3 rounded border border-blue-400/20",children:[M.jsx("span",{className:"text-blue-300",children:"Fun Fact:"}),M.jsx("p",{className:"text-white font-medium",children:(g=gi[n])==null?void 0:g.funFact})]})]})})]}):M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white space-text",children:"Explore the Solar System!"})}),M.jsx(gn,{children:M.jsx("p",{className:"text-gray-300 space-text",children:"Click and drag to rotate the view. Use mouse wheel to zoom. Click on any celestial body to learn detailed information about it."})})]}),M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white space-text",children:"Solar System Facts"})}),M.jsxs(gn,{className:"space-y-2",children:[M.jsx("p",{className:"text-gray-300 text-sm space-text",children:" The solar system is 4.6 billion years old"}),M.jsx("p",{className:"text-gray-300 text-sm space-text",children:" Jupiter has more mass than all other planets combined"}),M.jsx("p",{className:"text-gray-300 text-sm space-text",children:" The asteroid belt contains millions of rocky objects"}),M.jsx("p",{className:"text-gray-300 text-sm space-text",children:" Light from the Sun takes 8 minutes to reach Earth"})]})]})]})]})]})}const hR=[{id:1,question:"What is the closest planet to the Sun?",options:["Venus","Mercury","Earth","Mars"],correctAnswer:1,difficulty:"Easy",explanation:"Mercury is the closest planet to the Sun, at an average distance of about 58 million kilometers."},{id:2,question:"How many moons does Jupiter have?",options:["12","27","95","146"],correctAnswer:2,difficulty:"Medium",explanation:"Jupiter has 95 confirmed moons, including the four largest known as the Galilean moons: Io, Europa, Ganymede, and Callisto."},{id:3,question:"What is the name of the galaxy that contains our Solar System?",options:["Andromeda","Milky Way","Whirlpool","Sombrero"],correctAnswer:1,difficulty:"Easy",explanation:"Our Solar System is located in the Milky Way galaxy, which contains over 100 billion stars."},{id:4,question:"What is the temperature of the Sun's core approximately?",options:["1 millionC","5,778C","15 millionC","100,000C"],correctAnswer:2,difficulty:"Hard",explanation:"The Sun's core temperature is approximately 15 million degrees Celsius, hot enough to sustain nuclear fusion."},{id:5,question:"Which planet is known as the 'Red Planet'?",options:["Venus","Mercury","Mars","Jupiter"],correctAnswer:2,difficulty:"Easy",explanation:"Mars is called the 'Red Planet' because of iron oxide (rust) on its surface, giving it a reddish appearance."},{id:6,question:"What is the largest moon in our Solar System?",options:["Europa","Titan","Ganymede","Callisto"],correctAnswer:2,difficulty:"Medium",explanation:"Ganymede, one of Jupiter's moons, is the largest moon in our Solar System and is even larger than the planet Mercury."},{id:7,question:"How long does it take light from the Sun to reach Earth?",options:["8 minutes","1 hour","1 day","1 second"],correctAnswer:0,difficulty:"Medium",explanation:"Light from the Sun takes approximately 8 minutes and 20 seconds to travel the 150 million kilometers to Earth."},{id:8,question:"What is the name of the boundary around a black hole beyond which nothing can escape?",options:["Event Horizon","Photon Sphere","Ergosphere","Singularity"],correctAnswer:0,difficulty:"Hard",explanation:"The Event Horizon is the boundary around a black hole beyond which the gravitational pull is so strong that nothing, not even light, can escape."},{id:9,question:"Which planet has the most extreme temperature variations?",options:["Venus","Mercury","Mars","Pluto"],correctAnswer:1,difficulty:"Medium",explanation:"Mercury has the most extreme temperature variations, ranging from 427C during the day to -173C at night due to its lack of atmosphere."},{id:10,question:"What percentage of the universe is made up of dark matter?",options:["5%","15%","27%","68%"],correctAnswer:2,difficulty:"Hard",explanation:"Dark matter makes up approximately 27% of the universe, while dark energy accounts for 68%, and normal matter only 5%."},{id:11,question:"How many Earth days is one day on Venus?",options:["24 hours","59 days","243 days","365 days"],correctAnswer:2,difficulty:"Medium",explanation:"One day on Venus lasts 243 Earth days, making it longer than a Venusian year (225 Earth days)."},{id:12,question:"What is the Great Red Spot on Jupiter?",options:["A volcano","A storm system","A moon","A crater"],correctAnswer:1,difficulty:"Easy",explanation:"The Great Red Spot is a massive storm system on Jupiter that has been raging for centuries and is larger than Earth."},{id:13,question:"Which planet was discovered using mathematical predictions before being observed?",options:["Uranus","Neptune","Pluto","Saturn"],correctAnswer:1,difficulty:"Hard",explanation:"Neptune was discovered in 1846 through mathematical predictions by Urbain Le Verrier and John Couch Adams based on perturbations in Uranus's orbit."},{id:14,question:"What is the asteroid belt?",options:["A ring around Saturn","A region between Mars and Jupiter","Debris around Earth","Ice chunks beyond Neptune"],correctAnswer:1,difficulty:"Easy",explanation:"The asteroid belt is a region between Mars and Jupiter containing millions of rocky objects, including the dwarf planet Ceres."},{id:15,question:"Which moon in our solar system has active geysers?",options:["Europa","Enceladus","Titan","Io"],correctAnswer:1,difficulty:"Medium",explanation:"Enceladus, one of Saturn's moons, has active ice geysers that shoot water vapor into space from its south polar region."},{id:16,question:"What causes the seasons on Earth?",options:["Distance from the Sun","Axial tilt","Solar flares","Moon's gravity"],correctAnswer:1,difficulty:"Medium",explanation:"Earth's seasons are caused by its 23.5-degree axial tilt, which changes how directly sunlight hits different parts of Earth throughout the year."},{id:17,question:"How fast does the International Space Station orbit Earth?",options:["17,500 mph","25,000 mph","11,000 mph","30,000 mph"],correctAnswer:0,difficulty:"Hard",explanation:"The ISS orbits Earth at approximately 17,500 mph (28,000 km/h), completing one orbit every 90 minutes."},{id:18,question:"What is the Kuiper Belt?",options:["A region of comets beyond Neptune","An asteroid belt","Saturn's rings","A galaxy cluster"],correctAnswer:0,difficulty:"Hard",explanation:"The Kuiper Belt is a region beyond Neptune containing icy objects and dwarf planets like Pluto, Eris, and Makemake."},{id:19,question:"Which planet has the strongest magnetic field?",options:["Earth","Jupiter","Saturn","Uranus"],correctAnswer:1,difficulty:"Medium",explanation:"Jupiter has the strongest magnetic field in our solar system, about 20,000 times stronger than Earth's."},{id:20,question:"What type of star will our Sun become at the end of its life?",options:["Black hole","Neutron star","White dwarf","Red supergiant"],correctAnswer:2,difficulty:"Medium",explanation:"Our Sun will eventually become a white dwarf star after going through its red giant phase in about 5 billion years."},{id:21,question:"How many astronauts have walked on the Moon?",options:["6","12","8","16"],correctAnswer:1,difficulty:"Easy",explanation:"Twelve astronauts have walked on the Moon during the Apollo missions between 1969 and 1972."},{id:22,question:"What is the coldest planet in our solar system?",options:["Neptune","Uranus","Pluto","Saturn"],correctAnswer:1,difficulty:"Medium",explanation:"Uranus is the coldest planet with temperatures dropping to -224C (-371F), even colder than Neptune despite being closer to the Sun."},{id:23,question:"Which spacecraft was the first to leave our solar system?",options:["Voyager 1","Voyager 2","Pioneer 10","New Horizons"],correctAnswer:0,difficulty:"Hard",explanation:"Voyager 1 became the first human-made object to enter interstellar space in 2012, after traveling for 35 years."},{id:24,question:"What is the largest volcano in our solar system?",options:["Mount Everest","Olympus Mons","Mauna Kea","Vesuvius"],correctAnswer:1,difficulty:"Easy",explanation:"Olympus Mons on Mars is the largest volcano in our solar system, standing about 69,000 feet (21 km) high."},{id:25,question:"How long is a light-year?",options:["9.46 trillion km","1 million km","150 million km","1 billion km"],correctAnswer:0,difficulty:"Hard",explanation:"A light-year is the distance light travels in one year, approximately 9.46 trillion kilometers (5.88 trillion miles)."}];function NK(){const[n,e]=L.useState(0),[t,r]=L.useState(null),[i,s]=L.useState(!1),[o,a]=L.useState(0),[l,u]=L.useState(!1),[h,f]=L.useState("All"),[p,m]=L.useState([]),[v,x]=L.useState(!1);L.useEffect(()=>{const P=h==="All"?hR:hR.filter(k=>k.difficulty===h);m(P.sort(()=>Math.random()-.5))},[h]);const _=()=>{u(!0),e(0),a(0),r(null),s(!1),x(!1)},g=P=>{t===null&&(r(P),x(!0),P===p[n].correctAnswer&&a(o+1))},w=()=>{n+1<p.length?(e(n+1),r(null),x(!1)):s(!0)},S=()=>{u(!1),e(0),r(null),s(!1),a(0),x(!1)},E=P=>{switch(P){case"Easy":return"text-green-400 border-green-400";case"Medium":return"text-yellow-400 border-yellow-400";case"Hard":return"text-red-400 border-red-400";default:return"text-white border-white"}},R=()=>{const P=o/p.length*100;return P>=90?" Cosmic Master! Outstanding!":P>=70?" Space Explorer! Great job!":P>=50?" Lunar Learner! Keep going!":" Future Astronaut! Practice makes perfect!"};if(!l)return M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 space-text",children:"Cosmic Quiz Center"}),M.jsx("p",{className:"text-xl text-gray-200 space-text",children:"Test your knowledge of the universe!"})]}),M.jsx("div",{className:"max-w-2xl mx-auto",children:M.jsxs(ln,{className:"space-card border-white/20",children:[M.jsx(pn,{className:"text-center",children:M.jsxs(mn,{className:"text-white space-text flex items-center justify-center gap-2",children:[M.jsx(f0,{className:"h-8 w-8 text-purple-400"}),"Choose Your Challenge Level"]})}),M.jsxs(gn,{className:"space-y-6",children:[M.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["All","Easy","Medium","Hard"].map(P=>M.jsx(Qt,{onClick:()=>f(P),variant:h===P?"default":"outline",className:`${h===P?"bg-purple-500 text-white border-purple-500":"border-white/20 text-white hover:bg-white/10 bg-black/20"}`,children:P},P))}),M.jsxs("div",{className:"text-center space-y-4",children:[M.jsxs("p",{className:"text-gray-300 space-text",children:["Questions available: ",p.length]}),M.jsxs("div",{className:"flex justify-center gap-4",children:[M.jsx(rr,{variant:"outline",className:"border-green-400 text-green-400",children:"Easy: Fun basics"}),M.jsx(rr,{variant:"outline",className:"border-yellow-400 text-yellow-400",children:"Medium: Challenge yourself"}),M.jsx(rr,{variant:"outline",className:"border-red-400 text-red-400",children:"Hard: Expert level"})]})]}),M.jsxs(Qt,{onClick:_,className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-bold py-3",disabled:p.length===0,children:[M.jsx(Nv,{className:"h-5 w-5 mr-2"}),"Start Cosmic Quiz"]})]})]})})]});if(i)return M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsx("div",{className:"text-center mb-8",children:M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 space-text",children:"Quiz Complete!"})}),M.jsx("div",{className:"max-w-2xl mx-auto",children:M.jsxs(ln,{className:"space-card border-white/20",children:[M.jsxs(pn,{className:"text-center",children:[M.jsx("div",{className:"flex justify-center mb-4",children:M.jsx(rc,{className:"h-16 w-16 text-yellow-400"})}),M.jsx(mn,{className:"text-white space-text text-2xl",children:R()})]}),M.jsxs(gn,{className:"text-center space-y-6",children:[M.jsxs("div",{className:"text-4xl font-bold text-white space-text",children:[o," / ",p.length]}),M.jsxs("div",{className:"text-xl text-gray-300 space-text",children:[Math.round(o/p.length*100),"% Correct"]}),M.jsxs("div",{className:"flex justify-center gap-4",children:[M.jsx(Qt,{onClick:S,className:"bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white",children:"Try Again"}),M.jsx(Qt,{onClick:()=>{f("All"),S()},variant:"outline",className:"border-white/20 text-white hover:bg-white/10 bg-black/20",children:"Change Difficulty"})]})]})]})})]});const A=p[n];return M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 space-text",children:"Cosmic Quiz Center"}),M.jsxs("div",{className:"flex justify-center gap-4 items-center",children:[M.jsx(rr,{variant:"outline",className:`${E(A.difficulty)}`,children:A.difficulty}),M.jsxs(rr,{variant:"outline",className:"border-white/20 text-white",children:["Question ",n+1," of ",p.length]}),M.jsxs(rr,{variant:"outline",className:"border-white/20 text-white",children:["Score: ",o]})]})]}),M.jsx("div",{className:"max-w-3xl mx-auto",children:M.jsxs(ln,{className:"space-card border-white/20",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white space-text text-xl leading-relaxed",children:A.question})}),M.jsxs(gn,{className:"space-y-4",children:[M.jsx("div",{className:"grid gap-3",children:A.options.map((P,k)=>{let N="w-full p-4 text-left border-white/20 text-white hover:bg-white/10 transition-all bg-black/20";return t!==null?k===A.correctAnswer?N+=" bg-green-500/20 border-green-500 text-green-400":k===t&&k!==A.correctAnswer&&(N+=" bg-red-500/20 border-red-500 text-red-400"):N+=" hover:bg-white/20",M.jsxs(Qt,{onClick:()=>g(k),variant:"outline",className:N,disabled:t!==null,children:[M.jsxs("span",{className:"font-semibold mr-3",children:[String.fromCharCode(65+k),"."]}),P]},k)})}),v&&M.jsx(ln,{className:"bg-blue-500/10 border-blue-500/30",children:M.jsx(gn,{className:"p-4",children:M.jsxs("div",{className:"flex items-start gap-2",children:[M.jsx(Oa,{className:"h-5 w-5 text-blue-400 mt-0.5 flex-shrink-0"}),M.jsx("p",{className:"text-blue-100 space-text",children:A.explanation})]})})}),t!==null&&M.jsx("div",{className:"flex justify-center",children:M.jsx(Qt,{onClick:w,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-bold px-8",children:n+1<p.length?"Next Question":"See Results"})})]})]})})]})}const Cw=({title:n,description:e,icon:t,color:r,onStart:i,active:s})=>M.jsxs(ln,{className:`space-card border-white/20 hover:border-white/40 transition-all cursor-pointer bg-black/40 ${s?"ring-2 ring-blue-400":""}`,children:[M.jsx(pn,{children:M.jsxs(mn,{className:"text-white space-text flex items-center gap-2",children:[M.jsx("div",{className:r,children:t}),n]})}),M.jsxs(gn,{children:[M.jsx("p",{className:"text-gray-300 space-text mb-4",children:e}),M.jsx(Qt,{onClick:i,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",disabled:s,children:s?"Running...":"Start Simulation"})]})]});function LK(){const[n,e]=L.useState(null),[t,r]=L.useState(!0),[i,s]=L.useState({altitude:0,velocity:0,fuel:100,thrust:0,stage:1,acceleration:0,maxAltitude:0}),[o,a]=L.useState([]),l=L.useRef(null),u=L.useRef(),h=L.useRef(0),f=9.81,p=.5,m=2,v=L.useCallback(C=>{s(O=>{const F={...O};let q=-(f*(1-O.altitude/1e5));if(O.fuel>0&&O.thrust>0){const Z=O.thrust*m;q+=Z,F.fuel=Math.max(0,O.fuel-O.thrust*p*C)}return F.acceleration=q,F.velocity=O.velocity+q*C,F.altitude=Math.max(0,O.altitude+O.velocity*C),F.maxAltitude=Math.max(O.maxAltitude,F.altitude),F.altitude<=0&&O.velocity<-10&&(F.velocity=0,F.altitude=0),F})},[]),x=L.useCallback(C=>{a(O=>O.map(F=>{const W={...F};let q=0,Z=0;O.forEach(Q=>{if(Q.id!==F.id){const D=Q.x-F.x,V=Q.y-F.y,X=D*D+V*V,J=Math.sqrt(X);if(J>5){const oe=F.mass*Q.mass*100/X;q+=oe*D/J,Z+=oe*V/J}}}),W.vx+=q/F.mass*C,W.vy+=Z/F.mass*C,W.x+=W.vx*C*60,W.y+=W.vy*C*60,W.trail=[...F.trail.slice(-20),{x:W.x,y:W.y}];const K=l.current;return K&&((W.x<10||W.x>K.width-10)&&(W.vx*=-.8),(W.y<10||W.y>K.height-10)&&(W.vy*=-.8),W.x=Math.max(10,Math.min(K.width-10,W.x)),W.y=Math.max(10,Math.min(K.height-10,W.y))),W}))},[]),_=L.useCallback(C=>{const O=l.current;if(!O)return;const F=O.getContext("2d");if(!F)return;O.width=O.offsetWidth,O.height=O.offsetHeight;const W=h.current?(C-h.current)/1e3:0;h.current=C,t&&W>0&&v(W),F.fillStyle="#000011",F.fillRect(0,0,O.width,O.height);for(let oe=0;oe<150;oe++){const ye=oe*37%O.width,ie=oe*73%O.height;F.fillStyle=`rgba(255, 255, 255, ${.3+Math.random()*.7})`,F.fillRect(ye,ie,1,1)}const q=50,Z=O.height-q;F.beginPath(),F.arc(O.width/2,Z,q,0,Math.PI*2);const K=F.createRadialGradient(O.width/2,Z,0,O.width/2,Z,q);K.addColorStop(0,"#4B70DD"),K.addColorStop(.7,"#2E5BDA"),K.addColorStop(1,"#1E4BA8"),F.fillStyle=K,F.fill(),F.beginPath(),F.arc(O.width/2,Z,q+10,0,Math.PI*2),F.fillStyle="rgba(135, 206, 250, 0.3)",F.fill();const Q=O.width/2,D=O.height-q-200,V=Z-q-Math.min(i.altitude/100,D),X=8,J=24;if(F.fillStyle="#FF6B6B",F.fillRect(Q-X/2,V-J,X,J),F.beginPath(),F.moveTo(Q-X/2,V-J),F.lineTo(Q,V-J-8),F.lineTo(Q+X/2,V-J),F.fillStyle="#FF4444",F.fill(),i.thrust>0&&i.fuel>0){const oe=15+i.thrust*2;F.beginPath(),F.moveTo(Q-X/2+1,V),F.lineTo(Q+X/2-1,V),F.lineTo(Q,V+oe),F.fillStyle="#FFA500",F.fill(),F.beginPath(),F.moveTo(Q-X/4,V),F.lineTo(Q+X/4,V),F.lineTo(Q,V+oe*.7),F.fillStyle="#FFFF00",F.fill()}F.fillStyle="rgba(255, 255, 255, 0.8)",F.font="14px monospace",F.fillText(`Alt: ${Math.round(i.altitude)}m`,10,30),F.fillText(`Vel: ${Math.round(i.velocity)}m/s`,10,50),F.fillText(`Max: ${Math.round(i.maxAltitude)}m`,10,70),t&&(u.current=requestAnimationFrame(_))},[i,t,v]),g=L.useCallback(C=>{const O=l.current;if(!O)return;const F=O.getContext("2d");if(!F)return;O.width=O.offsetWidth,O.height=O.offsetHeight;const W=h.current?(C-h.current)/1e3:0;h.current=C,t&&W>0&&x(W),F.fillStyle="#000011",F.fillRect(0,0,O.width,O.height);for(let q=0;q<100;q++){const Z=q*37%O.width,K=q*73%O.height;F.fillStyle="rgba(255, 255, 255, 0.6)",F.fillRect(Z,K,1,1)}o.forEach(q=>{if(q.trail.length>1){F.strokeStyle="rgba(255, 107, 107, 0.5)",F.lineWidth=2,F.beginPath(),F.moveTo(q.trail[0].x,q.trail[0].y);for(let Q=1;Q<q.trail.length;Q++)F.lineTo(q.trail[Q].x,q.trail[Q].y);F.stroke()}const Z=Math.sqrt(q.mass)*2;F.beginPath(),F.arc(q.x,q.y,Z,0,Math.PI*2);const K=F.createRadialGradient(q.x,q.y,0,q.x,q.y,Z);K.addColorStop(0,"#FF6B6B"),K.addColorStop(1,"#FF4444"),F.fillStyle=K,F.fill(),F.strokeStyle="rgba(255, 255, 255, 0.7)",F.lineWidth=1,F.beginPath(),F.moveTo(q.x,q.y),F.lineTo(q.x+q.vx*10,q.y+q.vy*10),F.stroke()}),t&&(u.current=requestAnimationFrame(g))},[o,t,x]);L.useEffect(()=>(n==="rocket"?u.current=requestAnimationFrame(_):n==="gravity"&&(u.current=requestAnimationFrame(g)),()=>{u.current&&cancelAnimationFrame(u.current)}),[n,_,g]);const w=()=>{e("rocket"),r(!0),s({altitude:0,velocity:0,fuel:100,thrust:0,stage:1,acceleration:0,maxAltitude:0}),h.current=0},S=()=>{e("gravity"),r(!0),a([{x:200,y:200,vx:.5,vy:0,mass:10,id:1,trail:[]},{x:400,y:200,vx:-.5,vy:0,mass:10,id:2,trail:[]},{x:300,y:300,vx:0,vy:.5,mass:15,id:3,trail:[]}]),h.current=0},E=()=>{r(!t)},R=()=>{e(null),r(!1),u.current&&cancelAnimationFrame(u.current)},A=()=>{i.fuel>0&&s(C=>({...C,thrust:Math.min(10,C.thrust+1)}))},P=()=>{s(C=>({...C,thrust:Math.max(0,C.thrust-1)}))},k=()=>{const C=l.current;if(!C)return;const O={x:100+Math.random()*(C.width-200),y:100+Math.random()*(C.height-200),vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,mass:5+Math.random()*15,id:Date.now(),trail:[]};a(F=>[...F,O])},N=()=>{a([])};return M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 space-text",children:"Space Simulations"}),M.jsx("p",{className:"text-xl text-gray-200 space-text",children:"Experience realistic space physics and scenarios"})]}),n?M.jsx("div",{className:"max-w-6xl mx-auto",children:M.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[M.jsx("div",{className:"lg:col-span-2",children:M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsx(pn,{children:M.jsxs(mn,{className:"text-white space-text flex items-center justify-between",children:[M.jsxs("span",{className:"flex items-center gap-2",children:[M.jsx(rz,{className:"h-6 w-6 text-blue-400"}),n==="rocket"?"Rocket Launch Simulator":"Gravity Physics Simulator"]}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx(Qt,{onClick:E,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10 bg-black/40",children:t?M.jsx(Z4,{className:"h-4 w-4"}):M.jsx(Q4,{className:"h-4 w-4"})}),M.jsx(Qt,{onClick:R,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10 bg-black/40",children:M.jsx(ez,{className:"h-4 w-4"})})]})]})}),M.jsx(gn,{className:"p-2",children:M.jsx("canvas",{ref:l,className:"w-full rounded border border-white/20 bg-black",style:{height:"500px"}})})]})}),M.jsxs("div",{className:"space-y-6",children:[n==="rocket"&&M.jsxs(M.Fragment,{children:[M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white space-text",children:"Rocket Status"})}),M.jsxs(gn,{className:"space-y-3",children:[M.jsxs("div",{className:"flex justify-between text-sm bg-white/5 p-2 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Altitude:"}),M.jsxs("span",{className:"text-white font-mono",children:[Math.round(i.altitude),"m"]})]}),M.jsxs("div",{className:"flex justify-between text-sm bg-white/5 p-2 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Velocity:"}),M.jsxs("span",{className:"text-white font-mono",children:[Math.round(i.velocity),"m/s"]})]}),M.jsxs("div",{className:"flex justify-between text-sm bg-white/5 p-2 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Fuel:"}),M.jsxs("span",{className:"text-white font-mono",children:[Math.round(i.fuel),"%"]})]}),M.jsxs("div",{className:"flex justify-between text-sm bg-white/5 p-2 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Thrust:"}),M.jsxs("span",{className:"text-white font-mono",children:[i.thrust,"/10"]})]}),M.jsxs("div",{className:"flex justify-between text-sm bg-white/5 p-2 rounded",children:[M.jsx("span",{className:"text-gray-300",children:"Max Alt:"}),M.jsxs("span",{className:"text-white font-mono",children:[Math.round(i.maxAltitude),"m"]})]})]})]}),M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white space-text",children:"Thrust Controls"})}),M.jsxs(gn,{className:"space-y-3",children:[M.jsx(Qt,{onClick:A,className:"w-full bg-green-500 hover:bg-green-600",disabled:i.fuel<=0,children:"Increase Thrust (+)"}),M.jsx(Qt,{onClick:P,className:"w-full bg-red-500 hover:bg-red-600",disabled:i.thrust<=0,children:"Decrease Thrust (-)"})]})]})]}),n==="gravity"&&M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white space-text",children:"Gravity Controls"})}),M.jsxs(gn,{className:"space-y-3",children:[M.jsx(Qt,{onClick:k,className:"w-full bg-purple-500 hover:bg-purple-600",children:"Add Object"}),M.jsx(Qt,{onClick:N,className:"w-full bg-red-500 hover:bg-red-600",disabled:o.length===0,children:"Clear All"}),M.jsxs("div",{className:"text-sm space-y-1 bg-white/5 p-3 rounded",children:[M.jsxs("p",{className:"text-gray-300",children:["Objects: ",M.jsx("span",{className:"text-white",children:o.length})]}),M.jsx("p",{className:"text-gray-300 text-xs",children:"White lines show velocity vectors"})]})]})]}),M.jsxs(ln,{className:"space-card border-white/20 bg-black/40",children:[M.jsx(pn,{children:M.jsx(mn,{className:"text-white space-text",children:"Physics Info"})}),M.jsx(gn,{children:M.jsx("p",{className:"text-gray-300 text-sm space-text",children:n==="rocket"?"This simulation uses real physics equations including thrust-to-weight ratio, fuel consumption, and decreasing gravity with altitude.":"Objects attract each other using Newton's law of universal gravitation: F = G(mm)/r. Watch orbital mechanics in action!"})})]})]})]})}):M.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[M.jsx(Cw,{title:"Rocket Launch",description:"Experience a realistic rocket launch with accurate physics, fuel management, and atmospheric effects.",icon:M.jsx(Da,{className:"h-6 w-6"}),color:"text-red-400",onStart:w,active:!1}),M.jsx(Cw,{title:"Gravity Physics",description:"Simulate gravitational interactions between multiple objects with real physics equations.",icon:M.jsx(Nv,{className:"h-6 w-6"}),color:"text-blue-400",onStart:S,active:!1}),M.jsx(Cw,{title:"Orbital Mechanics",description:"Coming soon: Learn about orbital mechanics and satellite trajectories with interactive physics.",icon:M.jsx(rc,{className:"h-6 w-6"}),color:"text-green-400",onStart:()=>{},active:!1})]})]})}const aa=()=>{var l;const[n,e]=L.useState("home"),t=Wj(),r=Vv(),{user:i,loading:s,signOut:o}=B3();if(L.useEffect(()=>{!s&&!i&&t("/auth")},[s,i,t]),s)return M.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:M.jsxs("div",{className:"text-center",children:[M.jsx(Oa,{className:"h-16 w-16 text-yellow-400 animate-spin mx-auto mb-4"}),M.jsx("p",{className:"text-white text-lg",children:"Loading Mission Cosmos..."})]})});if(!i)return null;L.useEffect(()=>{switch(r.pathname){case"/games":e("games");break;case"/facts":e("facts");break;case"/journal":e("journal");break;case"/contact":e("contact");break;case"/solar-system":e("solar-system");break;case"/quiz":e("quiz");break;case"/simulations":e("simulations");break;default:e("home")}},[r.pathname]);const a=u=>{e(u);const h=u==="home"?"/":`/${u}`;t(h)};return M.jsxs("div",{className:"min-h-screen relative",children:[M.jsxs("div",{className:"space-background",children:[M.jsx("div",{className:"stars"}),M.jsxs("div",{className:"shooting-stars",children:[M.jsx("div",{className:"shooting-star"}),M.jsx("div",{className:"shooting-star"}),M.jsx("div",{className:"shooting-star"})]})]}),M.jsx("nav",{className:"fixed top-0 w-full z-50 glass-effect",children:M.jsx("div",{className:"container mx-auto px-4 py-4",children:M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center space-x-2",children:[M.jsx("img",{src:"/lovable-uploads/2a801fa8-7949-45f9-abc7-79d5632d8c5f.png",alt:"Mission Cosmos Logo",className:"h-8 w-8"}),M.jsx("h1",{className:"text-2xl font-bold text-white space-text",children:"Mission Cosmos"})]}),M.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[[{key:"home",label:"Home"},{key:"games",label:"Games"},{key:"solar-system",label:"Solar System"},{key:"quiz",label:"Quiz"},{key:"simulations",label:"Simulations"},{key:"facts",label:"Cosmic Facts"},{key:"journal",label:"Journal"},{key:"contact",label:"Contact"}].map(({key:u,label:h})=>M.jsx("button",{onClick:()=>a(u),className:`text-sm font-medium transition-colors space-text ${n===u?"text-yellow-400":"text-gray-100 hover:text-yellow-200"}`,children:h},u)),M.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[M.jsx(hN,{className:"h-4 w-4 text-white"}),M.jsx("span",{className:"text-white text-sm",children:(l=i==null?void 0:i.email)==null?void 0:l.split("@")[0]}),M.jsx(Qt,{onClick:o,variant:"ghost",size:"sm",className:"text-white hover:text-red-400",children:M.jsx(q4,{className:"h-4 w-4"})})]})]})]})})}),n==="home"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsx("div",{className:"container mx-auto px-4",children:M.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[M.jsx("div",{className:"flex justify-center mb-6",children:M.jsxs("div",{className:"relative",children:[M.jsx(Oa,{className:"h-16 w-16 text-yellow-400 animate-pulse"}),M.jsx("div",{className:"absolute inset-0 h-16 w-16 bg-yellow-400/20 rounded-full animate-ping"})]})}),M.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight space-text",children:["Mission ",M.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-purple-400",children:"Cosmos"})]}),M.jsx("p",{className:"text-xl md:text-2xl text-gray-100 mb-4 leading-relaxed space-text",children:"Making space accessible and exciting for all."}),M.jsx("p",{className:"text-lg md:text-xl text-yellow-400 mb-6 font-semibold space-text",children:"Explore. Play. Dream Big."}),M.jsx("p",{className:"text-lg text-gray-200 mb-12 max-w-2xl mx-auto space-text",children:"Mission Cosmos is an interactive digital space lab for students and dreamers to discover the wonders of the universe through games, stories, and cosmic creativity."}),M.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mt-16",children:[{icon:rc,title:"Red-Planet Rover",desc:"Navigate Mars terrain and complete missions",color:"text-red-400"},{icon:A1,title:"Solar System",desc:"Explore planets and stars in 3D",color:"text-blue-400"},{icon:f0,title:"Quiz Center",desc:"Test your cosmic knowledge",color:"text-green-400"},{icon:Da,title:"Simulations",desc:"Experience realistic space scenarios",color:"text-orange-400"},{icon:Nv,title:"Astro Run",desc:"Race through space adventures",color:"text-purple-400"},{icon:T1,title:"Cosmic Facts",desc:"Discover amazing space knowledge",color:"text-pink-400"},{icon:C1,title:"Cosmic Journal",desc:"Reflect and imagine the universe",color:"text-indigo-400"}].map((u,h)=>M.jsx(ln,{className:"space-card hover:bg-white/10 transition-all hover:scale-105 border-white/20",children:M.jsxs(pn,{className:"text-center",children:[M.jsx(u.icon,{className:`h-12 w-12 ${u.color} mx-auto mb-2`}),M.jsx(mn,{className:"text-white space-text",children:u.title}),M.jsx(ko,{className:"text-gray-300 space-text",children:u.desc})]})},h))}),M.jsxs("div",{className:"mt-20 mb-12",children:[M.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-8 space-text",children:"About Mission Cosmos"}),M.jsx("p",{className:"text-lg text-gray-200 leading-relaxed max-w-3xl mx-auto space-text",children:"We believe that astronomy is for everyoneand our mission is to make learning about space immersive, inclusive, and fun. From journaling your dreams of the stars to playing our space-themed mini-games, there's something here for every explorer. Come embark with us on a cosmic journey with Mission Cosmos and discover the wonders of the universe through our interactive experiences."})]}),M.jsx("div",{className:"mt-12",children:M.jsx(Qt,{onClick:()=>a("games"),className:"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-bold text-lg px-8 py-3 rounded-full transform hover:scale-105 transition-all",children:"Start Your Mission"})})]})})}),n==="games"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsxs("div",{className:"container mx-auto px-4",children:[M.jsxs("div",{className:"text-center mb-12",children:[M.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 space-text",children:"Space Games"}),M.jsx("p",{className:"text-xl text-gray-200 space-text",children:"Interactive adventures that make learning fun"})]}),M.jsxs(aL,{defaultValue:"rover",className:"max-w-6xl mx-auto",children:[M.jsxs(Ob,{className:"grid w-full grid-cols-2 glass-effect",children:[M.jsx(gf,{value:"rover",className:"data-[state=active]:bg-red-500/20 data-[state=active]:text-red-400 text-white",children:"Red-Planet Rover"}),M.jsx(gf,{value:"astro",className:"data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-400 text-white",children:"Astro Run"})]}),M.jsx(vf,{value:"rover",className:"mt-8",children:M.jsx(JV,{})}),M.jsx(vf,{value:"astro",className:"mt-8",children:M.jsx(ZV,{})})]})]})}),n==="solar-system"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsx(IK,{})}),n==="quiz"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsx(NK,{})}),n==="simulations"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsx(LK,{})}),n==="facts"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsx(QV,{})}),n==="journal"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsx(e8,{})}),n==="contact"&&M.jsx("div",{className:"pt-20 pb-16",children:M.jsx(r8,{})}),M.jsx("div",{className:"fixed bottom-0 left-0 right-0 glass-effect md:hidden",children:M.jsx("div",{className:"flex justify-around py-2 overflow-x-auto",children:[{key:"home",icon:Da,label:"Home"},{key:"games",icon:Ug,label:"Games"},{key:"solar-system",icon:A1,label:"Solar"},{key:"quiz",icon:f0,label:"Quiz"},{key:"simulations",icon:rc,label:"Sims"},{key:"facts",icon:T1,label:"Facts"},{key:"journal",icon:C1,label:"Journal"},{key:"contact",icon:p0,label:"Contact"}].map(({key:u,icon:h,label:f})=>M.jsxs("button",{onClick:()=>a(u),className:`flex flex-col items-center p-2 min-w-0 ${n===u?"text-yellow-400":"text-gray-300"}`,children:[M.jsx(h,{className:"h-5 w-5"}),M.jsx("span",{className:"text-xs mt-1 truncate",children:f})]},u))})})]})},kK=()=>{const n=Vv();return L.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),M.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:M.jsxs("div",{className:"text-center",children:[M.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),M.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),M.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function DK(){const[n,e]=L.useState(!1),[t,r]=L.useState(""),[i,s]=L.useState(""),[o,a]=L.useState(""),{toast:l}=ub(),u=async p=>{if(p.preventDefault(),!(!t||!i||!o)){e(!0);try{const m=`${window.location.origin}/`,{error:v}=await Ua.auth.signUp({email:t,password:i,options:{emailRedirectTo:m,data:{full_name:o}}});if(v)throw v;l({title:"Welcome to Mission Cosmos! ",description:"Please check your email to verify your account."})}catch(m){l({title:"Sign up failed",description:m instanceof Error?m.message:"An error occurred",variant:"destructive"})}finally{e(!1)}}},h=async p=>{if(p.preventDefault(),!(!t||!i)){e(!0);try{const{data:m,error:v}=await Ua.auth.signInWithPassword({email:t,password:i});if(v)throw v;m.user&&(window.location.href="/")}catch(m){l({title:"Sign in failed",description:m instanceof Error?m.message:"Invalid email or password",variant:"destructive"})}finally{e(!1)}}},f=async()=>{e(!0);try{const{error:p}=await Ua.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});if(p)throw p}catch(p){l({title:"Google sign in failed",description:p instanceof Error?p.message:"An error occurred",variant:"destructive"}),e(!1)}};return M.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:M.jsxs("div",{className:"w-full max-w-md",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsxs("div",{className:"flex justify-center items-center gap-2 mb-4",children:[M.jsx(Da,{className:"h-8 w-8 text-blue-400"}),M.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mission Cosmos"})]}),M.jsx("p",{className:"text-gray-400",children:"Join the cosmic exploration community"})]}),M.jsxs(ln,{className:"bg-slate-800/50 border-slate-600/50",children:[M.jsxs(pn,{children:[M.jsxs(mn,{className:"text-white text-center flex items-center justify-center gap-2",children:[M.jsx(Oa,{className:"h-5 w-5 text-yellow-400"}),"Welcome Aboard"]}),M.jsx(ko,{className:"text-center text-gray-400",children:"Sign in to save your cosmic journey"})]}),M.jsxs(gn,{children:[M.jsxs(aL,{defaultValue:"signin",className:"space-y-4",children:[M.jsxs(Ob,{className:"grid w-full grid-cols-2 bg-slate-700",children:[M.jsx(gf,{value:"signin",className:"text-white",children:"Sign In"}),M.jsx(gf,{value:"signup",className:"text-white",children:"Sign Up"})]}),M.jsx(vf,{value:"signin",children:M.jsxs("form",{onSubmit:h,className:"space-y-4",children:[M.jsxs("div",{className:"space-y-2",children:[M.jsx(_o,{htmlFor:"signin-email",className:"text-white",children:"Email"}),M.jsxs("div",{className:"relative",children:[M.jsx(p0,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),M.jsx(ga,{id:"signin-email",type:"email",value:t,onChange:p=>r(p.target.value),placeholder:"your@email.com",className:"pl-10 bg-slate-700/50 border-slate-600 text-white",required:!0})]})]}),M.jsxs("div",{className:"space-y-2",children:[M.jsx(_o,{htmlFor:"signin-password",className:"text-white",children:"Password"}),M.jsxs("div",{className:"relative",children:[M.jsx(wA,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),M.jsx(ga,{id:"signin-password",type:"password",value:i,onChange:p=>s(p.target.value),placeholder:"Your password",className:"pl-10 bg-slate-700/50 border-slate-600 text-white",required:!0})]})]}),M.jsx(Qt,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",disabled:n,children:n?"Signing In...":"Sign In"})]})}),M.jsx(vf,{value:"signup",children:M.jsxs("form",{onSubmit:u,className:"space-y-4",children:[M.jsxs("div",{className:"space-y-2",children:[M.jsx(_o,{htmlFor:"signup-name",className:"text-white",children:"Full Name"}),M.jsxs("div",{className:"relative",children:[M.jsx(hN,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),M.jsx(ga,{id:"signup-name",type:"text",value:o,onChange:p=>a(p.target.value),placeholder:"Your full name",className:"pl-10 bg-slate-700/50 border-slate-600 text-white",required:!0})]})]}),M.jsxs("div",{className:"space-y-2",children:[M.jsx(_o,{htmlFor:"signup-email",className:"text-white",children:"Email"}),M.jsxs("div",{className:"relative",children:[M.jsx(p0,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),M.jsx(ga,{id:"signup-email",type:"email",value:t,onChange:p=>r(p.target.value),placeholder:"your@email.com",className:"pl-10 bg-slate-700/50 border-slate-600 text-white",required:!0})]})]}),M.jsxs("div",{className:"space-y-2",children:[M.jsx(_o,{htmlFor:"signup-password",className:"text-white",children:"Password"}),M.jsxs("div",{className:"relative",children:[M.jsx(wA,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),M.jsx(ga,{id:"signup-password",type:"password",value:i,onChange:p=>s(p.target.value),placeholder:"Create a password",className:"pl-10 bg-slate-700/50 border-slate-600 text-white",required:!0,minLength:6})]})]}),M.jsx(Qt,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",disabled:n,children:n?"Creating Account...":"Create Account"})]})})]}),M.jsxs("div",{className:"mt-6",children:[M.jsxs("div",{className:"relative",children:[M.jsx("div",{className:"absolute inset-0 flex items-center",children:M.jsx("span",{className:"w-full border-t border-slate-600"})}),M.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:M.jsx("span",{className:"bg-slate-800 px-2 text-gray-400",children:"Or continue with"})})]}),M.jsxs(Qt,{onClick:f,variant:"outline",className:"w-full mt-4 border-slate-600 text-white hover:bg-slate-700",disabled:n,children:[M.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[M.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),M.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),M.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),M.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]})]})]}),M.jsx("div",{className:"text-center mt-6",children:M.jsx("p",{className:"text-xs text-gray-400",children:"By joining Mission Cosmos, you agree to explore the universe responsibly"})})]})})}const OK=new pj,UK=()=>M.jsx(gj,{client:OK,children:M.jsx(MV,{children:M.jsxs(WB,{children:[M.jsx(jz,{}),M.jsx(g5,{}),M.jsx(cH,{children:M.jsxs(oH,{children:[M.jsx(is,{path:"/",element:M.jsx(aa,{})}),M.jsx(is,{path:"/games",element:M.jsx(aa,{})}),M.jsx(is,{path:"/solar-system",element:M.jsx(aa,{})}),M.jsx(is,{path:"/quiz",element:M.jsx(aa,{})}),M.jsx(is,{path:"/simulations",element:M.jsx(aa,{})}),M.jsx(is,{path:"/facts",element:M.jsx(aa,{})}),M.jsx(is,{path:"/journal",element:M.jsx(aa,{})}),M.jsx(is,{path:"/contact",element:M.jsx(aa,{})}),M.jsx(is,{path:"/auth",element:M.jsx(DK,{})}),M.jsx(is,{path:"*",element:M.jsx(kK,{})})]})})]})})});cb(document.getElementById("root")).render(M.jsx(UK,{}));
